"use strict";

// Copyright 2021, University of Colorado Boulder

/**
 * Provides the timestamp of any git target (branch/SHA)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

var execute = require('./execute');
var assert = require('assert');

/**
 * Provides the timestamp of any git target (branch/SHA)
 * @public
 *
 * @param {string} repo - The repository name
 * @param {string} target - Branch/SHA
 * @returns {Promise.<number>} - Resolves to the timestamp
 */
module.exports = function (repo, target) {
  assert(typeof repo === 'string');
  assert(typeof target === 'string');
  return execute('git', ['show', '-s', '--format=%cd', '--date=iso', target], "../".concat(repo)).then(function (stdout) {
    return Promise.resolve(new Date(stdout.trim()).getTime());
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjdXRlIiwicmVxdWlyZSIsImFzc2VydCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXBvIiwidGFyZ2V0IiwiY29uY2F0IiwidGhlbiIsInN0ZG91dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiRGF0ZSIsInRyaW0iLCJnZXRUaW1lIl0sInNvdXJjZXMiOlsiZ2l0VGltZXN0YW1wLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQcm92aWRlcyB0aGUgdGltZXN0YW1wIG9mIGFueSBnaXQgdGFyZ2V0IChicmFuY2gvU0hBKVxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuY29uc3QgZXhlY3V0ZSA9IHJlcXVpcmUoICcuL2V4ZWN1dGUnICk7XHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoICdhc3NlcnQnICk7XHJcblxyXG4vKipcclxuICogUHJvdmlkZXMgdGhlIHRpbWVzdGFtcCBvZiBhbnkgZ2l0IHRhcmdldCAoYnJhbmNoL1NIQSlcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVwbyAtIFRoZSByZXBvc2l0b3J5IG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldCAtIEJyYW5jaC9TSEFcclxuICogQHJldHVybnMge1Byb21pc2UuPG51bWJlcj59IC0gUmVzb2x2ZXMgdG8gdGhlIHRpbWVzdGFtcFxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiggcmVwbywgdGFyZ2V0ICkge1xyXG4gIGFzc2VydCggdHlwZW9mIHJlcG8gPT09ICdzdHJpbmcnICk7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyApO1xyXG5cclxuICByZXR1cm4gZXhlY3V0ZSggJ2dpdCcsIFsgJ3Nob3cnLCAnLXMnLCAnLS1mb3JtYXQ9JWNkJywgJy0tZGF0ZT1pc28nLCB0YXJnZXQgXSwgYC4uLyR7cmVwb31gICkudGhlbiggc3Rkb3V0ID0+IHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIG5ldyBEYXRlKCBzdGRvdXQudHJpbSgpICkuZ2V0VGltZSgpICk7XHJcbiAgfSApO1xyXG59OyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFFLFdBQVksQ0FBQztBQUN0QyxJQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBRSxRQUFTLENBQUM7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUUsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBVUMsSUFBSSxFQUFFQyxNQUFNLEVBQUc7RUFDeENKLE1BQU0sQ0FBRSxPQUFPRyxJQUFJLEtBQUssUUFBUyxDQUFDO0VBQ2xDSCxNQUFNLENBQUUsT0FBT0ksTUFBTSxLQUFLLFFBQVMsQ0FBQztFQUVwQyxPQUFPTixPQUFPLENBQUUsS0FBSyxFQUFFLENBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFTSxNQUFNLENBQUUsUUFBQUMsTUFBQSxDQUFRRixJQUFJLENBQUcsQ0FBQyxDQUFDRyxJQUFJLENBQUUsVUFBQUMsTUFBTSxFQUFJO0lBQzVHLE9BQU9DLE9BQU8sQ0FBQ0MsT0FBTyxDQUFFLElBQUlDLElBQUksQ0FBRUgsTUFBTSxDQUFDSSxJQUFJLENBQUMsQ0FBRSxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFFLENBQUM7RUFDL0QsQ0FBRSxDQUFDO0FBQ0wsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==