// Copyright 2013-2024, University of Colorado Boulder

/**
 * AquaRadioButton is a radio button whose look is similar to macOS' Aqua theme. The button is circular and
 * contains a dot when selected.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Emitter from '../../axon/js/Emitter.js';
import InstanceRegistry from '../../phet-core/js/documentation/InstanceRegistry.js';
import optionize from '../../phet-core/js/optionize.js';
import { Circle, FireListener, isWidthSizable, LayoutConstraint, Node, Rectangle, SceneryConstants, Voicing, WidthSizable } from '../../scenery/js/imports.js';
import multiSelectionSoundPlayerFactory from '../../tambo/js/multiSelectionSoundPlayerFactory.js';
import Tandem from '../../tandem/js/Tandem.js';
import sun from './sun.js';
export default class AquaRadioButton extends WidthSizable(Voicing(Node)) {
  // the value associated with this radio button

  static DEFAULT_RADIUS = 7;
  onInputEmitter = new Emitter();

  // Handles layout of the content, rectangles and mouse/touch areas

  // We need to record if the mouse/touch areas are customized, so that we can avoid overwriting them.
  // public for use by AquaRadioButtonConstraint only!
  _isMouseAreaCustomized = false;
  _isTouchAreaCustomized = false;
  _isSettingAreas = false;

  /**
   * @param property
   * @param value - the value that corresponds to this button, same type as property
   * @param labelNode - Node that will be vertically centered to the right of the button
   * @param providedOptions
   */
  constructor(property, value, labelNode, providedOptions) {
    assert && assert(property.valueComparisonStrategy === 'reference', 'ToggleSwitch depends on "===" equality for value comparison');
    const options = optionize()({
      // SelfOptions
      centerColor: 'black',
      radius: AquaRadioButton.DEFAULT_RADIUS,
      selectedColor: 'rgb( 143, 197, 250 )',
      deselectedColor: 'white',
      xSpacing: 8,
      stroke: 'black',
      soundPlayer: multiSelectionSoundPlayerFactory.getSelectionSoundPlayer(0),
      a11yNameAttribute: null,
      touchAreaXDilation: 0,
      touchAreaYDilation: 0,
      mouseAreaXDilation: 0,
      mouseAreaYDilation: 0,
      // NodeOptions
      cursor: 'pointer',
      // {number} - opt into Node's disabled opacity when enabled:false
      disabledOpacity: SceneryConstants.DISABLED_OPACITY,
      // phet-io
      tandem: Tandem.REQUIRED,
      tandemNameSuffix: 'RadioButton',
      visiblePropertyOptions: {
        phetioFeatured: true
      },
      phetioEnabledPropertyInstrumented: true,
      // opt into default PhET-iO instrumented enabledProperty

      // pdom
      tagName: 'input',
      inputType: 'radio',
      containerTagName: 'li',
      labelTagName: 'label',
      appendLabel: true,
      appendDescription: true
    }, providedOptions);
    super();
    this.value = value;

    // selected Node
    const selectedNode = new Node();
    const innerCircle = new Circle(options.radius / 3, {
      fill: options.centerColor
    });
    const outerCircleSelected = new Circle(options.radius, {
      fill: options.selectedColor,
      stroke: options.stroke
    });
    const selectedCircleButton = new Node({
      children: [outerCircleSelected, innerCircle]
    });
    selectedNode.addChild(selectedCircleButton);

    // deselected Node
    const deselectedNode = new Node();
    const deselectedCircleButton = new Circle(options.radius, {
      fill: options.deselectedColor,
      stroke: options.stroke
    });
    deselectedNode.addChild(deselectedCircleButton);
    const radioNode = new Node({
      children: [selectedNode, deselectedNode],
      pickable: false // rectangle used for input
    });
    const labelBoundsListener = () => {
      labelNode.left = deselectedCircleButton.right + options.xSpacing;
      labelNode.centerY = deselectedCircleButton.centerY;
    };
    labelNode.boundsProperty.link(labelBoundsListener);

    // Add an invisible Node to make sure the layout for selected vs deselected is the same
    const rectangle = new Rectangle({});
    selectedNode.pickable = deselectedNode.pickable = false; // the background rectangle suffices

    labelNode.pickable = false; // since there's a pickable rectangle on top of content

    this.children = [radioNode, labelNode, rectangle];
    this.constraint = new AquaRadioButtonConstraint(this, radioNode, labelNode, rectangle, options);
    this.constraint.updateLayout();

    // sync control with model
    const syncWithModel = newValue => {
      selectedNode.visible = newValue === value;
      deselectedNode.visible = !selectedNode.visible;
    };
    property.link(syncWithModel);

    // set Property value on fire
    const fire = () => {
      const oldValue = property.value;
      property.set(value);
      if (oldValue !== property.value) {
        this.onInputEmitter.emit();
      }
    };
    const fireListener = new FireListener({
      fire: fire,
      tandem: options.tandem.createTandem('fireListener')
    });
    this.addInputListener(fireListener);

    // sound support
    this.onInputEmitter.addListener(() => options.soundPlayer.play());

    // pdom - input listener so that updates the state of the radio button with keyboard interaction
    const changeListener = {
      change: fire
    };
    this.addInputListener(changeListener);

    // pdom - Specify the default value for assistive technology. This attribute is needed in addition to
    // the 'checked' Property to mark this element as the default selection since 'checked' may be set before
    // we are finished adding RadioButtons to the containing group, and the browser will remove the boolean
    // 'checked' flag when new buttons are added.
    if (property.value === value) {
      this.setPDOMAttribute('checked', 'checked');
    }

    // pdom - when the Property changes, make sure the correct radio button is marked as 'checked' so that this button
    // receives focus on 'tab'
    const pdomCheckedListener = newValue => {
      this.pdomChecked = newValue === value;
    };
    property.link(pdomCheckedListener);

    // pdom - every button in a group of radio buttons should have the same name, see options for more info
    if (options.a11yNameAttribute !== null) {
      this.setPDOMAttribute('name', options.a11yNameAttribute);
    }
    this.mutate(options);
    this.disposeAquaRadioButton = () => {
      this.constraint.dispose();
      this.onInputEmitter.dispose();
      this.removeInputListener(fireListener);
      this.removeInputListener(changeListener);
      property.unlink(pdomCheckedListener);
      property.unlink(syncWithModel);
      if (labelNode.boundsProperty.hasListener(labelBoundsListener)) {
        labelNode.boundsProperty.unlink(labelBoundsListener);
      }

      // phet-io: Unregister listener
      fireListener.dispose();
    };

    // support for binder documentation, stripped out in builds and only runs when ?binder is specified
    assert && phet?.chipper?.queryParameters?.binder && InstanceRegistry.registerDataURL('sun', 'AquaRadioButton', this);
  }
  dispose() {
    this.disposeAquaRadioButton();
    super.dispose();
  }
}
class AquaRadioButtonConstraint extends LayoutConstraint {
  constructor(radioButton, radioNode, content, rectangle, options) {
    super(radioButton);
    this.radioButton = radioButton;
    this.radioNode = radioNode;
    this.content = content;
    this.rectangle = rectangle;
    this.options = options;
    this.radioButton.localPreferredWidthProperty.lazyLink(this._updateLayoutListener);
    this.addNode(content);
  }
  layout() {
    super.layout();

    // LayoutProxy helps with some layout operations, and will support a non-child content.
    const contentProxy = this.createLayoutProxy(this.content);
    const contentWidth = contentProxy.minimumWidth;
    const minimumWidth = this.radioNode.width + this.options.xSpacing + contentWidth;
    const preferredWidth = Math.max(minimumWidth, this.radioButton.localPreferredWidth || 0);

    // Attempt to set a preferredWidth
    if (isWidthSizable(this.content)) {
      contentProxy.preferredWidth = preferredWidth - this.radioNode.width - this.options.xSpacing;
    }

    // For now just position content. Future updates could include widthResizable content?
    contentProxy.left = this.radioNode.right + this.options.xSpacing;
    contentProxy.centerY = this.radioNode.centerY;

    // Our rectangle bounds will cover the radioNode and content, and if necessary expand to include the full
    // preferredWidth
    this.rectangle.rectBounds = this.radioNode.bounds.union(contentProxy.bounds).withMaxX(Math.max(this.radioNode.left + preferredWidth, contentProxy.right));

    // Update pointer areas (if the client hasn't customized them)
    this.radioButton._isSettingAreas = true;
    if (!this.radioButton._isTouchAreaCustomized) {
      this.radioButton.touchArea = this.radioButton.localBounds.dilatedXY(this.options.touchAreaXDilation, this.options.touchAreaYDilation);
    }
    if (!this.radioButton._isMouseAreaCustomized) {
      this.radioButton.mouseArea = this.radioButton.localBounds.dilatedXY(this.options.mouseAreaXDilation, this.options.mouseAreaYDilation);
    }
    this.radioButton._isSettingAreas = false;
    contentProxy.dispose();

    // Set the minimumWidth last, since this may trigger a relayout
    this.radioButton.localMinimumWidth = minimumWidth;
  }
  dispose() {
    this.radioButton.localPreferredWidthProperty.unlink(this._updateLayoutListener);
    super.dispose();
  }
}
sun.register('AquaRadioButton', AquaRadioButton);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbWl0dGVyIiwiSW5zdGFuY2VSZWdpc3RyeSIsIm9wdGlvbml6ZSIsIkNpcmNsZSIsIkZpcmVMaXN0ZW5lciIsImlzV2lkdGhTaXphYmxlIiwiTGF5b3V0Q29uc3RyYWludCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJTY2VuZXJ5Q29uc3RhbnRzIiwiVm9pY2luZyIsIldpZHRoU2l6YWJsZSIsIm11bHRpU2VsZWN0aW9uU291bmRQbGF5ZXJGYWN0b3J5IiwiVGFuZGVtIiwic3VuIiwiQXF1YVJhZGlvQnV0dG9uIiwiREVGQVVMVF9SQURJVVMiLCJvbklucHV0RW1pdHRlciIsIl9pc01vdXNlQXJlYUN1c3RvbWl6ZWQiLCJfaXNUb3VjaEFyZWFDdXN0b21pemVkIiwiX2lzU2V0dGluZ0FyZWFzIiwiY29uc3RydWN0b3IiLCJwcm9wZXJ0eSIsInZhbHVlIiwibGFiZWxOb2RlIiwicHJvdmlkZWRPcHRpb25zIiwiYXNzZXJ0IiwidmFsdWVDb21wYXJpc29uU3RyYXRlZ3kiLCJvcHRpb25zIiwiY2VudGVyQ29sb3IiLCJyYWRpdXMiLCJzZWxlY3RlZENvbG9yIiwiZGVzZWxlY3RlZENvbG9yIiwieFNwYWNpbmciLCJzdHJva2UiLCJzb3VuZFBsYXllciIsImdldFNlbGVjdGlvblNvdW5kUGxheWVyIiwiYTExeU5hbWVBdHRyaWJ1dGUiLCJ0b3VjaEFyZWFYRGlsYXRpb24iLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJtb3VzZUFyZWFYRGlsYXRpb24iLCJtb3VzZUFyZWFZRGlsYXRpb24iLCJjdXJzb3IiLCJkaXNhYmxlZE9wYWNpdHkiLCJESVNBQkxFRF9PUEFDSVRZIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJ0YW5kZW1OYW1lU3VmZml4IiwidmlzaWJsZVByb3BlcnR5T3B0aW9ucyIsInBoZXRpb0ZlYXR1cmVkIiwicGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkIiwidGFnTmFtZSIsImlucHV0VHlwZSIsImNvbnRhaW5lclRhZ05hbWUiLCJsYWJlbFRhZ05hbWUiLCJhcHBlbmRMYWJlbCIsImFwcGVuZERlc2NyaXB0aW9uIiwic2VsZWN0ZWROb2RlIiwiaW5uZXJDaXJjbGUiLCJmaWxsIiwib3V0ZXJDaXJjbGVTZWxlY3RlZCIsInNlbGVjdGVkQ2lyY2xlQnV0dG9uIiwiY2hpbGRyZW4iLCJhZGRDaGlsZCIsImRlc2VsZWN0ZWROb2RlIiwiZGVzZWxlY3RlZENpcmNsZUJ1dHRvbiIsInJhZGlvTm9kZSIsInBpY2thYmxlIiwibGFiZWxCb3VuZHNMaXN0ZW5lciIsImxlZnQiLCJyaWdodCIsImNlbnRlclkiLCJib3VuZHNQcm9wZXJ0eSIsImxpbmsiLCJyZWN0YW5nbGUiLCJjb25zdHJhaW50IiwiQXF1YVJhZGlvQnV0dG9uQ29uc3RyYWludCIsInVwZGF0ZUxheW91dCIsInN5bmNXaXRoTW9kZWwiLCJuZXdWYWx1ZSIsInZpc2libGUiLCJmaXJlIiwib2xkVmFsdWUiLCJzZXQiLCJlbWl0IiwiZmlyZUxpc3RlbmVyIiwiY3JlYXRlVGFuZGVtIiwiYWRkSW5wdXRMaXN0ZW5lciIsImFkZExpc3RlbmVyIiwicGxheSIsImNoYW5nZUxpc3RlbmVyIiwiY2hhbmdlIiwic2V0UERPTUF0dHJpYnV0ZSIsInBkb21DaGVja2VkTGlzdGVuZXIiLCJwZG9tQ2hlY2tlZCIsIm11dGF0ZSIsImRpc3Bvc2VBcXVhUmFkaW9CdXR0b24iLCJkaXNwb3NlIiwicmVtb3ZlSW5wdXRMaXN0ZW5lciIsInVubGluayIsImhhc0xpc3RlbmVyIiwicGhldCIsImNoaXBwZXIiLCJxdWVyeVBhcmFtZXRlcnMiLCJiaW5kZXIiLCJyZWdpc3RlckRhdGFVUkwiLCJyYWRpb0J1dHRvbiIsImNvbnRlbnQiLCJsb2NhbFByZWZlcnJlZFdpZHRoUHJvcGVydHkiLCJsYXp5TGluayIsIl91cGRhdGVMYXlvdXRMaXN0ZW5lciIsImFkZE5vZGUiLCJsYXlvdXQiLCJjb250ZW50UHJveHkiLCJjcmVhdGVMYXlvdXRQcm94eSIsImNvbnRlbnRXaWR0aCIsIm1pbmltdW1XaWR0aCIsIndpZHRoIiwicHJlZmVycmVkV2lkdGgiLCJNYXRoIiwibWF4IiwibG9jYWxQcmVmZXJyZWRXaWR0aCIsInJlY3RCb3VuZHMiLCJib3VuZHMiLCJ1bmlvbiIsIndpdGhNYXhYIiwidG91Y2hBcmVhIiwibG9jYWxCb3VuZHMiLCJkaWxhdGVkWFkiLCJtb3VzZUFyZWEiLCJsb2NhbE1pbmltdW1XaWR0aCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQXF1YVJhZGlvQnV0dG9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEFxdWFSYWRpb0J1dHRvbiBpcyBhIHJhZGlvIGJ1dHRvbiB3aG9zZSBsb29rIGlzIHNpbWlsYXIgdG8gbWFjT1MnIEFxdWEgdGhlbWUuIFRoZSBidXR0b24gaXMgY2lyY3VsYXIgYW5kXHJcbiAqIGNvbnRhaW5zIGEgZG90IHdoZW4gc2VsZWN0ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1RQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbWl0dGVyIGZyb20gJy4uLy4uL2F4b24vanMvRW1pdHRlci5qcyc7XHJcbmltcG9ydCBJbnN0YW5jZVJlZ2lzdHJ5IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9kb2N1bWVudGF0aW9uL0luc3RhbmNlUmVnaXN0cnkuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgeyBDaXJjbGUsIEZpcmVMaXN0ZW5lciwgaXNXaWR0aFNpemFibGUsIExheW91dENvbnN0cmFpbnQsIE5vZGUsIE5vZGVPcHRpb25zLCBSZWN0YW5nbGUsIFNjZW5lcnlDb25zdGFudHMsIFRQYWludCwgVm9pY2luZywgVm9pY2luZ09wdGlvbnMsIFdpZHRoU2l6YWJsZSB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUU291bmRQbGF5ZXIgZnJvbSAnLi4vLi4vdGFtYm8vanMvVFNvdW5kUGxheWVyLmpzJztcclxuaW1wb3J0IG11bHRpU2VsZWN0aW9uU291bmRQbGF5ZXJGYWN0b3J5IGZyb20gJy4uLy4uL3RhbWJvL2pzL211bHRpU2VsZWN0aW9uU291bmRQbGF5ZXJGYWN0b3J5LmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IHN1biBmcm9tICcuL3N1bi5qcyc7XHJcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcclxuaW1wb3J0IFRFbWl0dGVyIGZyb20gJy4uLy4uL2F4b24vanMvVEVtaXR0ZXIuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gY29sb3IgdXNlZCB0byBmaWxsIHRoZSBjZW50ZXIgb2YgdGhlIGJ1dHRvbiB3aGVuIGl0J3Mgc2VsZWN0ZWRcclxuICBjZW50ZXJDb2xvcj86IFRQYWludDtcclxuXHJcbiAgLy8gcmFkaXVzIG9mIHRoZSBidXR0b25cclxuICByYWRpdXM/OiBudW1iZXI7XHJcblxyXG4gIC8vIGNvbG9yIHVzZWQgdG8gZmlsbCB0aGUgYnV0dG9uIHdoZW4gaXQncyBzZWxlY3RlZFxyXG4gIHNlbGVjdGVkQ29sb3I/OiBUUGFpbnQ7XHJcblxyXG4gIC8vIGNvbG9yIHVzZWQgdG8gZmlsbCB0aGUgYnV0dG9uIHdoZW4gaXQncyBkZXNlbGVjdGVkXHJcbiAgZGVzZWxlY3RlZENvbG9yPzogVFBhaW50O1xyXG5cclxuICAvLyBob3Jpem9udGFsIHNwYWNlIGJldHdlZW4gdGhlIGJ1dHRvbiBhbmQgdGhlIGxhYmVsTm9kZVxyXG4gIHhTcGFjaW5nPzogbnVtYmVyO1xyXG5cclxuICAvLyBjb2xvciB1c2VkIHRvIHN0cm9rZSB0aGUgb3V0ZXIgZWRnZSBvZiB0aGUgYnV0dG9uXHJcbiAgc3Ryb2tlPzogVFBhaW50O1xyXG5cclxuICAvLyBzb3VuZCBnZW5lcmF0b3IsIHVzdWFsbHkgb3ZlcnJpZGRlbiB3aGVuIGNyZWF0aW5nIGEgZ3JvdXAgb2YgdGhlc2VcclxuICBzb3VuZFBsYXllcj86IFRTb3VuZFBsYXllcjtcclxuXHJcbiAgLy8gcG9pbnRlciBhcmVhc1xyXG4gIHRvdWNoQXJlYVhEaWxhdGlvbj86IG51bWJlcjtcclxuICB0b3VjaEFyZWFZRGlsYXRpb24/OiBudW1iZXI7XHJcbiAgbW91c2VBcmVhWERpbGF0aW9uPzogbnVtYmVyO1xyXG4gIG1vdXNlQXJlYVlEaWxhdGlvbj86IG51bWJlcjtcclxuXHJcbiAgLy8gRWFjaCBidXR0b24gaW4gYSBncm91cCBvZiByYWRpbyBidXR0b25zIG11c3QgaGF2ZSB0aGUgc2FtZSAnbmFtZScgYXR0cmlidXRlIHRvIGJlIGNvbnNpZGVyZWQgYSAnZ3JvdXAnIGJ5IHRoZVxyXG4gIC8vIGJyb3dzZXIuIE90aGVyd2lzZSwgYXJyb3cga2V5cyB3aWxsIG5hdmlnYXRlIHRocm91Z2ggYWxsIGlucHV0cyBvZiB0eXBlIHJhZGlvIGluIHRoZSBkb2N1bWVudC5cclxuICBhMTF5TmFtZUF0dHJpYnV0ZT86IHN0cmluZyB8IG51bWJlciB8IG51bGw7XHJcbn07XHJcbnR5cGUgUGFyZW50T3B0aW9ucyA9IFZvaWNpbmdPcHRpb25zICYgU3RyaWN0T21pdDxOb2RlT3B0aW9ucywgJ2NoaWxkcmVuJz47XHJcbmV4cG9ydCB0eXBlIEFxdWFSYWRpb0J1dHRvbk9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBhcmVudE9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcXVhUmFkaW9CdXR0b248VD4gZXh0ZW5kcyBXaWR0aFNpemFibGUoIFZvaWNpbmcoIE5vZGUgKSApIHtcclxuXHJcbiAgLy8gdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJhZGlvIGJ1dHRvblxyXG4gIHB1YmxpYyByZWFkb25seSB2YWx1ZTogVDtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlQXF1YVJhZGlvQnV0dG9uOiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfUkFESVVTID0gNztcclxuXHJcbiAgcHVibGljIHJlYWRvbmx5IG9uSW5wdXRFbWl0dGVyOiBURW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XHJcblxyXG4gIC8vIEhhbmRsZXMgbGF5b3V0IG9mIHRoZSBjb250ZW50LCByZWN0YW5nbGVzIGFuZCBtb3VzZS90b3VjaCBhcmVhc1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgY29uc3RyYWludDogQXF1YVJhZGlvQnV0dG9uQ29uc3RyYWludDxUPjtcclxuXHJcbiAgLy8gV2UgbmVlZCB0byByZWNvcmQgaWYgdGhlIG1vdXNlL3RvdWNoIGFyZWFzIGFyZSBjdXN0b21pemVkLCBzbyB0aGF0IHdlIGNhbiBhdm9pZCBvdmVyd3JpdGluZyB0aGVtLlxyXG4gIC8vIHB1YmxpYyBmb3IgdXNlIGJ5IEFxdWFSYWRpb0J1dHRvbkNvbnN0cmFpbnQgb25seSFcclxuICBwdWJsaWMgX2lzTW91c2VBcmVhQ3VzdG9taXplZCA9IGZhbHNlO1xyXG4gIHB1YmxpYyBfaXNUb3VjaEFyZWFDdXN0b21pemVkID0gZmFsc2U7XHJcbiAgcHVibGljIF9pc1NldHRpbmdBcmVhcyA9IGZhbHNlO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gcHJvcGVydHlcclxuICAgKiBAcGFyYW0gdmFsdWUgLSB0aGUgdmFsdWUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIGJ1dHRvbiwgc2FtZSB0eXBlIGFzIHByb3BlcnR5XHJcbiAgICogQHBhcmFtIGxhYmVsTm9kZSAtIE5vZGUgdGhhdCB3aWxsIGJlIHZlcnRpY2FsbHkgY2VudGVyZWQgdG8gdGhlIHJpZ2h0IG9mIHRoZSBidXR0b25cclxuICAgKiBAcGFyYW0gcHJvdmlkZWRPcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm9wZXJ0eTogVFByb3BlcnR5PFQ+LCB2YWx1ZTogVCwgbGFiZWxOb2RlOiBOb2RlLCBwcm92aWRlZE9wdGlvbnM/OiBBcXVhUmFkaW9CdXR0b25PcHRpb25zICkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcHJvcGVydHkudmFsdWVDb21wYXJpc29uU3RyYXRlZ3kgPT09ICdyZWZlcmVuY2UnLFxyXG4gICAgICAnVG9nZ2xlU3dpdGNoIGRlcGVuZHMgb24gXCI9PT1cIiBlcXVhbGl0eSBmb3IgdmFsdWUgY29tcGFyaXNvbicgKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEFxdWFSYWRpb0J1dHRvbk9wdGlvbnMsIFNlbGZPcHRpb25zLCBQYXJlbnRPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBjZW50ZXJDb2xvcjogJ2JsYWNrJyxcclxuICAgICAgcmFkaXVzOiBBcXVhUmFkaW9CdXR0b24uREVGQVVMVF9SQURJVVMsXHJcbiAgICAgIHNlbGVjdGVkQ29sb3I6ICdyZ2IoIDE0MywgMTk3LCAyNTAgKScsXHJcbiAgICAgIGRlc2VsZWN0ZWRDb2xvcjogJ3doaXRlJyxcclxuICAgICAgeFNwYWNpbmc6IDgsXHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgc291bmRQbGF5ZXI6IG11bHRpU2VsZWN0aW9uU291bmRQbGF5ZXJGYWN0b3J5LmdldFNlbGVjdGlvblNvdW5kUGxheWVyKCAwICksXHJcbiAgICAgIGExMXlOYW1lQXR0cmlidXRlOiBudWxsLFxyXG4gICAgICB0b3VjaEFyZWFYRGlsYXRpb246IDAsXHJcbiAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogMCxcclxuICAgICAgbW91c2VBcmVhWERpbGF0aW9uOiAwLFxyXG4gICAgICBtb3VzZUFyZWFZRGlsYXRpb246IDAsXHJcblxyXG4gICAgICAvLyBOb2RlT3B0aW9uc1xyXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuXHJcbiAgICAgIC8vIHtudW1iZXJ9IC0gb3B0IGludG8gTm9kZSdzIGRpc2FibGVkIG9wYWNpdHkgd2hlbiBlbmFibGVkOmZhbHNlXHJcbiAgICAgIGRpc2FibGVkT3BhY2l0eTogU2NlbmVyeUNvbnN0YW50cy5ESVNBQkxFRF9PUEFDSVRZLFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCxcclxuICAgICAgdGFuZGVtTmFtZVN1ZmZpeDogJ1JhZGlvQnV0dG9uJyxcclxuICAgICAgdmlzaWJsZVByb3BlcnR5T3B0aW9uczogeyBwaGV0aW9GZWF0dXJlZDogdHJ1ZSB9LFxyXG4gICAgICBwaGV0aW9FbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQ6IHRydWUsIC8vIG9wdCBpbnRvIGRlZmF1bHQgUGhFVC1pTyBpbnN0cnVtZW50ZWQgZW5hYmxlZFByb3BlcnR5XHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIHRhZ05hbWU6ICdpbnB1dCcsXHJcbiAgICAgIGlucHV0VHlwZTogJ3JhZGlvJyxcclxuICAgICAgY29udGFpbmVyVGFnTmFtZTogJ2xpJyxcclxuICAgICAgbGFiZWxUYWdOYW1lOiAnbGFiZWwnLFxyXG4gICAgICBhcHBlbmRMYWJlbDogdHJ1ZSxcclxuICAgICAgYXBwZW5kRGVzY3JpcHRpb246IHRydWVcclxuXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAvLyBzZWxlY3RlZCBOb2RlXHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgY29uc3QgaW5uZXJDaXJjbGUgPSBuZXcgQ2lyY2xlKCBvcHRpb25zLnJhZGl1cyAvIDMsIHsgZmlsbDogb3B0aW9ucy5jZW50ZXJDb2xvciB9ICk7XHJcbiAgICBjb25zdCBvdXRlckNpcmNsZVNlbGVjdGVkID0gbmV3IENpcmNsZSggb3B0aW9ucy5yYWRpdXMsIHsgZmlsbDogb3B0aW9ucy5zZWxlY3RlZENvbG9yLCBzdHJva2U6IG9wdGlvbnMuc3Ryb2tlIH0gKTtcclxuICAgIGNvbnN0IHNlbGVjdGVkQ2lyY2xlQnV0dG9uID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgb3V0ZXJDaXJjbGVTZWxlY3RlZCwgaW5uZXJDaXJjbGUgXVxyXG4gICAgfSApO1xyXG4gICAgc2VsZWN0ZWROb2RlLmFkZENoaWxkKCBzZWxlY3RlZENpcmNsZUJ1dHRvbiApO1xyXG5cclxuICAgIC8vIGRlc2VsZWN0ZWQgTm9kZVxyXG4gICAgY29uc3QgZGVzZWxlY3RlZE5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgY29uc3QgZGVzZWxlY3RlZENpcmNsZUJ1dHRvbiA9IG5ldyBDaXJjbGUoIG9wdGlvbnMucmFkaXVzLCB7XHJcbiAgICAgIGZpbGw6IG9wdGlvbnMuZGVzZWxlY3RlZENvbG9yLFxyXG4gICAgICBzdHJva2U6IG9wdGlvbnMuc3Ryb2tlXHJcbiAgICB9ICk7XHJcbiAgICBkZXNlbGVjdGVkTm9kZS5hZGRDaGlsZCggZGVzZWxlY3RlZENpcmNsZUJ1dHRvbiApO1xyXG5cclxuICAgIGNvbnN0IHJhZGlvTm9kZSA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIHNlbGVjdGVkTm9kZSwgZGVzZWxlY3RlZE5vZGUgXSxcclxuICAgICAgcGlja2FibGU6IGZhbHNlIC8vIHJlY3RhbmdsZSB1c2VkIGZvciBpbnB1dFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsQm91bmRzTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICAgIGxhYmVsTm9kZS5sZWZ0ID0gZGVzZWxlY3RlZENpcmNsZUJ1dHRvbi5yaWdodCArIG9wdGlvbnMueFNwYWNpbmc7XHJcbiAgICAgIGxhYmVsTm9kZS5jZW50ZXJZID0gZGVzZWxlY3RlZENpcmNsZUJ1dHRvbi5jZW50ZXJZO1xyXG4gICAgfTtcclxuICAgIGxhYmVsTm9kZS5ib3VuZHNQcm9wZXJ0eS5saW5rKCBsYWJlbEJvdW5kc0xpc3RlbmVyICk7XHJcblxyXG4gICAgLy8gQWRkIGFuIGludmlzaWJsZSBOb2RlIHRvIG1ha2Ugc3VyZSB0aGUgbGF5b3V0IGZvciBzZWxlY3RlZCB2cyBkZXNlbGVjdGVkIGlzIHRoZSBzYW1lXHJcbiAgICBjb25zdCByZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKCB7fSApO1xyXG4gICAgc2VsZWN0ZWROb2RlLnBpY2thYmxlID0gZGVzZWxlY3RlZE5vZGUucGlja2FibGUgPSBmYWxzZTsgLy8gdGhlIGJhY2tncm91bmQgcmVjdGFuZ2xlIHN1ZmZpY2VzXHJcblxyXG4gICAgbGFiZWxOb2RlLnBpY2thYmxlID0gZmFsc2U7IC8vIHNpbmNlIHRoZXJlJ3MgYSBwaWNrYWJsZSByZWN0YW5nbGUgb24gdG9wIG9mIGNvbnRlbnRcclxuXHJcbiAgICB0aGlzLmNoaWxkcmVuID0gW1xyXG4gICAgICByYWRpb05vZGUsXHJcbiAgICAgIGxhYmVsTm9kZSxcclxuICAgICAgcmVjdGFuZ2xlXHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuY29uc3RyYWludCA9IG5ldyBBcXVhUmFkaW9CdXR0b25Db25zdHJhaW50KCB0aGlzLCByYWRpb05vZGUsIGxhYmVsTm9kZSwgcmVjdGFuZ2xlLCBvcHRpb25zICk7XHJcbiAgICB0aGlzLmNvbnN0cmFpbnQudXBkYXRlTGF5b3V0KCk7XHJcblxyXG4gICAgLy8gc3luYyBjb250cm9sIHdpdGggbW9kZWxcclxuICAgIGNvbnN0IHN5bmNXaXRoTW9kZWwgPSAoIG5ld1ZhbHVlOiBUICkgPT4ge1xyXG4gICAgICBzZWxlY3RlZE5vZGUudmlzaWJsZSA9ICggbmV3VmFsdWUgPT09IHZhbHVlICk7XHJcbiAgICAgIGRlc2VsZWN0ZWROb2RlLnZpc2libGUgPSAhc2VsZWN0ZWROb2RlLnZpc2libGU7XHJcbiAgICB9O1xyXG4gICAgcHJvcGVydHkubGluayggc3luY1dpdGhNb2RlbCApO1xyXG5cclxuICAgIC8vIHNldCBQcm9wZXJ0eSB2YWx1ZSBvbiBmaXJlXHJcbiAgICBjb25zdCBmaXJlID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBvbGRWYWx1ZSA9IHByb3BlcnR5LnZhbHVlO1xyXG4gICAgICBwcm9wZXJ0eS5zZXQoIHZhbHVlICk7XHJcbiAgICAgIGlmICggb2xkVmFsdWUgIT09IHByb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICAgIHRoaXMub25JbnB1dEVtaXR0ZXIuZW1pdCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZmlyZUxpc3RlbmVyID0gbmV3IEZpcmVMaXN0ZW5lcigge1xyXG4gICAgICBmaXJlOiBmaXJlLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2ZpcmVMaXN0ZW5lcicgKVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCBmaXJlTGlzdGVuZXIgKTtcclxuXHJcbiAgICAvLyBzb3VuZCBzdXBwb3J0XHJcbiAgICB0aGlzLm9uSW5wdXRFbWl0dGVyLmFkZExpc3RlbmVyKCAoKSA9PiBvcHRpb25zLnNvdW5kUGxheWVyLnBsYXkoKSApO1xyXG5cclxuICAgIC8vIHBkb20gLSBpbnB1dCBsaXN0ZW5lciBzbyB0aGF0IHVwZGF0ZXMgdGhlIHN0YXRlIG9mIHRoZSByYWRpbyBidXR0b24gd2l0aCBrZXlib2FyZCBpbnRlcmFjdGlvblxyXG4gICAgY29uc3QgY2hhbmdlTGlzdGVuZXIgPSB7XHJcbiAgICAgIGNoYW5nZTogZmlyZVxyXG4gICAgfTtcclxuICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggY2hhbmdlTGlzdGVuZXIgKTtcclxuXHJcbiAgICAvLyBwZG9tIC0gU3BlY2lmeSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYXNzaXN0aXZlIHRlY2hub2xvZ3kuIFRoaXMgYXR0cmlidXRlIGlzIG5lZWRlZCBpbiBhZGRpdGlvbiB0b1xyXG4gICAgLy8gdGhlICdjaGVja2VkJyBQcm9wZXJ0eSB0byBtYXJrIHRoaXMgZWxlbWVudCBhcyB0aGUgZGVmYXVsdCBzZWxlY3Rpb24gc2luY2UgJ2NoZWNrZWQnIG1heSBiZSBzZXQgYmVmb3JlXHJcbiAgICAvLyB3ZSBhcmUgZmluaXNoZWQgYWRkaW5nIFJhZGlvQnV0dG9ucyB0byB0aGUgY29udGFpbmluZyBncm91cCwgYW5kIHRoZSBicm93c2VyIHdpbGwgcmVtb3ZlIHRoZSBib29sZWFuXHJcbiAgICAvLyAnY2hlY2tlZCcgZmxhZyB3aGVuIG5ldyBidXR0b25zIGFyZSBhZGRlZC5cclxuICAgIGlmICggcHJvcGVydHkudmFsdWUgPT09IHZhbHVlICkge1xyXG4gICAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICdjaGVja2VkJywgJ2NoZWNrZWQnICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcGRvbSAtIHdoZW4gdGhlIFByb3BlcnR5IGNoYW5nZXMsIG1ha2Ugc3VyZSB0aGUgY29ycmVjdCByYWRpbyBidXR0b24gaXMgbWFya2VkIGFzICdjaGVja2VkJyBzbyB0aGF0IHRoaXMgYnV0dG9uXHJcbiAgICAvLyByZWNlaXZlcyBmb2N1cyBvbiAndGFiJ1xyXG4gICAgY29uc3QgcGRvbUNoZWNrZWRMaXN0ZW5lciA9ICggbmV3VmFsdWU6IFQgKSA9PiB7XHJcbiAgICAgIHRoaXMucGRvbUNoZWNrZWQgPSAoIG5ld1ZhbHVlID09PSB2YWx1ZSApO1xyXG4gICAgfTtcclxuICAgIHByb3BlcnR5LmxpbmsoIHBkb21DaGVja2VkTGlzdGVuZXIgKTtcclxuXHJcbiAgICAvLyBwZG9tIC0gZXZlcnkgYnV0dG9uIGluIGEgZ3JvdXAgb2YgcmFkaW8gYnV0dG9ucyBzaG91bGQgaGF2ZSB0aGUgc2FtZSBuYW1lLCBzZWUgb3B0aW9ucyBmb3IgbW9yZSBpbmZvXHJcbiAgICBpZiAoIG9wdGlvbnMuYTExeU5hbWVBdHRyaWJ1dGUgIT09IG51bGwgKSB7XHJcbiAgICAgIHRoaXMuc2V0UERPTUF0dHJpYnV0ZSggJ25hbWUnLCBvcHRpb25zLmExMXlOYW1lQXR0cmlidXRlICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5tdXRhdGUoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VBcXVhUmFkaW9CdXR0b24gPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY29uc3RyYWludC5kaXNwb3NlKCk7XHJcblxyXG4gICAgICB0aGlzLm9uSW5wdXRFbWl0dGVyLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5yZW1vdmVJbnB1dExpc3RlbmVyKCBmaXJlTGlzdGVuZXIgKTtcclxuICAgICAgdGhpcy5yZW1vdmVJbnB1dExpc3RlbmVyKCBjaGFuZ2VMaXN0ZW5lciApO1xyXG4gICAgICBwcm9wZXJ0eS51bmxpbmsoIHBkb21DaGVja2VkTGlzdGVuZXIgKTtcclxuICAgICAgcHJvcGVydHkudW5saW5rKCBzeW5jV2l0aE1vZGVsICk7XHJcblxyXG4gICAgICBpZiAoIGxhYmVsTm9kZS5ib3VuZHNQcm9wZXJ0eS5oYXNMaXN0ZW5lciggbGFiZWxCb3VuZHNMaXN0ZW5lciApICkge1xyXG4gICAgICAgIGxhYmVsTm9kZS5ib3VuZHNQcm9wZXJ0eS51bmxpbmsoIGxhYmVsQm91bmRzTGlzdGVuZXIgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcGhldC1pbzogVW5yZWdpc3RlciBsaXN0ZW5lclxyXG4gICAgICBmaXJlTGlzdGVuZXIuZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzdXBwb3J0IGZvciBiaW5kZXIgZG9jdW1lbnRhdGlvbiwgc3RyaXBwZWQgb3V0IGluIGJ1aWxkcyBhbmQgb25seSBydW5zIHdoZW4gP2JpbmRlciBpcyBzcGVjaWZpZWRcclxuICAgIGFzc2VydCAmJiBwaGV0Py5jaGlwcGVyPy5xdWVyeVBhcmFtZXRlcnM/LmJpbmRlciAmJiBJbnN0YW5jZVJlZ2lzdHJ5LnJlZ2lzdGVyRGF0YVVSTCggJ3N1bicsICdBcXVhUmFkaW9CdXR0b24nLCB0aGlzICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZUFxdWFSYWRpb0J1dHRvbigpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgQXF1YVJhZGlvQnV0dG9uQ29uc3RyYWludDxUPiBleHRlbmRzIExheW91dENvbnN0cmFpbnQge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcmFkaW9CdXR0b246IEFxdWFSYWRpb0J1dHRvbjxUPjtcclxuICBwcml2YXRlIHJlYWRvbmx5IHJhZGlvTm9kZTogTm9kZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGNvbnRlbnQ6IE5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSByZWN0YW5nbGU6IFJlY3RhbmdsZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IFJlcXVpcmVkPFNlbGZPcHRpb25zPjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCByYWRpb0J1dHRvbjogQXF1YVJhZGlvQnV0dG9uPFQ+LCByYWRpb05vZGU6IE5vZGUsIGNvbnRlbnQ6IE5vZGUsIHJlY3RhbmdsZTogUmVjdGFuZ2xlLCBvcHRpb25zOiBSZXF1aXJlZDxTZWxmT3B0aW9ucz4gKSB7XHJcbiAgICBzdXBlciggcmFkaW9CdXR0b24gKTtcclxuXHJcbiAgICB0aGlzLnJhZGlvQnV0dG9uID0gcmFkaW9CdXR0b247XHJcbiAgICB0aGlzLnJhZGlvTm9kZSA9IHJhZGlvTm9kZTtcclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB0aGlzLnJlY3RhbmdsZSA9IHJlY3RhbmdsZTtcclxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcblxyXG4gICAgdGhpcy5yYWRpb0J1dHRvbi5sb2NhbFByZWZlcnJlZFdpZHRoUHJvcGVydHkubGF6eUxpbmsoIHRoaXMuX3VwZGF0ZUxheW91dExpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5hZGROb2RlKCBjb250ZW50ICk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgbGF5b3V0KCk6IHZvaWQge1xyXG4gICAgc3VwZXIubGF5b3V0KCk7XHJcblxyXG4gICAgLy8gTGF5b3V0UHJveHkgaGVscHMgd2l0aCBzb21lIGxheW91dCBvcGVyYXRpb25zLCBhbmQgd2lsbCBzdXBwb3J0IGEgbm9uLWNoaWxkIGNvbnRlbnQuXHJcbiAgICBjb25zdCBjb250ZW50UHJveHkgPSB0aGlzLmNyZWF0ZUxheW91dFByb3h5KCB0aGlzLmNvbnRlbnQgKSE7XHJcblxyXG4gICAgY29uc3QgY29udGVudFdpZHRoID0gY29udGVudFByb3h5Lm1pbmltdW1XaWR0aDtcclxuXHJcbiAgICBjb25zdCBtaW5pbXVtV2lkdGggPSB0aGlzLnJhZGlvTm9kZS53aWR0aCArIHRoaXMub3B0aW9ucy54U3BhY2luZyArIGNvbnRlbnRXaWR0aDtcclxuXHJcbiAgICBjb25zdCBwcmVmZXJyZWRXaWR0aCA9IE1hdGgubWF4KCBtaW5pbXVtV2lkdGgsIHRoaXMucmFkaW9CdXR0b24ubG9jYWxQcmVmZXJyZWRXaWR0aCB8fCAwICk7XHJcblxyXG4gICAgLy8gQXR0ZW1wdCB0byBzZXQgYSBwcmVmZXJyZWRXaWR0aFxyXG4gICAgaWYgKCBpc1dpZHRoU2l6YWJsZSggdGhpcy5jb250ZW50ICkgKSB7XHJcbiAgICAgIGNvbnRlbnRQcm94eS5wcmVmZXJyZWRXaWR0aCA9IHByZWZlcnJlZFdpZHRoIC0gdGhpcy5yYWRpb05vZGUud2lkdGggLSB0aGlzLm9wdGlvbnMueFNwYWNpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yIG5vdyBqdXN0IHBvc2l0aW9uIGNvbnRlbnQuIEZ1dHVyZSB1cGRhdGVzIGNvdWxkIGluY2x1ZGUgd2lkdGhSZXNpemFibGUgY29udGVudD9cclxuICAgIGNvbnRlbnRQcm94eS5sZWZ0ID0gdGhpcy5yYWRpb05vZGUucmlnaHQgKyB0aGlzLm9wdGlvbnMueFNwYWNpbmc7XHJcbiAgICBjb250ZW50UHJveHkuY2VudGVyWSA9IHRoaXMucmFkaW9Ob2RlLmNlbnRlclk7XHJcblxyXG4gICAgLy8gT3VyIHJlY3RhbmdsZSBib3VuZHMgd2lsbCBjb3ZlciB0aGUgcmFkaW9Ob2RlIGFuZCBjb250ZW50LCBhbmQgaWYgbmVjZXNzYXJ5IGV4cGFuZCB0byBpbmNsdWRlIHRoZSBmdWxsXHJcbiAgICAvLyBwcmVmZXJyZWRXaWR0aFxyXG4gICAgdGhpcy5yZWN0YW5nbGUucmVjdEJvdW5kcyA9IHRoaXMucmFkaW9Ob2RlLmJvdW5kcy51bmlvbiggY29udGVudFByb3h5LmJvdW5kcyApLndpdGhNYXhYKFxyXG4gICAgICBNYXRoLm1heCggdGhpcy5yYWRpb05vZGUubGVmdCArIHByZWZlcnJlZFdpZHRoLCBjb250ZW50UHJveHkucmlnaHQgKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgcG9pbnRlciBhcmVhcyAoaWYgdGhlIGNsaWVudCBoYXNuJ3QgY3VzdG9taXplZCB0aGVtKVxyXG4gICAgdGhpcy5yYWRpb0J1dHRvbi5faXNTZXR0aW5nQXJlYXMgPSB0cnVlO1xyXG4gICAgaWYgKCAhdGhpcy5yYWRpb0J1dHRvbi5faXNUb3VjaEFyZWFDdXN0b21pemVkICkge1xyXG4gICAgICB0aGlzLnJhZGlvQnV0dG9uLnRvdWNoQXJlYSA9IHRoaXMucmFkaW9CdXR0b24ubG9jYWxCb3VuZHMuZGlsYXRlZFhZKCB0aGlzLm9wdGlvbnMudG91Y2hBcmVhWERpbGF0aW9uLCB0aGlzLm9wdGlvbnMudG91Y2hBcmVhWURpbGF0aW9uICk7XHJcbiAgICB9XHJcbiAgICBpZiAoICF0aGlzLnJhZGlvQnV0dG9uLl9pc01vdXNlQXJlYUN1c3RvbWl6ZWQgKSB7XHJcbiAgICAgIHRoaXMucmFkaW9CdXR0b24ubW91c2VBcmVhID0gdGhpcy5yYWRpb0J1dHRvbi5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIHRoaXMub3B0aW9ucy5tb3VzZUFyZWFYRGlsYXRpb24sIHRoaXMub3B0aW9ucy5tb3VzZUFyZWFZRGlsYXRpb24gKTtcclxuICAgIH1cclxuICAgIHRoaXMucmFkaW9CdXR0b24uX2lzU2V0dGluZ0FyZWFzID0gZmFsc2U7XHJcblxyXG4gICAgY29udGVudFByb3h5LmRpc3Bvc2UoKTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIG1pbmltdW1XaWR0aCBsYXN0LCBzaW5jZSB0aGlzIG1heSB0cmlnZ2VyIGEgcmVsYXlvdXRcclxuICAgIHRoaXMucmFkaW9CdXR0b24ubG9jYWxNaW5pbXVtV2lkdGggPSBtaW5pbXVtV2lkdGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMucmFkaW9CdXR0b24ubG9jYWxQcmVmZXJyZWRXaWR0aFByb3BlcnR5LnVubGluayggdGhpcy5fdXBkYXRlTGF5b3V0TGlzdGVuZXIgKTtcclxuXHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5zdW4ucmVnaXN0ZXIoICdBcXVhUmFkaW9CdXR0b24nLCBBcXVhUmFkaW9CdXR0b24gKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxPQUFPQSxPQUFPLE1BQU0sMEJBQTBCO0FBQzlDLE9BQU9DLGdCQUFnQixNQUFNLHNEQUFzRDtBQUNuRixPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELFNBQVNDLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxjQUFjLEVBQUVDLGdCQUFnQixFQUFFQyxJQUFJLEVBQWVDLFNBQVMsRUFBRUMsZ0JBQWdCLEVBQVVDLE9BQU8sRUFBa0JDLFlBQVksUUFBUSw2QkFBNkI7QUFFbk0sT0FBT0MsZ0NBQWdDLE1BQU0sb0RBQW9EO0FBQ2pHLE9BQU9DLE1BQU0sTUFBTSwyQkFBMkI7QUFDOUMsT0FBT0MsR0FBRyxNQUFNLFVBQVU7QUF3QzFCLGVBQWUsTUFBTUMsZUFBZSxTQUFZSixZQUFZLENBQUVELE9BQU8sQ0FBRUgsSUFBSyxDQUFFLENBQUMsQ0FBQztFQUU5RTs7RUFLQSxPQUF1QlMsY0FBYyxHQUFHLENBQUM7RUFFekJDLGNBQWMsR0FB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