// Copyright 2013-2024, University of Colorado Boulder

/**
 * Display one of N nodes based on a given Property. See the option "unselectedChildrenSceneGraphStrategy" for different
 * child management strategies and how they impact the overall bounds and performance.
 * Supports null and undefined as possible values.  Will not work correctly if the children are changed externally
 * after instantiation (manages its own children and their visibility).
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import optionize from '../../phet-core/js/optionize.js';
import { Node } from '../../scenery/js/imports.js';
import sun from './sun.js';
import { getGroupItemNodes } from './GroupItemOptions.js';
export default class ToggleNode extends Node {
  constructor(valueProperty, elements, providedOptions) {
    const options = optionize()({
      // SelfOptions
      alignChildren: ToggleNode.CENTER,
      unselectedChildrenSceneGraphStrategy: 'included'
    }, providedOptions);
    const nodes = getGroupItemNodes(elements, options.tandem?.createTandem('elements'));
    options.children = nodes;
    options.alignChildren(options.children);
    super(options);
    const valueListener = value => {
      const matches = [];
      for (let i = 0; i < elements.length; i++) {
        const element = elements[i];
        const visible = element.value === value;
        nodes[i].visible = visible;
        if (visible) {
          matches.push(nodes[i]);
        }
      }
      assert && assert(matches.length === 1, `Wrong number of matches: ${matches.length}`);
      if (options.unselectedChildrenSceneGraphStrategy === 'excluded') {
        this.children = matches;
      }
    };

    // Run the link after super so we can change the children if needed. This means that when areUnselectedChildrenInSceneGraph===false,
    // all children will temporarily be visible: true until this link is called. However, since this ToggleNode is not yet
    // in the scene graph, this should not cause any visual problems or significant performance issues.
    valueProperty.link(valueListener);
    this.nodes = nodes;
    this.disposeToggleNode = function () {
      valueProperty.unlink(valueListener);
      nodes.forEach(node => node.dispose());
    };
  }
  dispose() {
    this.disposeToggleNode();
    super.dispose();
  }

  /**
   * A value for the alignChildren option.
   * Centers the latter nodes on the x,y center of the first node.
   */
  static CENTER(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].center = children[0].center;
    }
  }

  /**
   * A value for the alignChildren option.
   * Centers the latter nodes on the x center of the first node.
   */
  static CENTER_X(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].centerX = children[0].centerX;
    }
  }

  /**
   * A value for the alignChildren option.
   * Centers the latter nodes on the y center of the first node.
   */
  static CENTER_Y(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].centerY = children[0].centerY;
    }
  }

  /**
   * A value for the alignChildren option.
   * Left aligns nodes on the left of the first node.
   */
  static LEFT(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].left = children[0].left;
    }
  }

  /**
   * A value for the alignChildren option.
   * Aligns nodes on the bottom of the first node.
   */
  static BOTTOM(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].bottom = children[0].bottom;
    }
  }

  /**
   * A value for the alignChildren option.
   * Aligns nodes on the bottom of the first node.
   */
  static CENTER_BOTTOM(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].centerBottom = children[0].centerBottom;
    }
  }

  /**
   * A value for the alignChildren option.
   * Right aligns nodes on the right of the first node.
   */
  static RIGHT(children) {
    for (let i = 1; i < children.length; i++) {
      children[i].right = children[0].right;
    }
  }

  /**
   * A value for the alignChildren option.
   * No alignment is performed.
   */
  static NONE(children) {
    // do nothing
  }
}
sun.register('ToggleNode', ToggleNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJOb2RlIiwic3VuIiwiZ2V0R3JvdXBJdGVtTm9kZXMiLCJUb2dnbGVOb2RlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZVByb3BlcnR5IiwiZWxlbWVudHMiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiYWxpZ25DaGlsZHJlbiIsIkNFTlRFUiIsInVuc2VsZWN0ZWRDaGlsZHJlblNjZW5lR3JhcGhTdHJhdGVneSIsIm5vZGVzIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwiY2hpbGRyZW4iLCJ2YWx1ZUxpc3RlbmVyIiwidmFsdWUiLCJtYXRjaGVzIiwiaSIsImxlbmd0aCIsImVsZW1lbnQiLCJ2aXNpYmxlIiwicHVzaCIsImFzc2VydCIsImxpbmsiLCJkaXNwb3NlVG9nZ2xlTm9kZSIsInVubGluayIsImZvckVhY2giLCJub2RlIiwiZGlzcG9zZSIsImNlbnRlciIsIkNFTlRFUl9YIiwiY2VudGVyWCIsIkNFTlRFUl9ZIiwiY2VudGVyWSIsIkxFRlQiLCJsZWZ0IiwiQk9UVE9NIiwiYm90dG9tIiwiQ0VOVEVSX0JPVFRPTSIsImNlbnRlckJvdHRvbSIsIlJJR0hUIiwicmlnaHQiLCJOT05FIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJUb2dnbGVOb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIERpc3BsYXkgb25lIG9mIE4gbm9kZXMgYmFzZWQgb24gYSBnaXZlbiBQcm9wZXJ0eS4gU2VlIHRoZSBvcHRpb24gXCJ1bnNlbGVjdGVkQ2hpbGRyZW5TY2VuZUdyYXBoU3RyYXRlZ3lcIiBmb3IgZGlmZmVyZW50XHJcbiAqIGNoaWxkIG1hbmFnZW1lbnQgc3RyYXRlZ2llcyBhbmQgaG93IHRoZXkgaW1wYWN0IHRoZSBvdmVyYWxsIGJvdW5kcyBhbmQgcGVyZm9ybWFuY2UuXHJcbiAqIFN1cHBvcnRzIG51bGwgYW5kIHVuZGVmaW5lZCBhcyBwb3NzaWJsZSB2YWx1ZXMuICBXaWxsIG5vdCB3b3JrIGNvcnJlY3RseSBpZiB0aGUgY2hpbGRyZW4gYXJlIGNoYW5nZWQgZXh0ZXJuYWxseVxyXG4gKiBhZnRlciBpbnN0YW50aWF0aW9uIChtYW5hZ2VzIGl0cyBvd24gY2hpbGRyZW4gYW5kIHRoZWlyIHZpc2liaWxpdHkpLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgTm9kZU9wdGlvbnMgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgc3VuIGZyb20gJy4vc3VuLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgR3JvdXBJdGVtT3B0aW9ucywgeyBnZXRHcm91cEl0ZW1Ob2RlcyB9IGZyb20gJy4vR3JvdXBJdGVtT3B0aW9ucy5qcyc7XHJcblxyXG5leHBvcnQgdHlwZSBUb2dnbGVOb2RlRWxlbWVudDxULCBOIGV4dGVuZHMgTm9kZSA9IE5vZGU+ID0ge1xyXG4gIHZhbHVlOiBUOyAgLy8gYSB2YWx1ZVxyXG59ICYgR3JvdXBJdGVtT3B0aW9uczxOPjtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcblxyXG4gIC8vIHtmdW5jdGlvbn0gZGV0ZXJtaW5lcyB0aGUgcmVsYXRpdmUgbGF5b3V0IG9mIGVsZW1lbnQgTm9kZXMuIFNlZSBiZWxvdyBmb3IgcHJlLWRlZmluZWQgbGF5b3V0LlxyXG4gIGFsaWduQ2hpbGRyZW4/OiAoIGNoaWxkcmVuOiBOb2RlW10gKSA9PiB2b2lkO1xyXG5cclxuICAvLyBEZXRlcm1pbmUgd2hldGhlciB1bnNlbGVjdGVkIGNoaWxkcmVuICh0aGUgb25lcyBub3QgZGlzcGxheWVkKSBhcmUgaW4gdGhlIHNjZW5lIGdyYXBoLlxyXG4gIC8vIC0gSWYgaW5jbHVkZWQgKHRoZSBkZWZhdWx0KSwgdW5zZWxlY3RlZCBjaGlsZHJlbiBhcmUgaW4gdGhlIHNjZW5lIGdyYXBoIGFuZCBoaWRkZW4gdmlhIHNldFZpc2libGUoZmFsc2UpLiBJbiB0aGlzIGNhc2VcclxuICAvLyAgIHRoZSBsYXlvdXQgaXMgdGhlIHVuaW9uIG9mIHRoZSBib3VuZHMgb2YgYWxsIGNoaWxkcmVuICh2aXNpYmxlIGFuZCBpbnZpc2libGUpLlxyXG4gIC8vIC0gSWYgZXhjbHVkZWQsIGNoaWxkcmVuIGFyZSBhZGRlZCB0byB0aGUgc2NlbmUgZ3JhcGggd2hlbiBzZWxlY3RlZCBhbmQgcmVtb3ZlZCB3aGVuIG5vdCBzZWxlY3RlZC4gVGhlIFRvZ2dsZU5vZGUgaGFzXHJcbiAgLy8gdGhlIGJvdW5kcyBvZiBpdHMgc2VsZWN0ZWQgY2hpbGQuIFRoaXMgb3B0aW9uIGNhbiBzb21ldGltZXMgaW1wcm92ZSBwZXJmb3JtYW5jZS4gQ2hpbGRyZW4gYWRkZWQgdG8gdGhlIFRvZ2dsZU5vZGVcclxuICAvLyBvdXRzaWRlIHRoZSBjb25zdHJ1Y3RvciB3aWxsIG5vdCBiZSBtYW5hZ2VkIGNvcnJlY3RseS5cclxuICB1bnNlbGVjdGVkQ2hpbGRyZW5TY2VuZUdyYXBoU3RyYXRlZ3k/OiAnaW5jbHVkZWQnIHwgJ2V4Y2x1ZGVkJztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFRvZ2dsZU5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTdHJpY3RPbWl0PE5vZGVPcHRpb25zLCAnY2hpbGRyZW4nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZ2dsZU5vZGU8VCwgTiBleHRlbmRzIE5vZGUgPSBOb2RlPiBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGRpc3Bvc2VUb2dnbGVOb2RlOiAoKSA9PiB2b2lkO1xyXG4gIHB1YmxpYyByZWFkb25seSBub2RlczogTltdO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHZhbHVlUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFQ+LCBlbGVtZW50czogVG9nZ2xlTm9kZUVsZW1lbnQ8VCwgTj5bXSwgcHJvdmlkZWRPcHRpb25zPzogVG9nZ2xlTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxUb2dnbGVOb2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIE5vZGVPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBhbGlnbkNoaWxkcmVuOiBUb2dnbGVOb2RlLkNFTlRFUixcclxuXHJcbiAgICAgIHVuc2VsZWN0ZWRDaGlsZHJlblNjZW5lR3JhcGhTdHJhdGVneTogJ2luY2x1ZGVkJ1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3Qgbm9kZXMgPSBnZXRHcm91cEl0ZW1Ob2RlcyggZWxlbWVudHMsIG9wdGlvbnMudGFuZGVtPy5jcmVhdGVUYW5kZW0oICdlbGVtZW50cycgKSApO1xyXG5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBub2RlcztcclxuXHJcbiAgICBvcHRpb25zLmFsaWduQ2hpbGRyZW4oIG9wdGlvbnMuY2hpbGRyZW4gKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlTGlzdGVuZXIgPSAoIHZhbHVlOiBUICkgPT4ge1xyXG4gICAgICBjb25zdCBtYXRjaGVzOiBOb2RlW10gPSBbXTtcclxuICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzWyBpIF07XHJcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9IGVsZW1lbnQudmFsdWUgPT09IHZhbHVlO1xyXG4gICAgICAgIG5vZGVzWyBpIF0udmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICAgICAgaWYgKCB2aXNpYmxlICkge1xyXG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKCBub2Rlc1sgaSBdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXRjaGVzLmxlbmd0aCA9PT0gMSwgYFdyb25nIG51bWJlciBvZiBtYXRjaGVzOiAke21hdGNoZXMubGVuZ3RofWAgKTtcclxuICAgICAgaWYgKCBvcHRpb25zLnVuc2VsZWN0ZWRDaGlsZHJlblNjZW5lR3JhcGhTdHJhdGVneSA9PT0gJ2V4Y2x1ZGVkJyApIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gbWF0Y2hlcztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBSdW4gdGhlIGxpbmsgYWZ0ZXIgc3VwZXIgc28gd2UgY2FuIGNoYW5nZSB0aGUgY2hpbGRyZW4gaWYgbmVlZGVkLiBUaGlzIG1lYW5zIHRoYXQgd2hlbiBhcmVVbnNlbGVjdGVkQ2hpbGRyZW5JblNjZW5lR3JhcGg9PT1mYWxzZSxcclxuICAgIC8vIGFsbCBjaGlsZHJlbiB3aWxsIHRlbXBvcmFyaWx5IGJlIHZpc2libGU6IHRydWUgdW50aWwgdGhpcyBsaW5rIGlzIGNhbGxlZC4gSG93ZXZlciwgc2luY2UgdGhpcyBUb2dnbGVOb2RlIGlzIG5vdCB5ZXRcclxuICAgIC8vIGluIHRoZSBzY2VuZSBncmFwaCwgdGhpcyBzaG91bGQgbm90IGNhdXNlIGFueSB2aXN1YWwgcHJvYmxlbXMgb3Igc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgaXNzdWVzLlxyXG4gICAgdmFsdWVQcm9wZXJ0eS5saW5rKCB2YWx1ZUxpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5ub2RlcyA9IG5vZGVzO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZVRvZ2dsZU5vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFsdWVQcm9wZXJ0eS51bmxpbmsoIHZhbHVlTGlzdGVuZXIgKTtcclxuICAgICAgbm9kZXMuZm9yRWFjaCggbm9kZSA9PiBub2RlLmRpc3Bvc2UoKSApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlVG9nZ2xlTm9kZSgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBmb3IgdGhlIGFsaWduQ2hpbGRyZW4gb3B0aW9uLlxyXG4gICAqIENlbnRlcnMgdGhlIGxhdHRlciBub2RlcyBvbiB0aGUgeCx5IGNlbnRlciBvZiB0aGUgZmlyc3Qgbm9kZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIENFTlRFUiggY2hpbGRyZW46IE5vZGVbXSApOiB2b2lkIHtcclxuICAgIGZvciAoIGxldCBpID0gMTsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjaGlsZHJlblsgaSBdLmNlbnRlciA9IGNoaWxkcmVuWyAwIF0uY2VudGVyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBmb3IgdGhlIGFsaWduQ2hpbGRyZW4gb3B0aW9uLlxyXG4gICAqIENlbnRlcnMgdGhlIGxhdHRlciBub2RlcyBvbiB0aGUgeCBjZW50ZXIgb2YgdGhlIGZpcnN0IG5vZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBDRU5URVJfWCggY2hpbGRyZW46IE5vZGVbXSApOiB2b2lkIHtcclxuICAgIGZvciAoIGxldCBpID0gMTsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjaGlsZHJlblsgaSBdLmNlbnRlclggPSBjaGlsZHJlblsgMCBdLmNlbnRlclg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHZhbHVlIGZvciB0aGUgYWxpZ25DaGlsZHJlbiBvcHRpb24uXHJcbiAgICogQ2VudGVycyB0aGUgbGF0dGVyIG5vZGVzIG9uIHRoZSB5IGNlbnRlciBvZiB0aGUgZmlyc3Qgbm9kZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIENFTlRFUl9ZKCBjaGlsZHJlbjogTm9kZVtdICk6IHZvaWQge1xyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNoaWxkcmVuWyBpIF0uY2VudGVyWSA9IGNoaWxkcmVuWyAwIF0uY2VudGVyWTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgdmFsdWUgZm9yIHRoZSBhbGlnbkNoaWxkcmVuIG9wdGlvbi5cclxuICAgKiBMZWZ0IGFsaWducyBub2RlcyBvbiB0aGUgbGVmdCBvZiB0aGUgZmlyc3Qgbm9kZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIExFRlQoIGNoaWxkcmVuOiBOb2RlW10gKTogdm9pZCB7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY2hpbGRyZW5bIGkgXS5sZWZ0ID0gY2hpbGRyZW5bIDAgXS5sZWZ0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBmb3IgdGhlIGFsaWduQ2hpbGRyZW4gb3B0aW9uLlxyXG4gICAqIEFsaWducyBub2RlcyBvbiB0aGUgYm90dG9tIG9mIHRoZSBmaXJzdCBub2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgQk9UVE9NKCBjaGlsZHJlbjogTm9kZVtdICk6IHZvaWQge1xyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNoaWxkcmVuWyBpIF0uYm90dG9tID0gY2hpbGRyZW5bIDAgXS5ib3R0b207XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHZhbHVlIGZvciB0aGUgYWxpZ25DaGlsZHJlbiBvcHRpb24uXHJcbiAgICogQWxpZ25zIG5vZGVzIG9uIHRoZSBib3R0b20gb2YgdGhlIGZpcnN0IG5vZGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBDRU5URVJfQk9UVE9NKCBjaGlsZHJlbjogTm9kZVtdICk6IHZvaWQge1xyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNoaWxkcmVuWyBpIF0uY2VudGVyQm90dG9tID0gY2hpbGRyZW5bIDAgXS5jZW50ZXJCb3R0b207XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHZhbHVlIGZvciB0aGUgYWxpZ25DaGlsZHJlbiBvcHRpb24uXHJcbiAgICogUmlnaHQgYWxpZ25zIG5vZGVzIG9uIHRoZSByaWdodCBvZiB0aGUgZmlyc3Qgbm9kZS5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIFJJR0hUKCBjaGlsZHJlbjogTm9kZVtdICk6IHZvaWQge1xyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNoaWxkcmVuWyBpIF0ucmlnaHQgPSBjaGlsZHJlblsgMCBdLnJpZ2h0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSB2YWx1ZSBmb3IgdGhlIGFsaWduQ2hpbGRyZW4gb3B0aW9uLlxyXG4gICAqIE5vIGFsaWdubWVudCBpcyBwZXJmb3JtZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBOT05FKCBjaGlsZHJlbjogTm9kZVtdICk6IHZvaWQge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG4gIH1cclxufVxyXG5cclxuc3VuLnJlZ2lzdGVyKCAnVG9nZ2xlTm9kZScsIFRvZ2dsZU5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FB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