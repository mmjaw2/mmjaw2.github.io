// Copyright 2022-2023, University of Colorado Boulder

/**
 * Demos for HSlider and VSlider
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import HSlider from '../../HSlider.js';
import VSlider from '../../VSlider.js';
import Checkbox from '../../Checkbox.js';
import Range from '../../../../dot/js/Range.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import Property from '../../../../axon/js/Property.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import { Font, HBox, Text, VBox } from '../../../../scenery/js/imports.js';
import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import stepTimer from '../../../../axon/js/stepTimer.js';
const CHECKBOX_FONT = new Font({
  size: 20
});

// Used by demoHSlider and demoVSlider
function demoSlider(layoutBounds, orientation, providedOptions) {
  const options = combineOptions({
    center: layoutBounds.center,
    tandem: Tandem.REQUIRED,
    phetioDesigned: true
  }, providedOptions);
  const property = new Property(0);
  const range = new Range(0, 100);
  const tickLabelOptions = {
    font: new Font({
      size: 16
    })
  };
  const enabledRangeProperty = new Property(new Range(0, 100));
  let slider;
  if (orientation === 'horizontal') {
    slider = new HSlider(property, range, optionize()({
      trackSize: new Dimension2(300, 5),
      // Demonstrate larger x dilation.
      thumbTouchAreaXDilation: 30,
      thumbTouchAreaYDilation: 15,
      thumbMouseAreaXDilation: 10,
      thumbMouseAreaYDilation: 5,
      enabledRangeProperty: enabledRangeProperty,
      // pdom
      labelContent: 'Horizontal Slider',
      descriptionContent: 'This is a description of the horizontal Slider.',
      phetioEnabledPropertyInstrumented: false
    }, options));
  } else {
    slider = new VSlider(property, range, optionize()({
      trackSize: new Dimension2(5, 300),
      // Demonstrate larger y dilation, to verify that VSlider is handling things correctly.
      thumbTouchAreaXDilation: 15,
      thumbTouchAreaYDilation: 30,
      thumbMouseAreaXDilation: 5,
      thumbMouseAreaYDilation: 10,
      enabledRangeProperty: enabledRangeProperty,
      phetioEnabledPropertyInstrumented: false
    }, options));
  }

  // Settable
  const enabledProperty = new BooleanProperty(true);
  slider.enabledProperty = enabledProperty;

  // major ticks
  slider.addMajorTick(range.min, new Text(range.min, tickLabelOptions));
  slider.addMajorTick(range.getCenter(), new Text(range.getCenter(), tickLabelOptions));
  slider.addMajorTick(range.max, new Text(range.max, tickLabelOptions));

  // minor ticks
  slider.addMinorTick(range.min + 0.25 * range.getLength());
  slider.addMinorTick(range.min + 0.75 * range.getLength());

  // show/hide major ticks
  const majorTicksVisibleProperty = new Property(true);
  majorTicksVisibleProperty.link(visible => {
    slider.majorTicksVisible = visible;
  });
  const majorTicksCheckbox = new Checkbox(majorTicksVisibleProperty, new Text('Major ticks visible', {
    font: CHECKBOX_FONT
  }), {
    tandem: Tandem.OPT_OUT,
    left: slider.left,
    top: slider.bottom + 40
  });

  // show/hide minor ticks
  const minorTicksVisibleProperty = new Property(true);
  minorTicksVisibleProperty.link(visible => {
    slider.minorTicksVisible = visible;
  });
  const minorTicksCheckbox = new Checkbox(minorTicksVisibleProperty, new Text('Minor ticks visible', {
    font: CHECKBOX_FONT
  }), {
    tandem: Tandem.OPT_OUT,
    left: slider.left,
    top: majorTicksCheckbox.bottom + 40
  });

  // Checkbox to enable/disable slider
  const enabledCheckbox = new Checkbox(enabledProperty, new Text('Enable slider', {
    font: CHECKBOX_FONT
  }), {
    tandem: Tandem.OPT_OUT,
    left: slider.left,
    top: minorTicksCheckbox.bottom + 40
  });

  // restrict enabled range of slider
  const restrictedRangeProperty = new Property(false);
  restrictedRangeProperty.link(restrictedRange => {
    enabledRangeProperty.value = restrictedRange ? new Range(25, 75) : new Range(0, 100);
  });
  const enabledRangeCheckbox = new Checkbox(restrictedRangeProperty, new Text('Enable Range [25, 75]', {
    font: CHECKBOX_FONT
  }), {
    tandem: Tandem.OPT_OUT,
    left: slider.left,
    top: enabledCheckbox.bottom + 40
  });

  // If the user is holding down the thumb outside of the enabled range, and the enabled range expands, the value should
  // adjust to the new extremum of the range, see https://github.com/phetsims/mean-share-and-balance/issues/29
  const animateEnabledRangeProperty = new BooleanProperty(false);
  const animateEnabledRangeCheckbox = new Checkbox(animateEnabledRangeProperty, new Text('Animate Enabled Range', {
    font: CHECKBOX_FONT
  }), {
    tandem: Tandem.OPT_OUT,
    left: slider.left,
    top: enabledRangeCheckbox.bottom + 40
  });
  const enabledRangeStep = 0.1;
  stepTimer.addListener(() => {
    if (animateEnabledRangeProperty.value && enabledRangeProperty.value.min < enabledRangeProperty.value.max - enabledRangeStep) {
      enabledRangeProperty.value = new Range(Math.max(enabledRangeProperty.value.min + enabledRangeStep, 0), 75);
    }
  });

  // All of the controls related to the slider
  const controls = new VBox({
    align: 'left',
    spacing: 30,
    children: [majorTicksCheckbox, minorTicksCheckbox, enabledCheckbox, enabledRangeCheckbox, animateEnabledRangeCheckbox]
  });

  // Position the control based on the orientation of the slider
  const boxOptions = {
    spacing: 60,
    children: [slider, controls],
    center: layoutBounds.center
  };
  return orientation === 'horizontal' ? new VBox(boxOptions) : new HBox(boxOptions);
}

// Creates a demo for HSlider
export function demoHSlider(layoutBounds, options) {
  return demoSlider(layoutBounds, 'horizontal', options);
}

// Creates a demo for VSlider
export function demoVSlider(layoutBounds, options) {
  return demoSlider(layoutBounds, 'vertical', options);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIU2xpZGVyIiwiVlNsaWRlciIsIkNoZWNrYm94IiwiUmFuZ2UiLCJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIlRhbmRlbSIsIlByb3BlcnR5IiwiRGltZW5zaW9uMiIsIkZvbnQiLCJIQm94IiwiVGV4dCIsIlZCb3giLCJCb29sZWFuUHJvcGVydHkiLCJzdGVwVGltZXIiLCJDSEVDS0JPWF9GT05UIiwic2l6ZSIsImRlbW9TbGlkZXIiLCJsYXlvdXRCb3VuZHMiLCJvcmllbnRhdGlvbiIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJjZW50ZXIiLCJ0YW5kZW0iLCJSRVFVSVJFRCIsInBoZXRpb0Rlc2lnbmVkIiwicHJvcGVydHkiLCJyYW5nZSIsInRpY2tMYWJlbE9wdGlvbnMiLCJmb250IiwiZW5hYmxlZFJhbmdlUHJvcGVydHkiLCJzbGlkZXIiLCJ0cmFja1NpemUiLCJ0aHVtYlRvdWNoQXJlYVhEaWxhdGlvbiIsInRodW1iVG91Y2hBcmVhWURpbGF0aW9uIiwidGh1bWJNb3VzZUFyZWFYRGlsYXRpb24iLCJ0aHVtYk1vdXNlQXJlYVlEaWxhdGlvbiIsImxhYmVsQ29udGVudCIsImRlc2NyaXB0aW9uQ29udGVudCIsInBoZXRpb0VuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZCIsImVuYWJsZWRQcm9wZXJ0eSIsImFkZE1ham9yVGljayIsIm1pbiIsImdldENlbnRlciIsIm1heCIsImFkZE1pbm9yVGljayIsImdldExlbmd0aCIsIm1ham9yVGlja3NWaXNpYmxlUHJvcGVydHkiLCJsaW5rIiwidmlzaWJsZSIsIm1ham9yVGlja3NWaXNpYmxlIiwibWFqb3JUaWNrc0NoZWNrYm94IiwiT1BUX09VVCIsImxlZnQiLCJ0b3AiLCJib3R0b20iLCJtaW5vclRpY2tzVmlzaWJsZVByb3BlcnR5IiwibWlub3JUaWNrc1Zpc2libGUiLCJtaW5vclRpY2tzQ2hlY2tib3giLCJlbmFibGVkQ2hlY2tib3giLCJyZXN0cmljdGVkUmFuZ2VQcm9wZXJ0eSIsInJlc3RyaWN0ZWRSYW5nZSIsInZhbHVlIiwiZW5hYmxlZFJhbmdlQ2hlY2tib3giLCJhbmltYXRlRW5hYmxlZFJhbmdlUHJvcGVydHkiLCJhbmltYXRlRW5hYmxlZFJhbmdlQ2hlY2tib3giLCJlbmFibGVkUmFuZ2VTdGVwIiwiYWRkTGlzdGVuZXIiLCJNYXRoIiwiY29udHJvbHMiLCJhbGlnbiIsInNwYWNpbmciLCJjaGlsZHJlbiIsImJveE9wdGlvbnMiLCJkZW1vSFNsaWRlciIsImRlbW9WU2xpZGVyIl0sInNvdXJjZXMiOlsiZGVtb1NsaWRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEZW1vcyBmb3IgSFNsaWRlciBhbmQgVlNsaWRlclxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBTbGlkZXIgZnJvbSAnLi4vLi4vU2xpZGVyLmpzJztcclxuaW1wb3J0IEhTbGlkZXIsIHsgSFNsaWRlck9wdGlvbnMgfSBmcm9tICcuLi8uLi9IU2xpZGVyLmpzJztcclxuaW1wb3J0IFZTbGlkZXIgZnJvbSAnLi4vLi4vVlNsaWRlci5qcyc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi8uLi9DaGVja2JveC5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMsIEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCB7IEZvbnQsIEhCb3gsIE5vZGUsIFRleHQsIFZCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IHN0ZXBUaW1lciBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL3N0ZXBUaW1lci5qcyc7XHJcbmltcG9ydCB7IFN1bkRlbW9PcHRpb25zIH0gZnJvbSAnLi4vRGVtb3NTY3JlZW5WaWV3LmpzJztcclxuXHJcbmNvbnN0IENIRUNLQk9YX0ZPTlQgPSBuZXcgRm9udCggeyBzaXplOiAyMCB9ICk7XHJcblxyXG4vLyBVc2VkIGJ5IGRlbW9IU2xpZGVyIGFuZCBkZW1vVlNsaWRlclxyXG5mdW5jdGlvbiBkZW1vU2xpZGVyKCBsYXlvdXRCb3VuZHM6IEJvdW5kczIsIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcgfCAndmVydGljYWwnLCBwcm92aWRlZE9wdGlvbnM/OiBTdW5EZW1vT3B0aW9ucyApOiBOb2RlIHtcclxuXHJcbiAgY29uc3Qgb3B0aW9ucyA9IGNvbWJpbmVPcHRpb25zPFN1bkRlbW9PcHRpb25zPigge1xyXG4gICAgY2VudGVyOiBsYXlvdXRCb3VuZHMuY2VudGVyLFxyXG4gICAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRUQsXHJcbiAgICBwaGV0aW9EZXNpZ25lZDogdHJ1ZVxyXG4gIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMCApO1xyXG4gIGNvbnN0IHJhbmdlID0gbmV3IFJhbmdlKCAwLCAxMDAgKTtcclxuICBjb25zdCB0aWNrTGFiZWxPcHRpb25zID0geyBmb250OiBuZXcgRm9udCggeyBzaXplOiAxNiB9ICkgfTtcclxuXHJcbiAgY29uc3QgZW5hYmxlZFJhbmdlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG5ldyBSYW5nZSggMCwgMTAwICkgKTtcclxuXHJcbiAgbGV0IHNsaWRlcjogU2xpZGVyO1xyXG4gIGlmICggb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJyApIHtcclxuICAgIHNsaWRlciA9IG5ldyBIU2xpZGVyKCBwcm9wZXJ0eSwgcmFuZ2UsIG9wdGlvbml6ZTxTdW5EZW1vT3B0aW9ucywgRW1wdHlTZWxmT3B0aW9ucywgSFNsaWRlck9wdGlvbnM+KCkoIHtcclxuICAgICAgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggMzAwLCA1ICksXHJcblxyXG4gICAgICAvLyBEZW1vbnN0cmF0ZSBsYXJnZXIgeCBkaWxhdGlvbi5cclxuICAgICAgdGh1bWJUb3VjaEFyZWFYRGlsYXRpb246IDMwLFxyXG4gICAgICB0aHVtYlRvdWNoQXJlYVlEaWxhdGlvbjogMTUsXHJcbiAgICAgIHRodW1iTW91c2VBcmVhWERpbGF0aW9uOiAxMCxcclxuICAgICAgdGh1bWJNb3VzZUFyZWFZRGlsYXRpb246IDUsXHJcbiAgICAgIGVuYWJsZWRSYW5nZVByb3BlcnR5OiBlbmFibGVkUmFuZ2VQcm9wZXJ0eSxcclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgbGFiZWxDb250ZW50OiAnSG9yaXpvbnRhbCBTbGlkZXInLFxyXG4gICAgICBkZXNjcmlwdGlvbkNvbnRlbnQ6ICdUaGlzIGlzIGEgZGVzY3JpcHRpb24gb2YgdGhlIGhvcml6b250YWwgU2xpZGVyLicsXHJcblxyXG4gICAgICBwaGV0aW9FbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQ6IGZhbHNlXHJcbiAgICB9LCBvcHRpb25zICkgKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBzbGlkZXIgPSBuZXcgVlNsaWRlciggcHJvcGVydHksIHJhbmdlLCBvcHRpb25pemU8U3VuRGVtb09wdGlvbnMsIEVtcHR5U2VsZk9wdGlvbnMsIEhTbGlkZXJPcHRpb25zPigpKCB7XHJcbiAgICAgIHRyYWNrU2l6ZTogbmV3IERpbWVuc2lvbjIoIDUsIDMwMCApLFxyXG5cclxuICAgICAgLy8gRGVtb25zdHJhdGUgbGFyZ2VyIHkgZGlsYXRpb24sIHRvIHZlcmlmeSB0aGF0IFZTbGlkZXIgaXMgaGFuZGxpbmcgdGhpbmdzIGNvcnJlY3RseS5cclxuICAgICAgdGh1bWJUb3VjaEFyZWFYRGlsYXRpb246IDE1LFxyXG4gICAgICB0aHVtYlRvdWNoQXJlYVlEaWxhdGlvbjogMzAsXHJcbiAgICAgIHRodW1iTW91c2VBcmVhWERpbGF0aW9uOiA1LFxyXG4gICAgICB0aHVtYk1vdXNlQXJlYVlEaWxhdGlvbjogMTAsXHJcbiAgICAgIGVuYWJsZWRSYW5nZVByb3BlcnR5OiBlbmFibGVkUmFuZ2VQcm9wZXJ0eSxcclxuXHJcbiAgICAgIHBoZXRpb0VuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZDogZmFsc2VcclxuICAgIH0sIG9wdGlvbnMgKSApO1xyXG4gIH1cclxuXHJcbiAgLy8gU2V0dGFibGVcclxuICBjb25zdCBlbmFibGVkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCB0cnVlICk7XHJcbiAgc2xpZGVyLmVuYWJsZWRQcm9wZXJ0eSA9IGVuYWJsZWRQcm9wZXJ0eTtcclxuXHJcbiAgLy8gbWFqb3IgdGlja3NcclxuICBzbGlkZXIuYWRkTWFqb3JUaWNrKCByYW5nZS5taW4sIG5ldyBUZXh0KCByYW5nZS5taW4sIHRpY2tMYWJlbE9wdGlvbnMgKSApO1xyXG4gIHNsaWRlci5hZGRNYWpvclRpY2soIHJhbmdlLmdldENlbnRlcigpLCBuZXcgVGV4dCggcmFuZ2UuZ2V0Q2VudGVyKCksIHRpY2tMYWJlbE9wdGlvbnMgKSApO1xyXG4gIHNsaWRlci5hZGRNYWpvclRpY2soIHJhbmdlLm1heCwgbmV3IFRleHQoIHJhbmdlLm1heCwgdGlja0xhYmVsT3B0aW9ucyApICk7XHJcblxyXG4gIC8vIG1pbm9yIHRpY2tzXHJcbiAgc2xpZGVyLmFkZE1pbm9yVGljayggcmFuZ2UubWluICsgMC4yNSAqIHJhbmdlLmdldExlbmd0aCgpICk7XHJcbiAgc2xpZGVyLmFkZE1pbm9yVGljayggcmFuZ2UubWluICsgMC43NSAqIHJhbmdlLmdldExlbmd0aCgpICk7XHJcblxyXG4gIC8vIHNob3cvaGlkZSBtYWpvciB0aWNrc1xyXG4gIGNvbnN0IG1ham9yVGlja3NWaXNpYmxlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIHRydWUgKTtcclxuICBtYWpvclRpY2tzVmlzaWJsZVByb3BlcnR5LmxpbmsoIHZpc2libGUgPT4ge1xyXG4gICAgc2xpZGVyLm1ham9yVGlja3NWaXNpYmxlID0gdmlzaWJsZTtcclxuICB9ICk7XHJcbiAgY29uc3QgbWFqb3JUaWNrc0NoZWNrYm94ID0gbmV3IENoZWNrYm94KCBtYWpvclRpY2tzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgbmV3IFRleHQoICdNYWpvciB0aWNrcyB2aXNpYmxlJywgeyBmb250OiBDSEVDS0JPWF9GT05UIH0gKSwge1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5PUFRfT1VULFxyXG4gICAgICBsZWZ0OiBzbGlkZXIubGVmdCxcclxuICAgICAgdG9wOiBzbGlkZXIuYm90dG9tICsgNDBcclxuICAgIH0gKTtcclxuXHJcbiAgLy8gc2hvdy9oaWRlIG1pbm9yIHRpY2tzXHJcbiAgY29uc3QgbWlub3JUaWNrc1Zpc2libGVQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggdHJ1ZSApO1xyXG4gIG1pbm9yVGlja3NWaXNpYmxlUHJvcGVydHkubGluayggdmlzaWJsZSA9PiB7XHJcbiAgICBzbGlkZXIubWlub3JUaWNrc1Zpc2libGUgPSB2aXNpYmxlO1xyXG4gIH0gKTtcclxuICBjb25zdCBtaW5vclRpY2tzQ2hlY2tib3ggPSBuZXcgQ2hlY2tib3goIG1pbm9yVGlja3NWaXNpYmxlUHJvcGVydHksXHJcbiAgICBuZXcgVGV4dCggJ01pbm9yIHRpY2tzIHZpc2libGUnLCB7IGZvbnQ6IENIRUNLQk9YX0ZPTlQgfSApLCB7XHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICAgIGxlZnQ6IHNsaWRlci5sZWZ0LFxyXG4gICAgICB0b3A6IG1ham9yVGlja3NDaGVja2JveC5ib3R0b20gKyA0MFxyXG4gICAgfSApO1xyXG5cclxuICAvLyBDaGVja2JveCB0byBlbmFibGUvZGlzYWJsZSBzbGlkZXJcclxuICBjb25zdCBlbmFibGVkQ2hlY2tib3ggPSBuZXcgQ2hlY2tib3goIGVuYWJsZWRQcm9wZXJ0eSxcclxuICAgIG5ldyBUZXh0KCAnRW5hYmxlIHNsaWRlcicsIHsgZm9udDogQ0hFQ0tCT1hfRk9OVCB9ICksIHtcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCxcclxuICAgICAgbGVmdDogc2xpZGVyLmxlZnQsXHJcbiAgICAgIHRvcDogbWlub3JUaWNrc0NoZWNrYm94LmJvdHRvbSArIDQwXHJcbiAgICB9ICk7XHJcblxyXG4gIC8vIHJlc3RyaWN0IGVuYWJsZWQgcmFuZ2Ugb2Ygc2xpZGVyXHJcbiAgY29uc3QgcmVzdHJpY3RlZFJhbmdlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIGZhbHNlICk7XHJcbiAgcmVzdHJpY3RlZFJhbmdlUHJvcGVydHkubGluayggcmVzdHJpY3RlZFJhbmdlID0+IHtcclxuICAgIGVuYWJsZWRSYW5nZVByb3BlcnR5LnZhbHVlID0gcmVzdHJpY3RlZFJhbmdlID8gbmV3IFJhbmdlKCAyNSwgNzUgKSA6IG5ldyBSYW5nZSggMCwgMTAwICk7XHJcbiAgfSApO1xyXG5cclxuICBjb25zdCBlbmFibGVkUmFuZ2VDaGVja2JveCA9IG5ldyBDaGVja2JveCggcmVzdHJpY3RlZFJhbmdlUHJvcGVydHksXHJcbiAgICBuZXcgVGV4dCggJ0VuYWJsZSBSYW5nZSBbMjUsIDc1XScsIHsgZm9udDogQ0hFQ0tCT1hfRk9OVCB9ICksIHtcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCxcclxuICAgICAgbGVmdDogc2xpZGVyLmxlZnQsXHJcbiAgICAgIHRvcDogZW5hYmxlZENoZWNrYm94LmJvdHRvbSArIDQwXHJcbiAgICB9ICk7XHJcblxyXG4gIC8vIElmIHRoZSB1c2VyIGlzIGhvbGRpbmcgZG93biB0aGUgdGh1bWIgb3V0c2lkZSBvZiB0aGUgZW5hYmxlZCByYW5nZSwgYW5kIHRoZSBlbmFibGVkIHJhbmdlIGV4cGFuZHMsIHRoZSB2YWx1ZSBzaG91bGRcclxuICAvLyBhZGp1c3QgdG8gdGhlIG5ldyBleHRyZW11bSBvZiB0aGUgcmFuZ2UsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvbWVhbi1zaGFyZS1hbmQtYmFsYW5jZS9pc3N1ZXMvMjlcclxuICBjb25zdCBhbmltYXRlRW5hYmxlZFJhbmdlUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSApO1xyXG4gIGNvbnN0IGFuaW1hdGVFbmFibGVkUmFuZ2VDaGVja2JveCA9IG5ldyBDaGVja2JveCggYW5pbWF0ZUVuYWJsZWRSYW5nZVByb3BlcnR5LCBuZXcgVGV4dCggJ0FuaW1hdGUgRW5hYmxlZCBSYW5nZScsIHsgZm9udDogQ0hFQ0tCT1hfRk9OVCB9ICksIHtcclxuICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICBsZWZ0OiBzbGlkZXIubGVmdCxcclxuICAgIHRvcDogZW5hYmxlZFJhbmdlQ2hlY2tib3guYm90dG9tICsgNDBcclxuICB9ICk7XHJcblxyXG4gIGNvbnN0IGVuYWJsZWRSYW5nZVN0ZXAgPSAwLjE7XHJcbiAgc3RlcFRpbWVyLmFkZExpc3RlbmVyKCAoKSA9PiB7XHJcbiAgICBpZiAoIGFuaW1hdGVFbmFibGVkUmFuZ2VQcm9wZXJ0eS52YWx1ZSAmJiBlbmFibGVkUmFuZ2VQcm9wZXJ0eS52YWx1ZS5taW4gPCBlbmFibGVkUmFuZ2VQcm9wZXJ0eS52YWx1ZS5tYXggLSBlbmFibGVkUmFuZ2VTdGVwICkge1xyXG4gICAgICBlbmFibGVkUmFuZ2VQcm9wZXJ0eS52YWx1ZSA9IG5ldyBSYW5nZSggTWF0aC5tYXgoIGVuYWJsZWRSYW5nZVByb3BlcnR5LnZhbHVlLm1pbiArIGVuYWJsZWRSYW5nZVN0ZXAsIDAgKSwgNzUgKTtcclxuICAgIH1cclxuICB9ICk7XHJcblxyXG4gIC8vIEFsbCBvZiB0aGUgY29udHJvbHMgcmVsYXRlZCB0byB0aGUgc2xpZGVyXHJcbiAgY29uc3QgY29udHJvbHMgPSBuZXcgVkJveCgge1xyXG4gICAgYWxpZ246ICdsZWZ0JyxcclxuICAgIHNwYWNpbmc6IDMwLFxyXG4gICAgY2hpbGRyZW46IFsgbWFqb3JUaWNrc0NoZWNrYm94LCBtaW5vclRpY2tzQ2hlY2tib3gsIGVuYWJsZWRDaGVja2JveCwgZW5hYmxlZFJhbmdlQ2hlY2tib3gsIGFuaW1hdGVFbmFibGVkUmFuZ2VDaGVja2JveCBdXHJcbiAgfSApO1xyXG5cclxuICAvLyBQb3NpdGlvbiB0aGUgY29udHJvbCBiYXNlZCBvbiB0aGUgb3JpZW50YXRpb24gb2YgdGhlIHNsaWRlclxyXG4gIGNvbnN0IGJveE9wdGlvbnMgPSB7XHJcbiAgICBzcGFjaW5nOiA2MCxcclxuICAgIGNoaWxkcmVuOiBbIHNsaWRlciwgY29udHJvbHMgXSxcclxuICAgIGNlbnRlcjogbGF5b3V0Qm91bmRzLmNlbnRlclxyXG4gIH07XHJcbiAgcmV0dXJuICggb3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJyApID8gbmV3IFZCb3goIGJveE9wdGlvbnMgKSA6IG5ldyBIQm94KCBib3hPcHRpb25zICk7XHJcbn1cclxuXHJcbi8vIENyZWF0ZXMgYSBkZW1vIGZvciBIU2xpZGVyXHJcbmV4cG9ydCBmdW5jdGlvbiBkZW1vSFNsaWRlciggbGF5b3V0Qm91bmRzOiBCb3VuZHMyLCBvcHRpb25zPzogU3VuRGVtb09wdGlvbnMgKTogTm9kZSB7XHJcbiAgcmV0dXJuIGRlbW9TbGlkZXIoIGxheW91dEJvdW5kcywgJ2hvcml6b250YWwnLCBvcHRpb25zICk7XHJcbn1cclxuXHJcbi8vIENyZWF0ZXMgYSBkZW1vIGZvciBWU2xpZGVyXHJcbmV4cG9ydCBmdW5jdGlvbiBkZW1vVlNsaWRlciggbGF5b3V0Qm91bmRzOiBCb3VuZHMyLCBvcHRpb25zPzogU3VuRGVtb09wdGlvbnMgKTogTm9kZSB7XHJcbiAgcmV0dXJuIGRlbW9TbGlkZXIoIGxheW91dEJvdW5kcywgJ3ZlcnRpY2FsJywgb3B0aW9ucyApO1xyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLE9BQU8sTUFBMEIsa0JBQWtCO0FBQzFELE9BQU9DLE9BQU8sTUFBTSxrQkFBa0I7QUFDdEMsT0FBT0MsUUFBUSxNQUFNLG1CQUFtQjtBQUV4QyxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFNBQVMsSUFBSUMsY0FBYyxRQUEwQix1Q0FBdUM7QUFDbkcsT0FBT0MsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLFVBQVUsTUFBTSxrQ0FBa0M7QUFDekQsU0FBU0MsSUFBSSxFQUFFQyxJQUFJLEVBQVFDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUNoRixPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLFNBQVMsTUFBTSxrQ0FBa0M7QUFHeEQsTUFBTUMsYUFBYSxHQUFHLElBQUlOLElBQUksQ0FBRTtFQUFFTyxJQUFJLEVBQUU7QUFBRyxDQUFFLENBQUM7O0FBRTlDO0FBQ0EsU0FBU0MsVUFBVUEsQ0FBRUMsWUFBcUIsRUFBRUMsV0FBc0MsRUFBRUMsZUFBZ0MsRUFBUztFQUUzSCxNQUFNQyxPQUFPLEdBQUdoQixjQUFjLENBQWtCO0lBQzlDaUIsTUFBTSxFQUFFSixZQUFZLENBQUNJLE1BQU07SUFDM0JDLE1BQU0sRUFBRWpCLE1BQU0sQ0FBQ2tCLFFBQVE7SUFDdkJDLGNBQWMsRUFBRTtFQUNsQixDQUFDLEVBQUVMLGVBQWdCLENBQUM7RUFFcEIsTUFBTU0sUUFBUSxHQUFHLElBQUluQixRQUFR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