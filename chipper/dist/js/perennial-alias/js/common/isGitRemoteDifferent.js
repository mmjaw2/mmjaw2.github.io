// Copyright 2021, University of Colorado Boulder

/**
 * Whether the current branch's remote SHA differs from the current SHA
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const assert = require('assert');
const getBranch = require('./getBranch');
const getRemoteBranchSHAs = require('./getRemoteBranchSHAs');
const gitRevParse = require('./gitRevParse');

/**
 * Whether the current branch's remote SHA differs from the current SHA
 * @public
 *
 * @param {string} repo - The repository name
 * @returns {Promise.<boolean>}
 */
module.exports = async function (repo) {
  assert(typeof repo === 'string');
  const branch = await getBranch(repo);
  const currentSHA = await gitRevParse(repo, 'HEAD');
  const remoteSHA = (await getRemoteBranchSHAs(repo))[branch];
  return currentSHA !== remoteSHA;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwiZ2V0QnJhbmNoIiwiZ2V0UmVtb3RlQnJhbmNoU0hBcyIsImdpdFJldlBhcnNlIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcG8iLCJicmFuY2giLCJjdXJyZW50U0hBIiwicmVtb3RlU0hBIl0sInNvdXJjZXMiOlsiaXNHaXRSZW1vdGVEaWZmZXJlbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgYnJhbmNoJ3MgcmVtb3RlIFNIQSBkaWZmZXJzIGZyb20gdGhlIGN1cnJlbnQgU0hBXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCAnYXNzZXJ0JyApO1xyXG5jb25zdCBnZXRCcmFuY2ggPSByZXF1aXJlKCAnLi9nZXRCcmFuY2gnICk7XHJcbmNvbnN0IGdldFJlbW90ZUJyYW5jaFNIQXMgPSByZXF1aXJlKCAnLi9nZXRSZW1vdGVCcmFuY2hTSEFzJyApO1xyXG5jb25zdCBnaXRSZXZQYXJzZSA9IHJlcXVpcmUoICcuL2dpdFJldlBhcnNlJyApO1xyXG5cclxuLyoqXHJcbiAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgYnJhbmNoJ3MgcmVtb3RlIFNIQSBkaWZmZXJzIGZyb20gdGhlIGN1cnJlbnQgU0hBXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlcG8gLSBUaGUgcmVwb3NpdG9yeSBuYW1lXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlLjxib29sZWFuPn1cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24oIHJlcG8gKSB7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgcmVwbyA9PT0gJ3N0cmluZycgKTtcclxuXHJcbiAgY29uc3QgYnJhbmNoID0gYXdhaXQgZ2V0QnJhbmNoKCByZXBvICk7XHJcbiAgY29uc3QgY3VycmVudFNIQSA9IGF3YWl0IGdpdFJldlBhcnNlKCByZXBvLCAnSEVBRCcgKTtcclxuICBjb25zdCByZW1vdGVTSEEgPSAoIGF3YWl0IGdldFJlbW90ZUJyYW5jaFNIQXMoIHJlcG8gKSApWyBicmFuY2ggXTtcclxuXHJcbiAgcmV0dXJuIGN1cnJlbnRTSEEgIT09IHJlbW90ZVNIQTtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUUsUUFBUyxDQUFDO0FBQ2xDLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFFLGFBQWMsQ0FBQztBQUMxQyxNQUFNRSxtQkFBbUIsR0FBR0YsT0FBTyxDQUFFLHVCQUF3QixDQUFDO0FBQzlELE1BQU1HLFdBQVcsR0FBR0gsT0FBTyxDQUFFLGVBQWdCLENBQUM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FJLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLGdCQUFnQkMsSUFBSSxFQUFHO0VBQ3RDUCxNQUFNLENBQUUsT0FBT08sSUFBSSxLQUFLLFFBQVMsQ0FBQztFQUVsQyxNQUFNQyxNQUFNLEdBQUcsTUFBTU4sU0FBUyxDQUFFSyxJQUFLLENBQUM7RUFDdEMsTUFBTUUsVUFBVSxHQUFHLE1BQU1MLFdBQVcsQ0FBRUcsSUFBSSxFQUFFLE1BQU8sQ0FBQztFQUNwRCxNQUFNRyxTQUFTLEdBQUcsQ0FBRSxNQUFNUCxtQkFBbUIsQ0FBRUksSUFBSyxDQUFDLEVBQUlDLE1BQU0sQ0FBRTtFQUVqRSxPQUFPQyxVQUFVLEtBQUtDLFNBQVM7QUFDakMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==