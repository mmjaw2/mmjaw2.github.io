// Copyright 2022, University of Colorado Boulder

/**
 * Returns whether a repo is published (not a prototype)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const gitCheckout = require('./gitCheckout');
const fs = require('fs');

/**
 * Returns whether a repo is published (not a prototype)
 * @public
 *
 * NOTE: Needs to be on main branch
 *
 * @param {string} repo
 *
 * @returns {Promise<boolean>}
 */
module.exports = async function (repo) {
  await gitCheckout(repo, 'main');
  const packageObject = JSON.parse(fs.readFileSync(`../${repo}/package.json`, 'utf8'));
  return !!packageObject?.phet?.published;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnaXRDaGVja291dCIsInJlcXVpcmUiLCJmcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXBvIiwicGFja2FnZU9iamVjdCIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsInBoZXQiLCJwdWJsaXNoZWQiXSwic291cmNlcyI6WyJpc1B1Ymxpc2hlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgcmVwbyBpcyBwdWJsaXNoZWQgKG5vdCBhIHByb3RvdHlwZSlcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmNvbnN0IGdpdENoZWNrb3V0ID0gcmVxdWlyZSggJy4vZ2l0Q2hlY2tvdXQnICk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSggJ2ZzJyApO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhIHJlcG8gaXMgcHVibGlzaGVkIChub3QgYSBwcm90b3R5cGUpXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogTk9URTogTmVlZHMgdG8gYmUgb24gbWFpbiBicmFuY2hcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlcG9cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59XHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uKCByZXBvICkge1xyXG4gIGF3YWl0IGdpdENoZWNrb3V0KCByZXBvLCAnbWFpbicgKTtcclxuICBjb25zdCBwYWNrYWdlT2JqZWN0ID0gSlNPTi5wYXJzZSggZnMucmVhZEZpbGVTeW5jKCBgLi4vJHtyZXBvfS9wYWNrYWdlLmpzb25gLCAndXRmOCcgKSApO1xyXG5cclxuICByZXR1cm4gISFwYWNrYWdlT2JqZWN0Py5waGV0Py5wdWJsaXNoZWQ7XHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFFLGVBQWdCLENBQUM7QUFDOUMsTUFBTUMsRUFBRSxHQUFHRCxPQUFPLENBQUUsSUFBSyxDQUFDOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBRSxNQUFNLENBQUNDLE9BQU8sR0FBRyxnQkFBZ0JDLElBQUksRUFBRztFQUN0QyxNQUFNTCxXQUFXLENBQUVLLElBQUksRUFBRSxNQUFPLENBQUM7RUFDakMsTUFBTUMsYUFBYSxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBRU4sRUFBRSxDQUFDTyxZQUFZLENBQUcsTUFBS0osSUFBSyxlQUFjLEVBQUUsTUFBTyxDQUFFLENBQUM7RUFFeEYsT0FBTyxDQUFDLENBQUNDLGFBQWEsRUFBRUksSUFBSSxFQUFFQyxTQUFTO0FBQ3pDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=