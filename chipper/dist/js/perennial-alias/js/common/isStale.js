// Copyright 2020, University of Colorado Boulder

/**
 * Asynchronously checks whether a repo is not up-to-date with origin/main
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const getRemoteBranchSHAs = require('./getRemoteBranchSHAs');
const gitRevParse = require('./gitRevParse');

/**
 * Asynchronously checks whether a repo is not up-to-date with origin/main
 * @public
 *
 * @param {string} repo - The repository name
 * @returns {Promise.<boolean>}
 * @rejects {ExecuteError}
 */
module.exports = async function (repo) {
  const currentSHA = await gitRevParse(repo, 'main');
  const remoteSHA = (await getRemoteBranchSHAs(repo)).main;
  return currentSHA !== remoteSHA;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRSZW1vdGVCcmFuY2hTSEFzIiwicmVxdWlyZSIsImdpdFJldlBhcnNlIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcG8iLCJjdXJyZW50U0hBIiwicmVtb3RlU0hBIiwibWFpbiJdLCJzb3VyY2VzIjpbImlzU3RhbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IGNoZWNrcyB3aGV0aGVyIGEgcmVwbyBpcyBub3QgdXAtdG8tZGF0ZSB3aXRoIG9yaWdpbi9tYWluXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5jb25zdCBnZXRSZW1vdGVCcmFuY2hTSEFzID0gcmVxdWlyZSggJy4vZ2V0UmVtb3RlQnJhbmNoU0hBcycgKTtcclxuY29uc3QgZ2l0UmV2UGFyc2UgPSByZXF1aXJlKCAnLi9naXRSZXZQYXJzZScgKTtcclxuXHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBjaGVja3Mgd2hldGhlciBhIHJlcG8gaXMgbm90IHVwLXRvLWRhdGUgd2l0aCBvcmlnaW4vbWFpblxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXBvIC0gVGhlIHJlcG9zaXRvcnkgbmFtZVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48Ym9vbGVhbj59XHJcbiAqIEByZWplY3RzIHtFeGVjdXRlRXJyb3J9XHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uKCByZXBvICkge1xyXG4gIGNvbnN0IGN1cnJlbnRTSEEgPSBhd2FpdCBnaXRSZXZQYXJzZSggcmVwbywgJ21haW4nICk7XHJcbiAgY29uc3QgcmVtb3RlU0hBID0gKCBhd2FpdCBnZXRSZW1vdGVCcmFuY2hTSEFzKCByZXBvICkgKS5tYWluO1xyXG5cclxuICByZXR1cm4gY3VycmVudFNIQSAhPT0gcmVtb3RlU0hBO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxtQkFBbUIsR0FBR0MsT0FBTyxDQUFFLHVCQUF3QixDQUFDO0FBQzlELE1BQU1DLFdBQVcsR0FBR0QsT0FBTyxDQUFFLGVBQWdCLENBQUM7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUUsTUFBTSxDQUFDQyxPQUFPLEdBQUcsZ0JBQWdCQyxJQUFJLEVBQUc7RUFDdEMsTUFBTUMsVUFBVSxHQUFHLE1BQU1KLFdBQVcsQ0FBRUcsSUFBSSxFQUFFLE1BQU8sQ0FBQztFQUNwRCxNQUFNRSxTQUFTLEdBQUcsQ0FBRSxNQUFNUCxtQkFBbUIsQ0FBRUssSUFBSyxDQUFDLEVBQUdHLElBQUk7RUFFNUQsT0FBT0YsVUFBVSxLQUFLQyxTQUFTO0FBQ2pDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=