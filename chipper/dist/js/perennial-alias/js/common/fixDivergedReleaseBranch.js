// Copyright 2023, University of Colorado Boulder

/**
 * Does some branch changes so that a releaseBranch's dependency SHA matches a named branch
 *
 * For example, gravity-and-orbits 1.6 has a dependencies.json that says joist is at X. If there is a joist branch
 * named 'gravity-and-orbits-1.6', it SHOULD point at X. If it doesn't, we'll change it to point at X. If we change it,
 * we also want to not have the old SHAs garbage collected, so we create 'gravity-and-orbits-1.6-old' to point to it.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const execute = require('./execute');
const getBranchDependencies = require('./getBranchDependencies');
const getBranches = require('./getBranches');
const gitCheckout = require('./gitCheckout');
const gitCreateBranch = require('./gitCreateBranch');
const gitPush = require('./gitPush');
const gitRevParse = require('./gitRevParse');
const winston = require('../../../../../../perennial-alias/node_modules/winston');
const buildLocal = require('./buildLocal');
const Octokit = require('@octokit/rest'); // eslint-disable-line require-statement-match

/**
 * Does some branch changes so that a releaseBranch's dependency SHA matches a named branch
 * @public
 *
 * @param {string} repo - The simulation's repository
 * @param {string} branch - The branch name
 * @param {string} commonRepo
 * @returns {Promise}
 */
module.exports = async function (repo, branch, commonRepo) {
  const commonBranch = `${repo}-${branch}`;
  const commonOldBranch = `${commonBranch}-old`;
  const commonRepoBranches = await getBranches(commonRepo);
  if (!commonRepoBranches.includes(commonBranch)) {
    throw new Error(`Branch ${commonBranch} does not exist in ${commonRepo}`);
  }
  if (commonRepoBranches.includes(commonOldBranch)) {
    throw new Error(`Branch ${commonOldBranch} already exists in ${commonRepo}. This happened twice, please manually fix`);
  }
  const dependencies = await getBranchDependencies(repo, branch);
  const sha = dependencies[commonRepo].sha;
  if (!sha) {
    throw new Error('We do not have a working SHA');
  }
  const octokit = new Octokit({
    auth: buildLocal.developerGithubAccessToken
  });
  const canForcePush = (await octokit.request(`GET /repos/phetsims/${commonRepo}/branches/${commonBranch}/protection`, {
    owner: 'phetsims',
    repo: commonRepo,
    branch: commonBranch,
    headers: {
      'X-GitHub-Api-Version': '2022-11-28'
    }
  })).data.allow_force_pushes.enabled;
  const protectionSettings = {
    owner: 'phetsims',
    repo: commonRepo,
    branch: commonBranch,
    required_status_checks: null,
    enforce_admins: null,
    required_pull_request_reviews: null,
    restrictions: null,
    allow_force_pushes: false,
    allow_deletions: false,
    headers: {
      'X-GitHub-Api-Version': '2022-11-28'
    }
  };
  if (!canForcePush) {
    winston.info('Disabling force push prevention');
    protectionSettings.allow_force_pushes = true;
    await octokit.request(`PUT /repos/phetsims/${commonRepo}/branches/${commonBranch}/protection`, protectionSettings);
  }

  // Set up 'old' branch, in order to save history
  await gitCheckout(commonRepo, commonBranch);
  winston.info(`Creating ${commonOldBranch} in ${commonRepo} with ${await gitRevParse(commonRepo, 'HEAD')}`);
  await gitCreateBranch(commonRepo, commonOldBranch);
  await gitPush(commonRepo, commonOldBranch);

  // Fix the branch with the proper name
  await gitCheckout(commonRepo, commonBranch);
  winston.info(`Moving ${commonBranch} in ${commonRepo} to ${sha}`);
  await execute('git', ['reset', '--hard', sha], `../${commonRepo}`);
  await execute('git', ['push', '-f', '-u', 'origin', commonBranch], `../${commonRepo}`);
  if (!canForcePush) {
    winston.info('Enabling force push prevention');
    protectionSettings.allow_force_pushes = false;
    await octokit.request(`PUT /repos/phetsims/${commonRepo}/branches/${commonBranch}/protection`, protectionSettings);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjdXRlIiwicmVxdWlyZSIsImdldEJyYW5jaERlcGVuZGVuY2llcyIsImdldEJyYW5jaGVzIiwiZ2l0Q2hlY2tvdXQiLCJnaXRDcmVhdGVCcmFuY2giLCJnaXRQdXNoIiwiZ2l0UmV2UGFyc2UiLCJ3aW5zdG9uIiwiYnVpbGRMb2NhbCIsIk9jdG9raXQiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVwbyIsImJyYW5jaCIsImNvbW1vblJlcG8iLCJjb21tb25CcmFuY2giLCJjb21tb25PbGRCcmFuY2giLCJjb21tb25SZXBvQnJhbmNoZXMiLCJpbmNsdWRlcyIsIkVycm9yIiwiZGVwZW5kZW5jaWVzIiwic2hhIiwib2N0b2tpdCIsImF1dGgiLCJkZXZlbG9wZXJHaXRodWJBY2Nlc3NUb2tlbiIsImNhbkZvcmNlUHVzaCIsInJlcXVlc3QiLCJvd25lciIsImhlYWRlcnMiLCJkYXRhIiwiYWxsb3dfZm9yY2VfcHVzaGVzIiwiZW5hYmxlZCIsInByb3RlY3Rpb25TZXR0aW5ncyIsInJlcXVpcmVkX3N0YXR1c19jaGVja3MiLCJlbmZvcmNlX2FkbWlucyIsInJlcXVpcmVkX3B1bGxfcmVxdWVzdF9yZXZpZXdzIiwicmVzdHJpY3Rpb25zIiwiYWxsb3dfZGVsZXRpb25zIiwiaW5mbyJdLCJzb3VyY2VzIjpbImZpeERpdmVyZ2VkUmVsZWFzZUJyYW5jaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRG9lcyBzb21lIGJyYW5jaCBjaGFuZ2VzIHNvIHRoYXQgYSByZWxlYXNlQnJhbmNoJ3MgZGVwZW5kZW5jeSBTSEEgbWF0Y2hlcyBhIG5hbWVkIGJyYW5jaFxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgZ3Jhdml0eS1hbmQtb3JiaXRzIDEuNiBoYXMgYSBkZXBlbmRlbmNpZXMuanNvbiB0aGF0IHNheXMgam9pc3QgaXMgYXQgWC4gSWYgdGhlcmUgaXMgYSBqb2lzdCBicmFuY2hcclxuICogbmFtZWQgJ2dyYXZpdHktYW5kLW9yYml0cy0xLjYnLCBpdCBTSE9VTEQgcG9pbnQgYXQgWC4gSWYgaXQgZG9lc24ndCwgd2UnbGwgY2hhbmdlIGl0IHRvIHBvaW50IGF0IFguIElmIHdlIGNoYW5nZSBpdCxcclxuICogd2UgYWxzbyB3YW50IHRvIG5vdCBoYXZlIHRoZSBvbGQgU0hBcyBnYXJiYWdlIGNvbGxlY3RlZCwgc28gd2UgY3JlYXRlICdncmF2aXR5LWFuZC1vcmJpdHMtMS42LW9sZCcgdG8gcG9pbnQgdG8gaXQuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5jb25zdCBleGVjdXRlID0gcmVxdWlyZSggJy4vZXhlY3V0ZScgKTtcclxuY29uc3QgZ2V0QnJhbmNoRGVwZW5kZW5jaWVzID0gcmVxdWlyZSggJy4vZ2V0QnJhbmNoRGVwZW5kZW5jaWVzJyApO1xyXG5jb25zdCBnZXRCcmFuY2hlcyA9IHJlcXVpcmUoICcuL2dldEJyYW5jaGVzJyApO1xyXG5jb25zdCBnaXRDaGVja291dCA9IHJlcXVpcmUoICcuL2dpdENoZWNrb3V0JyApO1xyXG5jb25zdCBnaXRDcmVhdGVCcmFuY2ggPSByZXF1aXJlKCAnLi9naXRDcmVhdGVCcmFuY2gnICk7XHJcbmNvbnN0IGdpdFB1c2ggPSByZXF1aXJlKCAnLi9naXRQdXNoJyApO1xyXG5jb25zdCBnaXRSZXZQYXJzZSA9IHJlcXVpcmUoICcuL2dpdFJldlBhcnNlJyApO1xyXG5jb25zdCB3aW5zdG9uID0gcmVxdWlyZSggJ3dpbnN0b24nICk7XHJcbmNvbnN0IGJ1aWxkTG9jYWwgPSByZXF1aXJlKCAnLi9idWlsZExvY2FsJyApO1xyXG5jb25zdCBPY3Rva2l0ID0gcmVxdWlyZSggJ0BvY3Rva2l0L3Jlc3QnICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1zdGF0ZW1lbnQtbWF0Y2hcclxuXHJcbi8qKlxyXG4gKiBEb2VzIHNvbWUgYnJhbmNoIGNoYW5nZXMgc28gdGhhdCBhIHJlbGVhc2VCcmFuY2gncyBkZXBlbmRlbmN5IFNIQSBtYXRjaGVzIGEgbmFtZWQgYnJhbmNoXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlcG8gLSBUaGUgc2ltdWxhdGlvbidzIHJlcG9zaXRvcnlcclxuICogQHBhcmFtIHtzdHJpbmd9IGJyYW5jaCAtIFRoZSBicmFuY2ggbmFtZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tbW9uUmVwb1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24oIHJlcG8sIGJyYW5jaCwgY29tbW9uUmVwbyApIHtcclxuXHJcbiAgY29uc3QgY29tbW9uQnJhbmNoID0gYCR7cmVwb30tJHticmFuY2h9YDtcclxuICBjb25zdCBjb21tb25PbGRCcmFuY2ggPSBgJHtjb21tb25CcmFuY2h9LW9sZGA7XHJcblxyXG4gIGNvbnN0IGNvbW1vblJlcG9CcmFuY2hlcyA9IGF3YWl0IGdldEJyYW5jaGVzKCBjb21tb25SZXBvICk7XHJcblxyXG4gIGlmICggIWNvbW1vblJlcG9CcmFuY2hlcy5pbmNsdWRlcyggY29tbW9uQnJhbmNoICkgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoIGBCcmFuY2ggJHtjb21tb25CcmFuY2h9IGRvZXMgbm90IGV4aXN0IGluICR7Y29tbW9uUmVwb31gICk7XHJcbiAgfVxyXG4gIGlmICggY29tbW9uUmVwb0JyYW5jaGVzLmluY2x1ZGVzKCBjb21tb25PbGRCcmFuY2ggKSApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggYEJyYW5jaCAke2NvbW1vbk9sZEJyYW5jaH0gYWxyZWFkeSBleGlzdHMgaW4gJHtjb21tb25SZXBvfS4gVGhpcyBoYXBwZW5lZCB0d2ljZSwgcGxlYXNlIG1hbnVhbGx5IGZpeGAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlcGVuZGVuY2llcyA9IGF3YWl0IGdldEJyYW5jaERlcGVuZGVuY2llcyggcmVwbywgYnJhbmNoICk7XHJcbiAgY29uc3Qgc2hhID0gZGVwZW5kZW5jaWVzWyBjb21tb25SZXBvIF0uc2hhO1xyXG4gIGlmICggIXNoYSApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggJ1dlIGRvIG5vdCBoYXZlIGEgd29ya2luZyBTSEEnICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBvY3Rva2l0ID0gbmV3IE9jdG9raXQoIHtcclxuICAgIGF1dGg6IGJ1aWxkTG9jYWwuZGV2ZWxvcGVyR2l0aHViQWNjZXNzVG9rZW5cclxuICB9ICk7XHJcblxyXG4gIGNvbnN0IGNhbkZvcmNlUHVzaCA9ICggYXdhaXQgb2N0b2tpdC5yZXF1ZXN0KCBgR0VUIC9yZXBvcy9waGV0c2ltcy8ke2NvbW1vblJlcG99L2JyYW5jaGVzLyR7Y29tbW9uQnJhbmNofS9wcm90ZWN0aW9uYCwge1xyXG4gICAgb3duZXI6ICdwaGV0c2ltcycsXHJcbiAgICByZXBvOiBjb21tb25SZXBvLFxyXG4gICAgYnJhbmNoOiBjb21tb25CcmFuY2gsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICdYLUdpdEh1Yi1BcGktVmVyc2lvbic6ICcyMDIyLTExLTI4J1xyXG4gICAgfVxyXG4gIH0gKSApLmRhdGEuYWxsb3dfZm9yY2VfcHVzaGVzLmVuYWJsZWQ7XHJcblxyXG4gIGNvbnN0IHByb3RlY3Rpb25TZXR0aW5ncyA9IHtcclxuICAgIG93bmVyOiAncGhldHNpbXMnLFxyXG4gICAgcmVwbzogY29tbW9uUmVwbyxcclxuICAgIGJyYW5jaDogY29tbW9uQnJhbmNoLFxyXG4gICAgcmVxdWlyZWRfc3RhdHVzX2NoZWNrczogbnVsbCxcclxuICAgIGVuZm9yY2VfYWRtaW5zOiBudWxsLFxyXG4gICAgcmVxdWlyZWRfcHVsbF9yZXF1ZXN0X3Jldmlld3M6IG51bGwsXHJcbiAgICByZXN0cmljdGlvbnM6IG51bGwsXHJcbiAgICBhbGxvd19mb3JjZV9wdXNoZXM6IGZhbHNlLFxyXG4gICAgYWxsb3dfZGVsZXRpb25zOiBmYWxzZSxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ1gtR2l0SHViLUFwaS1WZXJzaW9uJzogJzIwMjItMTEtMjgnXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgaWYgKCAhY2FuRm9yY2VQdXNoICkge1xyXG4gICAgd2luc3Rvbi5pbmZvKCAnRGlzYWJsaW5nIGZvcmNlIHB1c2ggcHJldmVudGlvbicgKTtcclxuICAgIHByb3RlY3Rpb25TZXR0aW5ncy5hbGxvd19mb3JjZV9wdXNoZXMgPSB0cnVlO1xyXG4gICAgYXdhaXQgb2N0b2tpdC5yZXF1ZXN0KCBgUFVUIC9yZXBvcy9waGV0c2ltcy8ke2NvbW1vblJlcG99L2JyYW5jaGVzLyR7Y29tbW9uQnJhbmNofS9wcm90ZWN0aW9uYCwgcHJvdGVjdGlvblNldHRpbmdzICk7XHJcbiAgfVxyXG5cclxuICAvLyBTZXQgdXAgJ29sZCcgYnJhbmNoLCBpbiBvcmRlciB0byBzYXZlIGhpc3RvcnlcclxuICBhd2FpdCBnaXRDaGVja291dCggY29tbW9uUmVwbywgY29tbW9uQnJhbmNoICk7XHJcbiAgd2luc3Rvbi5pbmZvKCBgQ3JlYXRpbmcgJHtjb21tb25PbGRCcmFuY2h9IGluICR7Y29tbW9uUmVwb30gd2l0aCAke2F3YWl0IGdpdFJldlBhcnNlKCBjb21tb25SZXBvLCAnSEVBRCcgKX1gICk7XHJcbiAgYXdhaXQgZ2l0Q3JlYXRlQnJhbmNoKCBjb21tb25SZXBvLCBjb21tb25PbGRCcmFuY2ggKTtcclxuICBhd2FpdCBnaXRQdXNoKCBjb21tb25SZXBvLCBjb21tb25PbGRCcmFuY2ggKTtcclxuXHJcbiAgLy8gRml4IHRoZSBicmFuY2ggd2l0aCB0aGUgcHJvcGVyIG5hbWVcclxuICBhd2FpdCBnaXRDaGVja291dCggY29tbW9uUmVwbywgY29tbW9uQnJhbmNoICk7XHJcbiAgd2luc3Rvbi5pbmZvKCBgTW92aW5nICR7Y29tbW9uQnJhbmNofSBpbiAke2NvbW1vblJlcG99IHRvICR7c2hhfWAgKTtcclxuICBhd2FpdCBleGVjdXRlKCAnZ2l0JywgWyAncmVzZXQnLCAnLS1oYXJkJywgc2hhIF0sIGAuLi8ke2NvbW1vblJlcG99YCApO1xyXG4gIGF3YWl0IGV4ZWN1dGUoICdnaXQnLCBbICdwdXNoJywgJy1mJywgJy11JywgJ29yaWdpbicsIGNvbW1vbkJyYW5jaCBdLCBgLi4vJHtjb21tb25SZXBvfWAgKTtcclxuXHJcbiAgaWYgKCAhY2FuRm9yY2VQdXNoICkge1xyXG4gICAgd2luc3Rvbi5pbmZvKCAnRW5hYmxpbmcgZm9yY2UgcHVzaCBwcmV2ZW50aW9uJyApO1xyXG4gICAgcHJvdGVjdGlvblNldHRpbmdzLmFsbG93X2ZvcmNlX3B1c2hlcyA9IGZhbHNlO1xyXG4gICAgYXdhaXQgb2N0b2tpdC5yZXF1ZXN0KCBgUFVUIC9yZXBvcy9waGV0c2ltcy8ke2NvbW1vblJlcG99L2JyYW5jaGVzLyR7Y29tbW9uQnJhbmNofS9wcm90ZWN0aW9uYCwgcHJvdGVjdGlvblNldHRpbmdzICk7XHJcbiAgfVxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFFLFdBQVksQ0FBQztBQUN0QyxNQUFNQyxxQkFBcUIsR0FBR0QsT0FBTyxDQUFFLHlCQUEwQixDQUFDO0FBQ2xFLE1BQU1FLFdBQVcsR0FBR0YsT0FBTyxDQUFFLGVBQWdCLENBQUM7QUFDOUMsTUFBTUcsV0FBVyxHQUFHSCxPQUFPLENBQUUsZUFBZ0IsQ0FBQztBQUM5QyxNQUFNSSxlQUFlLEdBQUdKLE9BQU8sQ0FBRSxtQkFBb0IsQ0FBQztBQUN0RCxNQUFNSyxPQUFPLEdBQUdMLE9BQU8sQ0FBRSxXQUFZLENBQUM7QUFDdEMsTUFBTU0sV0FBVyxHQUFHTixPQUFPLENBQUUsZUFBZ0IsQ0FBQztBQUM5QyxNQUFNTyxPQUFPLEdBQUdQLE9BQU8sQ0FBRSxTQUFVLENBQUM7QUFDcEMsTUFBTVEsVUFBVSxHQUFHUixPQUFPLENBQUUs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