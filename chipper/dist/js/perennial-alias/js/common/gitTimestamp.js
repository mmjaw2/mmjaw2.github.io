// Copyright 2021, University of Colorado Boulder

/**
 * Provides the timestamp of any git target (branch/SHA)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const execute = require('./execute');
const assert = require('assert');

/**
 * Provides the timestamp of any git target (branch/SHA)
 * @public
 *
 * @param {string} repo - The repository name
 * @param {string} target - Branch/SHA
 * @returns {Promise.<number>} - Resolves to the timestamp
 */
module.exports = function (repo, target) {
  assert(typeof repo === 'string');
  assert(typeof target === 'string');
  return execute('git', ['show', '-s', '--format=%cd', '--date=iso', target], `../${repo}`).then(stdout => {
    return Promise.resolve(new Date(stdout.trim()).getTime());
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjdXRlIiwicmVxdWlyZSIsImFzc2VydCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXBvIiwidGFyZ2V0IiwidGhlbiIsInN0ZG91dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiRGF0ZSIsInRyaW0iLCJnZXRUaW1lIl0sInNvdXJjZXMiOlsiZ2l0VGltZXN0YW1wLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQcm92aWRlcyB0aGUgdGltZXN0YW1wIG9mIGFueSBnaXQgdGFyZ2V0IChicmFuY2gvU0hBKVxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuY29uc3QgZXhlY3V0ZSA9IHJlcXVpcmUoICcuL2V4ZWN1dGUnICk7XHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoICdhc3NlcnQnICk7XHJcblxyXG4vKipcclxuICogUHJvdmlkZXMgdGhlIHRpbWVzdGFtcCBvZiBhbnkgZ2l0IHRhcmdldCAoYnJhbmNoL1NIQSlcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVwbyAtIFRoZSByZXBvc2l0b3J5IG5hbWVcclxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldCAtIEJyYW5jaC9TSEFcclxuICogQHJldHVybnMge1Byb21pc2UuPG51bWJlcj59IC0gUmVzb2x2ZXMgdG8gdGhlIHRpbWVzdGFtcFxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiggcmVwbywgdGFyZ2V0ICkge1xyXG4gIGFzc2VydCggdHlwZW9mIHJlcG8gPT09ICdzdHJpbmcnICk7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyApO1xyXG5cclxuICByZXR1cm4gZXhlY3V0ZSggJ2dpdCcsIFsgJ3Nob3cnLCAnLXMnLCAnLS1mb3JtYXQ9JWNkJywgJy0tZGF0ZT1pc28nLCB0YXJnZXQgXSwgYC4uLyR7cmVwb31gICkudGhlbiggc3Rkb3V0ID0+IHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIG5ldyBEYXRlKCBzdGRvdXQudHJpbSgpICkuZ2V0VGltZSgpICk7XHJcbiAgfSApO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBRSxXQUFZLENBQUM7QUFDdEMsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUUsUUFBUyxDQUFDOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQVVDLElBQUksRUFBRUMsTUFBTSxFQUFHO0VBQ3hDSixNQUFNLENBQUUsT0FBT0csSUFBSSxLQUFLLFFBQVMsQ0FBQztFQUNsQ0gsTUFBTSxDQUFFLE9BQU9JLE1BQU0sS0FBSyxRQUFTLENBQUM7RUFFcEMsT0FBT04sT0FBTyxDQUFFLEtBQUssRUFBRSxDQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRU0sTUFBTSxDQUFFLEVBQUcsTUFBS0QsSUFBSyxFQUFFLENBQUMsQ0FBQ0UsSUFBSSxDQUFFQyxNQUFNLElBQUk7SUFDNUcsT0FBT0MsT0FBTyxDQUFDQyxPQUFPLENBQUUsSUFBSUMsSUFBSSxDQUFFSCxNQUFNLENBQUNJLElBQUksQ0FBQyxDQUFFLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLENBQUUsQ0FBQztFQUMvRCxDQUFFLENBQUM7QUFDTCxDQUFDIiwiaWdub3JlTGlzdCI6W119