// Copyright 2017, University of Colorado Boulder
// @author Matt Pennington (PhET Interactive Simulations)

const constants = require('./constants');
const sendEmail = require('./sendEmail');
const winston = require('../../../../../../perennial-alias/node_modules/winston');
const axios = require('axios');

/**
 * Notify the website that a new sim or translation has been deployed. This will cause the project to
 * synchronize and the new translation will appear on the website.
 * @param {Object} [options]
 *  @property {string} simName
 *  @property {string} email
 *  @property {string} brand
 *  @property {string} locales
 *  @property {number} translatorId
 *  @property {Object} [phetioOptions]
 *    @property {SimVersion} version
 *    @property {string} branch
 *    @property {string} suffix
 *    @property {boolean} ignoreForAutomatedMaintenanceReleases
 */
module.exports = async function notifyServer(options) {
  if (options.brand === constants.PHET_BRAND) {
    const project = `html/${options.simName}`;
    let url = `${constants.BUILD_SERVER_CONFIG.productionServerURL}/services/synchronize-project?projectName=${project}`;
    if (options.locales && options.locales !== '*' && options.locales !== 'en' && options.locales.indexOf(',') < 0) {
      url += `&locale=${options.locales}`;
      if (options.translatorId) {
        url += `&translatorId=${options.translatorId}`;
      }
    }
    let response;
    try {
      response = await axios({
        url: url,
        auth: {
          username: 'token',
          password: constants.BUILD_SERVER_CONFIG.serverToken
        }
      });
    } catch (e) {
      throw new Error(e);
    }
    let errorMessage;
    if (response.status >= 200 && response.status <= 299) {
      const data = response.data;
      if (!data.success) {
        errorMessage = `request to synchronize project ${project} on ${constants.BUILD_SERVER_CONFIG.productionServerURL} failed with message: ${data.error}`;
        winston.log('error', errorMessage);
        sendEmail('SYNCHRONIZE FAILED', errorMessage, options.email);
      } else {
        winston.log('info', `request to synchronize project ${project} on ${constants.BUILD_SERVER_CONFIG.productionServerURL} succeeded`);
      }
    } else {
      errorMessage = 'request to synchronize project errored or returned a non 2XX status code';
      winston.log('error', errorMessage);
      sendEmail('SYNCHRONIZE FAILED', errorMessage, options.email);
    }
  } else if (options.brand === constants.PHET_IO_BRAND) {
    const url = `${constants.BUILD_SERVER_CONFIG.productionServerURL}/services/metadata/phetio` + `?name=${options.simName}&versionMajor=${options.phetioOptions.version.major}&versionMinor=${options.phetioOptions.version.minor}&versionMaintenance=${options.phetioOptions.version.maintenance}&versionSuffix=${options.phetioOptions.suffix}&branch=${options.phetioOptions.branch}&active=${!options.phetioOptions.ignoreForAutomatedMaintenanceReleases}`;
    let response;
    try {
      response = await axios({
        url: url,
        method: 'POST',
        auth: {
          username: 'token',
          password: constants.BUILD_SERVER_CONFIG.serverToken
        }
      });
    } catch (e) {
      throw new Error(e);
    }
    let errorMessage;
    if (response.status < 200 || response.status > 299) {
      try {
        errorMessage = response.data.error;
      } catch (e) {
        errorMessage = 'request to upsert phetio deployment failed';
      }
      winston.log('error', errorMessage);
      sendEmail('PHET_IO DEPLOYMENT UPSERT FAILED', errorMessage, options.email);
      throw new Error('PHET_IO DEPLOYMENT UPSERT FAILED');
    } else {
      const data = response.data;
      if (!data.success) {
        try {
          errorMessage = data.error;
        } catch (e) {
          errorMessage = 'request to upsert phetio deployment failed';
        }
        winston.log('error', errorMessage);
        sendEmail('SYNCHRONIZE FAILED', errorMessage, options.email);
        throw new Error('PHET_IO DEPLOYMENT UPSERT FAILED');
      } else {
        winston.log('info', `request to upsert phetio deployment for ${options.simName} on ${constants.BUILD_SERVER_CONFIG.productionServerURL} succeeded`);
      }
    }
  } else {
    throw new Error('Called notifyServer for unsupported brand');
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25zdGFudHMiLCJyZXF1aXJlIiwic2VuZEVtYWlsIiwid2luc3RvbiIsImF4aW9zIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5vdGlmeVNlcnZlciIsIm9wdGlvbnMiLCJicmFuZCIsIlBIRVRfQlJBTkQiLCJwcm9qZWN0Iiwic2ltTmFtZSIsInVybCIsIkJVSUxEX1NFUlZFUl9DT05GSUciLCJwcm9kdWN0aW9uU2VydmVyVVJMIiwibG9jYWxlcyIsImluZGV4T2YiLCJ0cmFuc2xhdG9ySWQiLCJyZXNwb25zZSIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic2VydmVyVG9rZW4iLCJlIiwiRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJkYXRhIiwic3VjY2VzcyIsImVycm9yIiwibG9nIiwiZW1haWwiLCJQSEVUX0lPX0JSQU5EIiwicGhldGlvT3B0aW9ucyIsInZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwibWFpbnRlbmFuY2UiLCJzdWZmaXgiLCJicmFuY2giLCJpZ25vcmVGb3JBdXRvbWF0ZWRNYWludGVuYW5jZVJlbGVhc2VzIiwibWV0aG9kIl0sInNvdXJjZXMiOlsibm90aWZ5U2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuLy8gQGF1dGhvciBNYXR0IFBlbm5pbmd0b24gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcblxyXG5cclxuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSggJy4vY29uc3RhbnRzJyApO1xyXG5jb25zdCBzZW5kRW1haWwgPSByZXF1aXJlKCAnLi9zZW5kRW1haWwnICk7XHJcbmNvbnN0IHdpbnN0b24gPSByZXF1aXJlKCAnd2luc3RvbicgKTtcclxuY29uc3QgYXhpb3MgPSByZXF1aXJlKCAnYXhpb3MnICk7XHJcblxyXG4vKipcclxuICogTm90aWZ5IHRoZSB3ZWJzaXRlIHRoYXQgYSBuZXcgc2ltIG9yIHRyYW5zbGF0aW9uIGhhcyBiZWVuIGRlcGxveWVkLiBUaGlzIHdpbGwgY2F1c2UgdGhlIHByb2plY3QgdG9cclxuICogc3luY2hyb25pemUgYW5kIHRoZSBuZXcgdHJhbnNsYXRpb24gd2lsbCBhcHBlYXIgb24gdGhlIHdlYnNpdGUuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICogIEBwcm9wZXJ0eSB7c3RyaW5nfSBzaW1OYW1lXHJcbiAqICBAcHJvcGVydHkge3N0cmluZ30gZW1haWxcclxuICogIEBwcm9wZXJ0eSB7c3RyaW5nfSBicmFuZFxyXG4gKiAgQHByb3BlcnR5IHtzdHJpbmd9IGxvY2FsZXNcclxuICogIEBwcm9wZXJ0eSB7bnVtYmVyfSB0cmFuc2xhdG9ySWRcclxuICogIEBwcm9wZXJ0eSB7T2JqZWN0fSBbcGhldGlvT3B0aW9uc11cclxuICogICAgQHByb3BlcnR5IHtTaW1WZXJzaW9ufSB2ZXJzaW9uXHJcbiAqICAgIEBwcm9wZXJ0eSB7c3RyaW5nfSBicmFuY2hcclxuICogICAgQHByb3BlcnR5IHtzdHJpbmd9IHN1ZmZpeFxyXG4gKiAgICBAcHJvcGVydHkge2Jvb2xlYW59IGlnbm9yZUZvckF1dG9tYXRlZE1haW50ZW5hbmNlUmVsZWFzZXNcclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24gbm90aWZ5U2VydmVyKCBvcHRpb25zICkge1xyXG4gIGlmICggb3B0aW9ucy5icmFuZCA9PT0gY29uc3RhbnRzLlBIRVRfQlJBTkQgKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gYGh0bWwvJHtvcHRpb25zLnNpbU5hbWV9YDtcclxuICAgIGxldCB1cmwgPSBgJHtjb25zdGFudHMuQlVJTERfU0VSVkVSX0NPTkZJRy5wcm9kdWN0aW9uU2VydmVyVVJMfS9zZXJ2aWNlcy9zeW5jaHJvbml6ZS1wcm9qZWN0P3Byb2plY3ROYW1lPSR7cHJvamVjdH1gO1xyXG4gICAgaWYgKCBvcHRpb25zLmxvY2FsZXMgJiYgb3B0aW9ucy5sb2NhbGVzICE9PSAnKicgJiYgb3B0aW9ucy5sb2NhbGVzICE9PSAnZW4nICYmIG9wdGlvbnMubG9jYWxlcy5pbmRleE9mKCAnLCcgKSA8IDAgKSB7XHJcbiAgICAgIHVybCArPSBgJmxvY2FsZT0ke29wdGlvbnMubG9jYWxlc31gO1xyXG4gICAgICBpZiAoIG9wdGlvbnMudHJhbnNsYXRvcklkICkge1xyXG4gICAgICAgIHVybCArPSBgJnRyYW5zbGF0b3JJZD0ke29wdGlvbnMudHJhbnNsYXRvcklkfWA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgbGV0IHJlc3BvbnNlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBheGlvcygge1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgIHVzZXJuYW1lOiAndG9rZW4nLFxyXG4gICAgICAgICAgcGFzc3dvcmQ6IGNvbnN0YW50cy5CVUlMRF9TRVJWRVJfQ09ORklHLnNlcnZlclRva2VuXHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCggZSApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBlICk7XHJcbiAgICB9XHJcbiAgICBsZXQgZXJyb3JNZXNzYWdlO1xyXG5cclxuICAgIGlmICggcmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPD0gMjk5ICkge1xyXG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgIGlmICggIWRhdGEuc3VjY2VzcyApIHtcclxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBgcmVxdWVzdCB0byBzeW5jaHJvbml6ZSBwcm9qZWN0ICR7cHJvamVjdH0gb24gJHtjb25zdGFudHMuQlVJTERfU0VSVkVSX0NPTkZJRy5wcm9kdWN0aW9uU2VydmVyVVJMfSBmYWlsZWQgd2l0aCBtZXNzYWdlOiAke2RhdGEuZXJyb3J9YDtcclxuICAgICAgICB3aW5zdG9uLmxvZyggJ2Vycm9yJywgZXJyb3JNZXNzYWdlICk7XHJcbiAgICAgICAgc2VuZEVtYWlsKCAnU1lOQ0hST05JWkUgRkFJTEVEJywgZXJyb3JNZXNzYWdlLCBvcHRpb25zLmVtYWlsICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgd2luc3Rvbi5sb2coICdpbmZvJywgYHJlcXVlc3QgdG8gc3luY2hyb25pemUgcHJvamVjdCAke3Byb2plY3R9IG9uICR7Y29uc3RhbnRzLkJVSUxEX1NFUlZFUl9DT05GSUcucHJvZHVjdGlvblNlcnZlclVSTH0gc3VjY2VlZGVkYCApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgZXJyb3JNZXNzYWdlID0gJ3JlcXVlc3QgdG8gc3luY2hyb25pemUgcHJvamVjdCBlcnJvcmVkIG9yIHJldHVybmVkIGEgbm9uIDJYWCBzdGF0dXMgY29kZSc7XHJcbiAgICAgIHdpbnN0b24ubG9nKCAnZXJyb3InLCBlcnJvck1lc3NhZ2UgKTtcclxuICAgICAgc2VuZEVtYWlsKCAnU1lOQ0hST05JWkUgRkFJTEVEJywgZXJyb3JNZXNzYWdlLCBvcHRpb25zLmVtYWlsICk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2UgaWYgKCBvcHRpb25zLmJyYW5kID09PSBjb25zdGFudHMuUEhFVF9JT19CUkFORCApIHtcclxuICAgIGNvbnN0IHVybCA9IGAke2NvbnN0YW50cy5CVUlMRF9TRVJWRVJfQ09ORklHLnByb2R1Y3Rpb25TZXJ2ZXJVUkx9L3NlcnZpY2VzL21ldGFkYXRhL3BoZXRpb2AgK1xyXG4gICAgICAgICAgICAgICAgYD9uYW1lPSR7b3B0aW9ucy5zaW1OYW1lXHJcbiAgICAgICAgICAgICAgICB9JnZlcnNpb25NYWpvcj0ke29wdGlvbnMucGhldGlvT3B0aW9ucy52ZXJzaW9uLm1ham9yXHJcbiAgICAgICAgICAgICAgICB9JnZlcnNpb25NaW5vcj0ke29wdGlvbnMucGhldGlvT3B0aW9ucy52ZXJzaW9uLm1pbm9yXHJcbiAgICAgICAgICAgICAgICB9JnZlcnNpb25NYWludGVuYW5jZT0ke29wdGlvbnMucGhldGlvT3B0aW9ucy52ZXJzaW9uLm1haW50ZW5hbmNlXHJcbiAgICAgICAgICAgICAgICB9JnZlcnNpb25TdWZmaXg9JHtvcHRpb25zLnBoZXRpb09wdGlvbnMuc3VmZml4XHJcbiAgICAgICAgICAgICAgICB9JmJyYW5jaD0ke29wdGlvbnMucGhldGlvT3B0aW9ucy5icmFuY2hcclxuICAgICAgICAgICAgICAgIH0mYWN0aXZlPSR7IW9wdGlvbnMucGhldGlvT3B0aW9ucy5pZ25vcmVGb3JBdXRvbWF0ZWRNYWludGVuYW5jZVJlbGVhc2VzfWA7XHJcbiAgICBsZXQgcmVzcG9uc2U7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXNwb25zZSA9IGF3YWl0IGF4aW9zKCB7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgdXNlcm5hbWU6ICd0b2tlbicsXHJcbiAgICAgICAgICBwYXNzd29yZDogY29uc3RhbnRzLkJVSUxEX1NFUlZFUl9DT05GSUcuc2VydmVyVG9rZW5cclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIGNhdGNoKCBlICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGUgKTtcclxuICAgIH1cclxuICAgIGxldCBlcnJvck1lc3NhZ2U7XHJcblxyXG4gICAgaWYgKCByZXNwb25zZS5zdGF0dXMgPCAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID4gMjk5ICkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEuZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2goIGUgKSB7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ3JlcXVlc3QgdG8gdXBzZXJ0IHBoZXRpbyBkZXBsb3ltZW50IGZhaWxlZCc7XHJcbiAgICAgIH1cclxuICAgICAgd2luc3Rvbi5sb2coICdlcnJvcicsIGVycm9yTWVzc2FnZSApO1xyXG4gICAgICBzZW5kRW1haWwoICdQSEVUX0lPIERFUExPWU1FTlQgVVBTRVJUIEZBSUxFRCcsIGVycm9yTWVzc2FnZSwgb3B0aW9ucy5lbWFpbCApO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdQSEVUX0lPIERFUExPWU1FTlQgVVBTRVJUIEZBSUxFRCcgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgIGlmICggIWRhdGEuc3VjY2VzcyApIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gZGF0YS5lcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2goIGUgKSB7XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAncmVxdWVzdCB0byB1cHNlcnQgcGhldGlvIGRlcGxveW1lbnQgZmFpbGVkJztcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luc3Rvbi5sb2coICdlcnJvcicsIGVycm9yTWVzc2FnZSApO1xyXG4gICAgICAgIHNlbmRFbWFpbCggJ1NZTkNIUk9OSVpFIEZBSUxFRCcsIGVycm9yTWVzc2FnZSwgb3B0aW9ucy5lbWFpbCApO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggJ1BIRVRfSU8gREVQTE9ZTUVOVCBVUFNFUlQgRkFJTEVEJyApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbnN0b24ubG9nKCAnaW5mbycsIGByZXF1ZXN0IHRvIHVwc2VydCBwaGV0aW8gZGVwbG95bWVudCBmb3IgJHtvcHRpb25zLnNpbU5hbWV9IG9uICR7Y29uc3RhbnRzLkJVSUxEX1NFUlZFUl9DT05GSUcucHJvZHVjdGlvblNlcnZlclVSTH0gc3VjY2VlZGVkYCApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggJ0NhbGxlZCBub3RpZnlTZXJ2ZXIgZm9yIHVuc3VwcG9ydGVkIGJyYW5kJyApO1xyXG4gIH1cclxufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBR0EsTUFBTUEsU0FBUyxHQUFHQyxPQUFPLENBQUUsYUFBYyxDQUFDO0FBQzFDLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFFLGFBQWMsQ0FBQztBQUMxQyxNQUFNRSxPQUFPLEdBQUdGLE9BQU8sQ0FBRSxTQUFVLENBQUM7QUFDcEMsTUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUUsT0FBUSxDQUFDOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUksTUFBTSxDQUFDQyxPQUFPLEdBQUcsZUFBZUMsWUFBWUEsQ0FBRUMsT0FBTyxFQUFHO0VBQ3RELElBQUtBLE9BQU8sQ0FBQ0MsS0FBSyxLQUFLVCxTQUFTLENBQUNVLFVBQVUsRUFBRztJQUM1QyxNQUFNQyxPQUFPLEdBQUksUUFBT0gsT0FBTyxDQUFDSSxPQUFRLEVBQUM7SUFDekMsSUFBSUMsR0FBRyxHQUFJLEdBQUViLFNBQVMsQ0FBQ2MsbUJBQW1CLENBQUNDLG1CQUFvQiw2Q0FBNENKLE9BQVEsRUFBQztJQUNwSCxJQUFLSCxPQUFPLENBQUNRLE9BQU8sSUFBSVIsT0FBTyxDQUFDUSxPQUFPLEtBQUssR0FBRyxJQUFJUixPQUFPLENBQUNRLE9BQU8sS0FBSyxJQUFJLElBQUlSLE9BQU8sQ0FBQ1EsT0FBTyxDQUFDQyxPQUFPLENBQUUsR0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHO01BQ2xISixHQUFHLElBQUssV0FBVUwsT0FBTyxDQUFDUSxPQUFRLEVBQUM7TUFDbkMsSUFBS1IsT0FBTyxDQUFDVSxZQUFZLEVBQUc7UUFDMUJMLEdBQUcsSUFBSyxpQkFBZ0JMLE9BQU8sQ0FBQ1UsWUFBYSxFQUFDO01BQ2hEO0lBQ0Y7SUFHQSxJQUFJQyxRQUFRO0lB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