// Copyright 2018-2024, University of Colorado Boulder

/**
 * BoxOfBalls is a model of a box containing moving balls that bounce off the walls.
 *
 * @author John Blanco (PhET Interactive Simulations)
 */

import createObservableArray from '../../../../../axon/js/createObservableArray.js';
import dotRandom from '../../../../../dot/js/dotRandom.js';
import Vector2 from '../../../../../dot/js/Vector2.js';
import { Shape } from '../../../../../kite/js/imports.js';
import { Color } from '../../../../../scenery/js/imports.js';
import tambo from '../../../tambo.js';
import Ball from './Ball.js';

// constants
const BALL_RADIUS = 7; // ball radius in cm
const MIN_X_OR_Y_VELOCITY = 30;
const MAX_X_OR_Y_VELOCITY = 60;

// helper function
const createRandomColor = () => {
  const r = Math.floor(dotRandom.nextDouble() * 256);
  const g = Math.floor(dotRandom.nextDouble() * 256);
  const b = Math.floor(dotRandom.nextDouble() * 256);
  return new Color(r, g, b);
};
class BoxOfBalls {
  // an array the contains the balls that are in this box

  // the bounding box

  constructor(width, height) {
    this.box = Shape.rect(50, 0, width, height);
    this.balls = createObservableArray();
  }

  /**
   * Add a ball with random size, color, position, and velocity.
   */
  addRandomBall() {
    let xVelocity = MIN_X_OR_Y_VELOCITY + dotRandom.nextDouble() * (MAX_X_OR_Y_VELOCITY - MIN_X_OR_Y_VELOCITY);
    xVelocity = dotRandom.nextBoolean() ? xVelocity : -xVelocity;
    let yVelocity = MIN_X_OR_Y_VELOCITY + dotRandom.nextDouble() * (MAX_X_OR_Y_VELOCITY - MIN_X_OR_Y_VELOCITY);
    yVelocity = dotRandom.nextBoolean() ? yVelocity : -yVelocity;
    const velocity = new Vector2(xVelocity, yVelocity);
    this.balls.push(new Ball(BALL_RADIUS, createRandomColor(), new Vector2(BALL_RADIUS + (dotRandom.nextDouble() * (this.box.bounds.width - 2 * BALL_RADIUS) + this.box.bounds.minX), BALL_RADIUS + (dotRandom.nextDouble() * (this.box.bounds.height - 2 * BALL_RADIUS) + this.box.bounds.minY)), velocity));
  }

  /**
   * Remove a ball.
   */
  removeABall() {
    this.balls.pop();
  }

  /**
   * step function to move and bounce the balls
   * @param dt - time step, in seconds
   */
  step(dt) {
    const boxBounds = this.box.bounds;
    this.balls.forEach(ball => {
      const positionBeforeMotion = ball.positionProperty.value;
      const ballVelocity = ball.velocityProperty.value;
      const newPosition = positionBeforeMotion.plus(ballVelocity.timesScalar(dt));

      // set new position
      ball.positionProperty.value = newPosition;

      // handle bouncing
      let newBallVelocity = ball.velocityProperty.value.copy();
      if (ballVelocity.x > 0 && newPosition.x + ball.radius > boxBounds.maxX) {
        newBallVelocity = new Vector2(-ballVelocity.x, ballVelocity.y);
      } else if (ballVelocity.x < 0 && newPosition.x - ball.radius < boxBounds.minX) {
        newBallVelocity = new Vector2(-ballVelocity.x, ballVelocity.y);
      }
      if (ballVelocity.y > 0 && newPosition.y + ball.radius > boxBounds.maxY) {
        newBallVelocity = new Vector2(ballVelocity.x, -ballVelocity.y);
      } else if (ballVelocity.y < 0 && newPosition.y - ball.radius < boxBounds.minY) {
        newBallVelocity = new Vector2(ballVelocity.x, -ballVelocity.y);
      }

      // update the velocity if it has changed
      if (!ballVelocity.equals(newBallVelocity)) {
        ball.velocityProperty.value = newBallVelocity;
      }
    });
  }

  /**
   * restore initial state
   */
  reset() {
    this.balls.reset();
  }
}
tambo.register('BoxOfBalls', BoxOfBalls);
export default BoxOfBalls;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVPYnNlcnZhYmxlQXJyYXkiLCJkb3RSYW5kb20iLCJWZWN0b3IyIiwiU2hhcGUiLCJDb2xvciIsInRhbWJvIiwiQmFsbCIsIkJBTExfUkFESVVTIiwiTUlOX1hfT1JfWV9WRUxPQ0lUWSIsIk1BWF9YX09SX1lfVkVMT0NJVFkiLCJjcmVhdGVSYW5kb21Db2xvciIsInIiLCJNYXRoIiwiZmxvb3IiLCJuZXh0RG91YmxlIiwiZyIsImIiLCJCb3hPZkJhbGxzIiwiY29uc3RydWN0b3IiLCJ3aWR0aCIsImhlaWdodCIsImJveCIsInJlY3QiLCJiYWxscyIsImFkZFJhbmRvbUJhbGwiLCJ4VmVsb2NpdHkiLCJuZXh0Qm9vbGVhbiIsInlWZWxvY2l0eSIsInZlbG9jaXR5IiwicHVzaCIsImJvdW5kcyIsIm1pblgiLCJtaW5ZIiwicmVtb3ZlQUJhbGwiLCJwb3AiLCJzdGVwIiwiZHQiLCJib3hCb3VuZHMiLCJmb3JFYWNoIiwiYmFsbCIsInBvc2l0aW9uQmVmb3JlTW90aW9uIiwicG9zaXRpb25Qcm9wZXJ0eSIsInZhbHVlIiwiYmFsbFZlbG9jaXR5IiwidmVsb2NpdHlQcm9wZXJ0eSIsIm5ld1Bvc2l0aW9uIiwicGx1cyIsInRpbWVzU2NhbGFyIiwibmV3QmFsbFZlbG9jaXR5IiwiY29weSIsIngiLCJyYWRpdXMiLCJtYXhYIiwieSIsIm1heFkiLCJlcXVhbHMiLCJyZXNldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQm94T2ZCYWxscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBCb3hPZkJhbGxzIGlzIGEgbW9kZWwgb2YgYSBib3ggY29udGFpbmluZyBtb3ZpbmcgYmFsbHMgdGhhdCBib3VuY2Ugb2ZmIHRoZSB3YWxscy5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jbyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgY3JlYXRlT2JzZXJ2YWJsZUFycmF5LCB7IE9ic2VydmFibGVBcnJheSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2F4b24vanMvY3JlYXRlT2JzZXJ2YWJsZUFycmF5LmpzJztcclxuaW1wb3J0IGRvdFJhbmRvbSBmcm9tICcuLi8uLi8uLi8uLi8uLi9kb3QvanMvZG90UmFuZG9tLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHRhbWJvIGZyb20gJy4uLy4uLy4uL3RhbWJvLmpzJztcclxuaW1wb3J0IEJhbGwgZnJvbSAnLi9CYWxsLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBCQUxMX1JBRElVUyA9IDc7IC8vIGJhbGwgcmFkaXVzIGluIGNtXHJcbmNvbnN0IE1JTl9YX09SX1lfVkVMT0NJVFkgPSAzMDtcclxuY29uc3QgTUFYX1hfT1JfWV9WRUxPQ0lUWSA9IDYwO1xyXG5cclxuLy8gaGVscGVyIGZ1bmN0aW9uXHJcbmNvbnN0IGNyZWF0ZVJhbmRvbUNvbG9yID0gKCkgPT4ge1xyXG4gIGNvbnN0IHIgPSBNYXRoLmZsb29yKCBkb3RSYW5kb20ubmV4dERvdWJsZSgpICogMjU2ICk7XHJcbiAgY29uc3QgZyA9IE1hdGguZmxvb3IoIGRvdFJhbmRvbS5uZXh0RG91YmxlKCkgKiAyNTYgKTtcclxuICBjb25zdCBiID0gTWF0aC5mbG9vciggZG90UmFuZG9tLm5leHREb3VibGUoKSAqIDI1NiApO1xyXG4gIHJldHVybiBuZXcgQ29sb3IoIHIsIGcsIGIgKTtcclxufTtcclxuXHJcbmNsYXNzIEJveE9mQmFsbHMge1xyXG5cclxuICAvLyBhbiBhcnJheSB0aGUgY29udGFpbnMgdGhlIGJhbGxzIHRoYXQgYXJlIGluIHRoaXMgYm94XHJcbiAgcHVibGljIHJlYWRvbmx5IGJhbGxzOiBPYnNlcnZhYmxlQXJyYXk8QmFsbD47XHJcblxyXG4gIC8vIHRoZSBib3VuZGluZyBib3hcclxuICBwdWJsaWMgcmVhZG9ubHkgYm94OiBTaGFwZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciApIHtcclxuICAgIHRoaXMuYm94ID0gU2hhcGUucmVjdCggNTAsIDAsIHdpZHRoLCBoZWlnaHQgKTtcclxuICAgIHRoaXMuYmFsbHMgPSBjcmVhdGVPYnNlcnZhYmxlQXJyYXkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhIGJhbGwgd2l0aCByYW5kb20gc2l6ZSwgY29sb3IsIHBvc2l0aW9uLCBhbmQgdmVsb2NpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGFkZFJhbmRvbUJhbGwoKTogdm9pZCB7XHJcblxyXG4gICAgbGV0IHhWZWxvY2l0eSA9IE1JTl9YX09SX1lfVkVMT0NJVFkgKyBkb3RSYW5kb20ubmV4dERvdWJsZSgpICogKCBNQVhfWF9PUl9ZX1ZFTE9DSVRZIC0gTUlOX1hfT1JfWV9WRUxPQ0lUWSApO1xyXG4gICAgeFZlbG9jaXR5ID0gZG90UmFuZG9tLm5leHRCb29sZWFuKCkgPyB4VmVsb2NpdHkgOiAteFZlbG9jaXR5O1xyXG4gICAgbGV0IHlWZWxvY2l0eSA9IE1JTl9YX09SX1lfVkVMT0NJVFkgKyBkb3RSYW5kb20ubmV4dERvdWJsZSgpICogKCBNQVhfWF9PUl9ZX1ZFTE9DSVRZIC0gTUlOX1hfT1JfWV9WRUxPQ0lUWSApO1xyXG4gICAgeVZlbG9jaXR5ID0gZG90UmFuZG9tLm5leHRCb29sZWFuKCkgPyB5VmVsb2NpdHkgOiAteVZlbG9jaXR5O1xyXG4gICAgY29uc3QgdmVsb2NpdHkgPSBuZXcgVmVjdG9yMiggeFZlbG9jaXR5LCB5VmVsb2NpdHkgKTtcclxuICAgIHRoaXMuYmFsbHMucHVzaCggbmV3IEJhbGwoXHJcbiAgICAgIEJBTExfUkFESVVTLFxyXG4gICAgICBjcmVhdGVSYW5kb21Db2xvcigpLFxyXG4gICAgICBuZXcgVmVjdG9yMihcclxuICAgICAgICBCQUxMX1JBRElVUyArICggZG90UmFuZG9tLm5leHREb3VibGUoKSAqICggdGhpcy5ib3guYm91bmRzLndpZHRoIC0gMiAqIEJBTExfUkFESVVTICkgKyB0aGlzLmJveC5ib3VuZHMubWluWCApLFxyXG4gICAgICAgIEJBTExfUkFESVVTICsgKCBkb3RSYW5kb20ubmV4dERvdWJsZSgpICogKCB0aGlzLmJveC5ib3VuZHMuaGVpZ2h0IC0gMiAqIEJBTExfUkFESVVTICkgKyB0aGlzLmJveC5ib3VuZHMubWluWSApXHJcbiAgICAgICksXHJcbiAgICAgIHZlbG9jaXR5XHJcbiAgICApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgYSBiYWxsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZW1vdmVBQmFsbCgpOiB2b2lkIHtcclxuICAgIHRoaXMuYmFsbHMucG9wKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzdGVwIGZ1bmN0aW9uIHRvIG1vdmUgYW5kIGJvdW5jZSB0aGUgYmFsbHNcclxuICAgKiBAcGFyYW0gZHQgLSB0aW1lIHN0ZXAsIGluIHNlY29uZHNcclxuICAgKi9cclxuICBwdWJsaWMgc3RlcCggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIGNvbnN0IGJveEJvdW5kcyA9IHRoaXMuYm94LmJvdW5kcztcclxuICAgIHRoaXMuYmFsbHMuZm9yRWFjaCggYmFsbCA9PiB7XHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uQmVmb3JlTW90aW9uID0gYmFsbC5wb3NpdGlvblByb3BlcnR5LnZhbHVlO1xyXG4gICAgICBjb25zdCBiYWxsVmVsb2NpdHkgPSBiYWxsLnZlbG9jaXR5UHJvcGVydHkudmFsdWU7XHJcbiAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gcG9zaXRpb25CZWZvcmVNb3Rpb24ucGx1cyggYmFsbFZlbG9jaXR5LnRpbWVzU2NhbGFyKCBkdCApICk7XHJcblxyXG4gICAgICAvLyBzZXQgbmV3IHBvc2l0aW9uXHJcbiAgICAgIGJhbGwucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZSA9IG5ld1Bvc2l0aW9uO1xyXG5cclxuICAgICAgLy8gaGFuZGxlIGJvdW5jaW5nXHJcbiAgICAgIGxldCBuZXdCYWxsVmVsb2NpdHkgPSBiYWxsLnZlbG9jaXR5UHJvcGVydHkudmFsdWUuY29weSgpO1xyXG4gICAgICBpZiAoIGJhbGxWZWxvY2l0eS54ID4gMCAmJiBuZXdQb3NpdGlvbi54ICsgYmFsbC5yYWRpdXMgPiBib3hCb3VuZHMubWF4WCApIHtcclxuICAgICAgICBuZXdCYWxsVmVsb2NpdHkgPSBuZXcgVmVjdG9yMiggLWJhbGxWZWxvY2l0eS54LCBiYWxsVmVsb2NpdHkueSApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKCBiYWxsVmVsb2NpdHkueCA8IDAgJiYgbmV3UG9zaXRpb24ueCAtIGJhbGwucmFkaXVzIDwgYm94Qm91bmRzLm1pblggKSB7XHJcbiAgICAgICAgbmV3QmFsbFZlbG9jaXR5ID0gbmV3IFZlY3RvcjIoIC1iYWxsVmVsb2NpdHkueCwgYmFsbFZlbG9jaXR5LnkgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIGJhbGxWZWxvY2l0eS55ID4gMCAmJiBuZXdQb3NpdGlvbi55ICsgYmFsbC5yYWRpdXMgPiBib3hCb3VuZHMubWF4WSApIHtcclxuICAgICAgICBuZXdCYWxsVmVsb2NpdHkgPSBuZXcgVmVjdG9yMiggYmFsbFZlbG9jaXR5LngsIC1iYWxsVmVsb2NpdHkueSApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKCBiYWxsVmVsb2NpdHkueSA8IDAgJiYgbmV3UG9zaXRpb24ueSAtIGJhbGwucmFkaXVzIDwgYm94Qm91bmRzLm1pblkgKSB7XHJcbiAgICAgICAgbmV3QmFsbFZlbG9jaXR5ID0gbmV3IFZlY3RvcjIoIGJhbGxWZWxvY2l0eS54LCAtYmFsbFZlbG9jaXR5LnkgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gdXBkYXRlIHRoZSB2ZWxvY2l0eSBpZiBpdCBoYXMgY2hhbmdlZFxyXG4gICAgICBpZiAoICFiYWxsVmVsb2NpdHkuZXF1YWxzKCBuZXdCYWxsVmVsb2NpdHkgKSApIHtcclxuICAgICAgICBiYWxsLnZlbG9jaXR5UHJvcGVydHkudmFsdWUgPSBuZXdCYWxsVmVsb2NpdHk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJlc3RvcmUgaW5pdGlhbCBzdGF0ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMuYmFsbHMucmVzZXQoKTtcclxuICB9XHJcbn1cclxuXHJcbnRhbWJvLnJlZ2lzdGVyKCAnQm94T2ZCYWxscycsIEJveE9mQmFsbHMgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJveE9mQmFsbHM7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLHFCQUFxQixNQUEyQixpREFBaUQ7QUFDeEcsT0FBT0MsU0FBUyxNQUFNLG9DQUFvQztBQUMxRCxPQUFPQyxPQUFPLE1BQU0sa0NBQWtDO0FBQ3RELFNBQVNDLEtBQUssUUFBUSxtQ0FBbUM7QUFDekQsU0FBU0MsS0FBSyxRQUFRLHNDQUFzQztBQUM1RCxPQUFPQyxLQUFLLE1BQU0sbUJBQW1CO0FBQ3JDLE9BQU9DLElBQUksTUFBTSxXQUFXOztBQUU1QjtBQUNBLE1BQU1DLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN2QixNQUFNQyxtQkFBbUIsR0FBRyxFQUFFO0FBQzlCLE1BQU1DLG1CQUFtQixHQUFHLEVBQUU7O0FBRTlCO0FBQ0EsTUFBTUMsaUJBQWlCLEdBQUdBLENBQUEsS0FBTTtFQUM5QixNQUFNQyxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFFWixTQUFTLENBQUNh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