// Copyright 2021-2024, University of Colorado Boulder

/**
 * The tabs for the PreferencesDialog. Activating a tab will select a PreferencesTabPanel to be displayed to the user.
 * The actual tabs are implemented as radio buttons, styled to look like flat like a set of tabs.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import optionize from '../../../phet-core/js/optionize.js';
import globeSolidShape from '../../../sherpa/js/fontawesome-5/globeSolidShape.js';
import { HBox, KeyboardListener, Path } from '../../../scenery/js/imports.js';
import joist from '../joist.js';
import JoistStrings from '../JoistStrings.js';
import PreferencesType from './PreferencesType.js';
import PreferencesTab from './PreferencesTab.js';
import Multilink from '../../../axon/js/Multilink.js';
const DEFAULT_TAB_SPACING = 10;
class PreferencesTabs extends HBox {
  //  A reference to the selected and focusable tab content so that we can determine which
  // tab is next in order when cycling through with alternative input.
  selectedButton = null;
  content = [];
  constructor(supportedTabs, selectedPanelProperty, providedOptions) {
    const options = optionize()({
      isDisposable: false,
      // pdom
      tagName: 'ul',
      ariaRole: 'tablist',
      groupFocusHighlight: true,
      spacing: DEFAULT_TAB_SPACING,
      align: 'bottom'
    }, providedOptions);
    super(options);
    this.selectedPanelProperty = selectedPanelProperty;
    const isTabSupported = preferencesType => _.includes(supportedTabs, preferencesType);

    // A dilation of the pointer areas makes it so that highlights that sorround the tabs are flush against eachother
    // which looks better, see https://github.com/phetsims/joist/issues/932
    const dilation = options.spacing / 2;
    if (isTabSupported(PreferencesType.OVERVIEW)) {
      this.content.push(new PreferencesTab(JoistStrings.preferences.tabs.overview.titleStringProperty, selectedPanelProperty, PreferencesType.OVERVIEW, {
        pointerAreaXDilation: dilation,
        tandem: options.tandem.createTandem('overviewTab')
      }));
    }
    if (isTabSupported(PreferencesType.SIMULATION)) {
      this.content.push(new PreferencesTab(JoistStrings.preferences.tabs.simulation.titleStringProperty, selectedPanelProperty, PreferencesType.SIMULATION, {
        pointerAreaXDilation: dilation,
        tandem: options.tandem.createTandem('simulationTab')
      }));
    }
    if (isTabSupported(PreferencesType.VISUAL)) {
      this.content.push(new PreferencesTab(JoistStrings.preferences.tabs.visual.titleStringProperty, selectedPanelProperty, PreferencesType.VISUAL, {
        pointerAreaXDilation: dilation,
        tandem: options.tandem.createTandem('visualTab')
      }));
    }
    if (isTabSupported(PreferencesType.AUDIO)) {
      this.content.push(new PreferencesTab(JoistStrings.preferences.tabs.audio.titleStringProperty, selectedPanelProperty, PreferencesType.AUDIO, {
        pointerAreaXDilation: dilation,
        tandem: options.tandem.createTandem('audioTab')
      }));
    }
    if (isTabSupported(PreferencesType.INPUT)) {
      this.content.push(new PreferencesTab(JoistStrings.preferences.tabs.input.titleStringProperty, selectedPanelProperty, PreferencesType.INPUT, {
        pointerAreaXDilation: dilation,
        tandem: options.tandem.createTandem('inputTab')
      }));
    }
    if (isTabSupported(PreferencesType.LOCALIZATION)) {
      this.content.push(new PreferencesTab(JoistStrings.preferences.tabs.localization.titleStringProperty, selectedPanelProperty, PreferencesType.LOCALIZATION, {
        pointerAreaXDilation: dilation,
        // Display a globe icon next to the localization label
        iconNode: new Path(globeSolidShape, {
          scale: 1 / 25,
          // by inspection
          fill: 'black'
        }),
        tandem: options.tandem.createTandem('localizationTab')
      }));
    }
    this.children = this.content;

    // If the currently selected tab is hidden via phet-io, then select the first visible tab (if there is one)
    Multilink.multilinkAny([selectedPanelProperty, ...this.content.map(tab => tab.visibleProperty)], () => {
      // Find the tab corresponding to the current selection
      const tab = this.content.find(tab => tab.value === selectedPanelProperty.value);

      // If the selected tab is not showing...
      if (!tab.visibleProperty.value) {
        // Find the leftmost tab that is showing (if there are any showing tabs)
        const firstShowingTab = this.content.find(tab => tab.visibleProperty.value);
        if (firstShowingTab) {
          selectedPanelProperty.value = firstShowingTab.value;
        }
      }
    });

    // pdom - keyboard support to move through tabs with arrow keys
    const keyboardListener = new KeyboardListener({
      keys: ['arrowRight', 'arrowLeft'],
      fireOnDown: false,
      fire: (event, keysPressed) => {
        // prevent "native" behavior so that Safari doesn't make an error sound with arrow keys in full screen mode
        if (event) {
          event.preventDefault();
        }
        const direction = keysPressed === 'arrowRight' ? 1 : -1;
        for (let i = 0; i < this.content.length; i++) {
          if (this.selectedButton === this.content[i]) {
            const nextButtonContent = this.content[i + direction];
            if (nextButtonContent) {
              // select the next tab and move focus to it - a listener on selectedPanelProperty sets the next
              // selectedButton and makes it focusable
              selectedPanelProperty.value = nextButtonContent.value;
              this.selectedButton.focus();
              break;
            }
          }
        }
      }
    });
    this.addInputListener(keyboardListener);
    const selectedPanelListener = () => {
      this.content.forEach(content => {
        if (content.value === this.selectedPanelProperty.value) {
          this.selectedButton = content;
        }
      });
    };
    selectedPanelProperty.link(selectedPanelListener);

    // if there is only one tab, it is not interactive
    if (supportedTabs.length === 1) {
      this.focusable = false;
      this.inputEnabledProperty.value = false;
    }
  }

  /**
   * Returns the visibleProperty for the Tab associated with the PreferencesType. PreferencesTabs need to be hidden
   * if the Tab becomes invisible (mostly needed for PhET-iO).
   */
  getTabVisibleProperty(preferencesType) {
    const tab = _.find(this.content, content => content.value === preferencesType);
    assert && assert(tab, `tab not found for PreferencesType, ${preferencesType.name}`);
    return tab.visibleProperty;
  }

  /**
   * Move focus to the selected tab. Useful when the Preferences dialog is opened.
   */
  focusSelectedTab() {
    this.content.forEach(content => {
      if (content.value === this.selectedPanelProperty.value) {
        content.focus();
      }
    });
  }
}
joist.register('PreferencesTabs', PreferencesTabs);
export default PreferencesTabs;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJnbG9iZVNvbGlkU2hhcGUiLCJIQm94IiwiS2V5Ym9hcmRMaXN0ZW5lciIsIlBhdGgiLCJqb2lzdCIsIkpvaXN0U3RyaW5ncyIsIlByZWZlcmVuY2VzVHlwZSIsIlByZWZlcmVuY2VzVGFiIiwiTXVsdGlsaW5rIiwiREVGQVVMVF9UQUJfU1BBQ0lORyIsIlByZWZlcmVuY2VzVGFicyIsInNlbGVjdGVkQnV0dG9uIiwiY29udGVudCIsImNvbnN0cnVjdG9yIiwic3VwcG9ydGVkVGFicyIsInNlbGVjdGVkUGFuZWxQcm9wZXJ0eSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJpc0Rpc3Bvc2FibGUiLCJ0YWdOYW1lIiwiYXJpYVJvbGUiLCJncm91cEZvY3VzSGlnaGxpZ2h0Iiwic3BhY2luZyIsImFsaWduIiwiaXNUYWJTdXBwb3J0ZWQiLCJwcmVmZXJlbmNlc1R5cGUiLCJfIiwiaW5jbHVkZXMiLCJkaWxhdGlvbiIsIk9WRVJWSUVXIiwicHVzaCIsInByZWZlcmVuY2VzIiwidGFicyIsIm92ZXJ2aWV3IiwidGl0bGVTdHJpbmdQcm9wZXJ0eSIsInBvaW50ZXJBcmVhWERpbGF0aW9uIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwiU0lNVUxBVElPTiIsInNpbXVsYXRpb24iLCJWSVNVQUwiLCJ2aXN1YWwiLCJBVURJTyIsImF1ZGlvIiwiSU5QVVQiLCJpbnB1dCIsIkxPQ0FMSVpBVElPTiIsImxvY2FsaXphdGlvbiIsImljb25Ob2RlIiwic2NhbGUiLCJmaWxsIiwiY2hpbGRyZW4iLCJtdWx0aWxpbmtBbnkiLCJtYXAiLCJ0YWIiLCJ2aXNpYmxlUHJvcGVydHkiLCJmaW5kIiwidmFsdWUiLCJmaXJzdFNob3dpbmdUYWIiLCJrZXlib2FyZExpc3RlbmVyIiwia2V5cyIsImZpcmVPbkRvd24iLCJmaXJlIiwiZXZlbnQiLCJrZXlzUHJlc3NlZCIsInByZXZlbnREZWZhdWx0IiwiZGlyZWN0aW9uIiwiaSIsImxlbmd0aCIsIm5leHRCdXR0b25Db250ZW50IiwiZm9jdXMiLCJhZGRJbnB1dExpc3RlbmVyIiwic2VsZWN0ZWRQYW5lbExpc3RlbmVyIiwiZm9yRWFjaCIsImxpbmsiLCJmb2N1c2FibGUiLCJpbnB1dEVuYWJsZWRQcm9wZXJ0eSIsImdldFRhYlZpc2libGVQcm9wZXJ0eSIsImFzc2VydCIsIm5hbWUiLCJmb2N1c1NlbGVjdGVkVGFiIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQcmVmZXJlbmNlc1RhYnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVGhlIHRhYnMgZm9yIHRoZSBQcmVmZXJlbmNlc0RpYWxvZy4gQWN0aXZhdGluZyBhIHRhYiB3aWxsIHNlbGVjdCBhIFByZWZlcmVuY2VzVGFiUGFuZWwgdG8gYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyLlxyXG4gKiBUaGUgYWN0dWFsIHRhYnMgYXJlIGltcGxlbWVudGVkIGFzIHJhZGlvIGJ1dHRvbnMsIHN0eWxlZCB0byBsb29rIGxpa2UgZmxhdCBsaWtlIGEgc2V0IG9mIHRhYnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9UUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgZ2xvYmVTb2xpZFNoYXBlIGZyb20gJy4uLy4uLy4uL3NoZXJwYS9qcy9mb250YXdlc29tZS01L2dsb2JlU29saWRTaGFwZS5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIEhCb3hPcHRpb25zLCBLZXlib2FyZExpc3RlbmVyLCBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGpvaXN0IGZyb20gJy4uL2pvaXN0LmpzJztcclxuaW1wb3J0IEpvaXN0U3RyaW5ncyBmcm9tICcuLi9Kb2lzdFN0cmluZ3MuanMnO1xyXG5pbXBvcnQgUHJlZmVyZW5jZXNUeXBlIGZyb20gJy4vUHJlZmVyZW5jZXNUeXBlLmpzJztcclxuaW1wb3J0IFByZWZlcmVuY2VzVGFiIGZyb20gJy4vUHJlZmVyZW5jZXNUYWIuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxuZXhwb3J0IHR5cGUgUHJlZmVyZW5jZXNUYWJzT3B0aW9ucyA9IEhCb3hPcHRpb25zICYgUGlja1JlcXVpcmVkPEhCb3hPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5jb25zdCBERUZBVUxUX1RBQl9TUEFDSU5HID0gMTA7XHJcblxyXG5jbGFzcyBQcmVmZXJlbmNlc1RhYnMgZXh0ZW5kcyBIQm94IHtcclxuXHJcbiAgLy8gIEEgcmVmZXJlbmNlIHRvIHRoZSBzZWxlY3RlZCBhbmQgZm9jdXNhYmxlIHRhYiBjb250ZW50IHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB3aGljaFxyXG4gIC8vIHRhYiBpcyBuZXh0IGluIG9yZGVyIHdoZW4gY3ljbGluZyB0aHJvdWdoIHdpdGggYWx0ZXJuYXRpdmUgaW5wdXQuXHJcbiAgcHJpdmF0ZSBzZWxlY3RlZEJ1dHRvbjogTm9kZSB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgc2VsZWN0ZWRQYW5lbFByb3BlcnR5OiBUUHJvcGVydHk8UHJlZmVyZW5jZXNUeXBlPjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGNvbnRlbnQ6IFByZWZlcmVuY2VzVGFiW10gPSBbXTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBzdXBwb3J0ZWRUYWJzOiBQcmVmZXJlbmNlc1R5cGVbXSwgc2VsZWN0ZWRQYW5lbFByb3BlcnR5OiBUUHJvcGVydHk8UHJlZmVyZW5jZXNUeXBlPiwgcHJvdmlkZWRPcHRpb25zOiBQcmVmZXJlbmNlc1RhYnNPcHRpb25zICkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxQcmVmZXJlbmNlc1RhYnNPcHRpb25zLCBTZWxmT3B0aW9ucywgSEJveE9wdGlvbnM+KCkoIHtcclxuICAgICAgaXNEaXNwb3NhYmxlOiBmYWxzZSxcclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgdGFnTmFtZTogJ3VsJyxcclxuICAgICAgYXJpYVJvbGU6ICd0YWJsaXN0JyxcclxuICAgICAgZ3JvdXBGb2N1c0hpZ2hsaWdodDogdHJ1ZSxcclxuICAgICAgc3BhY2luZzogREVGQVVMVF9UQUJfU1BBQ0lORyxcclxuICAgICAgYWxpZ246ICdib3R0b20nXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuc2VsZWN0ZWRQYW5lbFByb3BlcnR5ID0gc2VsZWN0ZWRQYW5lbFByb3BlcnR5O1xyXG5cclxuICAgIGNvbnN0IGlzVGFiU3VwcG9ydGVkID0gKCBwcmVmZXJlbmNlc1R5cGU6IFByZWZlcmVuY2VzVHlwZSApID0+IF8uaW5jbHVkZXMoIHN1cHBvcnRlZFRhYnMsIHByZWZlcmVuY2VzVHlwZSApO1xyXG5cclxuICAgIC8vIEEgZGlsYXRpb24gb2YgdGhlIHBvaW50ZXIgYXJlYXMgbWFrZXMgaXQgc28gdGhhdCBoaWdobGlnaHRzIHRoYXQgc29ycm91bmQgdGhlIHRhYnMgYXJlIGZsdXNoIGFnYWluc3QgZWFjaG90aGVyXHJcbiAgICAvLyB3aGljaCBsb29rcyBiZXR0ZXIsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzkzMlxyXG4gICAgY29uc3QgZGlsYXRpb24gPSBvcHRpb25zLnNwYWNpbmcgLyAyO1xyXG4gICAgaWYgKCBpc1RhYlN1cHBvcnRlZCggUHJlZmVyZW5jZXNUeXBlLk9WRVJWSUVXICkgKSB7XHJcbiAgICAgIHRoaXMuY29udGVudC5wdXNoKCBuZXcgUHJlZmVyZW5jZXNUYWIoIEpvaXN0U3RyaW5ncy5wcmVmZXJlbmNlcy50YWJzLm92ZXJ2aWV3LnRpdGxlU3RyaW5nUHJvcGVydHksIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eSwgUHJlZmVyZW5jZXNUeXBlLk9WRVJWSUVXLCB7XHJcbiAgICAgICAgcG9pbnRlckFyZWFYRGlsYXRpb246IGRpbGF0aW9uLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnb3ZlcnZpZXdUYWInIClcclxuICAgICAgfSApICk7XHJcbiAgICB9XHJcbiAgICBpZiAoIGlzVGFiU3VwcG9ydGVkKCBQcmVmZXJlbmNlc1R5cGUuU0lNVUxBVElPTiApICkge1xyXG4gICAgICB0aGlzLmNvbnRlbnQucHVzaCggbmV3IFByZWZlcmVuY2VzVGFiKCBKb2lzdFN0cmluZ3MucHJlZmVyZW5jZXMudGFicy5zaW11bGF0aW9uLnRpdGxlU3RyaW5nUHJvcGVydHksIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eSwgUHJlZmVyZW5jZXNUeXBlLlNJTVVMQVRJT04sIHtcclxuICAgICAgICBwb2ludGVyQXJlYVhEaWxhdGlvbjogZGlsYXRpb24sXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdzaW11bGF0aW9uVGFiJyApXHJcbiAgICAgIH0gKSApO1xyXG4gICAgfVxyXG4gICAgaWYgKCBpc1RhYlN1cHBvcnRlZCggUHJlZmVyZW5jZXNUeXBlLlZJU1VBTCApICkge1xyXG4gICAgICB0aGlzLmNvbnRlbnQucHVzaCggbmV3IFByZWZlcmVuY2VzVGFiKCBKb2lzdFN0cmluZ3MucHJlZmVyZW5jZXMudGFicy52aXN1YWwudGl0bGVTdHJpbmdQcm9wZXJ0eSwgc2VsZWN0ZWRQYW5lbFByb3BlcnR5LCBQcmVmZXJlbmNlc1R5cGUuVklTVUFMLCB7XHJcbiAgICAgICAgcG9pbnRlckFyZWFYRGlsYXRpb246IGRpbGF0aW9uLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndmlzdWFsVGFiJyApXHJcbiAgICAgIH0gKSApO1xyXG4gICAgfVxyXG4gICAgaWYgKCBpc1RhYlN1cHBvcnRlZCggUHJlZmVyZW5jZXNUeXBlLkFVRElPICkgKSB7XHJcbiAgICAgIHRoaXMuY29udGVudC5wdXNoKCBuZXcgUHJlZmVyZW5jZXNUYWIoIEpvaXN0U3RyaW5ncy5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnRpdGxlU3RyaW5nUHJvcGVydHksIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eSwgUHJlZmVyZW5jZXNUeXBlLkFVRElPLCB7XHJcbiAgICAgICAgcG9pbnRlckFyZWFYRGlsYXRpb246IGRpbGF0aW9uLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYXVkaW9UYWInIClcclxuICAgICAgfSApICk7XHJcbiAgICB9XHJcbiAgICBpZiAoIGlzVGFiU3VwcG9ydGVkKCBQcmVmZXJlbmNlc1R5cGUuSU5QVVQgKSApIHtcclxuICAgICAgdGhpcy5jb250ZW50LnB1c2goIG5ldyBQcmVmZXJlbmNlc1RhYiggSm9pc3RTdHJpbmdzLnByZWZlcmVuY2VzLnRhYnMuaW5wdXQudGl0bGVTdHJpbmdQcm9wZXJ0eSwgc2VsZWN0ZWRQYW5lbFByb3BlcnR5LCBQcmVmZXJlbmNlc1R5cGUuSU5QVVQsIHtcclxuICAgICAgICBwb2ludGVyQXJlYVhEaWxhdGlvbjogZGlsYXRpb24sXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdpbnB1dFRhYicgKVxyXG4gICAgICB9ICkgKTtcclxuICAgIH1cclxuICAgIGlmICggaXNUYWJTdXBwb3J0ZWQoIFByZWZlcmVuY2VzVHlwZS5MT0NBTElaQVRJT04gKSApIHtcclxuICAgICAgdGhpcy5jb250ZW50LnB1c2goIG5ldyBQcmVmZXJlbmNlc1RhYiggSm9pc3RTdHJpbmdzLnByZWZlcmVuY2VzLnRhYnMubG9jYWxpemF0aW9uLnRpdGxlU3RyaW5nUHJvcGVydHksIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eSwgUHJlZmVyZW5jZXNUeXBlLkxPQ0FMSVpBVElPTiwge1xyXG4gICAgICAgIHBvaW50ZXJBcmVhWERpbGF0aW9uOiBkaWxhdGlvbixcclxuXHJcbiAgICAgICAgLy8gRGlzcGxheSBhIGdsb2JlIGljb24gbmV4dCB0byB0aGUgbG9jYWxpemF0aW9uIGxhYmVsXHJcbiAgICAgICAgaWNvbk5vZGU6IG5ldyBQYXRoKCBnbG9iZVNvbGlkU2hhcGUsIHtcclxuICAgICAgICAgIHNjYWxlOiAxIC8gMjUsIC8vIGJ5IGluc3BlY3Rpb25cclxuICAgICAgICAgIGZpbGw6ICdibGFjaydcclxuICAgICAgICB9ICksXHJcblxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbG9jYWxpemF0aW9uVGFiJyApXHJcbiAgICAgIH0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLmNvbnRlbnQ7XHJcblxyXG4gICAgLy8gSWYgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB0YWIgaXMgaGlkZGVuIHZpYSBwaGV0LWlvLCB0aGVuIHNlbGVjdCB0aGUgZmlyc3QgdmlzaWJsZSB0YWIgKGlmIHRoZXJlIGlzIG9uZSlcclxuICAgIE11bHRpbGluay5tdWx0aWxpbmtBbnkoIFsgc2VsZWN0ZWRQYW5lbFByb3BlcnR5LCAuLi50aGlzLmNvbnRlbnQubWFwKCB0YWIgPT4gdGFiLnZpc2libGVQcm9wZXJ0eSApIF0sICgpID0+IHtcclxuXHJcbiAgICAgIC8vIEZpbmQgdGhlIHRhYiBjb3JyZXNwb25kaW5nIHRvIHRoZSBjdXJyZW50IHNlbGVjdGlvblxyXG4gICAgICBjb25zdCB0YWIgPSB0aGlzLmNvbnRlbnQuZmluZCggdGFiID0+IHRhYi52YWx1ZSA9PT0gc2VsZWN0ZWRQYW5lbFByb3BlcnR5LnZhbHVlICkhO1xyXG5cclxuICAgICAgLy8gSWYgdGhlIHNlbGVjdGVkIHRhYiBpcyBub3Qgc2hvd2luZy4uLlxyXG4gICAgICBpZiAoICF0YWIudmlzaWJsZVByb3BlcnR5LnZhbHVlICkge1xyXG5cclxuICAgICAgICAvLyBGaW5kIHRoZSBsZWZ0bW9zdCB0YWIgdGhhdCBpcyBzaG93aW5nIChpZiB0aGVyZSBhcmUgYW55IHNob3dpbmcgdGFicylcclxuICAgICAgICBjb25zdCBmaXJzdFNob3dpbmdUYWIgPSB0aGlzLmNvbnRlbnQuZmluZCggdGFiID0+IHRhYi52aXNpYmxlUHJvcGVydHkudmFsdWUgKTtcclxuICAgICAgICBpZiAoIGZpcnN0U2hvd2luZ1RhYiApIHtcclxuICAgICAgICAgIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eS52YWx1ZSA9IGZpcnN0U2hvd2luZ1RhYi52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBwZG9tIC0ga2V5Ym9hcmQgc3VwcG9ydCB0byBtb3ZlIHRocm91Z2ggdGFicyB3aXRoIGFycm93IGtleXNcclxuICAgIGNvbnN0IGtleWJvYXJkTGlzdGVuZXIgPSBuZXcgS2V5Ym9hcmRMaXN0ZW5lcigge1xyXG4gICAgICBrZXlzOiBbICdhcnJvd1JpZ2h0JywgJ2Fycm93TGVmdCcgXSxcclxuICAgICAgZmlyZU9uRG93bjogZmFsc2UsXHJcbiAgICAgIGZpcmU6ICggZXZlbnQsIGtleXNQcmVzc2VkICkgPT4ge1xyXG5cclxuICAgICAgICAvLyBwcmV2ZW50IFwibmF0aXZlXCIgYmVoYXZpb3Igc28gdGhhdCBTYWZhcmkgZG9lc24ndCBtYWtlIGFuIGVycm9yIHNvdW5kIHdpdGggYXJyb3cga2V5cyBpbiBmdWxsIHNjcmVlbiBtb2RlXHJcbiAgICAgICAgaWYgKCBldmVudCApIHtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBrZXlzUHJlc3NlZCA9PT0gJ2Fycm93UmlnaHQnID8gMSA6IC0xO1xyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMuY29udGVudC5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgIGlmICggdGhpcy5zZWxlY3RlZEJ1dHRvbiA9PT0gdGhpcy5jb250ZW50WyBpIF0gKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRCdXR0b25Db250ZW50ID0gdGhpcy5jb250ZW50WyBpICsgZGlyZWN0aW9uIF07XHJcbiAgICAgICAgICAgIGlmICggbmV4dEJ1dHRvbkNvbnRlbnQgKSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHNlbGVjdCB0aGUgbmV4dCB0YWIgYW5kIG1vdmUgZm9jdXMgdG8gaXQgLSBhIGxpc3RlbmVyIG9uIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eSBzZXRzIHRoZSBuZXh0XHJcbiAgICAgICAgICAgICAgLy8gc2VsZWN0ZWRCdXR0b24gYW5kIG1ha2VzIGl0IGZvY3VzYWJsZVxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkUGFuZWxQcm9wZXJ0eS52YWx1ZSA9IG5leHRCdXR0b25Db250ZW50LnZhbHVlO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRCdXR0b24uZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lcigga2V5Ym9hcmRMaXN0ZW5lciApO1xyXG5cclxuICAgIGNvbnN0IHNlbGVjdGVkUGFuZWxMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgICAgdGhpcy5jb250ZW50LmZvckVhY2goIGNvbnRlbnQgPT4ge1xyXG4gICAgICAgIGlmICggY29udGVudC52YWx1ZSA9PT0gdGhpcy5zZWxlY3RlZFBhbmVsUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQnV0dG9uID0gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICAgIH07XHJcbiAgICBzZWxlY3RlZFBhbmVsUHJvcGVydHkubGluayggc2VsZWN0ZWRQYW5lbExpc3RlbmVyICk7XHJcblxyXG4gICAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUgdGFiLCBpdCBpcyBub3QgaW50ZXJhY3RpdmVcclxuICAgIGlmICggc3VwcG9ydGVkVGFicy5sZW5ndGggPT09IDEgKSB7XHJcbiAgICAgIHRoaXMuZm9jdXNhYmxlID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaW5wdXRFbmFibGVkUHJvcGVydHkudmFsdWUgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHZpc2libGVQcm9wZXJ0eSBmb3IgdGhlIFRhYiBhc3NvY2lhdGVkIHdpdGggdGhlIFByZWZlcmVuY2VzVHlwZS4gUHJlZmVyZW5jZXNUYWJzIG5lZWQgdG8gYmUgaGlkZGVuXHJcbiAgICogaWYgdGhlIFRhYiBiZWNvbWVzIGludmlzaWJsZSAobW9zdGx5IG5lZWRlZCBmb3IgUGhFVC1pTykuXHJcbiAgICovXHJcbiAgcHVibGljIGdldFRhYlZpc2libGVQcm9wZXJ0eSggcHJlZmVyZW5jZXNUeXBlOiBQcmVmZXJlbmNlc1R5cGUgKTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4ge1xyXG4gICAgY29uc3QgdGFiID0gXy5maW5kKCB0aGlzLmNvbnRlbnQsIGNvbnRlbnQgPT4gY29udGVudC52YWx1ZSA9PT0gcHJlZmVyZW5jZXNUeXBlICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0YWIsIGB0YWIgbm90IGZvdW5kIGZvciBQcmVmZXJlbmNlc1R5cGUsICR7cHJlZmVyZW5jZXNUeXBlLm5hbWV9YCApO1xyXG4gICAgcmV0dXJuIHRhYiEudmlzaWJsZVByb3BlcnR5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTW92ZSBmb2N1cyB0byB0aGUgc2VsZWN0ZWQgdGFiLiBVc2VmdWwgd2hlbiB0aGUgUHJlZmVyZW5jZXMgZGlhbG9nIGlzIG9wZW5lZC5cclxuICAgKi9cclxuICBwdWJsaWMgZm9jdXNTZWxlY3RlZFRhYigpOiB2b2lkIHtcclxuICAgIHRoaXMuY29udGVudC5mb3JFYWNoKCBjb250ZW50ID0+IHtcclxuICAgICAgaWYgKCBjb250ZW50LnZhbHVlID09PSB0aGlzLnNlbGVjdGVkUGFuZWxQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgICBjb250ZW50LmZvY3VzKCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmpvaXN0LnJlZ2lzdGVyKCAnUHJlZmVyZW5jZXNUYWJzJywgUHJlZmVyZW5jZXNUYWJzICk7XHJcbmV4cG9ydCBkZWZhdWx0IFByZWZlcmVuY2VzVGFiczsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQSxPQUFPQSxTQUFTLE1BQTRCLG9DQUFvQztBQUNoRixPQUFPQyxlQUFlLE1BQU0scURBQXFEO0FBQ2pGLFNBQVNDLElBQUksRUFBZUMsZ0JBQWdCLEVBQVFDLElBQUksUUFBUSxnQ0FBZ0M7QUFDaEcsT0FBT0MsS0FBSyxNQUFNLGFBQWE7QUFDL0IsT0FBT0MsWUFBWSxNQUFNLG9CQUFvQjtBQUM3QyxPQUFPQyxlQUFlLE1BQU0sc0JBQXNCO0FBQ2xELE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFFaEQsT0FBT0MsU0FBUyxNQUFNLCtCQUErQjtBQU1yRCxNQUFNQyxtQkFBbUIsR0FBRyxFQUFFO0FBRTlC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