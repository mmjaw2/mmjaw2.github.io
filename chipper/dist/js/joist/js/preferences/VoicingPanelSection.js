// Copyright 2021-2023, University of Colorado Boulder

/**
 * The section of PreferencesDialog content in the "Audio" panel related to voicing.
 *
 * @author Jesse Greenberg
 */

import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import Dimension2 from '../../../dot/js/Dimension2.js';
import Range from '../../../dot/js/Range.js';
import Utils from '../../../dot/js/Utils.js';
import merge from '../../../phet-core/js/merge.js';
import optionize, { combineOptions } from '../../../phet-core/js/optionize.js';
import NumberControl from '../../../scenery-phet/js/NumberControl.js';
import PhetFont from '../../../scenery-phet/js/PhetFont.js';
import { HighlightFromNode, Node, PressListener, Text, VBox, voicingManager, VoicingText } from '../../../scenery/js/imports.js';
import Checkbox from '../../../sun/js/Checkbox.js';
import ComboBox from '../../../sun/js/ComboBox.js';
import ExpandCollapseButton from '../../../sun/js/ExpandCollapseButton.js';
import HSlider from '../../../sun/js/HSlider.js';
import Tandem from '../../../tandem/js/Tandem.js';
import Utterance from '../../../utterance-queue/js/Utterance.js';
import joist from '../joist.js';
import JoistStrings from '../JoistStrings.js';
import PreferencesDialog from './PreferencesDialog.js';
import PreferencesPanelSection from './PreferencesPanelSection.js';
import PreferencesControl from './PreferencesControl.js';
import localeProperty from '../i18n/localeProperty.js';
import ToggleSwitch from '../../../sun/js/ToggleSwitch.js';
import PreferencesDialogConstants from './PreferencesDialogConstants.js';
import PatternStringProperty from '../../../axon/js/PatternStringProperty.js';
import DerivedProperty from '../../../axon/js/DerivedProperty.js';
// constants
// none of the Voicing strings or feature is translatable yet, all strings in this file
// are nested under the 'a11y' section to make sure that they are not translatable
const voicingLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.titleStringProperty;
const toolbarLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.toolbar.titleStringProperty;
const rateStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.titleStringProperty;
const rateLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.labelStringStringProperty;
const pitchStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.pitch.titleStringProperty;
const voicingEnabledStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.voicingOnStringProperty;
const voicingDisabledStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.voicingOffStringProperty;
const voicingOffOnlyAvailableInEnglishStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.voicingOffOnlyAvailableInEnglishStringProperty;
const voiceVariablesPatternStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.variablesPatternStringProperty;
const customizeVoiceStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.titleStringProperty;
const toolbarRemovedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.toolbar.toolbarRemovedStringProperty;
const toolbarAddedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.toolbar.toolbarAddedStringProperty;
const simVoicingOptionsStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.titleStringProperty;
const simVoicingDescriptionStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.descriptionStringProperty;
const objectDetailsLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.objectDetails.labelStringProperty;
const contextChangesLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.contextChanges.labelStringProperty;
const helpfulHintsLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.helpfulHints.labelStringProperty;
const voicingObjectChangesStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.objectDetails.enabledAlertStringProperty;
const objectChangesMutedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.objectDetails.disabledAlertStringProperty;
const voicingContextChangesStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.contextChanges.enabledAlertStringProperty;
const contextChangesMutedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.contextChanges.disabledAlertStringProperty;
const voicingHintsStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.helpfulHints.enabledAlertStringProperty;
const hintsMutedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.simVoicingOptions.helpfulHints.disabledAlertStringProperty;
const voiceLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.voice.titleStringProperty;
const voiceTitlePatternLabelStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.voice.titlePatternStringProperty;
const noVoicesAvailableStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.voice.noVoicesAvailableStringProperty;
const customizeVoiceExpandedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.expandedAlertStringProperty;
const customizeVoiceCollapsedStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.collapsedAlertStringProperty;
const voiceRateDescriptionPatternStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.writtenVariablesPatternStringProperty;
const labelledDescriptionPatternStringProperty = JoistStrings.a11y.preferences.tabs.labelledDescriptionPatternStringProperty;
const voiceRateNormalStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.voiceRateNormalStringProperty;
const inLowRangeStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.lowStringProperty;
const inNormalRangeStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.normalStringProperty;
const aboveNormalRangeStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.aboveNormalStringProperty;
const inHighRangeStringProperty = JoistStrings.a11y.preferences.tabs.audio.voicing.customizeVoice.rate.rangeDescriptions.highStringProperty;

// Voicing can appear but become disabled when running with multiple locales. This translatable label is present for
// translated sims in this case.
const voicingEnglishOnlyLabelStringProperty = JoistStrings.preferences.tabs.audio.voicing.titleEnglishOnlyStringProperty;
const voicingDescriptionStringProperty = JoistStrings.preferences.tabs.audio.voicing.descriptionStringProperty;
const VOICE_PITCH_DESCRIPTION_MAP = new Map();
VOICE_PITCH_DESCRIPTION_MAP.set(new Range(0.5, 0.75), inLowRangeStringProperty);
VOICE_PITCH_DESCRIPTION_MAP.set(new Range(0.75, 1.25), inNormalRangeStringProperty);
VOICE_PITCH_DESCRIPTION_MAP.set(new Range(1.25, 1.5), aboveNormalRangeStringProperty);
VOICE_PITCH_DESCRIPTION_MAP.set(new Range(1.5, 2), inHighRangeStringProperty);
const THUMB_SIZE = new Dimension2(13, 26);
const TRACK_SIZE = new Dimension2(100, 5);
class VoicingPanelSection extends PreferencesPanelSection {
  /**
   * @param audioModel - configuration for audio settings, see PreferencesModel
   * @param [providedOptions]
   */
  constructor(audioModel, providedOptions) {
    // Voicing feature only works when running in English. If running in a version where you can change locale,
    // indicate through the title that the feature will only work in English.
    const titleStringProperty = localeProperty.validValues && localeProperty.validValues.length > 1 ? voicingEnglishOnlyLabelStringProperty : voicingLabelStringProperty;

    // the checkbox is the title for the section and totally enables/disables the feature
    const voicingLabel = new Text(titleStringProperty, PreferencesDialog.PANEL_SECTION_LABEL_OPTIONS);
    const voicingEnabledReadingBlockNameResponsePatternStringProperty = new PatternStringProperty(labelledDescriptionPatternStringProperty, {
      label: titleStringProperty,
      description: voicingDescriptionStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const voicingEnabledSwitchVoicingText = new VoicingText(voicingDescriptionStringProperty, merge({}, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS, {
      readingBlockNameResponse: voicingEnabledReadingBlockNameResponsePatternStringProperty
    }));
    const voicingToggleSwitch = new ToggleSwitch(audioModel.voicingEnabledProperty, false, true, combineOptions({
      a11yName: titleStringProperty
    }, PreferencesDialogConstants.TOGGLE_SWITCH_OPTIONS));
    const voicingEnabledSwitch = new PreferencesControl({
      labelNode: voicingLabel,
      descriptionNode: voicingEnabledSwitchVoicingText,
      controlNode: voicingToggleSwitch
    });

    // checkbox for the toolbar
    const quickAccessLabel = new Text(toolbarLabelStringProperty, PreferencesDialog.PANEL_SECTION_LABEL_OPTIONS);
    const toolbarToggleSwitch = new ToggleSwitch(audioModel.toolbarEnabledProperty, false, true, combineOptions({
      a11yName: toolbarLabelStringProperty,
      leftValueContextResponse: toolbarRemovedStringProperty,
      rightValueContextResponse: toolbarAddedStringProperty
    }, PreferencesDialogConstants.TOGGLE_SWITCH_OPTIONS));
    const toolbarEnabledSwitch = new PreferencesControl({
      labelNode: quickAccessLabel,
      controlNode: toolbarToggleSwitch
    });

    // Speech output levels
    const speechOutputLabel = new Text(simVoicingOptionsStringProperty, merge({}, PreferencesDialog.PANEL_SECTION_LABEL_OPTIONS, {
      // pdom
      tagName: 'h3',
      innerContent: simVoicingOptionsStringProperty
    }));
    const speechOutputReadingBlockNameResponsePatternStringProperty = new PatternStringProperty(labelledDescriptionPatternStringProperty, {
      label: simVoicingOptionsStringProperty,
      description: simVoicingDescriptionStringProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const speechOutputDescription = new VoicingText(simVoicingDescriptionStringProperty, merge({}, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS, {
      readingBlockNameResponse: speechOutputReadingBlockNameResponsePatternStringProperty
    }));

    /**
     * Create a checkbox for the features of voicing content with a label.
     */
    const createCheckbox = (labelString, property, checkedContextResponse, uncheckedContextResponse, disposable) => {
      const labelNode = new Text(labelString, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS);
      const checkbox = new Checkbox(property, labelNode, {
        // pdom
        labelTagName: 'label',
        labelContent: labelString,
        // voicing
        voicingNameResponse: labelString,
        voicingIgnoreVoicingManagerProperties: true,
        voiceNameResponseOnSelection: false,
        // both pdom and voicing
        checkedContextResponse: checkedContextResponse,
        uncheckedContextResponse: uncheckedContextResponse,
        // phet-io
        tandem: Tandem.OPT_OUT // We don't want to instrument components for preferences, https://github.com/phetsims/joist/issues/744#issuecomment-1196028362
      });
      return checkbox;
    };
    const speechOutputContent = new Node();
    const speechOutputCheckboxes = new VBox({
      align: 'left',
      spacing: PreferencesDialog.VERTICAL_CONTENT_SPACING,
      children: [createCheckbox(objectDetailsLabelStringProperty, audioModel.voicingObjectResponsesEnabledProperty, voicingObjectChangesStringProperty, objectChangesMutedStringProperty, speechOutputLabel), createCheckbox(contextChangesLabelStringProperty, audioModel.voicingContextResponsesEnabledProperty, voicingContextChangesStringProperty, contextChangesMutedStringProperty, speechOutputLabel), createCheckbox(helpfulHintsLabelStringProperty, audioModel.voicingHintResponsesEnabledProperty, voicingHintsStringProperty, hintsMutedStringProperty, speechOutputLabel)]
    });
    speechOutputContent.children = [speechOutputLabel, speechOutputDescription, speechOutputCheckboxes];
    speechOutputDescription.leftTop = speechOutputLabel.leftBottom.plusXY(0, PreferencesDialog.VERTICAL_CONTENT_SPACING);
    speechOutputCheckboxes.leftTop = speechOutputDescription.leftBottom.plusXY(PreferencesDialog.CONTENT_INDENTATION_SPACING, PreferencesDialog.VERTICAL_CONTENT_SPACING);
    const rateSlider = new VoiceRateNumberControl(rateStringProperty, rateLabelStringProperty, audioModel.voiceRateProperty);
    const pitchSlider = new VoicingPitchSlider(pitchStringProperty, audioModel.voicePitchProperty);
    const voiceOptionsContent = new VBox({
      spacing: PreferencesDialog.VERTICAL_CONTENT_SPACING,
      align: 'left',
      children: [rateSlider, pitchSlider]
    });

    // voice options
    const voiceOptionsLabel = new Text(customizeVoiceStringProperty, merge({}, PreferencesDialog.PANEL_SECTION_LABEL_OPTIONS, {
      cursor: 'pointer'
    }));
    const voiceOptionsOpenProperty = new BooleanProperty(false);
    const expandCollapseButton = new ExpandCollapseButton(voiceOptionsOpenProperty, {
      sideLength: 16,
      // pdom
      innerContent: customizeVoiceStringProperty,
      // voicing
      voicingNameResponse: customizeVoiceStringProperty,
      voicingIgnoreVoicingManagerProperties: true,
      // Controls need to always speak responses so UI functions are clear

      // phet-io
      tandem: Tandem.OPT_OUT // We don't want to instrument components for preferences, https://github.com/phetsims/joist/issues/744#issuecomment-1196028362
    });
    const voiceOptionsContainer = new Node({
      children: [voiceOptionsLabel, expandCollapseButton]
    });

    // the visual title of the ExpandCollapseButton needs to be clickable
    const voiceOptionsPressListener = new PressListener({
      press: () => {
        voiceOptionsOpenProperty.toggle();
      },
      // phet-io
      tandem: Tandem.OPT_OUT // We don't want to instrument components for preferences, https://github.com/phetsims/joist/issues/744#issuecomment-1196028362
    });
    voiceOptionsLabel.addInputListener(voiceOptionsPressListener);
    const content = new Node({
      children: [speechOutputContent, toolbarEnabledSwitch, voiceOptionsContainer, voiceOptionsContent]
    });

    // layout for section content, custom rather than using a FlowBox because the voice options label needs
    // to be left aligned with other labels, while the ExpandCollapseButton extends to the left
    toolbarEnabledSwitch.leftTop = speechOutputContent.leftBottom.plusXY(0, 20);
    voiceOptionsLabel.leftTop = toolbarEnabledSwitch.leftBottom.plusXY(0, 20);
    expandCollapseButton.leftCenter = voiceOptionsLabel.rightCenter.plusXY(10, 0);
    voiceOptionsContent.leftTop = voiceOptionsLabel.leftBottom.plusXY(0, 10);
    voiceOptionsOpenProperty.link(open => {
      voiceOptionsContent.visible = open;
    });

    // the focus highlight for the voice options expand collapse button should surround the label
    expandCollapseButton.focusHighlight = new HighlightFromNode(voiceOptionsContainer);
    super({
      titleNode: voicingEnabledSwitch,
      contentNode: content
    });
    const contentVisibilityListener = enabled => {
      content.visible = enabled;
    };
    audioModel.voicingEnabledProperty.link(contentVisibilityListener);
    const localeListener = locale => {
      voicingEnabledSwitch.enabledProperty.value = locale.startsWith('en');
    };
    localeProperty.link(localeListener);

    // Speak when voicing becomes initially enabled. First speech is done synchronously (not using utterance-queue)
    // in response to user input, otherwise all speech will be blocked on many platforms
    const voicingEnabledUtterance = new Utterance();
    const voicingEnabledPropertyListener = enabled => {
      // only speak if "Sim Voicing" is on, all voicing should be disabled except for the Toolbar
      // buttons in this case
      if (audioModel.voicingMainWindowVoicingEnabledProperty.value) {
        // If locale changes, make sure to describe that Voicing has become disabled because Voicing is only available
        // in the English locale.
        voicingEnabledUtterance.alert = enabled ? voicingEnabledStringProperty : localeProperty.value.startsWith('en') ? voicingDisabledStringProperty : voicingOffOnlyAvailableInEnglishStringProperty;

        // PhET-iO Archetypes should never voice responses.
        if (!this.isInsidePhetioArchetype()) {
          voicingManager.speakIgnoringEnabled(voicingEnabledUtterance);
        }
        this.alertDescriptionUtterance(voicingEnabledUtterance);
      }
    };
    audioModel.voicingEnabledProperty.lazyLink(voicingEnabledPropertyListener);

    // when the list of voices for the ComboBox changes, create a new ComboBox that includes the supported
    // voices. Eagerly create the first ComboBox, even if no voices are available.
    let voiceComboBox = null;
    const voicesChangedListener = voices => {
      if (voiceComboBox) {
        voiceOptionsContent.removeChild(voiceComboBox);

        // Disposal is required before creating a new one when available voices change
        voiceComboBox.dispose();
      }
      let voiceList = [];

      // Only get the prioritized and pruned list of voices if the VoicingManager has voices
      // available, otherwise wait until they are available. If there are no voices available VoiceComboBox will handle
      // that gracefully.
      // Voice changing is not (as of this writing) available on MacOS or iOS, but we hope they fix that bug soon. Perhaps
      // next time someone is working in this area, they can check and see if it is working, https://github.com/phetsims/utterance-queue/issues/74
      if (voices.length > 0) {
        // For now, only English voices are available because the Voicing feature is not translatable.
        const prioritizedVoices = voicingManager.getEnglishPrioritizedVoices();

        // limit the voices for now to keep the size of the ComboBox manageable
        voiceList = prioritizedVoices.slice(0, 12);
      }

      // phet-io - for when creating the Archetype for the Capsule housing the preferencesDialog, we don't have a sim global.
      // TODO: topLayer should be private, see https://github.com/phetsims/joist/issues/841
      const parent = phet.joist.sim.topLayer || new Node();
      voiceComboBox = new VoiceComboBox(audioModel.voiceProperty, voiceList, parent);
      voiceOptionsContent.addChild(voiceComboBox);
    };
    voicingManager.voicesProperty.link(voicesChangedListener);
    voiceOptionsOpenProperty.lazyLink(open => {
      const alertStringProperty = open ? customizeVoiceExpandedStringProperty : customizeVoiceCollapsedStringProperty;
      expandCollapseButton.voicingSpeakContextResponse({
        contextResponse: alertStringProperty
      });
      this.alertDescriptionUtterance(alertStringProperty);
    });
  }
}

/**
 * Create a NumberControl for one of the voice parameters of voicing (pitch/rate).
 *
 * @param labelString - label for the NumberControl
 * @param a11yNameString - label for both PDOM and Voicing content
 * @param voiceRateProperty
 */
class VoiceRateNumberControl extends NumberControl {
  constructor(labelString, a11yNameString, voiceRateProperty) {
    super(labelString, voiceRateProperty, voiceRateProperty.range, {
      includeArrowButtons: false,
      layoutFunction: NumberControl.createLayoutFunction4(),
      delta: 0.25,
      titleNodeOptions: merge({}, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS, {
        maxWidth: 45
      }),
      numberDisplayOptions: {
        decimalPlaces: 2,
        valuePattern: voiceVariablesPatternStringProperty,
        textOptions: merge({}, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS, {
          maxWidth: 45
        })
      },
      sliderOptions: {
        thumbSize: THUMB_SIZE,
        trackSize: TRACK_SIZE,
        keyboardStep: 0.25,
        minorTickSpacing: 0.25,
        // pdom
        labelTagName: 'label',
        labelContent: a11yNameString,
        // voicing
        voicingOnEndResponseOptions: {
          withNameResponse: true
        }
      },
      // phet-io
      tandem: Tandem.OPT_OUT // We don't want to instrument components for preferences, https://github.com/phetsims/joist/issues/744#issuecomment-1196028362
    });

    // Voicing goes through the NumberControl slider through AccessibleValueHandler
    this.slider.voicingNameResponse = a11yNameString;

    // ignore the selections of the PreferencesDialog, we always want to hear all responses
    // that happen when changing the voice attributes
    this.slider.voicingIgnoreVoicingManagerProperties = true;
    const voiceRateNonNormalPatternStringProperty = new PatternStringProperty(voiceRateDescriptionPatternStringProperty, {
      value: voiceRateProperty
    }, {
      tandem: Tandem.OPT_OUT
    });
    const voiceRateResponseProperty = new DerivedProperty([voiceRateProperty, voiceRateNormalStringProperty, voiceRateNonNormalPatternStringProperty], (rate, normal, nonNormal) => {
      return rate === 1 ? normal : nonNormal;
    });
    this.slider.voicingObjectResponse = voiceRateResponseProperty;
  }
}
/**
 * Inner class for the ComboBox that selects the voice for the voicingManager. This ComboBox can be created and destroyed
 * a few times as the browser list of supported voices may change while the SpeechSynthesis is first getting put to
 * use.
 */
class VoiceComboBox extends ComboBox {
  /**
   * @param  voiceProperty
   * @param voices - list of voices to include from the voicingManager
   * @param parentNode - node that acts as a parent for the ComboBox list
   * @param [providedOptions]
   */
  constructor(voiceProperty, voices, parentNode, providedOptions) {
    const options = optionize()({
      listPosition: 'above',
      accessibleName: voiceLabelStringProperty,
      comboBoxVoicingNameResponsePattern: voiceTitlePatternLabelStringProperty.value,
      // phet-io
      // We don't want to instrument components for preferences, https://github.com/phetsims/joist/issues/744#issuecomment-1196028362
      // Furthermore, opt out because we would need to instrument voices, but those could change between runtimes.
      tandem: Tandem.OPT_OUT
    }, providedOptions);
    const items = [];
    if (voices.length === 0) {
      items.push({
        value: null,
        createNode: tandem => new Text(noVoicesAvailableStringProperty, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS),
        a11yName: noVoicesAvailableStringProperty
      });
    }
    voices.forEach(voice => {
      items.push({
        value: voice,
        createNode: tandem => new Text(voice.name, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS),
        a11yName: voice.name
      });
    });

    // since we are updating the list, set the VoiceProperty to the first available value, or null if there are
    // voices
    voiceProperty.set(items[0].value);
    super(voiceProperty, items, parentNode, options);

    // voicing -  responses for the button should always come through, regardless of user selection of
    // responses. As of 10/29/21, ComboBox will only read the name response (which are always read regardless)
    // so this isn't really necessary but it is prudent to include it anyway.
    this.button.voicingIgnoreVoicingManagerProperties = true;
    this.disposeVoiceComboBox = () => {
      items.forEach(item => {
        item.value = null;
      });
    };
  }
  dispose() {
    this.disposeVoiceComboBox();
    super.dispose();
  }
}

/**
 * A slider with labels and tick marks used to control voice rate of web speech synthesis.
 */
class VoicingPitchSlider extends VBox {
  constructor(labelString, voicePitchProperty) {
    const label = new Text(labelString, PreferencesDialog.PANEL_SECTION_CONTENT_OPTIONS);
    const voicePitchRange = voicePitchProperty.range;
    const slider = new HSlider(voicePitchProperty, voicePitchRange, {
      majorTickLength: 10,
      thumbSize: THUMB_SIZE,
      trackSize: TRACK_SIZE,
      keyboardStep: 0.25,
      shiftKeyboardStep: 0.1,
      // constrain the value to the nearest hundredths place so there is no overlap in described ranges in
      // VOICE_PITCH_DESCRIPTION_MAP
      constrainValue: value => Utils.roundToInterval(value, 0.01),
      // pdom
      labelTagName: 'label',
      labelContent: labelString,
      // voicing
      voicingNameResponse: labelString,
      // Voicing controls should not respect voicing response controls so user always hears information about them
      voicingIgnoreVoicingManagerProperties: true,
      // phet-io
      tandem: Tandem.OPT_OUT // We don't want to instrument components for preferences, https://github.com/phetsims/joist/issues/744#issuecomment-1196028362
    });
    const lowLabel = new Text('Low', {
      font: new PhetFont(14)
    });
    slider.addMajorTick(voicePitchRange.min, lowLabel);
    const highLabel = new Text('High', {
      font: new PhetFont(14)
    });
    slider.addMajorTick(voicePitchRange.max, highLabel);
    super();

    // voicing
    const voicePitchListener = (pitch, previousValue) => {
      slider.voicingObjectResponse = this.getPitchDescriptionString(pitch);
    };
    voicePitchProperty.link(voicePitchListener);
    this.mutate({
      children: [label, slider],
      // see https://github.com/phetsims/scenery/issues/1433
      spacing: 5
    });
  }

  /**
   * Gets a description of the pitch at the provided value from VOICE_PITCH_DESCRIPTION_MAP.
   */
  getPitchDescriptionString(pitchValue) {
    let pitchDescription = '';
    VOICE_PITCH_DESCRIPTION_MAP.forEach((description, range) => {
      if (range.contains(pitchValue)) {
        pitchDescription = description;
      }
    });
    assert && assert(pitchDescription, `no description found for pitch at value: ${pitchValue}`);
    return pitchDescription;
  }
}
joist.register('VoicingPanelSection', VoicingPanelSection);
export default VoicingPanelSection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEaW1lbnNpb24yIiwiUmFuZ2UiLCJVdGlscyIsIm1lcmdlIiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJOdW1iZXJDb250cm9sIiwiUGhldEZvbnQiLCJIaWdobGlnaHRGcm9tTm9kZSIsIk5vZGUiLCJQcmVzc0xpc3RlbmVyIiwiVGV4dCIsIlZCb3giLCJ2b2ljaW5nTWFuYWdlciIsIlZvaWNpbmdUZXh0IiwiQ2hlY2tib3giLCJDb21ib0JveCIsIkV4cGFuZENvbGxhcHNlQnV0dG9uIiwiSFNsaWRlciIsIlRhbmRlbSIsIlV0dGVyYW5jZSIsImpvaXN0IiwiSm9pc3RTdHJpbmdzIiwiUHJlZmVyZW5jZXNEaWFsb2ciLCJQcmVmZXJlbmNlc1BhbmVsU2VjdGlvbiIsIlByZWZlcmVuY2VzQ29udHJvbCIsImxvY2FsZVByb3BlcnR5IiwiVG9nZ2xlU3dpdGNoIiwiUHJlZmVyZW5jZXNEaWFsb2dDb25zdGFudHMiLCJQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJEZXJpdmVkUHJvcGVydHkiLCJ2b2ljaW5nTGFiZWxTdHJpbmdQcm9wZXJ0eSIsImExMXkiLCJwcmVmZXJlbmNlcyIsInRhYnMiLCJhdWRpbyIsInZvaWNpbmciLCJ0aXRsZVN0cmluZ1Byb3BlcnR5IiwidG9vbGJhckxhYmVsU3RyaW5nUHJvcGVydHkiLCJ0b29sYmFyIiwicmF0ZVN0cmluZ1Byb3BlcnR5IiwiY3VzdG9taXplVm9pY2UiLCJyYXRlIiwicmF0ZUxhYmVsU3RyaW5nUHJvcGVydHkiLCJsYWJlbFN0cmluZ1N0cmluZ1Byb3BlcnR5IiwicGl0Y2hTdHJpbmdQcm9wZXJ0eSIsInBpdGNoIiwidm9pY2luZ0VuYWJsZWRTdHJpbmdQcm9wZXJ0eSIsInZvaWNpbmdPblN0cmluZ1Byb3BlcnR5Iiwidm9pY2luZ0Rpc2FibGVkU3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nT2ZmU3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nT2ZmT25seUF2YWlsYWJsZUluRW5nbGlzaFN0cmluZ1Byb3BlcnR5Iiwidm9pY2VWYXJpYWJsZXNQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJ2YXJpYWJsZXNQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJjdXN0b21pemVWb2ljZVN0cmluZ1Byb3BlcnR5IiwidG9vbGJhclJlbW92ZWRTdHJpbmdQcm9wZXJ0eSIsInRvb2xiYXJBZGRlZFN0cmluZ1Byb3BlcnR5Iiwic2ltVm9pY2luZ09wdGlvbnNTdHJpbmdQcm9wZXJ0eSIsInNpbVZvaWNpbmdPcHRpb25zIiwic2ltVm9pY2luZ0Rlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHkiLCJkZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5Iiwib2JqZWN0RGV0YWlsc0xhYmVsU3RyaW5nUHJvcGVydHkiLCJvYmplY3REZXRhaWxzIiwibGFiZWxTdHJpbmdQcm9wZXJ0eSIsImNvbnRleHRDaGFuZ2VzTGFiZWxTdHJpbmdQcm9wZXJ0eSIsImNvbnRleHRDaGFuZ2VzIiwiaGVscGZ1bEhpbnRzTGFiZWxTdHJpbmdQcm9wZXJ0eSIsImhlbHBmdWxIaW50cyIsInZvaWNpbmdPYmplY3RDaGFuZ2VzU3RyaW5nUHJvcGVydHkiLCJlbmFibGVkQWxlcnRTdHJpbmdQcm9wZXJ0eSIsIm9iamVjdENoYW5nZXNNdXRlZFN0cmluZ1Byb3BlcnR5IiwiZGlzYWJsZWRBbGVydFN0cmluZ1Byb3BlcnR5Iiwidm9pY2luZ0NvbnRleHRDaGFuZ2VzU3RyaW5nUHJvcGVydHkiLCJjb250ZXh0Q2hhbmdlc011dGVkU3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nSGludHNTdHJpbmdQcm9wZXJ0eSIsImhpbnRzTXV0ZWRTdHJpbmdQcm9wZXJ0eSIsInZvaWNlTGFiZWxTdHJpbmdQcm9wZXJ0eSIsInZvaWNlIiwidm9pY2VUaXRsZVBhdHRlcm5MYWJlbFN0cmluZ1Byb3BlcnR5IiwidGl0bGVQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJub1ZvaWNlc0F2YWlsYWJsZVN0cmluZ1Byb3BlcnR5IiwiY3VzdG9taXplVm9pY2VFeHBhbmRlZFN0cmluZ1Byb3BlcnR5IiwiZXhwYW5kZWRBbGVydFN0cmluZ1Byb3BlcnR5IiwiY3VzdG9taXplVm9pY2VDb2xsYXBzZWRTdHJpbmdQcm9wZXJ0eSIsImNvbGxhcHNlZEFsZXJ0U3RyaW5nUHJvcGVydHkiLCJ2b2ljZVJhdGVEZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsIndyaXR0ZW5WYXJpYWJsZXNQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJsYWJlbGxlZERlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwidm9pY2VSYXRlTm9ybWFsU3RyaW5nUHJvcGVydHkiLCJyYW5nZURlc2NyaXB0aW9ucyIsImluTG93UmFuZ2VTdHJpbmdQcm9wZXJ0eSIsImxvd1N0cmluZ1Byb3BlcnR5IiwiaW5Ob3JtYWxSYW5nZVN0cmluZ1Byb3BlcnR5Iiwibm9ybWFsU3RyaW5nUHJvcGVydHkiLCJhYm92ZU5vcm1hbFJhbmdlU3RyaW5nUHJvcGVydHkiLCJhYm92ZU5vcm1hbFN0cmluZ1Byb3BlcnR5IiwiaW5IaWdoUmFuZ2VTdHJpbmdQcm9wZXJ0eSIsImhpZ2hTdHJpbmdQcm9wZXJ0eSIsInZvaWNpbmdFbmdsaXNoT25seUxhYmVsU3RyaW5nUHJvcGVydHkiLCJ0aXRsZUVuZ2xpc2hPbmx5U3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSIsIlZPSUNFX1BJVENIX0RFU0NSSVBUSU9OX01BUCIsIk1hcCIsInNldCIsIlRIVU1CX1NJWkUiLCJUUkFDS19TSVpFIiwiVm9pY2luZ1BhbmVsU2VjdGlvbiIsImNvbnN0cnVjdG9yIiwiYXVkaW9Nb2RlbCIsInByb3ZpZGVkT3B0aW9ucyIsInZhbGlkVmFsdWVzIiwibGVuZ3RoIiwidm9pY2luZ0xhYmVsIiwiUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TIiwidm9pY2luZ0VuYWJsZWRSZWFkaW5nQmxvY2tOYW1lUmVzcG9uc2VQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJsYWJlbCIsImRlc2NyaXB0aW9uIiwidGFuZGVtIiwiT1BUX09VVCIsInZvaWNpbmdFbmFibGVkU3dpdGNoVm9pY2luZ1RleHQiLCJQQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUyIsInJlYWRpbmdCbG9ja05hbWVSZXNwb25zZSIsInZvaWNpbmdUb2dnbGVTd2l0Y2giLCJ2b2ljaW5nRW5hYmxlZFByb3BlcnR5IiwiYTExeU5hbWUiLCJUT0dHTEVfU1dJVENIX09QVElPTlMiLCJ2b2ljaW5nRW5hYmxlZFN3aXRjaCIsImxhYmVsTm9kZSIsImRlc2NyaXB0aW9uTm9kZSIsImNvbnRyb2xOb2RlIiwicXVpY2tBY2Nlc3NMYWJlbCIsInRvb2xiYXJUb2dnbGVTd2l0Y2giLCJ0b29sYmFyRW5hYmxlZFByb3BlcnR5IiwibGVmdFZhbHVlQ29udGV4dFJlc3BvbnNlIiwicmlnaHRWYWx1ZUNvbnRleHRSZXNwb25zZSIsInRvb2xiYXJFbmFibGVkU3dpdGNoIiwic3BlZWNoT3V0cHV0TGFiZWwiLCJ0YWdOYW1lIiwiaW5uZXJDb250ZW50Iiwic3BlZWNoT3V0cHV0UmVhZGluZ0Jsb2NrTmFtZVJlc3BvbnNlUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwic3BlZWNoT3V0cHV0RGVzY3JpcHRpb24iLCJjcmVhdGVDaGVja2JveCIsImxhYmVsU3RyaW5nIiwicHJvcGVydHkiLCJjaGVja2VkQ29udGV4dFJlc3BvbnNlIiwidW5jaGVja2VkQ29udGV4dFJlc3BvbnNlIiwiZGlzcG9zYWJsZSIsImNoZWNrYm94IiwibGFiZWxUYWdOYW1lIiwibGFiZWxDb250ZW50Iiwidm9pY2luZ05hbWVSZXNwb25zZSIsInZvaWNpbmdJZ25vcmVWb2ljaW5nTWFuYWdlclByb3BlcnRpZXMiLCJ2b2ljZU5hbWVSZXNwb25zZU9uU2VsZWN0aW9uIiwic3BlZWNoT3V0cHV0Q29udGVudCIsInNwZWVjaE91dHB1dENoZWNrYm94ZXMiLCJhbGlnbiIsInNwYWNpbmciLCJWRVJUSUNBTF9DT05URU5UX1NQQUNJTkciLCJjaGlsZHJlbiIsInZvaWNpbmdPYmplY3RSZXNwb25zZXNFbmFibGVkUHJvcGVydHkiLCJ2b2ljaW5nQ29udGV4dFJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eSIsInZvaWNpbmdIaW50UmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5IiwibGVmdFRvcCIsImxlZnRCb3R0b20iLCJwbHVzWFkiLCJDT05URU5UX0lOREVOVEFUSU9OX1NQQUNJTkciLCJyYXRlU2xpZGVyIiwiVm9pY2VSYXRlTnVtYmVyQ29udHJvbCIsInZvaWNlUmF0ZVByb3BlcnR5IiwicGl0Y2hTbGlkZXIiLCJWb2ljaW5nUGl0Y2hTbGlkZXIiLCJ2b2ljZVBpdGNoUHJvcGVydHkiLCJ2b2ljZU9wdGlvbnNDb250ZW50Iiwidm9pY2VPcHRpb25zTGFiZWwiLCJjdXJzb3IiLCJ2b2ljZU9wdGlvbnNPcGVuUHJvcGVydHkiLCJleHBhbmRDb2xsYXBzZUJ1dHRvbiIsInNpZGVMZW5ndGgiLCJ2b2ljZU9wdGlvbnNDb250YWluZXIiLCJ2b2ljZU9wdGlvbnNQcmVzc0xpc3RlbmVyIiwicHJlc3MiLCJ0b2dnbGUiLCJhZGRJbnB1dExpc3RlbmVyIiwiY29udGVudCIsImxlZnRDZW50ZXIiLCJyaWdodENlbnRlciIsImxpbmsiLCJvcGVuIiwidmlzaWJsZSIsImZvY3VzSGlnaGxpZ2h0IiwidGl0bGVOb2RlIiwiY29udGVudE5vZGUiLCJjb250ZW50VmlzaWJpbGl0eUxpc3RlbmVyIiwiZW5hYmxlZCIsImxvY2FsZUxpc3RlbmVyIiwibG9jYWxlIiwiZW5hYmxlZFByb3BlcnR5IiwidmFsdWUiLCJzdGFydHNXaXRoIiwidm9pY2luZ0VuYWJsZWRVdHRlcmFuY2UiLCJ2b2ljaW5nRW5hYmxlZFByb3BlcnR5TGlzdGVuZXIiLCJ2b2ljaW5nTWFpbldpbmRvd1ZvaWNpbmdFbmFibGVkUHJvcGVydHkiLCJhbGVydCIsImlzSW5zaWRlUGhldGlvQXJjaGV0eXBlIiwic3BlYWtJZ25vcmluZ0VuYWJsZWQiLCJhbGVydERlc2NyaXB0aW9uVXR0ZXJhbmNlIiwibGF6eUxpbmsiLCJ2b2ljZUNvbWJvQm94Iiwidm9pY2VzQ2hhbmdlZExpc3RlbmVyIiwidm9pY2VzIiwicmVtb3ZlQ2hpbGQiLCJkaXNwb3NlIiwidm9pY2VMaXN0IiwicHJpb3JpdGl6ZWRWb2ljZXMiLCJnZXRFbmdsaXNoUHJpb3JpdGl6ZWRWb2ljZXMiLCJzbGljZSIsInBhcmVudCIsInBoZXQiLCJzaW0iLCJ0b3BMYXllciIsIlZvaWNlQ29tYm9Cb3giLCJ2b2ljZVByb3BlcnR5IiwiYWRkQ2hpbGQiLCJ2b2ljZXNQcm9wZXJ0eSIsImFsZXJ0U3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nU3BlYWtDb250ZXh0UmVzcG9uc2UiLCJjb250ZXh0UmVzcG9uc2UiLCJhMTF5TmFtZVN0cmluZyIsInJhbmdlIiwiaW5jbHVkZUFycm93QnV0dG9ucyIsImxheW91dEZ1bmN0aW9uIiwiY3JlYXRlTGF5b3V0RnVuY3Rpb240IiwiZGVsdGEiLCJ0aXRsZU5vZGVPcHRpb25zIiwibWF4V2lkdGgiLCJudW1iZXJEaXNwbGF5T3B0aW9ucyIsImRlY2ltYWxQbGFjZXMiLCJ2YWx1ZVBhdHRlcm4iLCJ0ZXh0T3B0aW9ucyIsInNsaWRlck9wdGlvbnMiLCJ0aHVtYlNpemUiLCJ0cmFja1NpemUiLCJrZXlib2FyZFN0ZXAiLCJtaW5vclRpY2tTcGFjaW5nIiwidm9pY2luZ09uRW5kUmVzcG9uc2VPcHRpb25zIiwid2l0aE5hbWVSZXNwb25zZSIsInNsaWRlciIsInZvaWNlUmF0ZU5vbk5vcm1hbFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsInZvaWNlUmF0ZVJlc3BvbnNlUHJvcGVydHkiLCJub3JtYWwiLCJub25Ob3JtYWwiLCJ2b2ljaW5nT2JqZWN0UmVzcG9uc2UiLCJwYXJlbnROb2RlIiwib3B0aW9ucyIsImxpc3RQb3NpdGlvbiIsImFjY2Vzc2libGVOYW1lIiwiY29tYm9Cb3hWb2ljaW5nTmFtZVJlc3BvbnNlUGF0dGVybiIsIml0ZW1zIiwicHVzaCIsImNyZWF0ZU5vZGUiLCJmb3JFYWNoIiwibmFtZSIsImJ1dHRvbiIsImRpc3Bvc2VWb2ljZUNvbWJvQm94IiwiaXRlbSIsInZvaWNlUGl0Y2hSYW5nZSIsIm1ham9yVGlja0xlbmd0aCIsInNoaWZ0S2V5Ym9hcmRTdGVwIiwiY29uc3RyYWluVmFsdWUiLCJyb3VuZFRvSW50ZXJ2YWwiLCJsb3dMYWJlbCIsImZvbnQiLCJhZGRNYWpvclRpY2siLCJtaW4iLCJoaWdoTGFiZWwiLCJtYXgiLCJ2b2ljZVBpdGNoTGlzdGVuZXIiLCJwcmV2aW91c1ZhbHVlIiwiZ2V0UGl0Y2hEZXNjcmlwdGlvblN0cmluZyIsIm11dGF0ZSIsInBpdGNoVmFsdWUiLCJwaXRjaERlc2NyaXB0aW9uIiwiY29udGFpbnMiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlZvaWNpbmdQYW5lbFNlY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVGhlIHNlY3Rpb24gb2YgUHJlZmVyZW5jZXNEaWFsb2cgY29udGVudCBpbiB0aGUgXCJBdWRpb1wiIHBhbmVsIHJlbGF0ZWQgdG8gdm9pY2luZy5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmdcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IGNvbWJpbmVPcHRpb25zLCBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBOdW1iZXJDb250cm9sIGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9OdW1iZXJDb250cm9sLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEhpZ2hsaWdodEZyb21Ob2RlLCBOb2RlLCBQcmVzc0xpc3RlbmVyLCBUZXh0LCBWQm94LCB2b2ljaW5nTWFuYWdlciwgVm9pY2luZ1RleHQgfSBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQ2hlY2tib3ggZnJvbSAnLi4vLi4vLi4vc3VuL2pzL0NoZWNrYm94LmpzJztcclxuaW1wb3J0IENvbWJvQm94LCB7IENvbWJvQm94SXRlbSwgQ29tYm9Cb3hPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vc3VuL2pzL0NvbWJvQm94LmpzJztcclxuaW1wb3J0IEV4cGFuZENvbGxhcHNlQnV0dG9uIGZyb20gJy4uLy4uLy4uL3N1bi9qcy9FeHBhbmRDb2xsYXBzZUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBIU2xpZGVyIGZyb20gJy4uLy4uLy4uL3N1bi9qcy9IU2xpZGVyLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IFV0dGVyYW5jZSBmcm9tICcuLi8uLi8uLi91dHRlcmFuY2UtcXVldWUvanMvVXR0ZXJhbmNlLmpzJztcclxuaW1wb3J0IGpvaXN0IGZyb20gJy4uL2pvaXN0LmpzJztcclxuaW1wb3J0IEpvaXN0U3RyaW5ncyBmcm9tICcuLi9Kb2lzdFN0cmluZ3MuanMnO1xyXG5pbXBvcnQgUHJlZmVyZW5jZXNEaWFsb2cgZnJvbSAnLi9QcmVmZXJlbmNlc0RpYWxvZy5qcyc7XHJcbmltcG9ydCB7IEF1ZGlvTW9kZWwgfSBmcm9tICcuL1ByZWZlcmVuY2VzTW9kZWwuanMnO1xyXG5pbXBvcnQgUHJlZmVyZW5jZXNQYW5lbFNlY3Rpb24sIHsgUHJlZmVyZW5jZXNQYW5lbFNlY3Rpb25PcHRpb25zIH0gZnJvbSAnLi9QcmVmZXJlbmNlc1BhbmVsU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQcmVmZXJlbmNlc0NvbnRyb2wgZnJvbSAnLi9QcmVmZXJlbmNlc0NvbnRyb2wuanMnO1xyXG5pbXBvcnQgbG9jYWxlUHJvcGVydHksIHsgTG9jYWxlIH0gZnJvbSAnLi4vaTE4bi9sb2NhbGVQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUb2dnbGVTd2l0Y2gsIHsgVG9nZ2xlU3dpdGNoT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3N1bi9qcy9Ub2dnbGVTd2l0Y2guanMnO1xyXG5pbXBvcnQgUHJlZmVyZW5jZXNEaWFsb2dDb25zdGFudHMgZnJvbSAnLi9QcmVmZXJlbmNlc0RpYWxvZ0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBQYXR0ZXJuU3RyaW5nUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9QYXR0ZXJuU3RyaW5nUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IHR5cGUgRGlzcG9zYWJsZSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0Rpc3Bvc2FibGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbi8vIG5vbmUgb2YgdGhlIFZvaWNpbmcgc3RyaW5ncyBvciBmZWF0dXJlIGlzIHRyYW5zbGF0YWJsZSB5ZXQsIGFsbCBzdHJpbmdzIGluIHRoaXMgZmlsZVxyXG4vLyBhcmUgbmVzdGVkIHVuZGVyIHRoZSAnYTExeScgc2VjdGlvbiB0byBtYWtlIHN1cmUgdGhhdCB0aGV5IGFyZSBub3QgdHJhbnNsYXRhYmxlXHJcbmNvbnN0IHZvaWNpbmdMYWJlbFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLnRpdGxlU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHRvb2xiYXJMYWJlbFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLnRvb2xiYXIudGl0bGVTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgcmF0ZVN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmN1c3RvbWl6ZVZvaWNlLnJhdGUudGl0bGVTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgcmF0ZUxhYmVsU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuY3VzdG9taXplVm9pY2UucmF0ZS5sYWJlbFN0cmluZ1N0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBwaXRjaFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmN1c3RvbWl6ZVZvaWNlLnBpdGNoLnRpdGxlU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHZvaWNpbmdFbmFibGVkU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcudm9pY2luZ09uU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHZvaWNpbmdEaXNhYmxlZFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLnZvaWNpbmdPZmZTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3Qgdm9pY2luZ09mZk9ubHlBdmFpbGFibGVJbkVuZ2xpc2hTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy52b2ljaW5nT2ZmT25seUF2YWlsYWJsZUluRW5nbGlzaFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCB2b2ljZVZhcmlhYmxlc1BhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5jdXN0b21pemVWb2ljZS52YXJpYWJsZXNQYXR0ZXJuU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGN1c3RvbWl6ZVZvaWNlU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuY3VzdG9taXplVm9pY2UudGl0bGVTdHJpbmdQcm9wZXJ0eTtcclxuXHJcbmNvbnN0IHRvb2xiYXJSZW1vdmVkU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcudG9vbGJhci50b29sYmFyUmVtb3ZlZFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCB0b29sYmFyQWRkZWRTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy50b29sYmFyLnRvb2xiYXJBZGRlZFN0cmluZ1Byb3BlcnR5O1xyXG5cclxuY29uc3Qgc2ltVm9pY2luZ09wdGlvbnNTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5zaW1Wb2ljaW5nT3B0aW9ucy50aXRsZVN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBzaW1Wb2ljaW5nRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5zaW1Wb2ljaW5nT3B0aW9ucy5kZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5O1xyXG5cclxuY29uc3Qgb2JqZWN0RGV0YWlsc0xhYmVsU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuc2ltVm9pY2luZ09wdGlvbnMub2JqZWN0RGV0YWlscy5sYWJlbFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBjb250ZXh0Q2hhbmdlc0xhYmVsU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuc2ltVm9pY2luZ09wdGlvbnMuY29udGV4dENoYW5nZXMubGFiZWxTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgaGVscGZ1bEhpbnRzTGFiZWxTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5zaW1Wb2ljaW5nT3B0aW9ucy5oZWxwZnVsSGludHMubGFiZWxTdHJpbmdQcm9wZXJ0eTtcclxuXHJcbmNvbnN0IHZvaWNpbmdPYmplY3RDaGFuZ2VzU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuc2ltVm9pY2luZ09wdGlvbnMub2JqZWN0RGV0YWlscy5lbmFibGVkQWxlcnRTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3Qgb2JqZWN0Q2hhbmdlc011dGVkU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuc2ltVm9pY2luZ09wdGlvbnMub2JqZWN0RGV0YWlscy5kaXNhYmxlZEFsZXJ0U3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHZvaWNpbmdDb250ZXh0Q2hhbmdlc1N0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLnNpbVZvaWNpbmdPcHRpb25zLmNvbnRleHRDaGFuZ2VzLmVuYWJsZWRBbGVydFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBjb250ZXh0Q2hhbmdlc011dGVkU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuc2ltVm9pY2luZ09wdGlvbnMuY29udGV4dENoYW5nZXMuZGlzYWJsZWRBbGVydFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCB2b2ljaW5nSGludHNTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5zaW1Wb2ljaW5nT3B0aW9ucy5oZWxwZnVsSGludHMuZW5hYmxlZEFsZXJ0U3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGhpbnRzTXV0ZWRTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5zaW1Wb2ljaW5nT3B0aW9ucy5oZWxwZnVsSGludHMuZGlzYWJsZWRBbGVydFN0cmluZ1Byb3BlcnR5O1xyXG5cclxuY29uc3Qgdm9pY2VMYWJlbFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmN1c3RvbWl6ZVZvaWNlLnZvaWNlLnRpdGxlU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHZvaWNlVGl0bGVQYXR0ZXJuTGFiZWxTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5jdXN0b21pemVWb2ljZS52b2ljZS50aXRsZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eTtcclxuY29uc3Qgbm9Wb2ljZXNBdmFpbGFibGVTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5jdXN0b21pemVWb2ljZS52b2ljZS5ub1ZvaWNlc0F2YWlsYWJsZVN0cmluZ1Byb3BlcnR5O1xyXG5cclxuY29uc3QgY3VzdG9taXplVm9pY2VFeHBhbmRlZFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmN1c3RvbWl6ZVZvaWNlLmV4cGFuZGVkQWxlcnRTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgY3VzdG9taXplVm9pY2VDb2xsYXBzZWRTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5jdXN0b21pemVWb2ljZS5jb2xsYXBzZWRBbGVydFN0cmluZ1Byb3BlcnR5O1xyXG5cclxuY29uc3Qgdm9pY2VSYXRlRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuY3VzdG9taXplVm9pY2Uud3JpdHRlblZhcmlhYmxlc1BhdHRlcm5TdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgbGFiZWxsZWREZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMubGFiZWxsZWREZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eTtcclxuXHJcbmNvbnN0IHZvaWNlUmF0ZU5vcm1hbFN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmN1c3RvbWl6ZVZvaWNlLnJhdGUucmFuZ2VEZXNjcmlwdGlvbnMudm9pY2VSYXRlTm9ybWFsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGluTG93UmFuZ2VTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5jdXN0b21pemVWb2ljZS5yYXRlLnJhbmdlRGVzY3JpcHRpb25zLmxvd1N0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBpbk5vcm1hbFJhbmdlU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS5wcmVmZXJlbmNlcy50YWJzLmF1ZGlvLnZvaWNpbmcuY3VzdG9taXplVm9pY2UucmF0ZS5yYW5nZURlc2NyaXB0aW9ucy5ub3JtYWxTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgYWJvdmVOb3JtYWxSYW5nZVN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmN1c3RvbWl6ZVZvaWNlLnJhdGUucmFuZ2VEZXNjcmlwdGlvbnMuYWJvdmVOb3JtYWxTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgaW5IaWdoUmFuZ2VTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnByZWZlcmVuY2VzLnRhYnMuYXVkaW8udm9pY2luZy5jdXN0b21pemVWb2ljZS5yYXRlLnJhbmdlRGVzY3JpcHRpb25zLmhpZ2hTdHJpbmdQcm9wZXJ0eTtcclxuXHJcbi8vIFZvaWNpbmcgY2FuIGFwcGVhciBidXQgYmVjb21lIGRpc2FibGVkIHdoZW4gcnVubmluZyB3aXRoIG11bHRpcGxlIGxvY2FsZXMuIFRoaXMgdHJhbnNsYXRhYmxlIGxhYmVsIGlzIHByZXNlbnQgZm9yXHJcbi8vIHRyYW5zbGF0ZWQgc2ltcyBpbiB0aGlzIGNhc2UuXHJcbmNvbnN0IHZvaWNpbmdFbmdsaXNoT25seUxhYmVsU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLnRpdGxlRW5nbGlzaE9ubHlTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3Qgdm9pY2luZ0Rlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MucHJlZmVyZW5jZXMudGFicy5hdWRpby52b2ljaW5nLmRlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHk7XHJcblxyXG5jb25zdCBWT0lDRV9QSVRDSF9ERVNDUklQVElPTl9NQVAgPSBuZXcgTWFwKCk7XHJcblZPSUNFX1BJVENIX0RFU0NSSVBUSU9OX01BUC5zZXQoIG5ldyBSYW5nZSggMC41LCAwLjc1ICksIGluTG93UmFuZ2VTdHJpbmdQcm9wZXJ0eSApO1xyXG5WT0lDRV9QSVRDSF9ERVNDUklQVElPTl9NQVAuc2V0KCBuZXcgUmFuZ2UoIDAuNzUsIDEuMjUgKSwgaW5Ob3JtYWxSYW5nZVN0cmluZ1Byb3BlcnR5ICk7XHJcblZPSUNFX1BJVENIX0RFU0NSSVBUSU9OX01BUC5zZXQoIG5ldyBSYW5nZSggMS4yNSwgMS41ICksIGFib3ZlTm9ybWFsUmFuZ2VTdHJpbmdQcm9wZXJ0eSApO1xyXG5WT0lDRV9QSVRDSF9ERVNDUklQVElPTl9NQVAuc2V0KCBuZXcgUmFuZ2UoIDEuNSwgMiApLCBpbkhpZ2hSYW5nZVN0cmluZ1Byb3BlcnR5ICk7XHJcblxyXG5jb25zdCBUSFVNQl9TSVpFID0gbmV3IERpbWVuc2lvbjIoIDEzLCAyNiApO1xyXG5jb25zdCBUUkFDS19TSVpFID0gbmV3IERpbWVuc2lvbjIoIDEwMCwgNSApO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcbnR5cGUgVm9pY2luZ1BhbmVsU2VjdGlvbk9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFByZWZlcmVuY2VzUGFuZWxTZWN0aW9uT3B0aW9ucztcclxuXHJcbmNsYXNzIFZvaWNpbmdQYW5lbFNlY3Rpb24gZXh0ZW5kcyBQcmVmZXJlbmNlc1BhbmVsU2VjdGlvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBhdWRpb01vZGVsIC0gY29uZmlndXJhdGlvbiBmb3IgYXVkaW8gc2V0dGluZ3MsIHNlZSBQcmVmZXJlbmNlc01vZGVsXHJcbiAgICogQHBhcmFtIFtwcm92aWRlZE9wdGlvbnNdXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBhdWRpb01vZGVsOiBBdWRpb01vZGVsLCBwcm92aWRlZE9wdGlvbnM/OiBWb2ljaW5nUGFuZWxTZWN0aW9uT3B0aW9ucyApIHtcclxuXHJcbiAgICAvLyBWb2ljaW5nIGZlYXR1cmUgb25seSB3b3JrcyB3aGVuIHJ1bm5pbmcgaW4gRW5nbGlzaC4gSWYgcnVubmluZyBpbiBhIHZlcnNpb24gd2hlcmUgeW91IGNhbiBjaGFuZ2UgbG9jYWxlLFxyXG4gICAgLy8gaW5kaWNhdGUgdGhyb3VnaCB0aGUgdGl0bGUgdGhhdCB0aGUgZmVhdHVyZSB3aWxsIG9ubHkgd29yayBpbiBFbmdsaXNoLlxyXG4gICAgY29uc3QgdGl0bGVTdHJpbmdQcm9wZXJ0eSA9ICggbG9jYWxlUHJvcGVydHkudmFsaWRWYWx1ZXMgJiYgbG9jYWxlUHJvcGVydHkudmFsaWRWYWx1ZXMubGVuZ3RoID4gMSApID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2ljaW5nRW5nbGlzaE9ubHlMYWJlbFN0cmluZ1Byb3BlcnR5IDogdm9pY2luZ0xhYmVsU3RyaW5nUHJvcGVydHk7XHJcblxyXG4gICAgLy8gdGhlIGNoZWNrYm94IGlzIHRoZSB0aXRsZSBmb3IgdGhlIHNlY3Rpb24gYW5kIHRvdGFsbHkgZW5hYmxlcy9kaXNhYmxlcyB0aGUgZmVhdHVyZVxyXG4gICAgY29uc3Qgdm9pY2luZ0xhYmVsID0gbmV3IFRleHQoIHRpdGxlU3RyaW5nUHJvcGVydHksIFByZWZlcmVuY2VzRGlhbG9nLlBBTkVMX1NFQ1RJT05fTEFCRUxfT1BUSU9OUyApO1xyXG4gICAgY29uc3Qgdm9pY2luZ0VuYWJsZWRSZWFkaW5nQmxvY2tOYW1lUmVzcG9uc2VQYXR0ZXJuU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBsYWJlbGxlZERlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGxhYmVsOiB0aXRsZVN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdm9pY2luZ0Rlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHlcclxuICAgIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICBjb25zdCB2b2ljaW5nRW5hYmxlZFN3aXRjaFZvaWNpbmdUZXh0ID0gbmV3IFZvaWNpbmdUZXh0KCB2b2ljaW5nRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSwgbWVyZ2UoIHt9LCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUywge1xyXG4gICAgICByZWFkaW5nQmxvY2tOYW1lUmVzcG9uc2U6IHZvaWNpbmdFbmFibGVkUmVhZGluZ0Jsb2NrTmFtZVJlc3BvbnNlUGF0dGVyblN0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICkgKTtcclxuICAgIGNvbnN0IHZvaWNpbmdUb2dnbGVTd2l0Y2ggPSBuZXcgVG9nZ2xlU3dpdGNoKCBhdWRpb01vZGVsLnZvaWNpbmdFbmFibGVkUHJvcGVydHksIGZhbHNlLCB0cnVlLCBjb21iaW5lT3B0aW9uczxUb2dnbGVTd2l0Y2hPcHRpb25zPigge1xyXG4gICAgICBhMTF5TmFtZTogdGl0bGVTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSwgUHJlZmVyZW5jZXNEaWFsb2dDb25zdGFudHMuVE9HR0xFX1NXSVRDSF9PUFRJT05TICkgKTtcclxuICAgIGNvbnN0IHZvaWNpbmdFbmFibGVkU3dpdGNoID0gbmV3IFByZWZlcmVuY2VzQ29udHJvbCgge1xyXG4gICAgICBsYWJlbE5vZGU6IHZvaWNpbmdMYWJlbCxcclxuICAgICAgZGVzY3JpcHRpb25Ob2RlOiB2b2ljaW5nRW5hYmxlZFN3aXRjaFZvaWNpbmdUZXh0LFxyXG4gICAgICBjb250cm9sTm9kZTogdm9pY2luZ1RvZ2dsZVN3aXRjaFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGNoZWNrYm94IGZvciB0aGUgdG9vbGJhclxyXG4gICAgY29uc3QgcXVpY2tBY2Nlc3NMYWJlbCA9IG5ldyBUZXh0KCB0b29sYmFyTGFiZWxTdHJpbmdQcm9wZXJ0eSwgUHJlZmVyZW5jZXNEaWFsb2cuUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TICk7XHJcbiAgICBjb25zdCB0b29sYmFyVG9nZ2xlU3dpdGNoID0gbmV3IFRvZ2dsZVN3aXRjaCggYXVkaW9Nb2RlbC50b29sYmFyRW5hYmxlZFByb3BlcnR5LCBmYWxzZSwgdHJ1ZSwgY29tYmluZU9wdGlvbnM8VG9nZ2xlU3dpdGNoT3B0aW9ucz4oIHtcclxuICAgICAgYTExeU5hbWU6IHRvb2xiYXJMYWJlbFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBsZWZ0VmFsdWVDb250ZXh0UmVzcG9uc2U6IHRvb2xiYXJSZW1vdmVkU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIHJpZ2h0VmFsdWVDb250ZXh0UmVzcG9uc2U6IHRvb2xiYXJBZGRlZFN0cmluZ1Byb3BlcnR5XHJcbiAgICB9LCBQcmVmZXJlbmNlc0RpYWxvZ0NvbnN0YW50cy5UT0dHTEVfU1dJVENIX09QVElPTlMgKSApO1xyXG4gICAgY29uc3QgdG9vbGJhckVuYWJsZWRTd2l0Y2ggPSBuZXcgUHJlZmVyZW5jZXNDb250cm9sKCB7XHJcbiAgICAgIGxhYmVsTm9kZTogcXVpY2tBY2Nlc3NMYWJlbCxcclxuICAgICAgY29udHJvbE5vZGU6IHRvb2xiYXJUb2dnbGVTd2l0Y2hcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBTcGVlY2ggb3V0cHV0IGxldmVsc1xyXG4gICAgY29uc3Qgc3BlZWNoT3V0cHV0TGFiZWwgPSBuZXcgVGV4dCggc2ltVm9pY2luZ09wdGlvbnNTdHJpbmdQcm9wZXJ0eSwgbWVyZ2UoIHt9LCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0xBQkVMX09QVElPTlMsIHtcclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgdGFnTmFtZTogJ2gzJyxcclxuICAgICAgaW5uZXJDb250ZW50OiBzaW1Wb2ljaW5nT3B0aW9uc1N0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICkgKTtcclxuICAgIGNvbnN0IHNwZWVjaE91dHB1dFJlYWRpbmdCbG9ja05hbWVSZXNwb25zZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIGxhYmVsbGVkRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgbGFiZWw6IHNpbVZvaWNpbmdPcHRpb25zU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBzaW1Wb2ljaW5nRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSwgeyB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKTtcclxuICAgIGNvbnN0IHNwZWVjaE91dHB1dERlc2NyaXB0aW9uID0gbmV3IFZvaWNpbmdUZXh0KCBzaW1Wb2ljaW5nRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSwgbWVyZ2UoIHt9LCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUywge1xyXG4gICAgICByZWFkaW5nQmxvY2tOYW1lUmVzcG9uc2U6IHNwZWVjaE91dHB1dFJlYWRpbmdCbG9ja05hbWVSZXNwb25zZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBjaGVja2JveCBmb3IgdGhlIGZlYXR1cmVzIG9mIHZvaWNpbmcgY29udGVudCB3aXRoIGEgbGFiZWwuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IGNyZWF0ZUNoZWNrYm94ID0gKCBsYWJlbFN0cmluZzogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiwgcHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRDb250ZXh0UmVzcG9uc2U6IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5jaGVja2VkQ29udGV4dFJlc3BvbnNlOiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LCBkaXNwb3NhYmxlOiBEaXNwb3NhYmxlICk6IENoZWNrYm94ID0+IHtcclxuICAgICAgY29uc3QgbGFiZWxOb2RlID0gbmV3IFRleHQoIGxhYmVsU3RyaW5nLCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUyApO1xyXG4gICAgICBjb25zdCBjaGVja2JveCA9IG5ldyBDaGVja2JveCggcHJvcGVydHksIGxhYmVsTm9kZSwge1xyXG5cclxuICAgICAgICAvLyBwZG9tXHJcbiAgICAgICAgbGFiZWxUYWdOYW1lOiAnbGFiZWwnLFxyXG4gICAgICAgIGxhYmVsQ29udGVudDogbGFiZWxTdHJpbmcsXHJcblxyXG4gICAgICAgIC8vIHZvaWNpbmdcclxuICAgICAgICB2b2ljaW5nTmFtZVJlc3BvbnNlOiBsYWJlbFN0cmluZyxcclxuICAgICAgICB2b2ljaW5nSWdub3JlVm9pY2luZ01hbmFnZXJQcm9wZXJ0aWVzOiB0cnVlLFxyXG4gICAgICAgIHZvaWNlTmFtZVJlc3BvbnNlT25TZWxlY3Rpb246IGZhbHNlLFxyXG5cclxuICAgICAgICAvLyBib3RoIHBkb20gYW5kIHZvaWNpbmdcclxuICAgICAgICBjaGVja2VkQ29udGV4dFJlc3BvbnNlOiBjaGVja2VkQ29udGV4dFJlc3BvbnNlLFxyXG4gICAgICAgIHVuY2hlY2tlZENvbnRleHRSZXNwb25zZTogdW5jaGVja2VkQ29udGV4dFJlc3BvbnNlLFxyXG5cclxuICAgICAgICAvLyBwaGV0LWlvXHJcbiAgICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCAvLyBXZSBkb24ndCB3YW50IHRvIGluc3RydW1lbnQgY29tcG9uZW50cyBmb3IgcHJlZmVyZW5jZXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9pc3N1ZXMvNzQ0I2lzc3VlY29tbWVudC0xMTk2MDI4MzYyXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAgIHJldHVybiBjaGVja2JveDtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgc3BlZWNoT3V0cHV0Q29udGVudCA9IG5ldyBOb2RlKCk7XHJcblxyXG4gICAgY29uc3Qgc3BlZWNoT3V0cHV0Q2hlY2tib3hlcyA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgIHNwYWNpbmc6IFByZWZlcmVuY2VzRGlhbG9nLlZFUlRJQ0FMX0NPTlRFTlRfU1BBQ0lORyxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBjcmVhdGVDaGVja2JveCggb2JqZWN0RGV0YWlsc0xhYmVsU3RyaW5nUHJvcGVydHksIGF1ZGlvTW9kZWwudm9pY2luZ09iamVjdFJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eSxcclxuICAgICAgICAgIHZvaWNpbmdPYmplY3RDaGFuZ2VzU3RyaW5nUHJvcGVydHksIG9iamVjdENoYW5nZXNNdXRlZFN0cmluZ1Byb3BlcnR5LCBzcGVlY2hPdXRwdXRMYWJlbFxyXG4gICAgICAgICksXHJcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goIGNvbnRleHRDaGFuZ2VzTGFiZWxTdHJpbmdQcm9wZXJ0eSwgYXVkaW9Nb2RlbC52b2ljaW5nQ29udGV4dFJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eSxcclxuICAgICAgICAgIHZvaWNpbmdDb250ZXh0Q2hhbmdlc1N0cmluZ1Byb3BlcnR5LCBjb250ZXh0Q2hhbmdlc011dGVkU3RyaW5nUHJvcGVydHksIHNwZWVjaE91dHB1dExhYmVsXHJcbiAgICAgICAgKSxcclxuICAgICAgICBjcmVhdGVDaGVja2JveCggaGVscGZ1bEhpbnRzTGFiZWxTdHJpbmdQcm9wZXJ0eSwgYXVkaW9Nb2RlbC52b2ljaW5nSGludFJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eSxcclxuICAgICAgICAgIHZvaWNpbmdIaW50c1N0cmluZ1Byb3BlcnR5LCBoaW50c011dGVkU3RyaW5nUHJvcGVydHksIHNwZWVjaE91dHB1dExhYmVsXHJcbiAgICAgICAgKVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3BlZWNoT3V0cHV0Q29udGVudC5jaGlsZHJlbiA9IFsgc3BlZWNoT3V0cHV0TGFiZWwsIHNwZWVjaE91dHB1dERlc2NyaXB0aW9uLCBzcGVlY2hPdXRwdXRDaGVja2JveGVzIF07XHJcbiAgICBzcGVlY2hPdXRwdXREZXNjcmlwdGlvbi5sZWZ0VG9wID0gc3BlZWNoT3V0cHV0TGFiZWwubGVmdEJvdHRvbS5wbHVzWFkoIDAsIFByZWZlcmVuY2VzRGlhbG9nLlZFUlRJQ0FMX0NPTlRFTlRfU1BBQ0lORyApO1xyXG4gICAgc3BlZWNoT3V0cHV0Q2hlY2tib3hlcy5sZWZ0VG9wID0gc3BlZWNoT3V0cHV0RGVzY3JpcHRpb24ubGVmdEJvdHRvbS5wbHVzWFkoIFByZWZlcmVuY2VzRGlhbG9nLkNPTlRFTlRfSU5ERU5UQVRJT05fU1BBQ0lORywgUHJlZmVyZW5jZXNEaWFsb2cuVkVSVElDQUxfQ09OVEVOVF9TUEFDSU5HICk7XHJcblxyXG4gICAgY29uc3QgcmF0ZVNsaWRlciA9IG5ldyBWb2ljZVJhdGVOdW1iZXJDb250cm9sKCByYXRlU3RyaW5nUHJvcGVydHksIHJhdGVMYWJlbFN0cmluZ1Byb3BlcnR5LCBhdWRpb01vZGVsLnZvaWNlUmF0ZVByb3BlcnR5ICk7XHJcbiAgICBjb25zdCBwaXRjaFNsaWRlciA9IG5ldyBWb2ljaW5nUGl0Y2hTbGlkZXIoIHBpdGNoU3RyaW5nUHJvcGVydHksIGF1ZGlvTW9kZWwudm9pY2VQaXRjaFByb3BlcnR5ICk7XHJcbiAgICBjb25zdCB2b2ljZU9wdGlvbnNDb250ZW50ID0gbmV3IFZCb3goIHtcclxuICAgICAgc3BhY2luZzogUHJlZmVyZW5jZXNEaWFsb2cuVkVSVElDQUxfQ09OVEVOVF9TUEFDSU5HLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIHJhdGVTbGlkZXIsXHJcbiAgICAgICAgcGl0Y2hTbGlkZXJcclxuICAgICAgXVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHZvaWNlIG9wdGlvbnNcclxuICAgIGNvbnN0IHZvaWNlT3B0aW9uc0xhYmVsID0gbmV3IFRleHQoIGN1c3RvbWl6ZVZvaWNlU3RyaW5nUHJvcGVydHksIG1lcmdlKCB7fSwgUHJlZmVyZW5jZXNEaWFsb2cuUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TLCB7XHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInXHJcbiAgICB9ICkgKTtcclxuICAgIGNvbnN0IHZvaWNlT3B0aW9uc09wZW5Qcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlICk7XHJcbiAgICBjb25zdCBleHBhbmRDb2xsYXBzZUJ1dHRvbiA9IG5ldyBFeHBhbmRDb2xsYXBzZUJ1dHRvbiggdm9pY2VPcHRpb25zT3BlblByb3BlcnR5LCB7XHJcbiAgICAgIHNpZGVMZW5ndGg6IDE2LFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICBpbm5lckNvbnRlbnQ6IGN1c3RvbWl6ZVZvaWNlU3RyaW5nUHJvcGVydHksXHJcblxyXG4gICAgICAvLyB2b2ljaW5nXHJcbiAgICAgIHZvaWNpbmdOYW1lUmVzcG9uc2U6IGN1c3RvbWl6ZVZvaWNlU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIHZvaWNpbmdJZ25vcmVWb2ljaW5nTWFuYWdlclByb3BlcnRpZXM6IHRydWUsIC8vIENvbnRyb2xzIG5lZWQgdG8gYWx3YXlzIHNwZWFrIHJlc3BvbnNlcyBzbyBVSSBmdW5jdGlvbnMgYXJlIGNsZWFyXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgLy8gV2UgZG9uJ3Qgd2FudCB0byBpbnN0cnVtZW50IGNvbXBvbmVudHMgZm9yIHByZWZlcmVuY2VzLCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzc0NCNpc3N1ZWNvbW1lbnQtMTE5NjAyODM2MlxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHZvaWNlT3B0aW9uc0NvbnRhaW5lciA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIHZvaWNlT3B0aW9uc0xhYmVsLCBleHBhbmRDb2xsYXBzZUJ1dHRvbiBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdGhlIHZpc3VhbCB0aXRsZSBvZiB0aGUgRXhwYW5kQ29sbGFwc2VCdXR0b24gbmVlZHMgdG8gYmUgY2xpY2thYmxlXHJcbiAgICBjb25zdCB2b2ljZU9wdGlvbnNQcmVzc0xpc3RlbmVyID0gbmV3IFByZXNzTGlzdGVuZXIoIHtcclxuICAgICAgcHJlc3M6ICgpID0+IHtcclxuICAgICAgICB2b2ljZU9wdGlvbnNPcGVuUHJvcGVydHkudG9nZ2xlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgLy8gV2UgZG9uJ3Qgd2FudCB0byBpbnN0cnVtZW50IGNvbXBvbmVudHMgZm9yIHByZWZlcmVuY2VzLCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzc0NCNpc3N1ZWNvbW1lbnQtMTE5NjAyODM2MlxyXG4gICAgfSApO1xyXG4gICAgdm9pY2VPcHRpb25zTGFiZWwuYWRkSW5wdXRMaXN0ZW5lciggdm9pY2VPcHRpb25zUHJlc3NMaXN0ZW5lciApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogWyBzcGVlY2hPdXRwdXRDb250ZW50LCB0b29sYmFyRW5hYmxlZFN3aXRjaCwgdm9pY2VPcHRpb25zQ29udGFpbmVyLCB2b2ljZU9wdGlvbnNDb250ZW50IF1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBsYXlvdXQgZm9yIHNlY3Rpb24gY29udGVudCwgY3VzdG9tIHJhdGhlciB0aGFuIHVzaW5nIGEgRmxvd0JveCBiZWNhdXNlIHRoZSB2b2ljZSBvcHRpb25zIGxhYmVsIG5lZWRzXHJcbiAgICAvLyB0byBiZSBsZWZ0IGFsaWduZWQgd2l0aCBvdGhlciBsYWJlbHMsIHdoaWxlIHRoZSBFeHBhbmRDb2xsYXBzZUJ1dHRvbiBleHRlbmRzIHRvIHRoZSBsZWZ0XHJcbiAgICB0b29sYmFyRW5hYmxlZFN3aXRjaC5sZWZ0VG9wID0gc3BlZWNoT3V0cHV0Q29udGVudC5sZWZ0Qm90dG9tLnBsdXNYWSggMCwgMjAgKTtcclxuICAgIHZvaWNlT3B0aW9uc0xhYmVsLmxlZnRUb3AgPSB0b29sYmFyRW5hYmxlZFN3aXRjaC5sZWZ0Qm90dG9tLnBsdXNYWSggMCwgMjAgKTtcclxuICAgIGV4cGFuZENvbGxhcHNlQnV0dG9uLmxlZnRDZW50ZXIgPSB2b2ljZU9wdGlvbnNMYWJlbC5yaWdodENlbnRlci5wbHVzWFkoIDEwLCAwICk7XHJcbiAgICB2b2ljZU9wdGlvbnNDb250ZW50LmxlZnRUb3AgPSB2b2ljZU9wdGlvbnNMYWJlbC5sZWZ0Qm90dG9tLnBsdXNYWSggMCwgMTAgKTtcclxuICAgIHZvaWNlT3B0aW9uc09wZW5Qcm9wZXJ0eS5saW5rKCBvcGVuID0+IHsgdm9pY2VPcHRpb25zQ29udGVudC52aXNpYmxlID0gb3BlbjsgfSApO1xyXG5cclxuICAgIC8vIHRoZSBmb2N1cyBoaWdobGlnaHQgZm9yIHRoZSB2b2ljZSBvcHRpb25zIGV4cGFuZCBjb2xsYXBzZSBidXR0b24gc2hvdWxkIHN1cnJvdW5kIHRoZSBsYWJlbFxyXG4gICAgZXhwYW5kQ29sbGFwc2VCdXR0b24uZm9jdXNIaWdobGlnaHQgPSBuZXcgSGlnaGxpZ2h0RnJvbU5vZGUoIHZvaWNlT3B0aW9uc0NvbnRhaW5lciApO1xyXG5cclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHRpdGxlTm9kZTogdm9pY2luZ0VuYWJsZWRTd2l0Y2gsXHJcbiAgICAgIGNvbnRlbnROb2RlOiBjb250ZW50XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY29udGVudFZpc2liaWxpdHlMaXN0ZW5lciA9ICggZW5hYmxlZDogYm9vbGVhbiApID0+IHtcclxuICAgICAgY29udGVudC52aXNpYmxlID0gZW5hYmxlZDtcclxuICAgIH07XHJcbiAgICBhdWRpb01vZGVsLnZvaWNpbmdFbmFibGVkUHJvcGVydHkubGluayggY29udGVudFZpc2liaWxpdHlMaXN0ZW5lciApO1xyXG5cclxuICAgIGNvbnN0IGxvY2FsZUxpc3RlbmVyID0gKCBsb2NhbGU6IExvY2FsZSApID0+IHtcclxuICAgICAgdm9pY2luZ0VuYWJsZWRTd2l0Y2guZW5hYmxlZFByb3BlcnR5LnZhbHVlID0gbG9jYWxlLnN0YXJ0c1dpdGgoICdlbicgKTtcclxuICAgIH07XHJcbiAgICBsb2NhbGVQcm9wZXJ0eS5saW5rKCBsb2NhbGVMaXN0ZW5lciApO1xyXG5cclxuICAgIC8vIFNwZWFrIHdoZW4gdm9pY2luZyBiZWNvbWVzIGluaXRpYWxseSBlbmFibGVkLiBGaXJzdCBzcGVlY2ggaXMgZG9uZSBzeW5jaHJvbm91c2x5IChub3QgdXNpbmcgdXR0ZXJhbmNlLXF1ZXVlKVxyXG4gICAgLy8gaW4gcmVzcG9uc2UgdG8gdXNlciBpbnB1dCwgb3RoZXJ3aXNlIGFsbCBzcGVlY2ggd2lsbCBiZSBibG9ja2VkIG9uIG1hbnkgcGxhdGZvcm1zXHJcbiAgICBjb25zdCB2b2ljaW5nRW5hYmxlZFV0dGVyYW5jZSA9IG5ldyBVdHRlcmFuY2UoKTtcclxuICAgIGNvbnN0IHZvaWNpbmdFbmFibGVkUHJvcGVydHlMaXN0ZW5lciA9ICggZW5hYmxlZDogYm9vbGVhbiApID0+IHtcclxuXHJcbiAgICAgIC8vIG9ubHkgc3BlYWsgaWYgXCJTaW0gVm9pY2luZ1wiIGlzIG9uLCBhbGwgdm9pY2luZyBzaG91bGQgYmUgZGlzYWJsZWQgZXhjZXB0IGZvciB0aGUgVG9vbGJhclxyXG4gICAgICAvLyBidXR0b25zIGluIHRoaXMgY2FzZVxyXG4gICAgICBpZiAoIGF1ZGlvTW9kZWwudm9pY2luZ01haW5XaW5kb3dWb2ljaW5nRW5hYmxlZFByb3BlcnR5LnZhbHVlICkge1xyXG5cclxuICAgICAgICAvLyBJZiBsb2NhbGUgY2hhbmdlcywgbWFrZSBzdXJlIHRvIGRlc2NyaWJlIHRoYXQgVm9pY2luZyBoYXMgYmVjb21lIGRpc2FibGVkIGJlY2F1c2UgVm9pY2luZyBpcyBvbmx5IGF2YWlsYWJsZVxyXG4gICAgICAgIC8vIGluIHRoZSBFbmdsaXNoIGxvY2FsZS5cclxuICAgICAgICB2b2ljaW5nRW5hYmxlZFV0dGVyYW5jZS5hbGVydCA9IGVuYWJsZWQgPyB2b2ljaW5nRW5hYmxlZFN0cmluZ1Byb3BlcnR5IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggbG9jYWxlUHJvcGVydHkudmFsdWUuc3RhcnRzV2l0aCggJ2VuJyApID8gdm9pY2luZ0Rpc2FibGVkU3RyaW5nUHJvcGVydHkgOiB2b2ljaW5nT2ZmT25seUF2YWlsYWJsZUluRW5nbGlzaFN0cmluZ1Byb3BlcnR5ICk7XHJcblxyXG4gICAgICAgIC8vIFBoRVQtaU8gQXJjaGV0eXBlcyBzaG91bGQgbmV2ZXIgdm9pY2UgcmVzcG9uc2VzLlxyXG4gICAgICAgIGlmICggIXRoaXMuaXNJbnNpZGVQaGV0aW9BcmNoZXR5cGUoKSApIHtcclxuICAgICAgICAgIHZvaWNpbmdNYW5hZ2VyLnNwZWFrSWdub3JpbmdFbmFibGVkKCB2b2ljaW5nRW5hYmxlZFV0dGVyYW5jZSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFsZXJ0RGVzY3JpcHRpb25VdHRlcmFuY2UoIHZvaWNpbmdFbmFibGVkVXR0ZXJhbmNlICk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBhdWRpb01vZGVsLnZvaWNpbmdFbmFibGVkUHJvcGVydHkubGF6eUxpbmsoIHZvaWNpbmdFbmFibGVkUHJvcGVydHlMaXN0ZW5lciApO1xyXG5cclxuICAgIC8vIHdoZW4gdGhlIGxpc3Qgb2Ygdm9pY2VzIGZvciB0aGUgQ29tYm9Cb3ggY2hhbmdlcywgY3JlYXRlIGEgbmV3IENvbWJvQm94IHRoYXQgaW5jbHVkZXMgdGhlIHN1cHBvcnRlZFxyXG4gICAgLy8gdm9pY2VzLiBFYWdlcmx5IGNyZWF0ZSB0aGUgZmlyc3QgQ29tYm9Cb3gsIGV2ZW4gaWYgbm8gdm9pY2VzIGFyZSBhdmFpbGFibGUuXHJcbiAgICBsZXQgdm9pY2VDb21ib0JveDogVm9pY2VDb21ib0JveCB8IG51bGwgPSBudWxsO1xyXG4gICAgY29uc3Qgdm9pY2VzQ2hhbmdlZExpc3RlbmVyID0gKCB2b2ljZXM6IFNwZWVjaFN5bnRoZXNpc1ZvaWNlW10gKSA9PiB7XHJcbiAgICAgIGlmICggdm9pY2VDb21ib0JveCApIHtcclxuICAgICAgICB2b2ljZU9wdGlvbnNDb250ZW50LnJlbW92ZUNoaWxkKCB2b2ljZUNvbWJvQm94ICk7XHJcblxyXG4gICAgICAgIC8vIERpc3Bvc2FsIGlzIHJlcXVpcmVkIGJlZm9yZSBjcmVhdGluZyBhIG5ldyBvbmUgd2hlbiBhdmFpbGFibGUgdm9pY2VzIGNoYW5nZVxyXG4gICAgICAgIHZvaWNlQ29tYm9Cb3guZGlzcG9zZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgdm9pY2VMaXN0OiBTcGVlY2hTeW50aGVzaXNWb2ljZVtdID0gW107XHJcblxyXG4gICAgICAvLyBPbmx5IGdldCB0aGUgcHJpb3JpdGl6ZWQgYW5kIHBydW5lZCBsaXN0IG9mIHZvaWNlcyBpZiB0aGUgVm9pY2luZ01hbmFnZXIgaGFzIHZvaWNlc1xyXG4gICAgICAvLyBhdmFpbGFibGUsIG90aGVyd2lzZSB3YWl0IHVudGlsIHRoZXkgYXJlIGF2YWlsYWJsZS4gSWYgdGhlcmUgYXJlIG5vIHZvaWNlcyBhdmFpbGFibGUgVm9pY2VDb21ib0JveCB3aWxsIGhhbmRsZVxyXG4gICAgICAvLyB0aGF0IGdyYWNlZnVsbHkuXHJcbiAgICAgIC8vIFZvaWNlIGNoYW5naW5nIGlzIG5vdCAoYXMgb2YgdGhpcyB3cml0aW5nKSBhdmFpbGFibGUgb24gTWFjT1Mgb3IgaU9TLCBidXQgd2UgaG9wZSB0aGV5IGZpeCB0aGF0IGJ1ZyBzb29uLiBQZXJoYXBzXHJcbiAgICAgIC8vIG5leHQgdGltZSBzb21lb25lIGlzIHdvcmtpbmcgaW4gdGhpcyBhcmVhLCB0aGV5IGNhbiBjaGVjayBhbmQgc2VlIGlmIGl0IGlzIHdvcmtpbmcsIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy91dHRlcmFuY2UtcXVldWUvaXNzdWVzLzc0XHJcbiAgICAgIGlmICggdm9pY2VzLmxlbmd0aCA+IDAgKSB7XHJcblxyXG4gICAgICAgIC8vIEZvciBub3csIG9ubHkgRW5nbGlzaCB2b2ljZXMgYXJlIGF2YWlsYWJsZSBiZWNhdXNlIHRoZSBWb2ljaW5nIGZlYXR1cmUgaXMgbm90IHRyYW5zbGF0YWJsZS5cclxuICAgICAgICBjb25zdCBwcmlvcml0aXplZFZvaWNlcyA9IHZvaWNpbmdNYW5hZ2VyLmdldEVuZ2xpc2hQcmlvcml0aXplZFZvaWNlcygpO1xyXG5cclxuICAgICAgICAvLyBsaW1pdCB0aGUgdm9pY2VzIGZvciBub3cgdG8ga2VlcCB0aGUgc2l6ZSBvZiB0aGUgQ29tYm9Cb3ggbWFuYWdlYWJsZVxyXG4gICAgICAgIHZvaWNlTGlzdCA9IHByaW9yaXRpemVkVm9pY2VzLnNsaWNlKCAwLCAxMiApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBwaGV0LWlvIC0gZm9yIHdoZW4gY3JlYXRpbmcgdGhlIEFyY2hldHlwZSBmb3IgdGhlIENhcHN1bGUgaG91c2luZyB0aGUgcHJlZmVyZW5jZXNEaWFsb2csIHdlIGRvbid0IGhhdmUgYSBzaW0gZ2xvYmFsLlxyXG4gICAgICAvLyBUT0RPOiB0b3BMYXllciBzaG91bGQgYmUgcHJpdmF0ZSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9pc3N1ZXMvODQxXHJcbiAgICAgIGNvbnN0IHBhcmVudCA9IHBoZXQuam9pc3Quc2ltLnRvcExheWVyIHx8IG5ldyBOb2RlKCk7XHJcblxyXG4gICAgICB2b2ljZUNvbWJvQm94ID0gbmV3IFZvaWNlQ29tYm9Cb3goIGF1ZGlvTW9kZWwudm9pY2VQcm9wZXJ0eSwgdm9pY2VMaXN0LCBwYXJlbnQgKTtcclxuICAgICAgdm9pY2VPcHRpb25zQ29udGVudC5hZGRDaGlsZCggdm9pY2VDb21ib0JveCApO1xyXG4gICAgfTtcclxuICAgIHZvaWNpbmdNYW5hZ2VyLnZvaWNlc1Byb3BlcnR5LmxpbmsoIHZvaWNlc0NoYW5nZWRMaXN0ZW5lciApO1xyXG5cclxuICAgIHZvaWNlT3B0aW9uc09wZW5Qcm9wZXJ0eS5sYXp5TGluayggb3BlbiA9PiB7XHJcbiAgICAgIGNvbnN0IGFsZXJ0U3RyaW5nUHJvcGVydHkgPSBvcGVuID8gY3VzdG9taXplVm9pY2VFeHBhbmRlZFN0cmluZ1Byb3BlcnR5IDogY3VzdG9taXplVm9pY2VDb2xsYXBzZWRTdHJpbmdQcm9wZXJ0eTtcclxuICAgICAgZXhwYW5kQ29sbGFwc2VCdXR0b24udm9pY2luZ1NwZWFrQ29udGV4dFJlc3BvbnNlKCB7XHJcbiAgICAgICAgY29udGV4dFJlc3BvbnNlOiBhbGVydFN0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0gKTtcclxuICAgICAgdGhpcy5hbGVydERlc2NyaXB0aW9uVXR0ZXJhbmNlKCBhbGVydFN0cmluZ1Byb3BlcnR5ICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgTnVtYmVyQ29udHJvbCBmb3Igb25lIG9mIHRoZSB2b2ljZSBwYXJhbWV0ZXJzIG9mIHZvaWNpbmcgKHBpdGNoL3JhdGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gbGFiZWxTdHJpbmcgLSBsYWJlbCBmb3IgdGhlIE51bWJlckNvbnRyb2xcclxuICogQHBhcmFtIGExMXlOYW1lU3RyaW5nIC0gbGFiZWwgZm9yIGJvdGggUERPTSBhbmQgVm9pY2luZyBjb250ZW50XHJcbiAqIEBwYXJhbSB2b2ljZVJhdGVQcm9wZXJ0eVxyXG4gKi9cclxuY2xhc3MgVm9pY2VSYXRlTnVtYmVyQ29udHJvbCBleHRlbmRzIE51bWJlckNvbnRyb2wge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGxhYmVsU3RyaW5nOiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LCBhMTF5TmFtZVN0cmluZzogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiwgdm9pY2VSYXRlUHJvcGVydHk6IE51bWJlclByb3BlcnR5ICkge1xyXG5cclxuICAgIHN1cGVyKCBsYWJlbFN0cmluZywgdm9pY2VSYXRlUHJvcGVydHksIHZvaWNlUmF0ZVByb3BlcnR5LnJhbmdlLCB7XHJcbiAgICAgIGluY2x1ZGVBcnJvd0J1dHRvbnM6IGZhbHNlLFxyXG4gICAgICBsYXlvdXRGdW5jdGlvbjogTnVtYmVyQ29udHJvbC5jcmVhdGVMYXlvdXRGdW5jdGlvbjQoKSxcclxuICAgICAgZGVsdGE6IDAuMjUsXHJcbiAgICAgIHRpdGxlTm9kZU9wdGlvbnM6IG1lcmdlKCB7fSwgUHJlZmVyZW5jZXNEaWFsb2cuUEFORUxfU0VDVElPTl9DT05URU5UX09QVElPTlMsIHtcclxuICAgICAgICBtYXhXaWR0aDogNDVcclxuICAgICAgfSApLFxyXG4gICAgICBudW1iZXJEaXNwbGF5T3B0aW9uczoge1xyXG4gICAgICAgIGRlY2ltYWxQbGFjZXM6IDIsXHJcbiAgICAgICAgdmFsdWVQYXR0ZXJuOiB2b2ljZVZhcmlhYmxlc1BhdHRlcm5TdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICB0ZXh0T3B0aW9uczogbWVyZ2UoIHt9LCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUywge1xyXG4gICAgICAgICAgbWF4V2lkdGg6IDQ1XHJcbiAgICAgICAgfSApXHJcbiAgICAgIH0sXHJcbiAgICAgIHNsaWRlck9wdGlvbnM6IHtcclxuICAgICAgICB0aHVtYlNpemU6IFRIVU1CX1NJWkUsXHJcbiAgICAgICAgdHJhY2tTaXplOiBUUkFDS19TSVpFLFxyXG4gICAgICAgIGtleWJvYXJkU3RlcDogMC4yNSxcclxuICAgICAgICBtaW5vclRpY2tTcGFjaW5nOiAwLjI1LFxyXG5cclxuICAgICAgICAvLyBwZG9tXHJcbiAgICAgICAgbGFiZWxUYWdOYW1lOiAnbGFiZWwnLFxyXG4gICAgICAgIGxhYmVsQ29udGVudDogYTExeU5hbWVTdHJpbmcsXHJcblxyXG4gICAgICAgIC8vIHZvaWNpbmdcclxuICAgICAgICB2b2ljaW5nT25FbmRSZXNwb25zZU9wdGlvbnM6IHtcclxuICAgICAgICAgIHdpdGhOYW1lUmVzcG9uc2U6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgLy8gV2UgZG9uJ3Qgd2FudCB0byBpbnN0cnVtZW50IGNvbXBvbmVudHMgZm9yIHByZWZlcmVuY2VzLCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzc0NCNpc3N1ZWNvbW1lbnQtMTE5NjAyODM2MlxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFZvaWNpbmcgZ29lcyB0aHJvdWdoIHRoZSBOdW1iZXJDb250cm9sIHNsaWRlciB0aHJvdWdoIEFjY2Vzc2libGVWYWx1ZUhhbmRsZXJcclxuICAgIHRoaXMuc2xpZGVyLnZvaWNpbmdOYW1lUmVzcG9uc2UgPSBhMTF5TmFtZVN0cmluZztcclxuXHJcbiAgICAvLyBpZ25vcmUgdGhlIHNlbGVjdGlvbnMgb2YgdGhlIFByZWZlcmVuY2VzRGlhbG9nLCB3ZSBhbHdheXMgd2FudCB0byBoZWFyIGFsbCByZXNwb25zZXNcclxuICAgIC8vIHRoYXQgaGFwcGVuIHdoZW4gY2hhbmdpbmcgdGhlIHZvaWNlIGF0dHJpYnV0ZXNcclxuICAgIHRoaXMuc2xpZGVyLnZvaWNpbmdJZ25vcmVWb2ljaW5nTWFuYWdlclByb3BlcnRpZXMgPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0IHZvaWNlUmF0ZU5vbk5vcm1hbFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHZvaWNlUmF0ZURlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHZhbHVlOiB2b2ljZVJhdGVQcm9wZXJ0eVxyXG4gICAgfSwgeyB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKTtcclxuXHJcbiAgICBjb25zdCB2b2ljZVJhdGVSZXNwb25zZVByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggW1xyXG4gICAgICB2b2ljZVJhdGVQcm9wZXJ0eSwgdm9pY2VSYXRlTm9ybWFsU3RyaW5nUHJvcGVydHksIHZvaWNlUmF0ZU5vbk5vcm1hbFBhdHRlcm5TdHJpbmdQcm9wZXJ0eVxyXG4gICAgXSwgKCByYXRlLCBub3JtYWwsIG5vbk5vcm1hbCApID0+IHtcclxuICAgICAgcmV0dXJuIHJhdGUgPT09IDEgPyBub3JtYWwgOiBub25Ob3JtYWw7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zbGlkZXIudm9pY2luZ09iamVjdFJlc3BvbnNlID0gdm9pY2VSYXRlUmVzcG9uc2VQcm9wZXJ0eTtcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgVm9pY2VDb21ib0JveFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxudHlwZSBWb2ljZUNvbWJvQm94T3B0aW9ucyA9IFZvaWNlQ29tYm9Cb3hTZWxmT3B0aW9ucyAmIENvbWJvQm94T3B0aW9ucztcclxuXHJcbi8qKlxyXG4gKiBJbm5lciBjbGFzcyBmb3IgdGhlIENvbWJvQm94IHRoYXQgc2VsZWN0cyB0aGUgdm9pY2UgZm9yIHRoZSB2b2ljaW5nTWFuYWdlci4gVGhpcyBDb21ib0JveCBjYW4gYmUgY3JlYXRlZCBhbmQgZGVzdHJveWVkXHJcbiAqIGEgZmV3IHRpbWVzIGFzIHRoZSBicm93c2VyIGxpc3Qgb2Ygc3VwcG9ydGVkIHZvaWNlcyBtYXkgY2hhbmdlIHdoaWxlIHRoZSBTcGVlY2hTeW50aGVzaXMgaXMgZmlyc3QgZ2V0dGluZyBwdXQgdG9cclxuICogdXNlLlxyXG4gKi9cclxuY2xhc3MgVm9pY2VDb21ib0JveCBleHRlbmRzIENvbWJvQm94PFNwZWVjaFN5bnRoZXNpc1ZvaWNlIHwgbnVsbD4ge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZVZvaWNlQ29tYm9Cb3g6ICgpID0+IHZvaWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSAgdm9pY2VQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB2b2ljZXMgLSBsaXN0IG9mIHZvaWNlcyB0byBpbmNsdWRlIGZyb20gdGhlIHZvaWNpbmdNYW5hZ2VyXHJcbiAgICogQHBhcmFtIHBhcmVudE5vZGUgLSBub2RlIHRoYXQgYWN0cyBhcyBhIHBhcmVudCBmb3IgdGhlIENvbWJvQm94IGxpc3RcclxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHZvaWNlUHJvcGVydHk6IFByb3BlcnR5PFNwZWVjaFN5bnRoZXNpc1ZvaWNlIHwgbnVsbD4sIHZvaWNlczogU3BlZWNoU3ludGhlc2lzVm9pY2VbXSwgcGFyZW50Tm9kZTogTm9kZSwgcHJvdmlkZWRPcHRpb25zPzogQ29tYm9Cb3hPcHRpb25zICkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxWb2ljZUNvbWJvQm94T3B0aW9ucywgVm9pY2VDb21ib0JveFNlbGZPcHRpb25zLCBDb21ib0JveE9wdGlvbnM+KCkoIHtcclxuICAgICAgbGlzdFBvc2l0aW9uOiAnYWJvdmUnLFxyXG4gICAgICBhY2Nlc3NpYmxlTmFtZTogdm9pY2VMYWJlbFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBjb21ib0JveFZvaWNpbmdOYW1lUmVzcG9uc2VQYXR0ZXJuOiB2b2ljZVRpdGxlUGF0dGVybkxhYmVsU3RyaW5nUHJvcGVydHkudmFsdWUsXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gaW5zdHJ1bWVudCBjb21wb25lbnRzIGZvciBwcmVmZXJlbmNlcywgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2pvaXN0L2lzc3Vlcy83NDQjaXNzdWVjb21tZW50LTExOTYwMjgzNjJcclxuICAgICAgLy8gRnVydGhlcm1vcmUsIG9wdCBvdXQgYmVjYXVzZSB3ZSB3b3VsZCBuZWVkIHRvIGluc3RydW1lbnQgdm9pY2VzLCBidXQgdGhvc2UgY291bGQgY2hhbmdlIGJldHdlZW4gcnVudGltZXMuXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVRcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGl0ZW1zOiBDb21ib0JveEl0ZW08U3BlZWNoU3ludGhlc2lzVm9pY2UgfCBudWxsPltdID0gW107XHJcblxyXG4gICAgaWYgKCB2b2ljZXMubGVuZ3RoID09PSAwICkge1xyXG4gICAgICBpdGVtcy5wdXNoKCB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCB0YW5kZW06IFRhbmRlbSApID0+IG5ldyBUZXh0KCBub1ZvaWNlc0F2YWlsYWJsZVN0cmluZ1Byb3BlcnR5LCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUyApLFxyXG4gICAgICAgIGExMXlOYW1lOiBub1ZvaWNlc0F2YWlsYWJsZVN0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICB2b2ljZXMuZm9yRWFjaCggdm9pY2UgPT4ge1xyXG4gICAgICBpdGVtcy5wdXNoKCB7XHJcbiAgICAgICAgdmFsdWU6IHZvaWNlLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICggdGFuZGVtOiBUYW5kZW0gKSA9PiBuZXcgVGV4dCggdm9pY2UubmFtZSwgUHJlZmVyZW5jZXNEaWFsb2cuUEFORUxfU0VDVElPTl9DT05URU5UX09QVElPTlMgKSxcclxuICAgICAgICBhMTF5TmFtZTogdm9pY2UubmFtZVxyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gc2luY2Ugd2UgYXJlIHVwZGF0aW5nIHRoZSBsaXN0LCBzZXQgdGhlIFZvaWNlUHJvcGVydHkgdG8gdGhlIGZpcnN0IGF2YWlsYWJsZSB2YWx1ZSwgb3IgbnVsbCBpZiB0aGVyZSBhcmVcclxuICAgIC8vIHZvaWNlc1xyXG4gICAgdm9pY2VQcm9wZXJ0eS5zZXQoIGl0ZW1zWyAwIF0udmFsdWUgKTtcclxuXHJcbiAgICBzdXBlciggdm9pY2VQcm9wZXJ0eSwgaXRlbXMsIHBhcmVudE5vZGUsIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyB2b2ljaW5nIC0gIHJlc3BvbnNlcyBmb3IgdGhlIGJ1dHRvbiBzaG91bGQgYWx3YXlzIGNvbWUgdGhyb3VnaCwgcmVnYXJkbGVzcyBvZiB1c2VyIHNlbGVjdGlvbiBvZlxyXG4gICAgLy8gcmVzcG9uc2VzLiBBcyBvZiAxMC8yOS8yMSwgQ29tYm9Cb3ggd2lsbCBvbmx5IHJlYWQgdGhlIG5hbWUgcmVzcG9uc2UgKHdoaWNoIGFyZSBhbHdheXMgcmVhZCByZWdhcmRsZXNzKVxyXG4gICAgLy8gc28gdGhpcyBpc24ndCByZWFsbHkgbmVjZXNzYXJ5IGJ1dCBpdCBpcyBwcnVkZW50IHRvIGluY2x1ZGUgaXQgYW55d2F5LlxyXG4gICAgdGhpcy5idXR0b24udm9pY2luZ0lnbm9yZVZvaWNpbmdNYW5hZ2VyUHJvcGVydGllcyA9IHRydWU7XHJcbiAgICB0aGlzLmRpc3Bvc2VWb2ljZUNvbWJvQm94ID0gKCkgPT4ge1xyXG4gICAgICBpdGVtcy5mb3JFYWNoKCBpdGVtID0+IHtcclxuICAgICAgICBpdGVtLnZhbHVlID0gbnVsbDtcclxuICAgICAgfSApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlVm9pY2VDb21ib0JveCgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEEgc2xpZGVyIHdpdGggbGFiZWxzIGFuZCB0aWNrIG1hcmtzIHVzZWQgdG8gY29udHJvbCB2b2ljZSByYXRlIG9mIHdlYiBzcGVlY2ggc3ludGhlc2lzLlxyXG4gKi9cclxuY2xhc3MgVm9pY2luZ1BpdGNoU2xpZGVyIGV4dGVuZHMgVkJveCB7XHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBsYWJlbFN0cmluZzogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiwgdm9pY2VQaXRjaFByb3BlcnR5OiBOdW1iZXJQcm9wZXJ0eSApIHtcclxuICAgIGNvbnN0IGxhYmVsID0gbmV3IFRleHQoIGxhYmVsU3RyaW5nLCBQcmVmZXJlbmNlc0RpYWxvZy5QQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUyApO1xyXG5cclxuICAgIGNvbnN0IHZvaWNlUGl0Y2hSYW5nZSA9IHZvaWNlUGl0Y2hQcm9wZXJ0eS5yYW5nZTtcclxuXHJcbiAgICBjb25zdCBzbGlkZXIgPSBuZXcgSFNsaWRlciggdm9pY2VQaXRjaFByb3BlcnR5LCB2b2ljZVBpdGNoUmFuZ2UsIHtcclxuICAgICAgbWFqb3JUaWNrTGVuZ3RoOiAxMCxcclxuICAgICAgdGh1bWJTaXplOiBUSFVNQl9TSVpFLFxyXG4gICAgICB0cmFja1NpemU6IFRSQUNLX1NJWkUsXHJcbiAgICAgIGtleWJvYXJkU3RlcDogMC4yNSxcclxuICAgICAgc2hpZnRLZXlib2FyZFN0ZXA6IDAuMSxcclxuXHJcbiAgICAgIC8vIGNvbnN0cmFpbiB0aGUgdmFsdWUgdG8gdGhlIG5lYXJlc3QgaHVuZHJlZHRocyBwbGFjZSBzbyB0aGVyZSBpcyBubyBvdmVybGFwIGluIGRlc2NyaWJlZCByYW5nZXMgaW5cclxuICAgICAgLy8gVk9JQ0VfUElUQ0hfREVTQ1JJUFRJT05fTUFQXHJcbiAgICAgIGNvbnN0cmFpblZhbHVlOiB2YWx1ZSA9PiBVdGlscy5yb3VuZFRvSW50ZXJ2YWwoIHZhbHVlLCAwLjAxICksXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIGxhYmVsVGFnTmFtZTogJ2xhYmVsJyxcclxuICAgICAgbGFiZWxDb250ZW50OiBsYWJlbFN0cmluZyxcclxuXHJcbiAgICAgIC8vIHZvaWNpbmdcclxuICAgICAgdm9pY2luZ05hbWVSZXNwb25zZTogbGFiZWxTdHJpbmcsXHJcblxyXG4gICAgICAvLyBWb2ljaW5nIGNvbnRyb2xzIHNob3VsZCBub3QgcmVzcGVjdCB2b2ljaW5nIHJlc3BvbnNlIGNvbnRyb2xzIHNvIHVzZXIgYWx3YXlzIGhlYXJzIGluZm9ybWF0aW9uIGFib3V0IHRoZW1cclxuICAgICAgdm9pY2luZ0lnbm9yZVZvaWNpbmdNYW5hZ2VyUHJvcGVydGllczogdHJ1ZSxcclxuXHJcbiAgICAgIC8vIHBoZXQtaW9cclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCAvLyBXZSBkb24ndCB3YW50IHRvIGluc3RydW1lbnQgY29tcG9uZW50cyBmb3IgcHJlZmVyZW5jZXMsIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9pc3N1ZXMvNzQ0I2lzc3VlY29tbWVudC0xMTk2MDI4MzYyXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgbG93TGFiZWwgPSBuZXcgVGV4dCggJ0xvdycsIHsgZm9udDogbmV3IFBoZXRGb250KCAxNCApIH0gKTtcclxuICAgIHNsaWRlci5hZGRNYWpvclRpY2soIHZvaWNlUGl0Y2hSYW5nZS5taW4sIGxvd0xhYmVsICk7XHJcblxyXG4gICAgY29uc3QgaGlnaExhYmVsID0gbmV3IFRleHQoICdIaWdoJywgeyBmb250OiBuZXcgUGhldEZvbnQoIDE0ICkgfSApO1xyXG4gICAgc2xpZGVyLmFkZE1ham9yVGljayggdm9pY2VQaXRjaFJhbmdlLm1heCwgaGlnaExhYmVsICk7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyB2b2ljaW5nXHJcbiAgICBjb25zdCB2b2ljZVBpdGNoTGlzdGVuZXIgPSAoIHBpdGNoOiBudW1iZXIsIHByZXZpb3VzVmFsdWU6IG51bWJlciB8IG51bGwgKSA9PiB7XHJcbiAgICAgIHNsaWRlci52b2ljaW5nT2JqZWN0UmVzcG9uc2UgPSB0aGlzLmdldFBpdGNoRGVzY3JpcHRpb25TdHJpbmcoIHBpdGNoICk7XHJcbiAgICB9O1xyXG4gICAgdm9pY2VQaXRjaFByb3BlcnR5LmxpbmsoIHZvaWNlUGl0Y2hMaXN0ZW5lciApO1xyXG5cclxuICAgIHRoaXMubXV0YXRlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGxhYmVsLCBzbGlkZXIgXSxcclxuXHJcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvMTQzM1xyXG4gICAgICBzcGFjaW5nOiA1XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGEgZGVzY3JpcHRpb24gb2YgdGhlIHBpdGNoIGF0IHRoZSBwcm92aWRlZCB2YWx1ZSBmcm9tIFZPSUNFX1BJVENIX0RFU0NSSVBUSU9OX01BUC5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFBpdGNoRGVzY3JpcHRpb25TdHJpbmcoIHBpdGNoVmFsdWU6IG51bWJlciApOiBzdHJpbmcge1xyXG4gICAgbGV0IHBpdGNoRGVzY3JpcHRpb24gPSAnJztcclxuICAgIFZPSUNFX1BJVENIX0RFU0NSSVBUSU9OX01BUC5mb3JFYWNoKCAoIGRlc2NyaXB0aW9uLCByYW5nZSApID0+IHtcclxuICAgICAgaWYgKCByYW5nZS5jb250YWlucyggcGl0Y2hWYWx1ZSApICkge1xyXG4gICAgICAgIHBpdGNoRGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcGl0Y2hEZXNjcmlwdGlvbiwgYG5vIGRlc2NyaXB0aW9uIGZvdW5kIGZvciBwaXRjaCBhdCB2YWx1ZTogJHtwaXRjaFZhbHVlfWAgKTtcclxuICAgIHJldHVybiBwaXRjaERlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG5cclxuam9pc3QucmVnaXN0ZXIoICdWb2ljaW5nUGFuZWxTZWN0aW9uJywgVm9pY2luZ1BhbmVsU2VjdGlvbiApO1xyXG5leHBvcnQgZGVmYXVsdCBWb2ljaW5nUGFuZWxTZWN0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0scUNBQXFDO0FBSWpFLE9BQU9DLFVBQVUsTUFBTSwrQkFBK0I7QUFDdEQsT0FBT0MsS0FBSyxNQUFNLDBCQUEwQjtBQUM1QyxPQUFPQyxLQUFLLE1BQU0sMEJBQTBCO0FBQzVDLE9BQU9DLEtBQUssTUFBTSxnQ0FBZ0M7QUFDbEQsT0FBT0MsU0FBUyxJQUFJQyxjQUFjLFFBQTBCLG9DQUFvQztBQUNoRyxPQUFPQyxhQUFhLE1BQU0sMkNBQTJDO0FBQ3JFLE9BQU9DLFFBQVEsTUFBTSxzQ0FBc0M7QUFDM0QsU0FBU0MsaUJBQWlCLEVBQUVDLElBQUksRUFBRUMsYUFBYSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsY0FBYyxFQUFFQyxXQUFXLFFBQVEsZ0NBQWdDO0FBQ2hJLE9BQU9DLFFBQVEsTUFBTSw2QkFBNkI7QUFDbEQsT0FBT0MsUUFBUSxNQUF5Qyw2QkFBNkI7QUFDckYsT0FBT0Msb0JBQW9CLE1BQU0seUNBQXlDO0FBQzFFLE9BQU9DLE9BQU8sTUFBTSw0QkFBNEI7QUFDaEQsT0FBT0MsTUFBTSxNQUFNLDhCQUE4QjtBQUNqRCxPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLE9BQU9DLEtBQUssTUFBTSxhQUFhO0FBQy9CLE9BQU9DLFlBQVksTUFBTSxvQkFBb0I7QUFDN0MsT0FBT0MsaUJBQWlCLE1BQU0sd0JBQXdCO0FBRXRELE9BQU9DLHVCQUF1QixNQUEwQyw4QkFBOEI7QUFDdEcsT0FBT0Msa0JBQWtCLE1BQU0seUJBQXlCO0FBQ3hELE9BQU9DLGNBQWMsTUFBa0IsMkJBQTJCO0FBQ2xFLE9BQU9DLFlBQVksTUFBK0IsaUNBQWlDO0FBQ25GLE9BQU9DLDBCQUEwQixNQUFNLGlDQUFpQztBQUN4RSxPQUFPQyxxQkFBcUIsTUFBTSwyQ0FBMkM7QUFDN0UsT0FBT0MsZUFBZSxNQUFNLHFDQUFxQztBQUdqRTtBQUNBO0FBQ0E7QUFDQSxNQUFNQywwQkFBMEIsR0FBR1QsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0MsbUJBQW1CO0FBQ3ZHLE1BQU1DLDBCQUEwQixHQUFHaEIsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0csT0FBTyxDQUFDRixtQkFBbUI7QUFDL0csTUFBTUcsa0JBQWtCLEdBQUdsQixZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSyxjQUFjLENBQUNDLElBQUksQ0FBQ0wsbUJBQW1CO0FBQ25ILE1BQU1NLHVCQUF1QixHQUFHckIsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDQyxJQUFJLENBQUNFLHlCQUF5QjtBQUM5SCxNQUFNQyxtQkFBbUIsR0FBR3ZCLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNLLGNBQWMsQ0FBQ0ssS0FBSyxDQUFDVCxtQkFBbUI7QUFDckgsTUFBTVUsNEJBQTRCLEdBQUd6QixZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDWSx1QkFBdUI7QUFDN0csTUFBTUMsNkJBQTZCLEdBQUczQixZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDYyx3QkFBd0I7QUFDL0csTUFBTUMsOENBQThDLEdBQUc3QixZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDZSw4Q0FBOEM7QUFDdEosTUFBTUMsbUNBQW1DLEdBQUc5QixZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSyxjQUFjLENBQUNZLDhCQUE4QjtBQUMxSSxNQUFNQyw0QkFBNEIsR0FBR2hDLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNLLGNBQWMsQ0FBQ0osbUJBQW1CO0FBRXhILE1BQU1rQiw0QkFBNEIsR0FBR2pDLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNHLE9BQU8sQ0FBQ2dCLDRCQUE0QjtBQUMxSCxNQUFNQywwQkFBMEIsR0FBR2xDLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNHLE9BQU8sQ0FBQ2lCLDBCQUEwQjtBQUV0SCxNQUFNQywrQkFBK0IsR0FBR25DLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNzQixpQkFBaUIsQ0FBQ3JCLG1CQUFtQjtBQUM5SCxNQUFNc0IsbUNBQW1DLEdBQUdyQyxZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDc0IsaUJBQWlCLENBQUNFLHlCQUF5QjtBQUV4SSxNQUFNQyxnQ0FBZ0MsR0FBR3ZDLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNzQixpQkFBaUIsQ0FBQ0ksYUFBYSxDQUFDQyxtQkFBbUI7QUFDN0ksTUFBTUMsaUNBQWlDLEdBQUcxQyxZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDc0IsaUJBQWlCLENBQUNPLGNBQWMsQ0FBQ0YsbUJBQW1CO0FBQy9JLE1BQU1HLCtCQUErQixHQUFHNUMsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ3NCLGlCQUFpQixDQUFDUyxZQUFZLENBQUNKLG1CQUFtQjtBQUUzSSxNQUFNSyxrQ0FBa0MsR0FBRzlDLFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNzQixpQkFBaUIsQ0FBQ0ksYUFBYSxDQUFDTywwQkFBMEI7QUFDdEosTUFBTUMsZ0NBQWdDLEdBQUdoRCxZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDc0IsaUJBQWlCLENBQUNJLGFBQWEsQ0FBQ1MsMkJBQTJCO0FBQ3JKLE1BQU1DLG1DQUFtQyxHQUFHbEQsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ3NCLGlCQUFpQixDQUFDTyxjQUFjLENBQUNJLDBCQUEwQjtBQUN4SixNQUFNSSxpQ0FBaUMsR0FBR25ELFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNzQixpQkFBaUIsQ0FBQ08sY0FBYyxDQUFDTSwyQkFBMkI7QUFDdkosTUFBTUcsMEJBQTBCLEdBQUdwRCxZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDc0IsaUJBQWlCLENBQUNTLFlBQVksQ0FBQ0UsMEJBQTBCO0FBQzdJLE1BQU1NLHdCQUF3QixHQUFHckQsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ3NCLGlCQUFpQixDQUFDUyxZQUFZLENBQUNJLDJCQUEyQjtBQUU1SSxNQUFNSyx3QkFBd0IsR0FBR3RELFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNLLGNBQWMsQ0FBQ29DLEtBQUssQ0FBQ3hDLG1CQUFtQjtBQUMxSCxNQUFNeUMsb0NBQW9DLEdBQUd4RCxZQUFZLENBQUNVLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSyxjQUFjLENBQUNvQyxLQUFLLENBQUNFLDBCQUEwQjtBQUM3SSxNQUFNQywrQkFBK0IsR0FBRzFELFlBQVksQ0FBQ1UsSUFBSSxDQUFDQyxXQUFXLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNLLGNBQWMsQ0FBQ29DLEtBQUssQ0FBQ0csK0JBQStCO0FBRTdJLE1BQU1DLG9DQUFvQyxHQUFHM0QsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDeUMsMkJBQTJCO0FBQ3hJLE1BQU1DLHFDQUFxQyxHQUFHN0QsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDMkMsNEJBQTRCO0FBRTFJLE1BQU1DLHlDQUF5QyxHQUFHL0QsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDNkMscUNBQXFDO0FBQ3ZKLE1BQU1DLHdDQUF3QyxHQUFHakUsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDcUQsd0NBQXdDO0FBRTVILE1BQU1DLDZCQUE2QixHQUFHbEUsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDQyxJQUFJLENBQUMrQyxpQkFBaUIsQ0FBQ0QsNkJBQTZCO0FBQzFKLE1BQU1FLHdCQUF3QixHQUFHcEUsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDQyxJQUFJLENBQUMrQyxpQkFBaUIsQ0FBQ0UsaUJBQWlCO0FBQ3pJLE1BQU1DLDJCQUEyQixHQUFHdEUsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDQyxJQUFJLENBQUMrQyxpQkFBaUIsQ0FBQ0ksb0JBQW9CO0FBQy9JLE1BQU1DLDhCQUE4QixHQUFHeEUsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDQyxJQUFJLENBQUMrQyxpQkFBaUIsQ0FBQ00seUJBQXlCO0FBQ3ZKLE1BQU1DLHlCQUF5QixHQUFHMUUsWUFBWSxDQUFDVSxJQUFJLENBQUNDLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0ssY0FBYyxDQUFDQyxJQUFJLENBQUMrQyxpQkFBaUIsQ0FBQ1Esa0JBQWtCOztBQUUzSTtBQUNBO0FBQ0EsTUFBTUMscUNBQXFDLEdBQUc1RSxZQUFZLENBQUNXLFdBQVcsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQytELDhCQUE4QjtBQUN4SCxNQUFNQyxnQ0FBZ0MsR0FBRzlFLFlBQVksQ0FBQ1csV0FBVyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDd0IseUJBQXlCO0FBRTlHLE1BQU15QywyQkFBMkIsR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQztBQUM3Q0QsMkJBQTJCLENBQUNFLEdBQUcsQ0FBRSxJQUFJdEcsS0FBSyxDQUFFLEdBQUcsRUFBRSxJQUFLLENBQUMsRUFBRXlGLHdCQUF5QixDQUFDO0FBQ25GVywyQkFBMkIsQ0FBQ0UsR0FBRyxDQUFFLElBQUl0RyxLQUFLLENBQUUsSUFBSSxFQUFFLElBQUssQ0FBQyxFQUFFMkYsMkJBQTRCLENBQUM7QUFDdkZTLDJCQUEyQixDQUFDRSxHQUFHLENBQUUsSUFBSXRHLEtBQUssQ0FBRSxJQUFJLEVBQUUsR0FBSSxDQUFDLEVBQUU2Riw4QkFBK0IsQ0FBQztBQUN6Rk8sMkJBQTJCLENBQUNFLEdBQUcsQ0FBRSxJQUFJdEcsS0FBSyxDQUFFLEdBQUcsRUFBRSxDQUFFLENBQUMsRUFBRStGLHlCQUEwQixDQUFDO0FBRWpGLE1BQU1RLFVBQVUsR0FBRyxJQUFJeEcsVUFBVSxDQUFFLEVBQUUsRUFBRSxFQUFHLENBQUM7QUFDM0MsTUFBTXlHLFVBQVUsR0FBRyxJQUFJekcsVUFBVSxDQUFFLEdBQUcsRUFBRSxDQUFFLENBQUM7QUFLM0MsTUFBTTBHLG1CQUFtQixTQUFTbEYsdUJBQXVCLENBQUM7RUFFeEQ7QUFDRjtBQUNBO0FBQ0E7RUFDU21GLFdBQVdBLENBQUVDLFVBQXNCLEVBQUVDLGVBQTRDLEVBQUc7SUFFekY7SUFDQTtJQUNBLE1BQU14RSxtQkFBbUIsR0FBS1gsY0FBYyxDQUFDb0YsV0FBVyxJQUFJcEYsY0FBYyxDQUFDb0YsV0FBVyxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxHQUNyRWIscUNBQXFDLEdBQUduRSwwQkFBMEI7O0lBRTlGO0lBQ0EsTUFBTWlGLFlBQVksR0FBRyxJQUFJckcsSUFBSSxDQUFFMEIsbUJBQW1CLEVBQUVkLGlCQUFpQixDQUFDMEYsMkJBQTRCLENBQUM7SUFDbkcsTUFBTUMsMkRBQTJELEdBQUcsSUFBSXJGLHFCQUFxQixDQUFFMEQsd0NBQXdDLEVBQUU7TUFDdkk0QixLQUFLLEVBQUU5RSxtQkFBbUI7TUFDMUIrRSxXQUFXLEVBQUVoQjtJQUNmLENBQUMsRUFBRTtNQUFFaUIsTUFBTSxFQUFFbEcsTUFBTSxDQUFDbUc7SUFBUSxDQUFFLENBQUM7SUFDL0IsTUFBTUMsK0JBQStCLEdBQUcsSUFBSXpHLFdBQVcsQ0FBRXNGLGdDQUFnQyxFQUFFakcsS0FBSyxDQUFFLENBQUMsQ0FBQyxFQUFFb0IsaUJBQWlCLENBQUNpRyw2QkFBNkIsRUFBRTtNQUNySkMsd0JBQXdCLEVBQUVQO0lBQzVCLENBQUUsQ0FBRSxDQUFDO0lBQ0wsTUFBTVEsbUJBQW1CLEdBQUcsSUFBSS9GLFlBQVksQ0FBRWlGLFVBQVUsQ0FBQ2Usc0JBQXNCLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRXRILGNBQWMsQ0FBdUI7TUFDakl1SCxRQUFRLEVBQUV2RjtJQUNaLENBQUMsRUFBRVQsMEJBQTBCLENBQUNpRyxxQkFBc0IsQ0FBRSxDQUFDO0lBQ3ZELE1BQU1DLG9CQUFvQixHQUFHLElBQUlyRyxrQkFBa0IsQ0FBRTtNQUNuRHNHLFNBQVMsRUFBRWYsWUFBWTtNQUN2QmdCLGVBQWUsRUFBRVQsK0JBQStCO01BQ2hEVSxXQUFXLEVBQUVQO0lBQ2YsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsTUFBTVEsZ0JBQWdCLEdBQUcsSUFBSXZILElBQUksQ0FBRTJCLDBCQUEwQixFQUFFZixpQkFBaUIsQ0FBQzBGLDJCQUE0QixDQUFDO0lBQzlHLE1BQU1rQixtQkFBbUIsR0FBRyxJQUFJeEcsWUFBWSxDQUFFaUYsVUFBVSxDQUFDd0Isc0JBQXNCLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRS9ILGNBQWMsQ0FBdUI7TUFDakl1SCxRQUFRLEVBQUV0RiwwQkFBMEI7TUFDcEMrRix3QkFBd0IsRUFBRTlFLDRCQUE0QjtNQUN0RCtFLHlCQUF5QixFQUFFOUU7SUFDN0IsQ0FBQyxFQUFFNUIsMEJBQTBCLENBQUNpRyxxQkFBc0IsQ0FBRSxDQUFDO0lBQ3ZELE1BQU1VLG9CQUFvQixHQUFHLElBQUk5RyxrQkFBa0IsQ0FBRTtNQUNuRHNHLFNBQVMsRUFBRUcsZ0JBQWdCO01BQzNCRCxXQUFXLEVBQUVFO0lBQ2YsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsTUFBTUssaUJBQWlCLEdBQUcsSUFBSTdILElBQUksQ0FBRThDLCtCQUErQixFQUFFdEQsS0FBSyxDQUFFLENBQUMsQ0FBQyxFQUFFb0IsaUJBQWlCLENBQUMwRiwyQkFBMkIsRUFBRTtNQUU3SDtNQUNBd0IsT0FBTyxFQUFFLElBQUk7TUFDYkMsWUFBWSxFQUFFakY7SUFDaEIsQ0FBRSxDQUFFLENBQUM7SUFDTCxNQUFNa0YseURBQXlELEdBQUcsSUFBSTlHLHFCQUFxQixDQUFFMEQsd0NBQXdDLEVBQUU7TUFDckk0QixLQUFLLEVBQUUxRCwrQkFBK0I7TUFDdEMyRCxXQUFXLEVBQUV6RDtJQUNmLENBQUMsRUFBRTtNQUFFMEQsTUFBTSxFQUFFbEcsTUFBTSxDQUFDbUc7SUFBUSxDQUFFLENBQUM7SUFDL0IsTUFBTXNCLHVCQUF1QixHQUFHLElBQUk5SCxXQUFXLENBQUU2QyxtQ0FBbUMsRUFBRXhELEtBQUssQ0FBRSxDQUFDLENBQUMsRUFBRW9CLGlCQUFpQixDQUFDaUcsNkJBQTZCLEVBQUU7TUFDaEpDLHdCQUF3QixFQUFFa0I7SUFDNUIsQ0FBRSxDQUFFLENBQUM7O0lBRUw7QUFDSjtBQUNBO0lBQ0ksTUFBTUUsY0FBYyxHQUFHQSxDQUFFQyxXQUFzQyxFQUFFQyxRQUEyQixFQUNuRUMsc0JBQWlELEVBQ2pEQyx3QkFBbUQsRUFBRUMsVUFBc0IsS0FBZ0I7TUFDbEgsTUFBTW5CLFNBQVMsR0FBRyxJQUFJcEgsSUFBSSxDQUFFbUksV0FBVyxFQUFFdkgsaUJBQWlCLENBQUNpRyw2QkFBOEIsQ0FBQztNQUMxRixNQUFNMkIsUUFBUSxHQUFHLElBQUlwSSxRQUFRLENBQUVnSSxRQUFRLEVBQUVoQixTQUFTLEVBQUU7UUFFbEQ7UUFDQXFCLFlBQVksRUFBRSxPQUFPO1FBQ3JCQyxZQUFZLEVBQUVQLFdBQVc7UUFFekI7UUFDQVEsbUJBQW1CLEVBQUVSLFdBQVc7UUFDaENTLHFDQUFxQyxFQUFFLElBQUk7UUFDM0NDLDRCQUE0QixFQUFFLEtBQUs7UUFFbkM7UUFDQVIsc0JBQXNCLEVBQUVBLHNCQUFzQjtRQUM5Q0Msd0JBQXdCLEVBQUVBLHdCQUF3QjtRQUVsRDtRQUNBNUIsTUFBTSxFQUFFbEcsTUFBTSxDQUFDbUcsT0FBTyxDQUFDO01BQ3pCLENBQUUsQ0FBQztNQUVILE9BQU82QixRQUFRO0lBQ2pCLENBQUM7SUFFRCxNQUFNTSxtQkFBbUIsR0FBRyxJQUFJaEosSUFBSSxDQUFDLENBQUM7SUFFdEMsTUFBTWlKLHNCQUFzQixHQUFHLElBQUk5SSxJQUFJLENBQUU7TUFDdkMrSSxLQUFLLEVBQUUsTUFBTTtNQUNiQyxPQUFPLEVBQUVySSxpQkFBaUIsQ0FBQ3NJLHdCQUF3QjtNQUNuREMsUUFBUSxFQUFFLENBQ1JqQixjQUFjLENBQUVoRixnQ0FBZ0MsRUFBRStDLFVBQVUsQ0FBQ21ELHFDQUFxQyxFQUNoRzNGLGtDQUFrQyxFQUFFRSxnQ0FBZ0MsRUFBRWtFLGlCQUN4RSxDQUFDLEVBQ0RLLGNBQWMsQ0FBRTdFLGlDQUFpQyxFQUFFNEMsVUFBVSxDQUFDb0Qsc0NBQXNDLEVBQ2xHeEYsbUNBQW1DLEVBQUVDLGlDQUFpQyxFQUFFK0QsaUJBQzFFLENBQUMsRUFDREssY0FBYyxDQUFFM0UsK0JBQStCLEVBQUUwQyxVQUFVLENBQUNxRCxtQ0FBbUMsRUFDN0Z2RiwwQkFBMEIsRUFBRUMsd0JBQXdCLEVBQUU2RCxpQkFDeEQsQ0FBQztJQUVMLENBQUUsQ0FBQztJQUVIaUIsbUJBQW1CLENBQUNLLFFBQVEsR0FBRyxDQUFFdEIsaUJBQWlCLEVBQUVJLHVCQUF1QixFQUFFYyxzQkFBc0IsQ0FBRTtJQUNyR2QsdUJBQXVCLENBQUNzQixPQUFPLEdBQUcxQixpQkFBaUIsQ0FBQzJCLFVBQVUsQ0FBQ0MsTUFBTSxDQUFFLENBQUMsRUFBRTdJLGlCQUFpQixDQUFDc0ksd0JBQXlCLENBQUM7SUFDdEhILHNCQUFzQixDQUFDUSxPQUFPLEdBQUd0Qix1QkFBdUIsQ0FBQ3VCLFVBQVUsQ0FBQ0MsTUFBTSxDQUFFN0ksaUJBQWlCLENBQUM4SSwyQkFBMkIsRUFBRTlJLGlCQUFpQixDQUFDc0ksd0JBQXlCLENBQUM7SUFFdkssTUFBTVMsVUFBVSxHQUFHLElBQUlDLHNCQUFzQixDQUFFL0gsa0JBQWtCLEVBQUVHLHVCQUF1QixFQUFFaUUsVUFBVSxDQUFDNEQsaUJBQWtCLENBQUM7SUFDMUgsTUFBTUMsV0FBVyxHQUFHLElBQUlDLGtCQUFrQixDQUFFN0gsbUJBQW1CLEVBQUUrRCxVQUFVLENBQUMrRCxrQkFBbUIsQ0FBQztJQUNoRyxNQUFNQyxtQkFBbUIsR0FBRyxJQUFJaEssSUFBSSxDQUFFO01BQ3BDZ0osT0FBTyxFQUFFckksaUJBQWlCLENBQUNzSSx3QkFBd0I7TUFDbkRGLEtBQUssRUFBRSxNQUFNO01BQ2JHLFFBQVEsRUFBRSxDQUNSUSxVQUFVLEVBQ1ZHLFdBQVc7SUFFZixDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNSSxpQkFBaUIsR0FBRyxJQUFJbEssSUFBSSxDQUFFMkMsNEJBQTRCLEVBQUVuRCxLQUFLLENBQUUsQ0FBQyxDQUFDLEVBQUVvQixpQkFBaUIsQ0FBQzBGLDJCQUEyQixFQUFFO01BQzFINkQsTUFBTSxFQUFFO0lBQ1YsQ0FBRSxDQUFFLENBQUM7SUFDTCxNQUFNQyx3QkFBd0IsR0FBRyxJQUFJaEwsZUFBZSxDQUFFLEtBQU0sQ0FBQztJQUM3RCxNQUFNaUwsb0JBQW9CLEdBQUcsSUFBSS9KLG9CQUFvQixDQUFFOEosd0JBQXdCLEVBQUU7TUFDL0VFLFVBQVUsRUFBRSxFQUFFO01BRWQ7TUFDQXZDLFlBQVksRUFBRXBGLDRCQUE0QjtNQUUxQztNQUNBZ0csbUJBQW1CLEVBQUVoRyw0QkFBNEI7TUFDakRpRyxxQ0FBcUMsRUFBRSxJQUFJO01BQUU7O01BRTdDO01BQ0FsQyxNQUFNLEVBQUVsRyxNQUFNLENBQUNtRyxPQUFPLENBQUM7SUFDekIsQ0FBRSxDQUFDO0lBRUgsTUFBTTRELHFCQUFxQixHQUFHLElBQUl6SyxJQUFJLENBQUU7TUFDdENxSixRQUFRLEVBQUUsQ0FBRWUsaUJBQWlCLEVBQUVHLG9CQUFvQjtJQUNyRCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNRyx5QkFBeUIsR0FBRyxJQUFJekssYUFBYSxDQUFFO01BQ25EMEssS0FBSyxFQUFFQSxDQUFBLEtBQU07UUFDWEwsd0JBQXdCLENBQUNNLE1BQU0sQ0FBQyxDQUFDO01BQ25DLENBQUM7TUFFRDtNQUNBaEUsTUFBTSxFQUFFbEcsTUFBTSxDQUFDbUcsT0FBTyxDQUFDO0lBQ3pCLENBQUUsQ0FBQztJQUNIdUQsaUJBQWlCLENBQUNTLGdCQUFnQixDQUFFSCx5QkFBMEIsQ0FBQztJQUUvRCxNQUFNSSxPQUFPLEdBQUcsSUFBSTlLLElBQUksQ0FBRTtNQUN4QnFKLFFBQVEsRUFBRSxDQUFFTCxtQkFBbUIsRUFBRWxCLG9CQUFvQixFQUFFMkMscUJBQXFCLEVBQUVOLG1CQUFtQjtJQUNuRyxDQUFFLENBQUM7O0lBRUg7SUFDQTtJQUNBckMsb0JBQW9CLENBQUMyQixPQUFPLEdBQUdULG1CQUFtQixDQUFDVSxVQUFVLENBQUNDLE1BQU0sQ0FBRSxDQUFDLEVBQUUsRUFBRyxDQUFDO0lBQzdFUyxpQkFBaUIsQ0FBQ1gsT0FBTyxHQUFHM0Isb0JBQW9CLENBQUM0QixVQUFVLENBQUNDLE1BQU0sQ0FBRSxDQUFDLEVBQUUsRUFBRyxDQUFDO0lBQzNFWSxvQkFBb0IsQ0FBQ1EsVUFBVSxHQUFHWCxpQkFBaUIsQ0FBQ1ksV0FBVyxDQUFDckIsTUFBTSxDQUFFLEVBQUUsRUFBRSxDQUFFLENBQUM7SUFDL0VRLG1CQUFtQixDQUFDVixPQUFPLEdBQUdXLGlCQUFpQixDQUFDVixVQUFVLENBQUNDLE1BQU0sQ0FBRSxDQUFDLEVBQUUsRUFBRyxDQUFDO0lBQzFFVyx3QkFBd0IsQ0FBQ1csSUFBSSxDQUFFQyxJQUFJLElBQUk7TUFBRWYsbUJBQW1CLENBQUNnQixPQUFPLEdBQUdELElBQUk7SUFBRSxDQUFFLENBQUM7O0lBRWhGO0lBQ0FYLG9CQUFvQixDQUFDYSxjQUFjLEdBQUcsSUFBSXJMLGlCQUFpQixDQUFFMEsscUJBQXNCLENBQUM7SUFFcEYsS0FBSyxDQUFFO01BQ0xZLFNBQVMsRUFBRWhFLG9CQUFvQjtNQUMvQmlFLFdBQVcsRUFBRVI7SUFDZixDQUFFLENBQUM7SUFFSCxNQUFNUyx5QkFBeUIsR0FBS0MsT0FBZ0IsSUFBTTtNQUN4RFYsT0FBTyxDQUFDSyxPQUFPLEdBQUdLLE9BQU87SUFDM0IsQ0FBQztJQUNEckYsVUFBVSxDQUFDZSxzQkFBc0IsQ0FBQytELElBQUksQ0FBRU0seUJBQTBCLENBQUM7SUFFbkUsTUFBTUUsY0FBYyxHQUFLQyxNQUFjLElBQU07TUFDM0NyRSxvQkFBb0IsQ0FBQ3NFLGVBQWUsQ0FBQ0MsS0FBSyxHQUFHRixNQUFNLENBQUNHLFVBQVUsQ0FBRSxJQUFLLENBQUM7SUFDeEUsQ0FBQztJQUNENUssY0FBYyxDQUFDZ0ssSUFBSSxDQUFFUSxjQUFlLENBQUM7O0lBRXJDO0lBQ0E7SUFDQSxNQUFNSyx1QkFBdUIsR0FBRyxJQUFJbkwsU0FBUyxDQUFDLENBQUM7SUFDL0MsTUFBTW9MLDhCQUE4QixHQUFLUCxPQUFnQixJQUFNO01BRTdEO01BQ0E7TUFDQSxJQUFLckYsVUFBVSxDQUFDNkYsdUNBQXVDLENBQUNKLEtBQUssRUFBRztRQUU5RDtRQUNBO1FBQ0FFLHVCQUF1QixDQUFDRyxLQUFLLEdBQUdULE9BQU8sR0FBR2xKLDRCQUE0QixHQUNwQ3JCLGNBQWMsQ0FBQzJLLEtBQUssQ0FBQ0MsVUFBVSxDQUFFLElBQUssQ0FBQyxHQUFHckosNkJBQTZCLEdBQUdFLDhDQUFnRDs7UUFFNUo7UUFDQSxJQUFLLENBQUMsSUFBSSxDQUFDd0osdUJBQXVCLENBQUMsQ0FBQyxFQUFHO1VBQ3JDOUwsY0FBYyxDQUFDK0wsb0JBQW9CLENBQUVMLHVCQUF3QixDQUFDO1FBQ2hFO1FBQ0EsSUFBSSxDQUFDTSx5QkFBeUIsQ0FBRU4sdUJBQXdCLENBQUM7TUFDM0Q7SUFDRixDQUFDO0lBQ0QzRixVQUFVLENBQUNlLHNCQUFzQixDQUFDbUYsUUFBUSxDQUFFTiw4QkFBK0IsQ0FBQzs7SUFFNUU7SUFDQTtJQUNBLElBQUlPLGFBQW1DLEdBQUcsSUFBSTtJQUM5QyxNQUFNQyxxQkFBcUIsR0FBS0MsTUFBOEIsSUFBTTtNQUNsRSxJQUFLRixhQUFhLEVBQUc7UUFDbkJuQyxtQkFBbUIsQ0FBQ3NDLFdBQVcsQ0FBRUgsYUFBYyxDQUFDOztRQUVoRDtRQUNBQSxhQUFhLENBQUNJLE9BQU8sQ0FBQyxDQUFDO01BQ3pCO01BRUEsSUFBSUMsU0FBaUMsR0FBRyxFQUFFOztNQUUxQztNQUNBO01BQ0E7TUFDQTtNQUNBO01BQ0EsSUFBS0gsTUFBTSxDQUFDbEcsTUFBTSxHQUFHLENBQUMsRUFBRztRQUV2QjtRQUNBLE1BQU1zRyxpQkFBaUIsR0FBR3hNLGNBQWMsQ0FBQ3lNLDJCQUEyQixDQUFDLENBQUM7O1FBRXRFO1FBQ0FGLFNBQVMsR0FBR0MsaUJBQWlCLENBQUNFLEtBQUssQ0FBRSxDQUFDLEVBQUUsRUFBRyxDQUFDO01BQzlDOztNQUVBO01BQ0E7TUFDQSxNQUFNQyxNQUFNLEdBQUdDLElBQUksQ0FBQ3BNLEtBQUssQ0FBQ3FNLEdBQUcsQ0FBQ0MsUUFBUSxJQUFJLElBQUlsTixJQUFJLENBQUMsQ0FBQztNQUVwRHNNLGFBQWEsR0FBRyxJQUFJYSxhQUFhLENBQUVoSCxVQUFVLENBQUNpSCxhQUFhLEVBQUVULFNBQVMsRUFBRUksTUFBTyxDQUFDO01BQ2hGNUMsbUJBQW1CLENBQUNrRCxRQUFRLENBQUVmLGFBQWMsQ0FBQztJQUMvQyxDQUFDO0lBQ0RsTSxjQUFjLENBQUNrTixjQUFjLENBQUNyQyxJQUFJLENBQUVzQixxQkFBc0IsQ0FBQztJQUUzRGpDLHdCQUF3QixDQUFDK0IsUUFBUSxDQUFFbkIsSUFBSSxJQUFJO01BQ3pDLE1BQU1xQyxtQkFBbUIsR0FBR3JDLElBQUksR0FBRzFHLG9DQUFvQyxHQUFHRSxxQ0FBcUM7TUFDL0c2RixvQkFBb0IsQ0FBQ2lELDJCQUEyQixDQUFFO1FBQ2hEQyxlQUFlLEVBQUVGO01BQ25CLENBQUUsQ0FBQztNQUNILElBQUksQ0FBQ25CLHlCQUF5QixDQUFFbUIsbUJBQW9CLENBQUM7SUFDdkQsQ0FBRSxDQUFDO0VBQ0w7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU16RCxzQkFBc0IsU0FBU2pLLGFBQWEsQ0FBQztFQUUxQ3FHLFdBQVdBLENBQUVtQyxXQUFzQyxFQUFFcUYsY0FBeUMsRUFBRTNELGlCQUFpQyxFQUFHO0lBRXpJLEtBQUssQ0FBRTFCLFdBQVcsRUFBRTBCLGlCQUFpQixFQUFFQSxpQkFBaUIsQ0FBQzRELEtBQUssRUFBRTtNQUM5REMsbUJBQW1CLEVBQUUsS0FBSztNQUMxQkMsY0FBYyxFQUFFaE8sYUFBYSxDQUFDaU8scUJBQXFCLENBQUMsQ0FBQztNQUNyREMsS0FBSyxFQUFFLElBQUk7TUFDWEMsZ0JBQWdCLEVBQUV0TyxLQUFLLENBQUUsQ0FBQyxDQUFDLEVBQUVvQixpQkFBaUIsQ0FBQ2lHLDZCQUE2QixFQUFFO1FBQzVFa0gsUUFBUSxFQUFFO01BQ1osQ0FBRSxDQUFDO01BQ0hDLG9CQUFvQixFQUFFO1FBQ3BCQyxhQUFhLEVBQUUsQ0FBQztRQUNoQkMsWUFBWSxFQUFFekwsbUNBQW1DO1FBQ2pEMEwsV0FBVyxFQUFFM08sS0FBSyxDQUFFLENBQUMsQ0FBQyxFQUFFb0IsaUJBQWlCLENBQUNpRyw2QkFBNkIsRUFBRTtVQUN2RWtILFFBQVEsRUFBRTtRQUNaLENBQUU7TUFDSixDQUFDO01BQ0RLLGFBQWEsRUFBRTtRQUNiQyxTQUFTLEVBQUV4SSxVQUFVO1FBQ3JCeUksU0FBUyxFQUFFeEksVUFBVTtRQUNyQnlJLFlBQVksRUFBRSxJQUFJO1FBQ2xCQyxnQkFBZ0IsRUFBRSxJQUFJO1FBRXRCO1FBQ0EvRixZQUFZLEVBQUUsT0FBTztRQUNyQkMsWUFBWSxFQUFFOEUsY0FBYztRQUU1QjtRQUNBaUIsMkJBQTJCLEVBQUU7VUFDM0JDLGdCQUFnQixFQUFFO1FBQ3BCO01BQ0YsQ0FBQztNQUVEO01BQ0FoSSxNQUFNLEVBQUVsRyxNQUFNLENBQUNtRyxPQUFPLENBQUM7SUFDekIsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsSUFBSSxDQUFDZ0ksTUFBTSxDQUFDaEcsbUJBQW1CLEdBQUc2RSxjQUFjOztJQUVoRDtJQUNBO0lBQ0EsSUFBSSxDQUFDbUIsTUFBTSxDQUFDL0YscUNBQXFDLEdBQUcsSUFBSTtJQUV4RCxNQUFNZ0csdUNBQXVDLEdBQUcsSUFBSTFOLHFCQUFxQixDQUFFd0QseUNBQXlDLEVBQUU7TUFDcEhnSCxLQUFLLEVBQUU3QjtJQUNULENBQUMsRUFBRTtNQUFFbkQsTUFBTSxFQUFFbEcsTUFBTSxDQUFDbUc7SUFBUSxDQUFFLENBQUM7SUFFL0IsTUFBTWtJLHlCQUF5QixHQUFHLElBQUkxTixlQUFlLENBQUUsQ0FDckQwSSxpQkFBaUIsRUFBRWhGLDZCQUE2QixFQUFFK0osdUNBQXVDLENBQzFGLEVBQUUsQ0FBRTdNLElBQUksRUFBRStNLE1BQU0sRUFBRUMsU0FBUyxLQUFNO01BQ2hDLE9BQU9oTixJQUFJLEtBQUssQ0FBQyxHQUFHK00sTUFBTSxHQUFHQyxTQUFTO0lBQ3hDLENBQUUsQ0FBQztJQUVILElBQUksQ0FBQ0osTUFBTSxDQUFDSyxxQkFBcUIsR0FBR0gseUJBQXlCO0VBQy9EO0FBQ0Y7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTVCLGFBQWEsU0FBUzVNLFFBQVEsQ0FBOEI7RUFHaEU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1MyRixXQUFXQSxDQUFFa0gsYUFBb0QsRUFBRVosTUFBOEIsRUFBRTJDLFVBQWdCLEVBQUUvSSxlQUFpQyxFQUFHO0lBQzlKLE1BQU1nSixPQUFPLEdBQUd6UCxTQUFTLENBQWtFLENBQUMsQ0FBRTtNQUM1RjBQLFlBQVksRUFBRSxPQUFPO01BQ3JCQyxjQUFjLEVBQUVuTCx3QkFBd0I7TUFDeENvTCxrQ0FBa0MsRUFBRWxMLG9DQUFvQyxDQUFDdUgsS0FBSztNQUU5RTtNQUNBO01BQ0E7TUFDQWhGLE1BQU0sRUFBRWxHLE1BQU0sQ0FBQ21HO0lBQ2pCLENBQUMsRUFBRVQsZUFBZ0IsQ0FBQztJQUVwQixNQUFNb0osS0FBa0QsR0FBRyxFQUFFO0lBRTdELElBQUtoRCxNQUFNLENBQUNsRyxNQUFNLEtBQUssQ0FBQyxFQUFHO01BQ3pCa0osS0FBSyxDQUFDQyxJQUFJLENBQUU7UUFDVjdELEtBQUssRUFBRSxJQUFJO1FBQ1g4RCxVQUFVLEVBQUk5SSxNQUFjLElBQU0sSUFBSTFHLElBQUksQ0FBRXFFLCtCQUErQixFQUFFekQsaUJBQWlCLENBQUNpRyw2QkFBOEIsQ0FBQztRQUM5SEksUUFBUSxFQUFFNUM7TUFDWixDQUFFLENBQUM7SUFDTDtJQUVBaUksTUFBTSxDQUFDbUQsT0FBTyxDQUFFdkwsS0FBSyxJQUFJO01BQ3ZCb0wsS0FBSyxDQUFDQyxJQUFJLENBQUU7UUFDVjdELEtBQUssRUFBRXhILEtBQUs7UUFDWnNMLFVBQVUsRUFBSTlJLE1BQWMsSUFBTSxJQUFJMUcsSUFBSSxDQUFFa0UsS0FBSyxDQUFDd0wsSUFBSSxFQUFFOU8saUJBQWlCLENBQUNpRyw2QkFBOEIsQ0FBQztRQUN6R0ksUUFBUSxFQUFFL0MsS0FBSyxDQUFDd0w7TUFDbEIsQ0FBRSxDQUFDO0lBQ0wsQ0FBRSxDQUFDOztJQUVIO0lBQ0E7SUFDQXhDLGFBQWEsQ0FBQ3RILEdBQUcsQ0FBRTBKLEtBQUssQ0FBRSxDQUFDLENBQUUsQ0FBQzVELEtBQU0sQ0FBQztJQUVyQyxLQUFLLENBQUV3QixhQUFhLEVBQUVvQyxLQUFLLEVBQUVMLFVBQVUsRUFBRUMsT0FBUSxDQUFDOztJQUVsRDtJQUNBO0lBQ0E7SUFDQSxJQUFJLENBQUNTLE1BQU0sQ0FBQy9HLHFDQUFxQyxHQUFHLElBQUk7SUFDeEQsSUFBSSxDQUFDZ0gsb0JBQW9CLEdBQUcsTUFBTTtNQUNoQ04sS0FBSyxDQUFDRyxPQUFPLENBQUVJLElBQUksSUFBSTtRQUNyQkEsSUFBSSxDQUFDbkUsS0FBSyxHQUFHLElBQUk7TUFDbkIsQ0FBRSxDQUFDO0lBQ0wsQ0FBQztFQUNIO0VBRWdCYyxPQUFPQSxDQUFBLEVBQVM7SUFDOUIsSUFBSSxDQUFDb0Qsb0JBQW9CLENBQUMsQ0FBQztJQUMzQixLQUFLLENBQUNwRCxPQUFPLENBQUMsQ0FBQztFQUNqQjtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU16QyxrQkFBa0IsU0FBUzlKLElBQUksQ0FBQztFQUM3QitGLFdBQVdBLENBQUVtQyxXQUFzQyxFQUFFNkIsa0JBQWtDLEVBQUc7SUFDL0YsTUFBTXhELEtBQUssR0FBRyxJQUFJeEcsSUFBSSxDQUFFbUksV0FBVyxFQUFFdkgsaUJBQWlCLENBQUNpRyw2QkFBOEIsQ0FBQztJQUV0RixNQUFNaUosZUFBZSxHQUFHOUYsa0JBQWtCLENBQUN5RCxLQUFLO0lBRWhELE1BQU1rQixNQUFNLEdBQUcsSUFBSXBPLE9BQU8sQ0FBRXlKLGtCQUFrQixFQUFFOEYsZUFBZSxFQUFFO01BQy9EQyxlQUFlLEVBQUUsRUFBRTtNQUNuQjFCLFNBQVMsRUFBRXhJLFVBQVU7TUFDckJ5SSxTQUFTLEVBQUV4SSxVQUFVO01BQ3JCeUksWUFBWSxFQUFFLElBQUk7TUFDbEJ5QixpQkFBaUIsRUFBRSxHQUFHO01BRXRCO01BQ0E7TUFDQUMsY0FBYyxFQUFFdkUsS0FBSyxJQUFJbk0sS0FBSyxDQUFDMlEsZUFBZSxDQUFFeEUsS0FBSyxFQUFFLElBQUssQ0FBQztNQUU3RDtNQUNBakQsWUFBWSxFQUFFLE9BQU87TUFDckJDLFlBQVksRUFBRVAsV0FBVztNQUV6QjtNQUNBUSxtQkFBbUIsRUFBRVIsV0FBVztNQUVoQztNQUNBUyxxQ0FBcUMsRUFBRSxJQUFJO01BRTNDO01BQ0FsQyxNQUFNLEVBQUVsRyxNQUFNLENBQUNtRyxPQUFPLENBQUM7SUFDekIsQ0FBRSxDQUFDO0lBRUgsTUFBTXdKLFFBQVEsR0FBRyxJQUFJblEsSUFBSSxDQUFFLEtBQUssRUFBRTtNQUFFb1EsSUFBSSxFQUFFLElBQUl4USxRQUFRLENBQUUsRUFBRztJQUFFLENBQUUsQ0FBQztJQUNoRStPLE1BQU0sQ0FBQzBCLFlBQVksQ0FBRVAsZUFBZSxDQUFDUSxHQUFHLEVBQUVILFFBQVMsQ0FBQztJQUVwRCxNQUFNSSxTQUFTLEdBQUcsSUFBSXZRLElBQUksQ0FBRSxNQUFNLEVBQUU7TUFBRW9RLElBQUksRUFBRSxJQUFJeFEsUUFBUSxDQUFFLEVBQUc7SUFBRSxDQUFFLENBQUM7SUFDbEUrTyxNQUFNLENBQUMwQixZQUFZLENBQUVQLGVBQWUsQ0FBQ1UsR0FBRyxFQUFFRCxTQUFVLENBQUM7SUFFckQsS0FBSyxDQUFDLENBQUM7O0lBRVA7SUFDQSxNQUFNRSxrQkFBa0IsR0FBR0EsQ0FBRXRPLEtBQWEsRUFBRXVPLGFBQTRCLEtBQU07TUFDNUUvQixNQUFNLENBQUNLLHFCQUFxQixHQUFHLElBQUksQ0FBQzJCLHlCQUF5QixDQUFFeE8sS0FBTSxDQUFDO0lBQ3hFLENBQUM7SUFDRDZILGtCQUFrQixDQUFDZSxJQUFJLENBQUUwRixrQkFBbUIsQ0FBQztJQUU3QyxJQUFJLENBQUNHLE1BQU0sQ0FBRTtNQUNYekgsUUFBUSxFQUFFLENBQUUzQyxLQUFLLEVBQUVtSSxNQUFNLENBQUU7TUFFM0I7TUFDQTFGLE9BQU8sRUFBRTtJQUNYLENBQUUsQ0FBQztFQUNMOztFQUVBO0FBQ0Y7QUFDQTtFQUNVMEgseUJBQXlCQSxDQUFFRSxVQUFrQixFQUFXO0lBQzlELElBQUlDLGdCQUFnQixHQUFHLEVBQUU7SUFDekJwTCwyQkFBMkIsQ0FBQytKLE9BQU8sQ0FBRSxDQUFFaEosV0FBVyxFQUFFZ0gsS0FBSyxLQUFNO01BQzdELElBQUtBLEtBQUssQ0FBQ3NELFFBQVEsQ0FBRUYsVUFBVyxDQUFDLEVBQUc7UUFDbENDLGdCQUFnQixHQUFHckssV0FBVztNQUNoQztJQUNGLENBQUUsQ0FBQztJQUNIdUssTUFBTSxJQUFJQSxNQUFNLENBQUVGLGdCQUFnQixFQUFHLDRDQUEyQ0QsVUFBVyxFQUFFLENBQUM7SUFDOUYsT0FBT0MsZ0JBQWdCO0VBQ3pCO0FBQ0Y7QUFFQXBRLEtBQUssQ0FBQ3VRLFFBQVEsQ0FBRSxxQkFBcUIsRUFBRWxMLG1CQUFvQixDQUFDO0FBQzVELGVBQWVBLG1CQUFtQiIsImlnbm9yZUxpc3QiOltdfQ==