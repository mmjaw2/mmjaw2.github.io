// Copyright 2021-2024, University of Colorado Boulder

/**
 * Dialog with preferences to enable or disable various features for the simulation. Groups of preferences are
 * organized and displayed in a tab panel.
 *
 * Once the dialog is created it is never destroyed so listeners and components do not need to be disposed.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import EnumerationProperty from '../../../axon/js/EnumerationProperty.js';
import optionize from '../../../phet-core/js/optionize.js';
import PhetFont from '../../../scenery-phet/js/PhetFont.js';
import { FocusManager, HSeparator, KeyboardListener, Text, VBox } from '../../../scenery/js/imports.js';
import Dialog from '../../../sun/js/Dialog.js';
import soundManager from '../../../tambo/js/soundManager.js';
import joist from '../joist.js';
import JoistStrings from '../JoistStrings.js';
import PreferencesPanels from './PreferencesPanels.js';
import PreferencesTabs from './PreferencesTabs.js';
import PreferencesTabSwitchSoundGenerator from './PreferencesTabSwitchSoundGenerator.js';
import PreferencesType from './PreferencesType.js';
import DerivedProperty from '../../../axon/js/DerivedProperty.js';

// constants
const TITLE_FONT = new PhetFont({
  size: 24,
  weight: 'bold'
});
const TAB_FONT = new PhetFont(20);
const TAB_MAX_WIDTH = 120;
const TAB_OPTIONS = {
  font: TAB_FONT,
  maxWidth: TAB_MAX_WIDTH
};
const CONTENT_FONT = new PhetFont(16);
const CONTENT_MAX_WIDTH = 500;
const PANEL_SECTION_CONTENT_OPTIONS = {
  font: CONTENT_FONT,
  maxWidth: CONTENT_MAX_WIDTH
};
const PANEL_SECTION_LABEL_FONT = new PhetFont({
  weight: 'bold',
  size: 16
});
const PANEL_SECTION_LABEL_MAX_WIDTH = 360;
const PANEL_SECTION_LABEL_OPTIONS = {
  font: PANEL_SECTION_LABEL_FONT,
  maxWidth: PANEL_SECTION_LABEL_MAX_WIDTH
};
class PreferencesDialog extends Dialog {
  constructor(preferencesModel, providedOptions) {
    const titleText = new Text(JoistStrings.preferences.titleStringProperty, {
      font: TITLE_FONT,
      maxWidth: CONTENT_MAX_WIDTH,
      // The width of the title should be the same max as for a panel section

      // pdom
      tagName: 'h1',
      innerContent: JoistStrings.preferences.titleStringProperty
    });
    const options = optionize()({
      titleAlign: 'center',
      title: titleText,
      isDisposable: false,
      // phet-io
      phetioDynamicElement: true,
      closeButtonVoicingDialogTitle: JoistStrings.preferences.titleStringProperty,
      // pdom
      positionInPDOM: true
    }, providedOptions);

    // determine which tabs will be supported in this Dialog, true if any entry in a configuration has content
    const supportedTabs = [PreferencesType.OVERVIEW]; // There is always an "Overview" tab
    preferencesModel.supportsSimulationPreferences() && supportedTabs.push(PreferencesType.SIMULATION);
    preferencesModel.supportsVisualPreferences() && supportedTabs.push(PreferencesType.VISUAL);
    preferencesModel.supportsAudioPreferences() && supportedTabs.push(PreferencesType.AUDIO);
    preferencesModel.supportsInputPreferences() && supportedTabs.push(PreferencesType.INPUT);
    preferencesModel.supportsLocalizationPreferences() && supportedTabs.push(PreferencesType.LOCALIZATION);
    assert && assert(supportedTabs.length > 0, 'Trying to create a PreferencesDialog with no tabs, check PreferencesModel');

    // the selected PreferencesType, indicating which tab is visible in the Dialog
    const selectedTabProperty = new EnumerationProperty(PreferencesType.OVERVIEW, {
      validValues: supportedTabs,
      tandem: options.tandem.createTandem('selectedTabProperty')
    });

    // the set of tabs you can click to activate a tab panel
    const preferencesTabs = new PreferencesTabs(supportedTabs, selectedTabProperty, {
      tandem: options.tandem.createTandem('preferencesTabs')
    });

    // the panels of content with UI components to select preferences, only one is displayed at a time
    const preferencesPanels = new PreferencesPanels(preferencesModel, supportedTabs, selectedTabProperty, preferencesTabs, {
      tandem: options.tandem.createTandem('preferencesPanels')
    });

    // visual separator between tabs and panels - as long as the widest separated content, which may change with i18n

    const content = new VBox({
      children: [preferencesTabs, new HSeparator({
        layoutOptions: {
          bottomMargin: 20,
          stretch: true
        }
      }), preferencesPanels]
    });

    // sound generation for tab switching
    const tabSwitchSoundGenerator = new PreferencesTabSwitchSoundGenerator(selectedTabProperty, {
      initialOutputLevel: 0.2
    });
    soundManager.addSoundGenerator(tabSwitchSoundGenerator, {
      categoryName: 'user-interface'
    });
    super(content, options);
    this.preferencesTabs = preferencesTabs;
    this.preferencesPanels = preferencesPanels;

    // pdom - When the "down" arrow is pressed on the group of tabs, move focus to the selected panel
    preferencesTabs.addInputListener(new KeyboardListener({
      keys: ['arrowDown'],
      fire: () => {
        this.focusSelectedPanel();
      }
    }));
    content.addInputListener(new KeyboardListener({
      keys: ['arrowUp'],
      fire: event => {
        this.focusSelectedTab();
      },
      // This listener is only enabled when the focus is on the panel itself, not its children. Panel contents
      // will often use arrow keys themselves, so this prevents an overlap.
      enabledProperty: new DerivedProperty([FocusManager.pdomFocusProperty], () => {
        const pdomFocusedNode = FocusManager.getPDOMFocusedNode();
        return !!pdomFocusedNode && this.preferencesPanels.isFocusableSelectedContent(pdomFocusedNode);
      }, {
        // The derivation uses methods on PreferencesPanels that use Properties in their implementation and so
        // there is an assertion that they are not in the derivation. We do not need to recompute enabledProperty
        // when those internal Properties change, tracking focus is enough.
        strictAxonDependencies: false
      })
    }));
  }

  /**
   * Move focus to the selected tab. Generally to be used when opening the dialog.
   */
  focusSelectedTab() {
    this.preferencesTabs.focusSelectedTab();
  }

  /**
   * Move focus to the selected panel.
   */
  focusSelectedPanel() {
    this.preferencesPanels.focusSelectedPanel();
  }

  // Font and options for the text that labels a tab in the dialog.
  static TAB_FONT = TAB_FONT;
  static TAB_OPTIONS = TAB_OPTIONS;

  // The font for a title of a panel in the dialog.
  static TITLE_FONT = TITLE_FONT;

  // The font, max width, and options for most text content in the dialog.
  static CONTENT_FONT = CONTENT_FONT;
  static CONTENT_MAX_WIDTH = CONTENT_MAX_WIDTH;
  static PANEL_SECTION_CONTENT_OPTIONS = PANEL_SECTION_CONTENT_OPTIONS;

  // The font, max width, and options for a label for a section of content in the dialog.
  static PANEL_SECTION_LABEL_FONT = PANEL_SECTION_LABEL_FONT;
  static PANEL_SECTION_LABEL_MAX_WIDTH = PANEL_SECTION_LABEL_MAX_WIDTH;
  static PANEL_SECTION_LABEL_OPTIONS = PANEL_SECTION_LABEL_OPTIONS;

  // Default spacing between unique items in a preferences dialog
  static CONTENT_SPACING = 20;

  // Default vertical spacing between grouped items (radio buttons, vertical checkboxes, ...)
  static VERTICAL_CONTENT_SPACING = 5;

  // Content or UI component intendentation under a PreferencesPanelSection title.
  static CONTENT_INDENTATION_SPACING = 15;

  // Default vertical spacing between a label and its collection of contents for a control in the dialog.
  static LABEL_CONTENT_SPACING = 10;
}
joist.register('PreferencesDialog', PreferencesDialog);
export default PreferencesDialog;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvblByb3BlcnR5Iiwib3B0aW9uaXplIiwiUGhldEZvbnQiLCJGb2N1c01hbmFnZXIiLCJIU2VwYXJhdG9yIiwiS2V5Ym9hcmRMaXN0ZW5lciIsIlRleHQiLCJWQm94IiwiRGlhbG9nIiwic291bmRNYW5hZ2VyIiwiam9pc3QiLCJKb2lzdFN0cmluZ3MiLCJQcmVmZXJlbmNlc1BhbmVscyIsIlByZWZlcmVuY2VzVGFicyIsIlByZWZlcmVuY2VzVGFiU3dpdGNoU291bmRHZW5lcmF0b3IiLCJQcmVmZXJlbmNlc1R5cGUiLCJEZXJpdmVkUHJvcGVydHkiLCJUSVRMRV9GT05UIiwic2l6ZSIsIndlaWdodCIsIlRBQl9GT05UIiwiVEFCX01BWF9XSURUSCIsIlRBQl9PUFRJT05TIiwiZm9udCIsIm1heFdpZHRoIiwiQ09OVEVOVF9GT05UIiwiQ09OVEVOVF9NQVhfV0lEVEgiLCJQQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUyIsIlBBTkVMX1NFQ1RJT05fTEFCRUxfRk9OVCIsIlBBTkVMX1NFQ1RJT05fTEFCRUxfTUFYX1dJRFRIIiwiUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TIiwiUHJlZmVyZW5jZXNEaWFsb2ciLCJjb25zdHJ1Y3RvciIsInByZWZlcmVuY2VzTW9kZWwiLCJwcm92aWRlZE9wdGlvbnMiLCJ0aXRsZVRleHQiLCJwcmVmZXJlbmNlcyIsInRpdGxlU3RyaW5nUHJvcGVydHkiLCJ0YWdOYW1lIiwiaW5uZXJDb250ZW50Iiwib3B0aW9ucyIsInRpdGxlQWxpZ24iLCJ0aXRsZSIsImlzRGlzcG9zYWJsZSIsInBoZXRpb0R5bmFtaWNFbGVtZW50IiwiY2xvc2VCdXR0b25Wb2ljaW5nRGlhbG9nVGl0bGUiLCJwb3NpdGlvbkluUERPTSIsInN1cHBvcnRlZFRhYnMiLCJPVkVSVklFVyIsInN1cHBvcnRzU2ltdWxhdGlvblByZWZlcmVuY2VzIiwicHVzaCIsIlNJTVVMQVRJT04iLCJzdXBwb3J0c1Zpc3VhbFByZWZlcmVuY2VzIiwiVklTVUFMIiwic3VwcG9ydHNBdWRpb1ByZWZlcmVuY2VzIiwiQVVESU8iLCJzdXBwb3J0c0lucHV0UHJlZmVyZW5jZXMiLCJJTlBVVCIsInN1cHBvcnRzTG9jYWxpemF0aW9uUHJlZmVyZW5jZXMiLCJMT0NBTElaQVRJT04iLCJhc3NlcnQiLCJsZW5ndGgiLCJzZWxlY3RlZFRhYlByb3BlcnR5IiwidmFsaWRWYWx1ZXMiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJwcmVmZXJlbmNlc1RhYnMiLCJwcmVmZXJlbmNlc1BhbmVscyIsImNvbnRlbnQiLCJjaGlsZHJlbiIsImxheW91dE9wdGlvbnMiLCJib3R0b21NYXJnaW4iLCJzdHJldGNoIiwidGFiU3dpdGNoU291bmRHZW5lcmF0b3IiLCJpbml0aWFsT3V0cHV0TGV2ZWwiLCJhZGRTb3VuZEdlbmVyYXRvciIsImNhdGVnb3J5TmFtZSIsImFkZElucHV0TGlzdGVuZXIiLCJrZXlzIiwiZmlyZSIsImZvY3VzU2VsZWN0ZWRQYW5lbCIsImV2ZW50IiwiZm9jdXNTZWxlY3RlZFRhYiIsImVuYWJsZWRQcm9wZXJ0eSIsInBkb21Gb2N1c1Byb3BlcnR5IiwicGRvbUZvY3VzZWROb2RlIiwiZ2V0UERPTUZvY3VzZWROb2RlIiwiaXNGb2N1c2FibGVTZWxlY3RlZENvbnRlbnQiLCJzdHJpY3RBeG9uRGVwZW5kZW5jaWVzIiwiQ09OVEVOVF9TUEFDSU5HIiwiVkVSVElDQUxfQ09OVEVOVF9TUEFDSU5HIiwiQ09OVEVOVF9JTkRFTlRBVElPTl9TUEFDSU5HIiwiTEFCRUxfQ09OVEVOVF9TUEFDSU5HIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQcmVmZXJlbmNlc0RpYWxvZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaWFsb2cgd2l0aCBwcmVmZXJlbmNlcyB0byBlbmFibGUgb3IgZGlzYWJsZSB2YXJpb3VzIGZlYXR1cmVzIGZvciB0aGUgc2ltdWxhdGlvbi4gR3JvdXBzIG9mIHByZWZlcmVuY2VzIGFyZVxyXG4gKiBvcmdhbml6ZWQgYW5kIGRpc3BsYXllZCBpbiBhIHRhYiBwYW5lbC5cclxuICpcclxuICogT25jZSB0aGUgZGlhbG9nIGlzIGNyZWF0ZWQgaXQgaXMgbmV2ZXIgZGVzdHJveWVkIHNvIGxpc3RlbmVycyBhbmQgY29tcG9uZW50cyBkbyBub3QgbmVlZCB0byBiZSBkaXNwb3NlZC5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmcgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEVudW1lcmF0aW9uUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9FbnVtZXJhdGlvblByb3BlcnR5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBGb2N1c01hbmFnZXIsIEhTZXBhcmF0b3IsIEtleWJvYXJkTGlzdGVuZXIsIFRleHQsIFZCb3ggfSBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgRGlhbG9nLCB7IERpYWxvZ09wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9zdW4vanMvRGlhbG9nLmpzJztcclxuaW1wb3J0IHNvdW5kTWFuYWdlciBmcm9tICcuLi8uLi8uLi90YW1iby9qcy9zb3VuZE1hbmFnZXIuanMnO1xyXG5pbXBvcnQgam9pc3QgZnJvbSAnLi4vam9pc3QuanMnO1xyXG5pbXBvcnQgSm9pc3RTdHJpbmdzIGZyb20gJy4uL0pvaXN0U3RyaW5ncy5qcyc7XHJcbmltcG9ydCBQcmVmZXJlbmNlc01vZGVsIGZyb20gJy4vUHJlZmVyZW5jZXNNb2RlbC5qcyc7XHJcbmltcG9ydCBQcmVmZXJlbmNlc1BhbmVscyBmcm9tICcuL1ByZWZlcmVuY2VzUGFuZWxzLmpzJztcclxuaW1wb3J0IFByZWZlcmVuY2VzVGFicyBmcm9tICcuL1ByZWZlcmVuY2VzVGFicy5qcyc7XHJcbmltcG9ydCBQcmVmZXJlbmNlc1RhYlN3aXRjaFNvdW5kR2VuZXJhdG9yIGZyb20gJy4vUHJlZmVyZW5jZXNUYWJTd2l0Y2hTb3VuZEdlbmVyYXRvci5qcyc7XHJcbmltcG9ydCBQcmVmZXJlbmNlc1R5cGUgZnJvbSAnLi9QcmVmZXJlbmNlc1R5cGUuanMnO1xyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBUSVRMRV9GT05UID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDI0LCB3ZWlnaHQ6ICdib2xkJyB9ICk7XHJcblxyXG5jb25zdCBUQUJfRk9OVCA9IG5ldyBQaGV0Rm9udCggMjAgKTtcclxuY29uc3QgVEFCX01BWF9XSURUSCA9IDEyMDtcclxuY29uc3QgVEFCX09QVElPTlMgPSB7XHJcbiAgZm9udDogVEFCX0ZPTlQsXHJcbiAgbWF4V2lkdGg6IFRBQl9NQVhfV0lEVEhcclxufTtcclxuXHJcbmNvbnN0IENPTlRFTlRfRk9OVCA9IG5ldyBQaGV0Rm9udCggMTYgKTtcclxuY29uc3QgQ09OVEVOVF9NQVhfV0lEVEggPSA1MDA7XHJcbmNvbnN0IFBBTkVMX1NFQ1RJT05fQ09OVEVOVF9PUFRJT05TID0ge1xyXG4gIGZvbnQ6IENPTlRFTlRfRk9OVCxcclxuICBtYXhXaWR0aDogQ09OVEVOVF9NQVhfV0lEVEhcclxufTtcclxuXHJcbmNvbnN0IFBBTkVMX1NFQ1RJT05fTEFCRUxfRk9OVCA9IG5ldyBQaGV0Rm9udCggeyB3ZWlnaHQ6ICdib2xkJywgc2l6ZTogMTYgfSApO1xyXG5jb25zdCBQQU5FTF9TRUNUSU9OX0xBQkVMX01BWF9XSURUSCA9IDM2MDtcclxuY29uc3QgUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TID0ge1xyXG4gIGZvbnQ6IFBBTkVMX1NFQ1RJT05fTEFCRUxfRk9OVCxcclxuICBtYXhXaWR0aDogUEFORUxfU0VDVElPTl9MQUJFTF9NQVhfV0lEVEhcclxufTtcclxuXHJcbnR5cGUgUHJlZmVyZW5jZXNEaWFsb2dPcHRpb25zID0gRGlhbG9nT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxEaWFsb2dPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5jbGFzcyBQcmVmZXJlbmNlc0RpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBwcmVmZXJlbmNlc1RhYnM6IFByZWZlcmVuY2VzVGFicztcclxuICBwcml2YXRlIHJlYWRvbmx5IHByZWZlcmVuY2VzUGFuZWxzOiBQcmVmZXJlbmNlc1BhbmVscztcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcmVmZXJlbmNlc01vZGVsOiBQcmVmZXJlbmNlc01vZGVsLCBwcm92aWRlZE9wdGlvbnM/OiBQcmVmZXJlbmNlc0RpYWxvZ09wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3QgdGl0bGVUZXh0ID0gbmV3IFRleHQoIEpvaXN0U3RyaW5ncy5wcmVmZXJlbmNlcy50aXRsZVN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IFRJVExFX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiBDT05URU5UX01BWF9XSURUSCwgLy8gVGhlIHdpZHRoIG9mIHRoZSB0aXRsZSBzaG91bGQgYmUgdGhlIHNhbWUgbWF4IGFzIGZvciBhIHBhbmVsIHNlY3Rpb25cclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgdGFnTmFtZTogJ2gxJyxcclxuICAgICAgaW5uZXJDb250ZW50OiBKb2lzdFN0cmluZ3MucHJlZmVyZW5jZXMudGl0bGVTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8UHJlZmVyZW5jZXNEaWFsb2dPcHRpb25zLCBFbXB0eVNlbGZPcHRpb25zLCBEaWFsb2dPcHRpb25zPigpKCB7XHJcbiAgICAgIHRpdGxlQWxpZ246ICdjZW50ZXInLFxyXG4gICAgICB0aXRsZTogdGl0bGVUZXh0LFxyXG4gICAgICBpc0Rpc3Bvc2FibGU6IGZhbHNlLFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICBwaGV0aW9EeW5hbWljRWxlbWVudDogdHJ1ZSxcclxuXHJcbiAgICAgIGNsb3NlQnV0dG9uVm9pY2luZ0RpYWxvZ1RpdGxlOiBKb2lzdFN0cmluZ3MucHJlZmVyZW5jZXMudGl0bGVTdHJpbmdQcm9wZXJ0eSxcclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgcG9zaXRpb25JblBET006IHRydWVcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGRldGVybWluZSB3aGljaCB0YWJzIHdpbGwgYmUgc3VwcG9ydGVkIGluIHRoaXMgRGlhbG9nLCB0cnVlIGlmIGFueSBlbnRyeSBpbiBhIGNvbmZpZ3VyYXRpb24gaGFzIGNvbnRlbnRcclxuICAgIGNvbnN0IHN1cHBvcnRlZFRhYnMgPSBbIFByZWZlcmVuY2VzVHlwZS5PVkVSVklFVyBdOyAvLyBUaGVyZSBpcyBhbHdheXMgYW4gXCJPdmVydmlld1wiIHRhYlxyXG4gICAgcHJlZmVyZW5jZXNNb2RlbC5zdXBwb3J0c1NpbXVsYXRpb25QcmVmZXJlbmNlcygpICYmIHN1cHBvcnRlZFRhYnMucHVzaCggUHJlZmVyZW5jZXNUeXBlLlNJTVVMQVRJT04gKTtcclxuICAgIHByZWZlcmVuY2VzTW9kZWwuc3VwcG9ydHNWaXN1YWxQcmVmZXJlbmNlcygpICYmIHN1cHBvcnRlZFRhYnMucHVzaCggUHJlZmVyZW5jZXNUeXBlLlZJU1VBTCApO1xyXG4gICAgcHJlZmVyZW5jZXNNb2RlbC5zdXBwb3J0c0F1ZGlvUHJlZmVyZW5jZXMoKSAmJiBzdXBwb3J0ZWRUYWJzLnB1c2goIFByZWZlcmVuY2VzVHlwZS5BVURJTyApO1xyXG4gICAgcHJlZmVyZW5jZXNNb2RlbC5zdXBwb3J0c0lucHV0UHJlZmVyZW5jZXMoKSAmJiBzdXBwb3J0ZWRUYWJzLnB1c2goIFByZWZlcmVuY2VzVHlwZS5JTlBVVCApO1xyXG4gICAgcHJlZmVyZW5jZXNNb2RlbC5zdXBwb3J0c0xvY2FsaXphdGlvblByZWZlcmVuY2VzKCkgJiYgc3VwcG9ydGVkVGFicy5wdXNoKCBQcmVmZXJlbmNlc1R5cGUuTE9DQUxJWkFUSU9OICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzdXBwb3J0ZWRUYWJzLmxlbmd0aCA+IDAsICdUcnlpbmcgdG8gY3JlYXRlIGEgUHJlZmVyZW5jZXNEaWFsb2cgd2l0aCBubyB0YWJzLCBjaGVjayBQcmVmZXJlbmNlc01vZGVsJyApO1xyXG5cclxuICAgIC8vIHRoZSBzZWxlY3RlZCBQcmVmZXJlbmNlc1R5cGUsIGluZGljYXRpbmcgd2hpY2ggdGFiIGlzIHZpc2libGUgaW4gdGhlIERpYWxvZ1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRUYWJQcm9wZXJ0eSA9IG5ldyBFbnVtZXJhdGlvblByb3BlcnR5KCBQcmVmZXJlbmNlc1R5cGUuT1ZFUlZJRVcsIHtcclxuICAgICAgdmFsaWRWYWx1ZXM6IHN1cHBvcnRlZFRhYnMsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2VsZWN0ZWRUYWJQcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHRoZSBzZXQgb2YgdGFicyB5b3UgY2FuIGNsaWNrIHRvIGFjdGl2YXRlIGEgdGFiIHBhbmVsXHJcbiAgICBjb25zdCBwcmVmZXJlbmNlc1RhYnMgPSBuZXcgUHJlZmVyZW5jZXNUYWJzKCBzdXBwb3J0ZWRUYWJzLCBzZWxlY3RlZFRhYlByb3BlcnR5LCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncHJlZmVyZW5jZXNUYWJzJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdGhlIHBhbmVscyBvZiBjb250ZW50IHdpdGggVUkgY29tcG9uZW50cyB0byBzZWxlY3QgcHJlZmVyZW5jZXMsIG9ubHkgb25lIGlzIGRpc3BsYXllZCBhdCBhIHRpbWVcclxuICAgIGNvbnN0IHByZWZlcmVuY2VzUGFuZWxzID0gbmV3IFByZWZlcmVuY2VzUGFuZWxzKCBwcmVmZXJlbmNlc01vZGVsLCBzdXBwb3J0ZWRUYWJzLCBzZWxlY3RlZFRhYlByb3BlcnR5LCBwcmVmZXJlbmNlc1RhYnMsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwcmVmZXJlbmNlc1BhbmVscycgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHZpc3VhbCBzZXBhcmF0b3IgYmV0d2VlbiB0YWJzIGFuZCBwYW5lbHMgLSBhcyBsb25nIGFzIHRoZSB3aWRlc3Qgc2VwYXJhdGVkIGNvbnRlbnQsIHdoaWNoIG1heSBjaGFuZ2Ugd2l0aCBpMThuXHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgcHJlZmVyZW5jZXNUYWJzLFxyXG4gICAgICAgIG5ldyBIU2VwYXJhdG9yKCB7XHJcbiAgICAgICAgICBsYXlvdXRPcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGJvdHRvbU1hcmdpbjogMjAsXHJcbiAgICAgICAgICAgIHN0cmV0Y2g6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9ICksXHJcbiAgICAgICAgcHJlZmVyZW5jZXNQYW5lbHNcclxuICAgICAgXVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHNvdW5kIGdlbmVyYXRpb24gZm9yIHRhYiBzd2l0Y2hpbmdcclxuICAgIGNvbnN0IHRhYlN3aXRjaFNvdW5kR2VuZXJhdG9yID0gbmV3IFByZWZlcmVuY2VzVGFiU3dpdGNoU291bmRHZW5lcmF0b3IoIHNlbGVjdGVkVGFiUHJvcGVydHksIHtcclxuICAgICAgaW5pdGlhbE91dHB1dExldmVsOiAwLjJcclxuICAgIH0gKTtcclxuICAgIHNvdW5kTWFuYWdlci5hZGRTb3VuZEdlbmVyYXRvciggdGFiU3dpdGNoU291bmRHZW5lcmF0b3IsIHtcclxuICAgICAgY2F0ZWdvcnlOYW1lOiAndXNlci1pbnRlcmZhY2UnXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIGNvbnRlbnQsIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnByZWZlcmVuY2VzVGFicyA9IHByZWZlcmVuY2VzVGFicztcclxuICAgIHRoaXMucHJlZmVyZW5jZXNQYW5lbHMgPSBwcmVmZXJlbmNlc1BhbmVscztcclxuXHJcbiAgICAvLyBwZG9tIC0gV2hlbiB0aGUgXCJkb3duXCIgYXJyb3cgaXMgcHJlc3NlZCBvbiB0aGUgZ3JvdXAgb2YgdGFicywgbW92ZSBmb2N1cyB0byB0aGUgc2VsZWN0ZWQgcGFuZWxcclxuICAgIHByZWZlcmVuY2VzVGFicy5hZGRJbnB1dExpc3RlbmVyKCBuZXcgS2V5Ym9hcmRMaXN0ZW5lcigge1xyXG4gICAgICBrZXlzOiBbICdhcnJvd0Rvd24nIF0sXHJcbiAgICAgIGZpcmU6ICgpID0+IHtcclxuICAgICAgICB0aGlzLmZvY3VzU2VsZWN0ZWRQYW5lbCgpO1xyXG4gICAgICB9XHJcbiAgICB9ICkgKTtcclxuICAgIGNvbnRlbnQuYWRkSW5wdXRMaXN0ZW5lciggbmV3IEtleWJvYXJkTGlzdGVuZXIoIHtcclxuICAgICAga2V5czogWyAnYXJyb3dVcCcgXSxcclxuICAgICAgZmlyZTogZXZlbnQgPT4ge1xyXG4gICAgICAgIHRoaXMuZm9jdXNTZWxlY3RlZFRhYigpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gVGhpcyBsaXN0ZW5lciBpcyBvbmx5IGVuYWJsZWQgd2hlbiB0aGUgZm9jdXMgaXMgb24gdGhlIHBhbmVsIGl0c2VsZiwgbm90IGl0cyBjaGlsZHJlbi4gUGFuZWwgY29udGVudHNcclxuICAgICAgLy8gd2lsbCBvZnRlbiB1c2UgYXJyb3cga2V5cyB0aGVtc2VsdmVzLCBzbyB0aGlzIHByZXZlbnRzIGFuIG92ZXJsYXAuXHJcbiAgICAgIGVuYWJsZWRQcm9wZXJ0eTogbmV3IERlcml2ZWRQcm9wZXJ0eSggWyBGb2N1c01hbmFnZXIucGRvbUZvY3VzUHJvcGVydHkgXSwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBkb21Gb2N1c2VkTm9kZSA9IEZvY3VzTWFuYWdlci5nZXRQRE9NRm9jdXNlZE5vZGUoKTtcclxuICAgICAgICByZXR1cm4gISFwZG9tRm9jdXNlZE5vZGUgJiYgdGhpcy5wcmVmZXJlbmNlc1BhbmVscy5pc0ZvY3VzYWJsZVNlbGVjdGVkQ29udGVudCggcGRvbUZvY3VzZWROb2RlICk7XHJcbiAgICAgIH0sIHtcclxuXHJcbiAgICAgICAgLy8gVGhlIGRlcml2YXRpb24gdXNlcyBtZXRob2RzIG9uIFByZWZlcmVuY2VzUGFuZWxzIHRoYXQgdXNlIFByb3BlcnRpZXMgaW4gdGhlaXIgaW1wbGVtZW50YXRpb24gYW5kIHNvXHJcbiAgICAgICAgLy8gdGhlcmUgaXMgYW4gYXNzZXJ0aW9uIHRoYXQgdGhleSBhcmUgbm90IGluIHRoZSBkZXJpdmF0aW9uLiBXZSBkbyBub3QgbmVlZCB0byByZWNvbXB1dGUgZW5hYmxlZFByb3BlcnR5XHJcbiAgICAgICAgLy8gd2hlbiB0aG9zZSBpbnRlcm5hbCBQcm9wZXJ0aWVzIGNoYW5nZSwgdHJhY2tpbmcgZm9jdXMgaXMgZW5vdWdoLlxyXG4gICAgICAgIHN0cmljdEF4b25EZXBlbmRlbmNpZXM6IGZhbHNlXHJcbiAgICAgIH0gKVxyXG4gICAgfSApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNb3ZlIGZvY3VzIHRvIHRoZSBzZWxlY3RlZCB0YWIuIEdlbmVyYWxseSB0byBiZSB1c2VkIHdoZW4gb3BlbmluZyB0aGUgZGlhbG9nLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBmb2N1c1NlbGVjdGVkVGFiKCk6IHZvaWQge1xyXG4gICAgdGhpcy5wcmVmZXJlbmNlc1RhYnMuZm9jdXNTZWxlY3RlZFRhYigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTW92ZSBmb2N1cyB0byB0aGUgc2VsZWN0ZWQgcGFuZWwuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBmb2N1c1NlbGVjdGVkUGFuZWwoKTogdm9pZCB7XHJcbiAgICB0aGlzLnByZWZlcmVuY2VzUGFuZWxzLmZvY3VzU2VsZWN0ZWRQYW5lbCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gRm9udCBhbmQgb3B0aW9ucyBmb3IgdGhlIHRleHQgdGhhdCBsYWJlbHMgYSB0YWIgaW4gdGhlIGRpYWxvZy5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFRBQl9GT05UID0gVEFCX0ZPTlQ7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBUQUJfT1BUSU9OUyA9IFRBQl9PUFRJT05TO1xyXG5cclxuICAvLyBUaGUgZm9udCBmb3IgYSB0aXRsZSBvZiBhIHBhbmVsIGluIHRoZSBkaWFsb2cuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBUSVRMRV9GT05UID0gVElUTEVfRk9OVDtcclxuXHJcbiAgLy8gVGhlIGZvbnQsIG1heCB3aWR0aCwgYW5kIG9wdGlvbnMgZm9yIG1vc3QgdGV4dCBjb250ZW50IGluIHRoZSBkaWFsb2cuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDT05URU5UX0ZPTlQgPSBDT05URU5UX0ZPTlQ7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDT05URU5UX01BWF9XSURUSCA9IENPTlRFTlRfTUFYX1dJRFRIO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUEFORUxfU0VDVElPTl9DT05URU5UX09QVElPTlMgPSBQQU5FTF9TRUNUSU9OX0NPTlRFTlRfT1BUSU9OUztcclxuXHJcbiAgLy8gVGhlIGZvbnQsIG1heCB3aWR0aCwgYW5kIG9wdGlvbnMgZm9yIGEgbGFiZWwgZm9yIGEgc2VjdGlvbiBvZiBjb250ZW50IGluIHRoZSBkaWFsb2cuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBQQU5FTF9TRUNUSU9OX0xBQkVMX0ZPTlQgPSBQQU5FTF9TRUNUSU9OX0xBQkVMX0ZPTlQ7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBQQU5FTF9TRUNUSU9OX0xBQkVMX01BWF9XSURUSCA9IFBBTkVMX1NFQ1RJT05fTEFCRUxfTUFYX1dJRFRIO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TID0gUEFORUxfU0VDVElPTl9MQUJFTF9PUFRJT05TO1xyXG5cclxuICAvLyBEZWZhdWx0IHNwYWNpbmcgYmV0d2VlbiB1bmlxdWUgaXRlbXMgaW4gYSBwcmVmZXJlbmNlcyBkaWFsb2dcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENPTlRFTlRfU1BBQ0lORyA9IDIwO1xyXG5cclxuICAvLyBEZWZhdWx0IHZlcnRpY2FsIHNwYWNpbmcgYmV0d2VlbiBncm91cGVkIGl0ZW1zIChyYWRpbyBidXR0b25zLCB2ZXJ0aWNhbCBjaGVja2JveGVzLCAuLi4pXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBWRVJUSUNBTF9DT05URU5UX1NQQUNJTkcgPSA1O1xyXG5cclxuICAvLyBDb250ZW50IG9yIFVJIGNvbXBvbmVudCBpbnRlbmRlbnRhdGlvbiB1bmRlciBhIFByZWZlcmVuY2VzUGFuZWxTZWN0aW9uIHRpdGxlLlxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ09OVEVOVF9JTkRFTlRBVElPTl9TUEFDSU5HID0gMTU7XHJcblxyXG4gIC8vIERlZmF1bHQgdmVydGljYWwgc3BhY2luZyBiZXR3ZWVuIGEgbGFiZWwgYW5kIGl0cyBjb2xsZWN0aW9uIG9mIGNvbnRlbnRzIGZvciBhIGNvbnRyb2wgaW4gdGhlIGRpYWxvZy5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExBQkVMX0NPTlRFTlRfU1BBQ0lORyA9IDEwO1xyXG59XHJcblxyXG5qb2lzdC5yZWdpc3RlciggJ1ByZWZlcmVuY2VzRGlhbG9nJywgUHJlZmVyZW5jZXNEaWFsb2cgKTtcclxuZXhwb3J0IGRlZmF1bHQgUHJlZmVyZW5jZXNEaWFsb2c7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLG1CQUFtQixNQUFNLHlDQUF5QztBQUN6RSxPQUFPQyxTQUFTLE1BQTRCLG9DQUFvQztBQUVoRixPQUFPQyxRQUFRLE1BQU0sc0NBQXNDO0FBQzNELFNBQVNDLFlBQVksRUFBRUMsVUFBVSxFQUFFQyxnQkFBZ0IsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsZ0NBQWdDO0FBQ3ZHLE9BQU9DLE1BQU0sTUFBeUIsMkJBQTJCO0FBQ2pFLE9BQU9DLFlBQVksTUFBTSxtQ0FBbUM7QUFDNUQsT0FBT0MsS0FBSyxNQUFNLGFBQWE7QUFDL0IsT0FBT0MsWUFBWSxNQUFNLG9CQUFvQjtBQUU3QyxPQUFPQyxpQkFBaUIsTUFBTSx3QkFBd0I7QUFDdEQsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUNsRCxPQUFPQyxrQ0FBa0MsTUFBTSx5Q0FBeUM7QUFDeEYsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUNsRCxPQUFPQyxlQUFlLE1BQU0scUNBQXFDOztBQUVqRTtBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJZixRQUFRLENBQUU7RUFBRWdCLElBQUksRUFBRSxFQUFFO0VBQUVDLE1BQU0sRUFBRTtBQUFPLENBQUUsQ0FBQztBQUUvRCxNQUFNQyxRQUFRLEdBQUcsSUFBSWxCLFFBQVEsQ0FBRSxFQUFHLENBQUM7QUFDbkMsTUFBTW1CLGFBQWEsR0FBRyxHQUFHO0FBQ3pCLE1BQU1DLFdBQVcsR0FBRztFQUNsQkMsSUFBSSxFQUFFSCxRQUFRO0VBQ2RJLFFBQVEsRUFBRUg7QUFDWixDQUFDO0FBRUQsTUFBTUksWUFBWSxHQUFHLElBQUl2QixRQUFRLENBQUUsRUFBRyxDQUFDO0FBQ3ZDLE1BQU13QixpQkFBaUIsR0FBRyxHQUFHO0FBQzdCLE1BQU1DLDZC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