// Copyright 2021-2023, University of Colorado Boulder

/**
 * Return an object of data about the simulation and the browser
 * much of the code was largely copied and expanded on from SimTroubleshootPage.html in the website repo. Note that
 * key names in the info object are used by the PhET-iO API, do not change without great consideration.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import { Utils } from '../../scenery/js/imports.js';
import PhetioObject from '../../tandem/js/PhetioObject.js';
import Tandem from '../../tandem/js/Tandem.js';
import ArrayIO from '../../tandem/js/types/ArrayIO.js';
import BooleanIO from '../../tandem/js/types/BooleanIO.js';
import IOType from '../../tandem/js/types/IOType.js';
import NullableIO from '../../tandem/js/types/NullableIO.js';
import NumberIO from '../../tandem/js/types/NumberIO.js';
import ObjectLiteralIO from '../../tandem/js/types/ObjectLiteralIO.js';
import StringIO from '../../tandem/js/types/StringIO.js';
import joist from './joist.js';
import packageJSON from './packageJSON.js';
class SimInfo extends PhetioObject {
  info = {};
  constructor(sim) {
    super({
      tandem: Tandem.GENERAL_MODEL.createTandem('simInfo'),
      phetioType: SimInfo.SimInfoIO,
      phetioReadOnly: true,
      phetioDocumentation: 'A collection of data about the runtime and simulation. Available in the simStarted PhET-iO ' + 'data stream event, as well as on demand in the PhET-iO state.'
    });
    assert && assert(Array.isArray(sim.screens), 'screens should be set and an array');

    // globals
    this.putInfo('url', window.location.href);
    this.putInfo('randomSeed', window.phet.chipper.queryParameters.randomSeed);
    this.putInfo('userAgent', window.navigator.userAgent);
    this.putInfo('language', window.navigator.language);
    this.putInfo('window', `${window.innerWidth}x${window.innerHeight}`); // eslint-disable-line bad-sim-text
    this.putInfo('referrer', document.referrer);

    // from Scenery Utils
    this.putInfo('checkIE11StencilSupport', Utils.checkIE11StencilSupport());
    this.putInfo('isWebGLSupported', phet.chipper.queryParameters.webgl ? Utils.isWebGLSupported : false);
    let canvas;
    let context;
    let backingStorePixelRatio;
    const flags = [];

    // @ts-expect-error - pointerEnabled isn't included in the Typescript definition of window.navigator
    if (window.navigator.pointerEnabled) {
      flags.push('pointerEnabled');
    }

    // @ts-expect-error - msPointerEnabled isn't included in the Typescript definition of window.navigator
    if (window.navigator.msPointerEnabled) {
      flags.push('msPointerEnabled');
    }
    if (!window.navigator.onLine) {
      flags.push('offline');
    }
    try {
      canvas = document.createElement('canvas');
      context = canvas.getContext('2d');
      backingStorePixelRatio = Utils.backingStorePixelRatio(context);
      this.putInfo('pixelRatio', `${window.devicePixelRatio || 1}/${backingStorePixelRatio}`);
      if ((window.devicePixelRatio || 1) / backingStorePixelRatio !== 1) {
        flags.push('pixelRatioScaling');
      }
    } catch (e) {} // eslint-disable-line no-empty

    this.putInfo('flags', flags.join(', '));
    canvas = null; // dispose only reference

    // from Sim.js
    this.putInfo('simName', sim.simNameProperty.value);
    this.putInfo('simVersion', sim.version);
    this.putInfo('repoName', packageJSON.name);
    this.putInfo('screens', sim.screens.map(screen => {
      const screenObject = {
        // likely null for single screen sims, so use the sim name as a default
        name: screen.nameProperty.value || sim.simNameProperty.value
      };
      if (Tandem.PHET_IO_ENABLED) {
        screenObject.phetioID = screen.tandem.phetioID;
      }
      return screenObject;
    }));

    // From PhET-iO code
    if (Tandem.PHET_IO_ENABLED) {
      this.putInfo('screenPropertyValue', sim.selectedScreenProperty.value.tandem.phetioID);
      this.putInfo('wrapperMetadata', phet.preloads.phetio.simStartedMetadata);
      this.putInfo('dataStreamVersion', phet.phetio.dataStream.VERSION);
      this.putInfo('phetioCommandProcessorProtocol', phet.phetio.phetioCommandProcessor.PHET_IO_PROTOCOL);
    }
  }
  putInfo(key, value) {
    if (value === undefined) {
      value = '{{undefined}}';
    }
    assert && assert(!this.info.hasOwnProperty(key), `key already defined: ${key}`);

    // @ts-expect-error I don't know how to ensure the correct value, just the key
    this.info[key] = value;
  }
  static SimInfoIO = new IOType('SimInfoIO', {
    valueType: SimInfo,
    toStateObject: simInfo => {
      return {
        simName: simInfo.info.simName,
        screens: simInfo.info.screens,
        repoName: simInfo.info.repoName,
        screenPropertyValue: simInfo.info.screenPropertyValue,
        dataStreamVersion: simInfo.info.dataStreamVersion,
        phetioCommandProcessorProtocol: simInfo.info.phetioCommandProcessorProtocol,
        simVersion: Tandem.API_GENERATION ? null : simInfo.info.simVersion,
        wrapperMetadata: Tandem.API_GENERATION ? null : simInfo.info.wrapperMetadata,
        randomSeed: Tandem.API_GENERATION ? null : simInfo.info.randomSeed,
        url: Tandem.API_GENERATION ? null : simInfo.info.url,
        userAgent: Tandem.API_GENERATION ? null : simInfo.info.userAgent,
        window: Tandem.API_GENERATION ? null : simInfo.info.window,
        referrer: Tandem.API_GENERATION ? null : simInfo.info.referrer,
        language: Tandem.API_GENERATION ? null : simInfo.info.language,
        pixelRatio: Tandem.API_GENERATION ? null : simInfo.info.pixelRatio,
        isWebGLSupported: Tandem.API_GENERATION ? null : simInfo.info.isWebGLSupported,
        checkIE11StencilSupport: Tandem.API_GENERATION ? null : simInfo.info.checkIE11StencilSupport,
        flags: Tandem.API_GENERATION ? null : simInfo.info.flags || null
      };
    },
    stateSchema: {
      simName: StringIO,
      screens: ArrayIO(ObjectLiteralIO),
      repoName: StringIO,
      screenPropertyValue: StringIO,
      wrapperMetadata: NullableIO(ObjectLiteralIO),
      dataStreamVersion: StringIO,
      phetioCommandProcessorProtocol: StringIO,
      // Parts that are omitted in API generation
      simVersion: NullableIO(StringIO),
      randomSeed: NullableIO(NumberIO),
      url: NullableIO(StringIO),
      userAgent: NullableIO(StringIO),
      window: NullableIO(StringIO),
      referrer: NullableIO(StringIO),
      language: NullableIO(StringIO),
      pixelRatio: NullableIO(StringIO),
      isWebGLSupported: NullableIO(BooleanIO),
      checkIE11StencilSupport: NullableIO(BooleanIO),
      flags: NullableIO(StringIO)
    }
  });
}
joist.register('SimInfo', SimInfo);
export default SimInfo;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlBoZXRpb09iamVjdCIsIlRhbmRlbSIsIkFycmF5SU8iLCJCb29sZWFuSU8iLCJJT1R5cGUiLCJOdWxsYWJsZUlPIiwiTnVtYmVySU8iLCJPYmplY3RMaXRlcmFsSU8iLCJTdHJpbmdJTyIsImpvaXN0IiwicGFja2FnZUpTT04iLCJTaW1JbmZvIiwiaW5mbyIsImNvbnN0cnVjdG9yIiwic2ltIiwidGFuZGVtIiwiR0VORVJBTF9NT0RFTCIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb1R5cGUiLCJTaW1JbmZvSU8iLCJwaGV0aW9SZWFkT25seSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJhc3NlcnQiLCJBcnJheSIsImlzQXJyYXkiLCJzY3JlZW5zIiwicHV0SW5mbyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwicmFuZG9tU2VlZCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImxhbmd1YWdlIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnQiLCJyZWZlcnJlciIsImNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0Iiwid2ViZ2wiLCJpc1dlYkdMU3VwcG9ydGVkIiwiY2FudmFzIiwiY29udGV4dCIsImJhY2tpbmdTdG9yZVBpeGVsUmF0aW8iLCJmbGFncyIsInBvaW50ZXJFbmFibGVkIiwicHVzaCIsIm1zUG9pbnRlckVuYWJsZWQiLCJvbkxpbmUiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImRldmljZVBpeGVsUmF0aW8iLCJlIiwiam9pbiIsInNpbU5hbWVQcm9wZXJ0eSIsInZhbHVlIiwidmVyc2lvbiIsIm5hbWUiLCJtYXAiLCJzY3JlZW4iLCJzY3JlZW5PYmplY3QiLCJuYW1lUHJvcGVydHkiLCJQSEVUX0lPX0VOQUJMRUQiLCJwaGV0aW9JRCIsInNlbGVjdGVkU2NyZWVuUHJvcGVydHkiLCJwcmVsb2FkcyIsInBoZXRpbyIsInNpbVN0YXJ0ZWRNZXRhZGF0YSIsImRhdGFTdHJlYW0iLCJWRVJTSU9OIiwicGhldGlvQ29tbWFuZFByb2Nlc3NvciIsIlBIRVRfSU9fUFJPVE9DT0wiLCJrZXkiLCJ1bmRlZmluZWQiLCJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlVHlwZSIsInRvU3RhdGVPYmplY3QiLCJzaW1JbmZvIiwic2ltTmFtZSIsInJlcG9OYW1lIiwic2NyZWVuUHJvcGVydHlWYWx1ZSIsImRhdGFTdHJlYW1WZXJzaW9uIiwicGhldGlvQ29tbWFuZFByb2Nlc3NvclByb3RvY29sIiwic2ltVmVyc2lvbiIsIkFQSV9HRU5FUkFUSU9OIiwid3JhcHBlck1ldGFkYXRhIiwidXJsIiwicGl4ZWxSYXRpbyIsInN0YXRlU2NoZW1hIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTaW1JbmZvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhbiBvYmplY3Qgb2YgZGF0YSBhYm91dCB0aGUgc2ltdWxhdGlvbiBhbmQgdGhlIGJyb3dzZXJcclxuICogbXVjaCBvZiB0aGUgY29kZSB3YXMgbGFyZ2VseSBjb3BpZWQgYW5kIGV4cGFuZGVkIG9uIGZyb20gU2ltVHJvdWJsZXNob290UGFnZS5odG1sIGluIHRoZSB3ZWJzaXRlIHJlcG8uIE5vdGUgdGhhdFxyXG4gKiBrZXkgbmFtZXMgaW4gdGhlIGluZm8gb2JqZWN0IGFyZSB1c2VkIGJ5IHRoZSBQaEVULWlPIEFQSSwgZG8gbm90IGNoYW5nZSB3aXRob3V0IGdyZWF0IGNvbnNpZGVyYXRpb24uXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUGhldGlvT2JqZWN0IGZyb20gJy4uLy4uL3RhbmRlbS9qcy9QaGV0aW9PYmplY3QuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgQXJyYXlJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvQXJyYXlJTy5qcyc7XHJcbmltcG9ydCBCb29sZWFuSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0Jvb2xlYW5JTy5qcyc7XHJcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XHJcbmltcG9ydCBOdWxsYWJsZUlPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdWxsYWJsZUlPLmpzJztcclxuaW1wb3J0IE51bWJlcklPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdW1iZXJJTy5qcyc7XHJcbmltcG9ydCBPYmplY3RMaXRlcmFsSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL09iamVjdExpdGVyYWxJTy5qcyc7XHJcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xyXG5pbXBvcnQgam9pc3QgZnJvbSAnLi9qb2lzdC5qcyc7XHJcbmltcG9ydCB7IEFueVNjcmVlbiB9IGZyb20gJy4vU2NyZWVuLmpzJztcclxuaW1wb3J0IHBhY2thZ2VKU09OIGZyb20gJy4vcGFja2FnZUpTT04uanMnO1xyXG5pbXBvcnQgU2ltIGZyb20gJy4vU2ltLmpzJztcclxuXHJcbmV4cG9ydCB0eXBlIFNjcmVlblN0YXRlID0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBwaGV0aW9JRD86IHN0cmluZztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFNpbUluZm9TdGF0ZSA9IHtcclxuICBzaW1OYW1lOiBzdHJpbmc7XHJcbiAgc2NyZWVuczogU2NyZWVuU3RhdGVbXTtcclxuICByZXBvTmFtZTogc3RyaW5nO1xyXG5cclxuICBzY3JlZW5Qcm9wZXJ0eVZhbHVlOiBzdHJpbmc7XHJcbiAgd3JhcHBlck1ldGFkYXRhOiBudWxsIHwgUmVjb3JkPHN0cmluZywgSW50ZW50aW9uYWxBbnk+O1xyXG4gIGRhdGFTdHJlYW1WZXJzaW9uOiBzdHJpbmc7XHJcbiAgcGhldGlvQ29tbWFuZFByb2Nlc3NvclByb3RvY29sOiBzdHJpbmc7XHJcbiAgc2ltVmVyc2lvbjogc3RyaW5nIHwgbnVsbDtcclxuICByYW5kb21TZWVkOiBudW1iZXIgfCBudWxsO1xyXG4gIHVybDogc3RyaW5nIHwgbnVsbDtcclxuICB1c2VyQWdlbnQ6IHN0cmluZyB8IG51bGw7XHJcbiAgd2luZG93OiBzdHJpbmcgfCBudWxsO1xyXG4gIHJlZmVycmVyOiBzdHJpbmcgfCBudWxsO1xyXG4gIGxhbmd1YWdlOiBzdHJpbmcgfCBudWxsO1xyXG4gIHBpeGVsUmF0aW86IHN0cmluZyB8IG51bGw7XHJcbiAgaXNXZWJHTFN1cHBvcnRlZDogYm9vbGVhbiB8IG51bGw7XHJcbiAgY2hlY2tJRTExU3RlbmNpbFN1cHBvcnQ6IGJvb2xlYW4gfCBudWxsO1xyXG4gIGZsYWdzOiBzdHJpbmcgfCBudWxsO1xyXG59O1xyXG5cclxuY2xhc3MgU2ltSW5mbyBleHRlbmRzIFBoZXRpb09iamVjdCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IGluZm86IFNpbUluZm9TdGF0ZSA9IHt9IGFzIFNpbUluZm9TdGF0ZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBzaW06IFNpbSApIHtcclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLkdFTkVSQUxfTU9ERUwuY3JlYXRlVGFuZGVtKCAnc2ltSW5mbycgKSxcclxuICAgICAgcGhldGlvVHlwZTogU2ltSW5mby5TaW1JbmZvSU8sXHJcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnQSBjb2xsZWN0aW9uIG9mIGRhdGEgYWJvdXQgdGhlIHJ1bnRpbWUgYW5kIHNpbXVsYXRpb24uIEF2YWlsYWJsZSBpbiB0aGUgc2ltU3RhcnRlZCBQaEVULWlPICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSBzdHJlYW0gZXZlbnQsIGFzIHdlbGwgYXMgb24gZGVtYW5kIGluIHRoZSBQaEVULWlPIHN0YXRlLidcclxuICAgIH0gKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBzaW0uc2NyZWVucyApLCAnc2NyZWVucyBzaG91bGQgYmUgc2V0IGFuZCBhbiBhcnJheScgKTtcclxuXHJcbiAgICAvLyBnbG9iYWxzXHJcbiAgICB0aGlzLnB1dEluZm8oICd1cmwnLCB3aW5kb3cubG9jYXRpb24uaHJlZiApO1xyXG4gICAgdGhpcy5wdXRJbmZvKCAncmFuZG9tU2VlZCcsIHdpbmRvdy5waGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLnJhbmRvbVNlZWQgKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ3VzZXJBZ2VudCcsIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50ICk7XHJcbiAgICB0aGlzLnB1dEluZm8oICdsYW5ndWFnZScsIHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ3dpbmRvdycsIGAke3dpbmRvdy5pbm5lcldpZHRofXgke3dpbmRvdy5pbm5lckhlaWdodH1gICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XHJcbiAgICB0aGlzLnB1dEluZm8oICdyZWZlcnJlcicsIGRvY3VtZW50LnJlZmVycmVyICk7XHJcblxyXG4gICAgLy8gZnJvbSBTY2VuZXJ5IFV0aWxzXHJcbiAgICB0aGlzLnB1dEluZm8oICdjaGVja0lFMTFTdGVuY2lsU3VwcG9ydCcsIFV0aWxzLmNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0KCkgKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ2lzV2ViR0xTdXBwb3J0ZWQnLCBwaGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLndlYmdsID8gVXRpbHMuaXNXZWJHTFN1cHBvcnRlZCA6IGZhbHNlICk7XHJcblxyXG4gICAgbGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsO1xyXG4gICAgbGV0IGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGxldCBiYWNraW5nU3RvcmVQaXhlbFJhdGlvOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3QgZmxhZ3MgPSBbXTtcclxuXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gcG9pbnRlckVuYWJsZWQgaXNuJ3QgaW5jbHVkZWQgaW4gdGhlIFR5cGVzY3JpcHQgZGVmaW5pdGlvbiBvZiB3aW5kb3cubmF2aWdhdG9yXHJcbiAgICBpZiAoIHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgKSB7IGZsYWdzLnB1c2goICdwb2ludGVyRW5hYmxlZCcgKTsgfVxyXG5cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBtc1BvaW50ZXJFbmFibGVkIGlzbid0IGluY2x1ZGVkIGluIHRoZSBUeXBlc2NyaXB0IGRlZmluaXRpb24gb2Ygd2luZG93Lm5hdmlnYXRvclxyXG4gICAgaWYgKCB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQgKSB7IGZsYWdzLnB1c2goICdtc1BvaW50ZXJFbmFibGVkJyApOyB9XHJcbiAgICBpZiAoICF3aW5kb3cubmF2aWdhdG9yLm9uTGluZSApIHsgZmxhZ3MucHVzaCggJ29mZmxpbmUnICk7IH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApO1xyXG4gICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoICcyZCcgKSE7XHJcbiAgICAgIGJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gPSBVdGlscy5iYWNraW5nU3RvcmVQaXhlbFJhdGlvKCBjb250ZXh0ICkhO1xyXG4gICAgICB0aGlzLnB1dEluZm8oICdwaXhlbFJhdGlvJywgYCR7d2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMX0vJHtiYWNraW5nU3RvcmVQaXhlbFJhdGlvfWAgKTtcclxuXHJcbiAgICAgIGlmICggKCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxICkgLyBiYWNraW5nU3RvcmVQaXhlbFJhdGlvICE9PSAxICkgeyBmbGFncy5wdXNoKCAncGl4ZWxSYXRpb1NjYWxpbmcnICk7IH1cclxuICAgIH1cclxuICAgIGNhdGNoKCBlICkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxyXG5cclxuICAgIHRoaXMucHV0SW5mbyggJ2ZsYWdzJywgZmxhZ3Muam9pbiggJywgJyApICk7XHJcblxyXG4gICAgY2FudmFzID0gbnVsbDsgLy8gZGlzcG9zZSBvbmx5IHJlZmVyZW5jZVxyXG5cclxuICAgIC8vIGZyb20gU2ltLmpzXHJcbiAgICB0aGlzLnB1dEluZm8oICdzaW1OYW1lJywgc2ltLnNpbU5hbWVQcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgdGhpcy5wdXRJbmZvKCAnc2ltVmVyc2lvbicsIHNpbS52ZXJzaW9uICk7XHJcbiAgICB0aGlzLnB1dEluZm8oICdyZXBvTmFtZScsIHBhY2thZ2VKU09OLm5hbWUgKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ3NjcmVlbnMnLCBzaW0uc2NyZWVucy5tYXAoICggc2NyZWVuOiBBbnlTY3JlZW4gKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNjcmVlbk9iamVjdDogU2NyZWVuU3RhdGUgPSB7XHJcblxyXG4gICAgICAgIC8vIGxpa2VseSBudWxsIGZvciBzaW5nbGUgc2NyZWVuIHNpbXMsIHNvIHVzZSB0aGUgc2ltIG5hbWUgYXMgYSBkZWZhdWx0XHJcbiAgICAgICAgbmFtZTogc2NyZWVuLm5hbWVQcm9wZXJ0eS52YWx1ZSB8fCBzaW0uc2ltTmFtZVByb3BlcnR5LnZhbHVlXHJcbiAgICAgIH07XHJcbiAgICAgIGlmICggVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCApIHtcclxuICAgICAgICBzY3JlZW5PYmplY3QucGhldGlvSUQgPSBzY3JlZW4udGFuZGVtLnBoZXRpb0lEO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzY3JlZW5PYmplY3Q7XHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICAvLyBGcm9tIFBoRVQtaU8gY29kZVxyXG4gICAgaWYgKCBUYW5kZW0uUEhFVF9JT19FTkFCTEVEICkge1xyXG4gICAgICB0aGlzLnB1dEluZm8oICdzY3JlZW5Qcm9wZXJ0eVZhbHVlJywgc2ltLnNlbGVjdGVkU2NyZWVuUHJvcGVydHkudmFsdWUudGFuZGVtLnBoZXRpb0lEICk7XHJcbiAgICAgIHRoaXMucHV0SW5mbyggJ3dyYXBwZXJNZXRhZGF0YScsIHBoZXQucHJlbG9hZHMucGhldGlvLnNpbVN0YXJ0ZWRNZXRhZGF0YSApO1xyXG4gICAgICB0aGlzLnB1dEluZm8oICdkYXRhU3RyZWFtVmVyc2lvbicsIHBoZXQucGhldGlvLmRhdGFTdHJlYW0uVkVSU0lPTiApO1xyXG4gICAgICB0aGlzLnB1dEluZm8oICdwaGV0aW9Db21tYW5kUHJvY2Vzc29yUHJvdG9jb2wnLCBwaGV0LnBoZXRpby5waGV0aW9Db21tYW5kUHJvY2Vzc29yLlBIRVRfSU9fUFJPVE9DT0wgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHV0SW5mbygga2V5OiBrZXlvZiBTaW1JbmZvU3RhdGUsIHZhbHVlOiBJbnRlbnRpb25hbEFueSApOiB2b2lkIHtcclxuICAgIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuICAgICAgdmFsdWUgPSAne3t1bmRlZmluZWR9fSc7XHJcbiAgICB9XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5pbmZvLmhhc093blByb3BlcnR5KCBrZXkgKSwgYGtleSBhbHJlYWR5IGRlZmluZWQ6ICR7a2V5fWAgKTtcclxuXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEkgZG9uJ3Qga25vdyBob3cgdG8gZW5zdXJlIHRoZSBjb3JyZWN0IHZhbHVlLCBqdXN0IHRoZSBrZXlcclxuICAgIHRoaXMuaW5mb1sga2V5IF0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgU2ltSW5mb0lPID0gbmV3IElPVHlwZTxTaW1JbmZvLCBTaW1JbmZvU3RhdGU+KCAnU2ltSW5mb0lPJywge1xyXG4gICAgdmFsdWVUeXBlOiBTaW1JbmZvLFxyXG4gICAgdG9TdGF0ZU9iamVjdDogc2ltSW5mbyA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc2ltTmFtZTogc2ltSW5mby5pbmZvLnNpbU5hbWUsXHJcbiAgICAgICAgc2NyZWVuczogc2ltSW5mby5pbmZvLnNjcmVlbnMsXHJcbiAgICAgICAgcmVwb05hbWU6IHNpbUluZm8uaW5mby5yZXBvTmFtZSxcclxuXHJcbiAgICAgICAgc2NyZWVuUHJvcGVydHlWYWx1ZTogc2ltSW5mby5pbmZvLnNjcmVlblByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgZGF0YVN0cmVhbVZlcnNpb246IHNpbUluZm8uaW5mby5kYXRhU3RyZWFtVmVyc2lvbixcclxuICAgICAgICBwaGV0aW9Db21tYW5kUHJvY2Vzc29yUHJvdG9jb2w6IHNpbUluZm8uaW5mby5waGV0aW9Db21tYW5kUHJvY2Vzc29yUHJvdG9jb2wsXHJcblxyXG4gICAgICAgIHNpbVZlcnNpb246IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8uc2ltVmVyc2lvbixcclxuICAgICAgICB3cmFwcGVyTWV0YWRhdGE6IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8ud3JhcHBlck1ldGFkYXRhLFxyXG4gICAgICAgIHJhbmRvbVNlZWQ6IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8ucmFuZG9tU2VlZCxcclxuICAgICAgICB1cmw6IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8udXJsLFxyXG4gICAgICAgIHVzZXJBZ2VudDogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby51c2VyQWdlbnQsXHJcbiAgICAgICAgd2luZG93OiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLndpbmRvdyxcclxuICAgICAgICByZWZlcnJlcjogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby5yZWZlcnJlcixcclxuICAgICAgICBsYW5ndWFnZTogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby5sYW5ndWFnZSxcclxuICAgICAgICBwaXhlbFJhdGlvOiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLnBpeGVsUmF0aW8sXHJcbiAgICAgICAgaXNXZWJHTFN1cHBvcnRlZDogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby5pc1dlYkdMU3VwcG9ydGVkLFxyXG4gICAgICAgIGNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0OiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLmNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0LFxyXG4gICAgICAgIGZsYWdzOiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLmZsYWdzIHx8IG51bGxcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBzdGF0ZVNjaGVtYToge1xyXG4gICAgICBzaW1OYW1lOiBTdHJpbmdJTyxcclxuICAgICAgc2NyZWVuczogQXJyYXlJTyggT2JqZWN0TGl0ZXJhbElPICksXHJcbiAgICAgIHJlcG9OYW1lOiBTdHJpbmdJTyxcclxuXHJcbiAgICAgIHNjcmVlblByb3BlcnR5VmFsdWU6IFN0cmluZ0lPLFxyXG4gICAgICB3cmFwcGVyTWV0YWRhdGE6IE51bGxhYmxlSU8oIE9iamVjdExpdGVyYWxJTyApLFxyXG4gICAgICBkYXRhU3RyZWFtVmVyc2lvbjogU3RyaW5nSU8sXHJcbiAgICAgIHBoZXRpb0NvbW1hbmRQcm9jZXNzb3JQcm90b2NvbDogU3RyaW5nSU8sXHJcblxyXG4gICAgICAvLyBQYXJ0cyB0aGF0IGFyZSBvbWl0dGVkIGluIEFQSSBnZW5lcmF0aW9uXHJcbiAgICAgIHNpbVZlcnNpb246IE51bGxhYmxlSU8oIFN0cmluZ0lPICksXHJcbiAgICAgIHJhbmRvbVNlZWQ6IE51bGxhYmxlSU8oIE51bWJlcklPICksXHJcbiAgICAgIHVybDogTnVsbGFibGVJTyggU3RyaW5nSU8gKSxcclxuICAgICAgdXNlckFnZW50OiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApLFxyXG4gICAgICB3aW5kb3c6IE51bGxhYmxlSU8oIFN0cmluZ0lPICksXHJcbiAgICAgIHJlZmVycmVyOiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApLFxyXG4gICAgICBsYW5ndWFnZTogTnVsbGFibGVJTyggU3RyaW5nSU8gKSxcclxuICAgICAgcGl4ZWxSYXRpbzogTnVsbGFibGVJTyggU3RyaW5nSU8gKSxcclxuICAgICAgaXNXZWJHTFN1cHBvcnRlZDogTnVsbGFibGVJTyggQm9vbGVhbklPICksXHJcbiAgICAgIGNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0OiBOdWxsYWJsZUlPKCBCb29sZWFuSU8gKSxcclxuICAgICAgZmxhZ3M6IE51bGxhYmxlSU8oIFN0cmluZ0lPIClcclxuICAgIH1cclxuICB9ICk7XHJcbn1cclxuXHJcbmpvaXN0LnJlZ2lzdGVyKCAnU2ltSW5mbycsIFNpbUluZm8gKTtcclxuZXhwb3J0IGRlZmF1bHQgU2ltSW5mbzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLFNBQVNBLEtBQUssUUFBUSw2QkFBNkI7QUFDbkQsT0FBT0MsWUFBWSxNQUFNLGlDQUFpQztBQUMxRCxPQUFPQyxNQUFNLE1BQU0sMkJB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c0YsY0FBYyxHQUFHLElBQUksR0FBR1AsT0FBTyxDQUFDcEUsSUFBSSxDQUFDOEUsVUFBVTtRQUNsRS9DLGdCQUFnQixFQUFFMUMsTUFBTSxDQUFDc0YsY0FBYyxHQUFHLElBQUksR0FBR1AsT0FBTyxDQUFDcEUsSUFBSSxDQUFDK0IsZ0JBQWdCO1FBQzlFRix1QkFBdUIsRUFBRXhDLE1BQU0sQ0FBQ3NGLGNBQWMsR0FBRyxJQUFJLEdBQUdQLE9BQU8sQ0FBQ3BFLElBQUksQ0FBQzZCLHVCQUF1QjtRQUM1Rk0sS0FBSyxFQUFFOUMsTUFBTSxDQUFDc0YsY0FBYyxHQUFHLElBQUksR0FBR1AsT0FBTyxDQUFDcEUsSUFBSSxDQUFDbUMsS0FBSyxJQUFJO01BQzlELENBQUM7SUFDSCxDQUFDO0lBQ0Q0QyxXQUFXLEVBQUU7TUFDWFYsT0FBTyxFQUFFekUsUUFBUTtNQUNqQmlCLE9BQU8sRUFBRXZCLE9BQU8sQ0FBRUssZUFBZ0IsQ0FBQztNQUNuQzJFLFFBQVEsRUFBRTFFLFFBQVE7TUFFbEIyRSxtQkFBbUIsRUFBRTNFLFFBQVE7TUFDN0JnRixlQUFlLEVBQUVuRixVQUFVLENBQUVFLGVBQWdCLENBQUM7TUFDOUM2RSxpQkFBaUIsRUFBRTVFLFFBQVE7TUFDM0I2RSw4QkFBOEIsRUFBRTdFLFFBQVE7TUFFeEM7TUFDQThFLFVBQVUsRUFBRWpGLFVBQVUsQ0FBRUcsUUFBUyxDQUFDO01BQ2xDeUIsVUFBVSxFQUFFNUIsVUFBVSxDQUFFQyxRQUFTLENBQUM7TUFDbENtRixHQUFHLEVBQUVwRixVQUFVLENBQUVHLFFBQVMsQ0FBQztNQUMzQjJCLFNBQVMsRUFBRTlCLFVBQVUsQ0FBRUcsUUFBUyxDQUFDO01BQ2pDbUIsTUFBTSxFQUFFdEIsVUFBVSxDQUFFRyxRQUFTLENBQUM7TUFDOUJnQyxRQUFRLEVBQUVuQyxVQUFVLENBQUVHLFFBQVMsQ0FBQztNQUNoQzRCLFFBQVEsRUFBRS9CLFVBQVUsQ0FBRUcsUUFBUyxDQUFDO01BQ2hDa0YsVUFBVSxFQUFFckYsVUFBVSxDQUFFRyxRQUFTLENBQUM7TUFDbENtQyxnQkFBZ0IsRUFBRXRDLFVBQVUsQ0FBRUYsU0FBVSxDQUFDO01BQ3pDc0MsdUJBQXVCLEVBQUVwQyxVQUFVLENBQUVGLFNBQVUsQ0FBQztNQUNoRDRDLEtBQUssRUFBRTFDLFVBQVUsQ0FBRUcsUUFBUztJQUM5QjtFQUNGLENBQUUsQ0FBQztBQUNMO0FBRUFDLEtBQUssQ0FBQ21GLFFBQVEsQ0FBRSxTQUFTLEVBQUVqRixPQUFRLENBQUM7QUFDcEMsZUFBZUEsT0FBTyIsImlnbm9yZUxpc3QiOltdfQ==