// Copyright 2018-2023, University of Colorado Boulder

/**
 * NavigationBarAudioToggleButton is a button for controlling whether audio is enabled or disabled that is designed to
 * work on the PhET navigation bar. Audio includes all auditory features in the sim, so when this is button is toggled
 * "off", the sim should be totally silent.
 *
 * If you're wondering why this is drawn in code rather than using a Font Awesome node, please see
 * https://github.com/phetsims/tambo/issues/19.
 *
 * @author John Blanco
 * @author Chris Klusendorf
 */

import Vector2 from '../../dot/js/Vector2.js';
import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { Color, Node, Path, Rectangle, voicingManager } from '../../scenery/js/imports.js';
import ToggleNode from '../../sun/js/ToggleNode.js';
import ActivationUtterance from '../../utterance-queue/js/ActivationUtterance.js';
import audioManager from './audioManager.js';
import joist from './joist.js';
import JoistButton from './JoistButton.js';
import JoistStrings from './JoistStrings.js';

// constants for node background
const NODE_HEIGHT = 22.0;
const NODE_WIDTH = NODE_HEIGHT * 1.13;

// constants for drawing speaker
const SPEAKER_HEIGHT = NODE_HEIGHT * 0.77;
const SPEAKER_WIDTH = SPEAKER_HEIGHT * 0.58;
const SPEAKER_BACK_WIDTH = SPEAKER_WIDTH * 0.46;
const SPEAKER_BACK_HEIGHT = SPEAKER_HEIGHT * 0.35;
const SPEAKER_BACK_Y_SPACE = (SPEAKER_HEIGHT - SPEAKER_BACK_HEIGHT) / 2.0; // space between top of speaker back and top of cone
const CORNER_RADIUS = 1.0;

// constant for drawing sound off X
const X_WIDTH = SPEAKER_HEIGHT * 0.52;

// constants for drawing sound on curves
const MAX_CURVE_RADIUS = SPEAKER_HEIGHT * 0.63;
const RADIUS_STEPPER = SPEAKER_HEIGHT * 0.23;
const MED_CURVE_RADIUS = MAX_CURVE_RADIUS - RADIUS_STEPPER;
const MIN_CURVE_RADIUS = MED_CURVE_RADIUS - RADIUS_STEPPER;
const CURVE_ANGLE = Math.PI / 2.7;
const NEG_CURVE_ANGLE = CURVE_ANGLE * -1.0;
class NavigationBarAudioToggleButton extends JoistButton {
  constructor(soundEnabledProperty, backgroundColorProperty, providedOptions) {
    const options = optionize()({
      // JoistButton options
      highlightExtensionWidth: 5 + 3.6,
      highlightExtensionHeight: 10,
      highlightCenterOffsetY: 0,
      // enabled:true by default, but disable if fuzzing when supporting voicing
      enabled: !(phet.chipper.isFuzzEnabled() && phet.chipper.queryParameters.supportsVoicing),
      visiblePropertyOptions: {
        phetioFeatured: true
      },
      phetioFeatured: true,
      // pdom
      innerContent: JoistStrings.a11y.soundToggle.labelStringProperty,
      // voicing
      voicingNameResponse: JoistStrings.a11y.soundToggle.labelStringProperty
    }, providedOptions);
    assert && assert(options.listener === undefined, 'NavigationBarAudioToggleButton sets listener');
    options.listener = () => soundEnabledProperty.set(!soundEnabledProperty.get());
    const soundOnNode = new Node();
    const soundOffNode = new Node();
    const backgroundNode = new Rectangle(0, 0, NODE_WIDTH, NODE_HEIGHT, {
      fill: 'transparent'
    });
    soundOnNode.addChild(backgroundNode);
    soundOffNode.addChild(backgroundNode);

    // create speaker for both sound on and sound off
    const speakerNode = new Path(new Shape().moveTo(SPEAKER_WIDTH, 0).lineTo(SPEAKER_BACK_WIDTH, SPEAKER_BACK_Y_SPACE).lineTo(CORNER_RADIUS, SPEAKER_BACK_Y_SPACE).arc(CORNER_RADIUS, SPEAKER_BACK_Y_SPACE + CORNER_RADIUS, CORNER_RADIUS, Math.PI * 1.5, Math.PI, true).lineToRelative(0, SPEAKER_BACK_HEIGHT - 2 * CORNER_RADIUS).arc(CORNER_RADIUS, SPEAKER_BACK_Y_SPACE + SPEAKER_BACK_HEIGHT - CORNER_RADIUS, CORNER_RADIUS, Math.PI, Math.PI * 0.5, true).lineToRelative(SPEAKER_BACK_WIDTH - CORNER_RADIUS, 0).lineTo(SPEAKER_WIDTH, SPEAKER_HEIGHT).lineTo(SPEAKER_WIDTH, 0).close(), {
      stroke: 'black',
      lineWidth: 1.5,
      lineJoin: 'round',
      centerY: soundOffNode.centerY,
      left: 0
    });
    soundOnNode.addChild(speakerNode);
    soundOffNode.addChild(speakerNode);

    // create X for sound off
    const soundOffX = new Path(new Shape().moveTo(0, 0).lineTo(X_WIDTH, X_WIDTH).moveTo(0, X_WIDTH).lineTo(X_WIDTH, 0), {
      stroke: 'black',
      lineWidth: 1.7,
      lineCap: 'round',
      right: soundOffNode.width,
      centerY: soundOffNode.centerY
    });
    soundOffNode.addChild(soundOffX);

    // create curved lines for sound on
    const soundOnCurves = new Path(new Shape().arc(0, 0, MAX_CURVE_RADIUS, CURVE_ANGLE, NEG_CURVE_ANGLE, true).moveToPoint(new Vector2(MED_CURVE_RADIUS, 0).rotated(CURVE_ANGLE)).arc(0, 0, MED_CURVE_RADIUS, CURVE_ANGLE, NEG_CURVE_ANGLE, true).moveToPoint(new Vector2(MIN_CURVE_RADIUS, 0).rotated(CURVE_ANGLE)).arc(0, 0, MIN_CURVE_RADIUS, CURVE_ANGLE, NEG_CURVE_ANGLE, true), {
      stroke: 'black',
      lineWidth: 1.7,
      lineCap: 'round',
      right: soundOnNode.width,
      centerY: soundOnNode.centerY
    });
    soundOnNode.addChild(soundOnCurves);

    // If "Audio" and at least one subcomponent of audio is enabled, show the "sound on" icon. Otherwise,
    // show the "sound off" icon because there will be no output, even if "Audio" is enabled.
    const toggleNode = new ToggleNode(audioManager.anyOutputEnabledProperty, [{
      value: true,
      createNode: () => soundOnNode
    }, {
      value: false,
      createNode: () => soundOffNode
    }], {
      maxHeight: NODE_HEIGHT * 0.85
    });
    super(toggleNode, backgroundColorProperty, options);

    // must be after the button is instrumented
    this.addLinkedElement(soundEnabledProperty, {
      tandemName: 'property'
    });

    // pdom attribute lets user know when the toggle is pressed, linked lazily so that an alert isn't triggered
    // on construction and must be unlinked in dispose
    const soundUtterance = new ActivationUtterance();
    const enabledListener = enabled => {
      if (options.supportsAudioPreferences) {
        this.setPDOMAttribute('aria-pressed', enabled);
        soundUtterance.alert = enabled ? JoistStrings.a11y.soundToggle.alert.simSoundOnStringProperty : JoistStrings.a11y.soundToggle.alert.simSoundOffStringProperty;
        this.alertDescriptionUtterance(soundUtterance);
        if (voicingManager.voicingFullyEnabledProperty.value) {
          voicingManager.speakIgnoringEnabled(soundUtterance);
        }
      }
    };
    soundEnabledProperty.lazyLink(enabledListener);
    this.setPDOMAttribute('aria-pressed', soundEnabledProperty.get());

    // If no subcomponents of the audioManager that are enabled disable this button
    // to make it clear that toggling the audioEnabledProperty will have no impact
    // on the output.
    audioManager.anySubcomponentEnabledProperty.link(enabled => {
      this.enabled = enabled;
    });

    // change the icon so that it is visible when the background changes from dark to light
    backgroundColorProperty.link(backgroundColor => {
      const baseColor = backgroundColor.equals(Color.BLACK) ? 'white' : 'black';
      speakerNode.stroke = baseColor;
      soundOffX.stroke = baseColor;
      soundOnCurves.stroke = baseColor;
    });
  }
}
joist.register('NavigationBarAudioToggleButton', NavigationBarAudioToggleButton);
export default NavigationBarAudioToggleButton;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2hhcGUiLCJvcHRpb25pemUiLCJDb2xvciIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwidm9pY2luZ01hbmFnZXIiLCJUb2dnbGVOb2RlIiwiQWN0aXZhdGlvblV0dGVyYW5jZSIsImF1ZGlvTWFuYWdlciIsImpvaXN0IiwiSm9pc3RCdXR0b24iLCJKb2lzdFN0cmluZ3MiLCJOT0RFX0hFSUdIVCIsIk5PREVfV0lEVEgiLCJTUEVBS0VSX0hFSUdIVCIsIlNQRUFLRVJfV0lEVEgiLCJTUEVBS0VSX0JBQ0tfV0lEVEgiLCJTUEVBS0VSX0JBQ0tfSEVJR0hUIiwiU1BFQUtFUl9CQUNLX1lfU1BBQ0UiLCJDT1JORVJfUkFESVVTIiwiWF9XSURUSCIsIk1BWF9DVVJWRV9SQURJVVMiLCJSQURJVVNfU1RFUFBFUiIsIk1FRF9DVVJWRV9SQURJVVMiLCJNSU5fQ1VSVkVfUkFESVVTIiwiQ1VSVkVfQU5HTEUiLCJNYXRoIiwiUEkiLCJORUdfQ1VSVkVfQU5HTEUiLCJOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24iLCJjb25zdHJ1Y3RvciIsInNvdW5kRW5hYmxlZFByb3BlcnR5IiwiYmFja2dyb3VuZENvbG9yUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiaGlnaGxpZ2h0RXh0ZW5zaW9uV2lkdGgiLCJoaWdobGlnaHRFeHRlbnNpb25IZWlnaHQiLCJoaWdobGlnaHRDZW50ZXJPZmZzZXRZIiwiZW5hYmxlZCIsInBoZXQiLCJjaGlwcGVyIiwiaXNGdXp6RW5hYmxlZCIsInF1ZXJ5UGFyYW1ldGVycyIsInN1cHBvcnRzVm9pY2luZyIsInZpc2libGVQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9GZWF0dXJlZCIsImlubmVyQ29udGVudCIsImExMXkiLCJzb3VuZFRvZ2dsZSIsImxhYmVsU3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nTmFtZVJlc3BvbnNlIiwiYXNzZXJ0IiwibGlzdGVuZXIiLCJ1bmRlZmluZWQiLCJzZXQiLCJnZXQiLCJzb3VuZE9uTm9kZSIsInNvdW5kT2ZmTm9kZSIsImJhY2tncm91bmROb2RlIiwiZmlsbCIsImFkZENoaWxkIiwic3BlYWtlck5vZGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJhcmMiLCJsaW5lVG9SZWxhdGl2ZSIsImNsb3NlIiwic3Ryb2tlIiwibGluZVdpZHRoIiwibGluZUpvaW4iLCJjZW50ZXJZIiwibGVmdCIsInNvdW5kT2ZmWCIsImxpbmVDYXAiLCJyaWdodCIsIndpZHRoIiwic291bmRPbkN1cnZlcyIsIm1vdmVUb1BvaW50Iiwicm90YXRlZCIsInRvZ2dsZU5vZGUiLCJhbnlPdXRwdXRFbmFibGVkUHJvcGVydHkiLCJ2YWx1ZSIsImNyZWF0ZU5vZGUiLCJtYXhIZWlnaHQiLCJhZGRMaW5rZWRFbGVtZW50IiwidGFuZGVtTmFtZSIsInNvdW5kVXR0ZXJhbmNlIiwiZW5hYmxlZExpc3RlbmVyIiwic3VwcG9ydHNBdWRpb1ByZWZlcmVuY2VzIiwic2V0UERPTUF0dHJpYnV0ZSIsImFsZXJ0Iiwic2ltU291bmRPblN0cmluZ1Byb3BlcnR5Iiwic2ltU291bmRPZmZTdHJpbmdQcm9wZXJ0eSIsImFsZXJ0RGVzY3JpcHRpb25VdHRlcmFuY2UiLCJ2b2ljaW5nRnVsbHlFbmFibGVkUHJvcGVydHkiLCJzcGVha0lnbm9yaW5nRW5hYmxlZCIsImxhenlMaW5rIiwiYW55U3ViY29tcG9uZW50RW5hYmxlZFByb3BlcnR5IiwibGluayIsImJhY2tncm91bmRDb2xvciIsImJhc2VDb2xvciIsImVxdWFscyIsIkJMQUNLIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTmF2aWdhdGlvbkJhckF1ZGlvVG9nZ2xlQnV0dG9uIGlzIGEgYnV0dG9uIGZvciBjb250cm9sbGluZyB3aGV0aGVyIGF1ZGlvIGlzIGVuYWJsZWQgb3IgZGlzYWJsZWQgdGhhdCBpcyBkZXNpZ25lZCB0b1xyXG4gKiB3b3JrIG9uIHRoZSBQaEVUIG5hdmlnYXRpb24gYmFyLiBBdWRpbyBpbmNsdWRlcyBhbGwgYXVkaXRvcnkgZmVhdHVyZXMgaW4gdGhlIHNpbSwgc28gd2hlbiB0aGlzIGlzIGJ1dHRvbiBpcyB0b2dnbGVkXHJcbiAqIFwib2ZmXCIsIHRoZSBzaW0gc2hvdWxkIGJlIHRvdGFsbHkgc2lsZW50LlxyXG4gKlxyXG4gKiBJZiB5b3UncmUgd29uZGVyaW5nIHdoeSB0aGlzIGlzIGRyYXduIGluIGNvZGUgcmF0aGVyIHRoYW4gdXNpbmcgYSBGb250IEF3ZXNvbWUgbm9kZSwgcGxlYXNlIHNlZVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdGFtYm8vaXNzdWVzLzE5LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZlxyXG4gKi9cclxuXHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgeyBDb2xvciwgTm9kZSwgUGF0aCwgUmVjdGFuZ2xlLCB2b2ljaW5nTWFuYWdlciB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUb2dnbGVOb2RlIGZyb20gJy4uLy4uL3N1bi9qcy9Ub2dnbGVOb2RlLmpzJztcclxuaW1wb3J0IEFjdGl2YXRpb25VdHRlcmFuY2UgZnJvbSAnLi4vLi4vdXR0ZXJhbmNlLXF1ZXVlL2pzL0FjdGl2YXRpb25VdHRlcmFuY2UuanMnO1xyXG5pbXBvcnQgYXVkaW9NYW5hZ2VyIGZyb20gJy4vYXVkaW9NYW5hZ2VyLmpzJztcclxuaW1wb3J0IGpvaXN0IGZyb20gJy4vam9pc3QuanMnO1xyXG5pbXBvcnQgSm9pc3RCdXR0b24sIHsgSm9pc3RCdXR0b25PcHRpb25zIH0gZnJvbSAnLi9Kb2lzdEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBKb2lzdFN0cmluZ3MgZnJvbSAnLi9Kb2lzdFN0cmluZ3MuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzIGZvciBub2RlIGJhY2tncm91bmRcclxuY29uc3QgTk9ERV9IRUlHSFQgPSAyMi4wO1xyXG5jb25zdCBOT0RFX1dJRFRIID0gTk9ERV9IRUlHSFQgKiAxLjEzO1xyXG5cclxuLy8gY29uc3RhbnRzIGZvciBkcmF3aW5nIHNwZWFrZXJcclxuY29uc3QgU1BFQUtFUl9IRUlHSFQgPSBOT0RFX0hFSUdIVCAqIDAuNzc7XHJcbmNvbnN0IFNQRUFLRVJfV0lEVEggPSBTUEVBS0VSX0hFSUdIVCAqIDAuNTg7XHJcbmNvbnN0IFNQRUFLRVJfQkFDS19XSURUSCA9IFNQRUFLRVJfV0lEVEggKiAwLjQ2O1xyXG5jb25zdCBTUEVBS0VSX0JBQ0tfSEVJR0hUID0gU1BFQUtFUl9IRUlHSFQgKiAwLjM1O1xyXG5jb25zdCBTUEVBS0VSX0JBQ0tfWV9TUEFDRSA9ICggU1BFQUtFUl9IRUlHSFQgLSBTUEVBS0VSX0JBQ0tfSEVJR0hUICkgLyAyLjA7IC8vIHNwYWNlIGJldHdlZW4gdG9wIG9mIHNwZWFrZXIgYmFjayBhbmQgdG9wIG9mIGNvbmVcclxuY29uc3QgQ09STkVSX1JBRElVUyA9IDEuMDtcclxuXHJcbi8vIGNvbnN0YW50IGZvciBkcmF3aW5nIHNvdW5kIG9mZiBYXHJcbmNvbnN0IFhfV0lEVEggPSBTUEVBS0VSX0hFSUdIVCAqIDAuNTI7XHJcblxyXG4vLyBjb25zdGFudHMgZm9yIGRyYXdpbmcgc291bmQgb24gY3VydmVzXHJcbmNvbnN0IE1BWF9DVVJWRV9SQURJVVMgPSBTUEVBS0VSX0hFSUdIVCAqIDAuNjM7XHJcbmNvbnN0IFJBRElVU19TVEVQUEVSID0gU1BFQUtFUl9IRUlHSFQgKiAwLjIzO1xyXG5jb25zdCBNRURfQ1VSVkVfUkFESVVTID0gTUFYX0NVUlZFX1JBRElVUyAtIFJBRElVU19TVEVQUEVSO1xyXG5jb25zdCBNSU5fQ1VSVkVfUkFESVVTID0gTUVEX0NVUlZFX1JBRElVUyAtIFJBRElVU19TVEVQUEVSO1xyXG5jb25zdCBDVVJWRV9BTkdMRSA9IE1hdGguUEkgLyAyLjc7XHJcbmNvbnN0IE5FR19DVVJWRV9BTkdMRSA9IENVUlZFX0FOR0xFICogLTEuMDtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcblxyXG4gIC8vIFRoaXMgYnV0dG9uIGlzIGFsd2F5cyBjcmVhdGVkIGZvciBhIGNvbnNpc3RlbnQgUGhFVC1pTyBBUEksIGJ1dCBoYXMgbGltaXRlZCBmdW5jdGlvbmFsaXR5IGlmIGF1ZGlvIGlzIG5vdCBzdXBwb3J0ZWQuXHJcbiAgc3VwcG9ydHNBdWRpb1ByZWZlcmVuY2VzOiBib29sZWFuO1xyXG59O1xyXG50eXBlIE5hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbk9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxKb2lzdEJ1dHRvbk9wdGlvbnMsICd0YW5kZW0nPiAmIFBpY2s8Sm9pc3RCdXR0b25PcHRpb25zLCAncG9pbnRlckFyZWFEaWxhdGlvblgnIHwgJ3BvaW50ZXJBcmVhRGlsYXRpb25ZJz47XHJcblxyXG5jbGFzcyBOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24gZXh0ZW5kcyBKb2lzdEJ1dHRvbiB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggc291bmRFbmFibGVkUHJvcGVydHk6IEJvb2xlYW5Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxDb2xvcj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZE9wdGlvbnM6IE5hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbk9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b25PcHRpb25zLCBTZWxmT3B0aW9ucywgSm9pc3RCdXR0b25PcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBKb2lzdEJ1dHRvbiBvcHRpb25zXHJcbiAgICAgIGhpZ2hsaWdodEV4dGVuc2lvbldpZHRoOiA1ICsgMy42LFxyXG4gICAgICBoaWdobGlnaHRFeHRlbnNpb25IZWlnaHQ6IDEwLFxyXG4gICAgICBoaWdobGlnaHRDZW50ZXJPZmZzZXRZOiAwLFxyXG5cclxuICAgICAgLy8gZW5hYmxlZDp0cnVlIGJ5IGRlZmF1bHQsIGJ1dCBkaXNhYmxlIGlmIGZ1enppbmcgd2hlbiBzdXBwb3J0aW5nIHZvaWNpbmdcclxuICAgICAgZW5hYmxlZDogISggcGhldC5jaGlwcGVyLmlzRnV6ekVuYWJsZWQoKSAmJiBwaGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLnN1cHBvcnRzVm9pY2luZyApLFxyXG5cclxuICAgICAgdmlzaWJsZVByb3BlcnR5T3B0aW9uczogeyBwaGV0aW9GZWF0dXJlZDogdHJ1ZSB9LFxyXG4gICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZSxcclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgaW5uZXJDb250ZW50OiBKb2lzdFN0cmluZ3MuYTExeS5zb3VuZFRvZ2dsZS5sYWJlbFN0cmluZ1Byb3BlcnR5LFxyXG5cclxuICAgICAgLy8gdm9pY2luZ1xyXG4gICAgICB2b2ljaW5nTmFtZVJlc3BvbnNlOiBKb2lzdFN0cmluZ3MuYTExeS5zb3VuZFRvZ2dsZS5sYWJlbFN0cmluZ1Byb3BlcnR5XHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLmxpc3RlbmVyID09PSB1bmRlZmluZWQsICdOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24gc2V0cyBsaXN0ZW5lcicgKTtcclxuICAgIG9wdGlvbnMubGlzdGVuZXIgPSAoKSA9PiBzb3VuZEVuYWJsZWRQcm9wZXJ0eS5zZXQoICFzb3VuZEVuYWJsZWRQcm9wZXJ0eS5nZXQoKSApO1xyXG5cclxuICAgIGNvbnN0IHNvdW5kT25Ob2RlID0gbmV3IE5vZGUoKTtcclxuICAgIGNvbnN0IHNvdW5kT2ZmTm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kTm9kZSA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIE5PREVfV0lEVEgsIE5PREVfSEVJR0hULCB7IGZpbGw6ICd0cmFuc3BhcmVudCcgfSApO1xyXG4gICAgc291bmRPbk5vZGUuYWRkQ2hpbGQoIGJhY2tncm91bmROb2RlICk7XHJcbiAgICBzb3VuZE9mZk5vZGUuYWRkQ2hpbGQoIGJhY2tncm91bmROb2RlICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIHNwZWFrZXIgZm9yIGJvdGggc291bmQgb24gYW5kIHNvdW5kIG9mZlxyXG4gICAgY29uc3Qgc3BlYWtlck5vZGUgPSBuZXcgUGF0aChcclxuICAgICAgbmV3IFNoYXBlKClcclxuICAgICAgICAubW92ZVRvKCBTUEVBS0VSX1dJRFRILCAwIClcclxuICAgICAgICAubGluZVRvKCBTUEVBS0VSX0JBQ0tfV0lEVEgsIFNQRUFLRVJfQkFDS19ZX1NQQUNFIClcclxuICAgICAgICAubGluZVRvKCBDT1JORVJfUkFESVVTLCBTUEVBS0VSX0JBQ0tfWV9TUEFDRSApXHJcbiAgICAgICAgLmFyYyggQ09STkVSX1JBRElVUywgU1BFQUtFUl9CQUNLX1lfU1BBQ0UgKyBDT1JORVJfUkFESVVTLCBDT1JORVJfUkFESVVTLCBNYXRoLlBJICogMS41LCBNYXRoLlBJLCB0cnVlIClcclxuICAgICAgICAubGluZVRvUmVsYXRpdmUoIDAsIFNQRUFLRVJfQkFDS19IRUlHSFQgLSAoIDIgKiBDT1JORVJfUkFESVVTICkgKVxyXG4gICAgICAgIC5hcmMoIENPUk5FUl9SQURJVVMsIFNQRUFLRVJfQkFDS19ZX1NQQUNFICsgU1BFQUtFUl9CQUNLX0hFSUdIVCAtIENPUk5FUl9SQURJVVMsIENPUk5FUl9SQURJVVMsIE1hdGguUEksIE1hdGguUEkgKiAwLjUsIHRydWUgKVxyXG4gICAgICAgIC5saW5lVG9SZWxhdGl2ZSggU1BFQUtFUl9CQUNLX1dJRFRIIC0gQ09STkVSX1JBRElVUywgMCApXHJcbiAgICAgICAgLmxpbmVUbyggU1BFQUtFUl9XSURUSCwgU1BFQUtFUl9IRUlHSFQgKVxyXG4gICAgICAgIC5saW5lVG8oIFNQRUFLRVJfV0lEVEgsIDAgKVxyXG4gICAgICAgIC5jbG9zZSgpLFxyXG4gICAgICB7XHJcbiAgICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICAgIGxpbmVXaWR0aDogMS41LFxyXG4gICAgICAgIGxpbmVKb2luOiAncm91bmQnLFxyXG4gICAgICAgIGNlbnRlclk6IHNvdW5kT2ZmTm9kZS5jZW50ZXJZLFxyXG4gICAgICAgIGxlZnQ6IDBcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBzb3VuZE9uTm9kZS5hZGRDaGlsZCggc3BlYWtlck5vZGUgKTtcclxuICAgIHNvdW5kT2ZmTm9kZS5hZGRDaGlsZCggc3BlYWtlck5vZGUgKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgWCBmb3Igc291bmQgb2ZmXHJcbiAgICBjb25zdCBzb3VuZE9mZlggPSBuZXcgUGF0aChcclxuICAgICAgbmV3IFNoYXBlKCkubW92ZVRvKCAwLCAwICkubGluZVRvKCBYX1dJRFRILCBYX1dJRFRIICkubW92ZVRvKCAwLCBYX1dJRFRIIClcclxuICAgICAgICAubGluZVRvKCBYX1dJRFRILCAwICksXHJcbiAgICAgIHtcclxuICAgICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgICAgbGluZVdpZHRoOiAxLjcsXHJcbiAgICAgICAgbGluZUNhcDogJ3JvdW5kJyxcclxuICAgICAgICByaWdodDogc291bmRPZmZOb2RlLndpZHRoLFxyXG4gICAgICAgIGNlbnRlclk6IHNvdW5kT2ZmTm9kZS5jZW50ZXJZXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBzb3VuZE9mZk5vZGUuYWRkQ2hpbGQoIHNvdW5kT2ZmWCApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBjdXJ2ZWQgbGluZXMgZm9yIHNvdW5kIG9uXHJcbiAgICBjb25zdCBzb3VuZE9uQ3VydmVzID0gbmV3IFBhdGgoXHJcbiAgICAgIG5ldyBTaGFwZSgpXHJcbiAgICAgICAgLmFyYyggMCwgMCwgTUFYX0NVUlZFX1JBRElVUywgQ1VSVkVfQU5HTEUsIE5FR19DVVJWRV9BTkdMRSwgdHJ1ZSApXHJcbiAgICAgICAgLm1vdmVUb1BvaW50KCBuZXcgVmVjdG9yMiggTUVEX0NVUlZFX1JBRElVUywgMCApLnJvdGF0ZWQoIENVUlZFX0FOR0xFICkgKVxyXG4gICAgICAgIC5hcmMoIDAsIDAsIE1FRF9DVVJWRV9SQURJVVMsIENVUlZFX0FOR0xFLCBORUdfQ1VSVkVfQU5HTEUsIHRydWUgKVxyXG4gICAgICAgIC5tb3ZlVG9Qb2ludCggbmV3IFZlY3RvcjIoIE1JTl9DVVJWRV9SQURJVVMsIDAgKS5yb3RhdGVkKCBDVVJWRV9BTkdMRSApIClcclxuICAgICAgICAuYXJjKCAwLCAwLCBNSU5fQ1VSVkVfUkFESVVTLCBDVVJWRV9BTkdMRSwgTkVHX0NVUlZFX0FOR0xFLCB0cnVlICksXHJcbiAgICAgIHtcclxuICAgICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgICAgbGluZVdpZHRoOiAxLjcsXHJcbiAgICAgICAgbGluZUNhcDogJ3JvdW5kJyxcclxuICAgICAgICByaWdodDogc291bmRPbk5vZGUud2lkdGgsXHJcbiAgICAgICAgY2VudGVyWTogc291bmRPbk5vZGUuY2VudGVyWVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgc291bmRPbk5vZGUuYWRkQ2hpbGQoIHNvdW5kT25DdXJ2ZXMgKTtcclxuXHJcbiAgICAvLyBJZiBcIkF1ZGlvXCIgYW5kIGF0IGxlYXN0IG9uZSBzdWJjb21wb25lbnQgb2YgYXVkaW8gaXMgZW5hYmxlZCwgc2hvdyB0aGUgXCJzb3VuZCBvblwiIGljb24uIE90aGVyd2lzZSxcclxuICAgIC8vIHNob3cgdGhlIFwic291bmQgb2ZmXCIgaWNvbiBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbm8gb3V0cHV0LCBldmVuIGlmIFwiQXVkaW9cIiBpcyBlbmFibGVkLlxyXG4gICAgY29uc3QgdG9nZ2xlTm9kZSA9IG5ldyBUb2dnbGVOb2RlKCBhdWRpb01hbmFnZXIuYW55T3V0cHV0RW5hYmxlZFByb3BlcnR5LFxyXG4gICAgICBbXHJcbiAgICAgICAgeyB2YWx1ZTogdHJ1ZSwgY3JlYXRlTm9kZTogKCkgPT4gc291bmRPbk5vZGUgfSxcclxuICAgICAgICB7IHZhbHVlOiBmYWxzZSwgY3JlYXRlTm9kZTogKCkgPT4gc291bmRPZmZOb2RlIH1cclxuICAgICAgXSxcclxuICAgICAgeyBtYXhIZWlnaHQ6IE5PREVfSEVJR0hUICogMC44NSB9XHJcbiAgICApO1xyXG5cclxuICAgIHN1cGVyKCB0b2dnbGVOb2RlLCBiYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIG11c3QgYmUgYWZ0ZXIgdGhlIGJ1dHRvbiBpcyBpbnN0cnVtZW50ZWRcclxuICAgIHRoaXMuYWRkTGlua2VkRWxlbWVudCggc291bmRFbmFibGVkUHJvcGVydHksIHtcclxuICAgICAgdGFuZGVtTmFtZTogJ3Byb3BlcnR5J1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHBkb20gYXR0cmlidXRlIGxldHMgdXNlciBrbm93IHdoZW4gdGhlIHRvZ2dsZSBpcyBwcmVzc2VkLCBsaW5rZWQgbGF6aWx5IHNvIHRoYXQgYW4gYWxlcnQgaXNuJ3QgdHJpZ2dlcmVkXHJcbiAgICAvLyBvbiBjb25zdHJ1Y3Rpb24gYW5kIG11c3QgYmUgdW5saW5rZWQgaW4gZGlzcG9zZVxyXG4gICAgY29uc3Qgc291bmRVdHRlcmFuY2UgPSBuZXcgQWN0aXZhdGlvblV0dGVyYW5jZSgpO1xyXG4gICAgY29uc3QgZW5hYmxlZExpc3RlbmVyID0gKCBlbmFibGVkOiBib29sZWFuICkgPT4ge1xyXG4gICAgICBpZiAoIG9wdGlvbnMuc3VwcG9ydHNBdWRpb1ByZWZlcmVuY2VzICkge1xyXG4gICAgICAgIHRoaXMuc2V0UERPTUF0dHJpYnV0ZSggJ2FyaWEtcHJlc3NlZCcsIGVuYWJsZWQgKTtcclxuXHJcbiAgICAgICAgc291bmRVdHRlcmFuY2UuYWxlcnQgPSBlbmFibGVkID8gSm9pc3RTdHJpbmdzLmExMXkuc291bmRUb2dnbGUuYWxlcnQuc2ltU291bmRPblN0cmluZ1Byb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSm9pc3RTdHJpbmdzLmExMXkuc291bmRUb2dnbGUuYWxlcnQuc2ltU291bmRPZmZTdHJpbmdQcm9wZXJ0eTtcclxuICAgICAgICB0aGlzLmFsZXJ0RGVzY3JpcHRpb25VdHRlcmFuY2UoIHNvdW5kVXR0ZXJhbmNlICk7XHJcbiAgICAgICAgaWYgKCB2b2ljaW5nTWFuYWdlci52b2ljaW5nRnVsbHlFbmFibGVkUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgICAgICB2b2ljaW5nTWFuYWdlci5zcGVha0lnbm9yaW5nRW5hYmxlZCggc291bmRVdHRlcmFuY2UgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBzb3VuZEVuYWJsZWRQcm9wZXJ0eS5sYXp5TGluayggZW5hYmxlZExpc3RlbmVyICk7XHJcbiAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICdhcmlhLXByZXNzZWQnLCBzb3VuZEVuYWJsZWRQcm9wZXJ0eS5nZXQoKSApO1xyXG5cclxuICAgIC8vIElmIG5vIHN1YmNvbXBvbmVudHMgb2YgdGhlIGF1ZGlvTWFuYWdlciB0aGF0IGFyZSBlbmFibGVkIGRpc2FibGUgdGhpcyBidXR0b25cclxuICAgIC8vIHRvIG1ha2UgaXQgY2xlYXIgdGhhdCB0b2dnbGluZyB0aGUgYXVkaW9FbmFibGVkUHJvcGVydHkgd2lsbCBoYXZlIG5vIGltcGFjdFxyXG4gICAgLy8gb24gdGhlIG91dHB1dC5cclxuICAgIGF1ZGlvTWFuYWdlci5hbnlTdWJjb21wb25lbnRFbmFibGVkUHJvcGVydHkubGluayggZW5hYmxlZCA9PiB7XHJcbiAgICAgIHRoaXMuZW5hYmxlZCA9IGVuYWJsZWQ7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gY2hhbmdlIHRoZSBpY29uIHNvIHRoYXQgaXQgaXMgdmlzaWJsZSB3aGVuIHRoZSBiYWNrZ3JvdW5kIGNoYW5nZXMgZnJvbSBkYXJrIHRvIGxpZ2h0XHJcbiAgICBiYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eS5saW5rKCBiYWNrZ3JvdW5kQ29sb3IgPT4ge1xyXG4gICAgICBjb25zdCBiYXNlQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3IuZXF1YWxzKCBDb2xvci5CTEFDSyApID8gJ3doaXRlJyA6ICdibGFjayc7XHJcbiAgICAgIHNwZWFrZXJOb2RlLnN0cm9rZSA9IGJhc2VDb2xvcjtcclxuICAgICAgc291bmRPZmZYLnN0cm9rZSA9IGJhc2VDb2xvcjtcclxuICAgICAgc291bmRPbkN1cnZlcy5zdHJva2UgPSBiYXNlQ29sb3I7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5qb2lzdC5yZWdpc3RlciggJ05hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbicsIE5hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbiApO1xyXG5leHBvcnQgZGVmYXVsdCBOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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