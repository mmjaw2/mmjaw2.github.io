// Copyright 2020-2023, University of Colorado Boulder

/**
 * ZoomButtonGroup is the base class for a pair of buttons used to zoom 'in' and 'out'.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { FlowBox } from '../../scenery/js/imports.js';
import RectangularPushButton from '../../sun/js/buttons/RectangularPushButton.js';
import Tandem from '../../tandem/js/Tandem.js';
import optionize, { combineOptions } from '../../phet-core/js/optionize.js';
import sceneryPhet from './sceneryPhet.js';
import SceneryPhetStrings from './SceneryPhetStrings.js';
export default class ZoomButtonGroup extends FlowBox {
  /**
   * @param zoomLevelProperty - smaller value means more zoomed out
   * @param zoomInIcon
   * @param zoomOutIcon
   * @param providedOptions?
   */
  constructor(zoomLevelProperty, zoomInIcon, zoomOutIcon, providedOptions) {
    const zoomLevelRange = zoomLevelProperty.range;
    const options = optionize()({
      // ZoomButtonGroupOptions
      applyZoomIn: currentZoom => currentZoom + 1,
      applyZoomOut: currentZoom => currentZoom - 1,
      touchAreaXDilation: 0,
      touchAreaYDilation: 0,
      mouseAreaXDilation: 0,
      mouseAreaYDilation: 0,
      buttonOptions: {
        fireOnHold: true,
        fireOnHoldDelay: 600,
        // ms
        fireOnHoldInterval: 250,
        // ms
        phetioVisiblePropertyInstrumented: false,
        phetioEnabledPropertyInstrumented: false
      },
      // FlowBoxOptions
      spacing: 0,
      orientation: 'horizontal',
      align: 'center',
      tandem: Tandem.REQUIRED,
      tandemNameSuffix: 'ZoomButtonGroup',
      phetioFeatured: true
    }, providedOptions);

    // For pointer areas. Dependent on options.spacing, pointer areas will be shifted to prevent overlap.
    const halfSpacing = options.spacing / 2;
    const mouseXShift = Math.max(0, options.orientation === 'horizontal' ? options.mouseAreaXDilation - halfSpacing : 0);
    const touchXShift = Math.max(0, options.orientation === 'horizontal' ? options.touchAreaXDilation - halfSpacing : 0);
    const mouseYShift = Math.max(0, options.orientation === 'vertical' ? options.mouseAreaYDilation - halfSpacing : 0);
    const touchYShift = Math.max(0, options.orientation === 'vertical' ? options.touchAreaYDilation - halfSpacing : 0);

    // zoom in
    const zoomInButton = new RectangularPushButton(combineOptions({
      content: zoomInIcon,
      listener: () => {
        zoomLevelProperty.value = options.applyZoomIn(zoomLevelProperty.value);
      },
      touchAreaXDilation: options.touchAreaXDilation,
      touchAreaYDilation: options.touchAreaYDilation,
      mouseAreaXDilation: options.mouseAreaXDilation,
      mouseAreaYDilation: options.mouseAreaYDilation,
      touchAreaXShift: touchXShift,
      touchAreaYShift: -touchYShift,
      mouseAreaXShift: mouseXShift,
      mouseAreaYShift: -mouseYShift,
      accessibleName: SceneryPhetStrings.a11y.zoomInStringProperty,
      tandem: options.tandem.createTandem('zoomInButton')
    }, options.buttonOptions));

    // zoom out
    const zoomOutButton = new RectangularPushButton(combineOptions({
      content: zoomOutIcon,
      listener: () => {
        zoomLevelProperty.value = options.applyZoomOut(zoomLevelProperty.value);
      },
      touchAreaXDilation: options.touchAreaXDilation,
      touchAreaYDilation: options.touchAreaYDilation,
      mouseAreaXDilation: options.mouseAreaXDilation,
      mouseAreaYDilation: options.mouseAreaYDilation,
      touchAreaXShift: -touchXShift,
      touchAreaYShift: touchYShift,
      mouseAreaXShift: -mouseXShift,
      mouseAreaYShift: mouseYShift,
      accessibleName: SceneryPhetStrings.a11y.zoomOutStringProperty,
      tandem: options.tandem.createTandem('zoomOutButton')
    }, options.buttonOptions));
    options.children = options.orientation === 'horizontal' ? [zoomOutButton, zoomInButton] : [zoomInButton, zoomOutButton];

    // disable a button if we reach the min or max
    const zoomLevelListener = zoomLevel => {
      zoomOutButton.enabled = zoomLevelRange.contains(options.applyZoomOut(zoomLevel));
      zoomInButton.enabled = zoomLevelRange.contains(options.applyZoomIn(zoomLevel));
    };
    zoomLevelProperty.link(zoomLevelListener);
    super(options);

    // Make the zoom buttons available as properties.
    this.zoomOutButton = zoomOutButton;
    this.zoomInButton = zoomInButton;
    this.addLinkedElement(zoomLevelProperty, {
      tandemName: 'zoomProperty'
    });
    this.disposeZoomButtonGroup = () => {
      zoomInButton.dispose();
      zoomOutButton.dispose();
      zoomLevelProperty.unlink(zoomLevelListener);
    };
  }
  dispose() {
    this.disposeZoomButtonGroup();
    super.dispose();
  }
}
sceneryPhet.register('ZoomButtonGroup', ZoomButtonGroup);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGbG93Qm94IiwiUmVjdGFuZ3VsYXJQdXNoQnV0dG9uIiwiVGFuZGVtIiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJzY2VuZXJ5UGhldCIsIlNjZW5lcnlQaGV0U3RyaW5ncyIsIlpvb21CdXR0b25Hcm91cCIsImNvbnN0cnVjdG9yIiwiem9vbUxldmVsUHJvcGVydHkiLCJ6b29tSW5JY29uIiwiem9vbU91dEljb24iLCJwcm92aWRlZE9wdGlvbnMiLCJ6b29tTGV2ZWxSYW5nZSIsInJhbmdlIiwib3B0aW9ucyIsImFwcGx5Wm9vbUluIiwiY3VycmVudFpvb20iLCJhcHBseVpvb21PdXQiLCJ0b3VjaEFyZWFYRGlsYXRpb24iLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJtb3VzZUFyZWFYRGlsYXRpb24iLCJtb3VzZUFyZWFZRGlsYXRpb24iLCJidXR0b25PcHRpb25zIiwiZmlyZU9uSG9sZCIsImZpcmVPbkhvbGREZWxheSIsImZpcmVPbkhvbGRJbnRlcnZhbCIsInBoZXRpb1Zpc2libGVQcm9wZXJ0eUluc3RydW1lbnRlZCIsInBoZXRpb0VuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZCIsInNwYWNpbmciLCJvcmllbnRhdGlvbiIsImFsaWduIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJ0YW5kZW1OYW1lU3VmZml4IiwicGhldGlvRmVhdHVyZWQiLCJoYWxmU3BhY2luZyIsIm1vdXNlWFNoaWZ0IiwiTWF0aCIsIm1heCIsInRvdWNoWFNoaWZ0IiwibW91c2VZU2hpZnQiLCJ0b3VjaFlTaGlmdCIsInpvb21JbkJ1dHRvbiIsImNvbnRlbnQiLCJsaXN0ZW5lciIsInZhbHVlIiwidG91Y2hBcmVhWFNoaWZ0IiwidG91Y2hBcmVhWVNoaWZ0IiwibW91c2VBcmVhWFNoaWZ0IiwibW91c2VBcmVhWVNoaWZ0IiwiYWNjZXNzaWJsZU5hbWUiLCJhMTF5Iiwiem9vbUluU3RyaW5nUHJvcGVydHkiLCJjcmVhdGVUYW5kZW0iLCJ6b29tT3V0QnV0dG9uIiwiem9vbU91dFN0cmluZ1Byb3BlcnR5IiwiY2hpbGRyZW4iLCJ6b29tTGV2ZWxMaXN0ZW5lciIsInpvb21MZXZlbCIsImVuYWJsZWQiLCJjb250YWlucyIsImxpbmsiLCJhZGRMaW5rZWRFbGVtZW50IiwidGFuZGVtTmFtZSIsImRpc3Bvc2Vab29tQnV0dG9uR3JvdXAiLCJkaXNwb3NlIiwidW5saW5rIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJab29tQnV0dG9uR3JvdXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogWm9vbUJ1dHRvbkdyb3VwIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBhIHBhaXIgb2YgYnV0dG9ucyB1c2VkIHRvIHpvb20gJ2luJyBhbmQgJ291dCcuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgeyBGbG93Qm94LCBGbG93Qm94T3B0aW9ucywgTm9kZSB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhclB1c2hCdXR0b24sIHsgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uT3B0aW9ucyB9IGZyb20gJy4uLy4uL3N1bi9qcy9idXR0b25zL1JlY3Rhbmd1bGFyUHVzaEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHNjZW5lcnlQaGV0IGZyb20gJy4vc2NlbmVyeVBoZXQuanMnO1xyXG5pbXBvcnQgVFJhbmdlZFByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvVFJhbmdlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFNjZW5lcnlQaGV0U3RyaW5ncyBmcm9tICcuL1NjZW5lcnlQaGV0U3RyaW5ncy5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG5cclxuICAvLyBmdW5jdGlvbiBhcHBsaWVkIHdoZW4gdGhlICcrJyBidXR0b24gaXMgcHJlc3NlZFxyXG4gIGFwcGx5Wm9vbUluPzogKCBjdXJyZW50Wm9vbTogbnVtYmVyICkgPT4gbnVtYmVyO1xyXG5cclxuICAvLyBmdW5jdGlvbiBhcHBsaWVkIHdoZW4gdGhlICctJyBidXR0b24gaXMgcHJlc3NlZFxyXG4gIGFwcGx5Wm9vbU91dD86ICggY3VycmVudFpvb206IG51bWJlciApID0+IG51bWJlcjtcclxuXHJcbiAgLy8gcHJvcGFnYXRlZCB0byB0aGUgJysnIGFuZCAnLScgcHVzaCBidXR0b25zXHJcbiAgYnV0dG9uT3B0aW9ucz86IFN0cmljdE9taXQ8UmVjdGFuZ3VsYXJQdXNoQnV0dG9uT3B0aW9ucywgJ2NvbnRlbnQnIHwgJ2xpc3RlbmVyJyB8ICd0YW5kZW0nPjtcclxuXHJcbiAgLy8gcG9pbnRlciBhcmVhIGRpbGF0aW9uLCBjb3JyZWN0IGZvciBvcHRpb25zLm9yaWVudGF0aW9uLCBhbmQgb3ZlcmxhcCB3aWxsIGJlIHByZXZlbnRlZCBieSBzaGlmdGluZ1xyXG4gIHRvdWNoQXJlYVhEaWxhdGlvbj86IG51bWJlcjtcclxuICB0b3VjaEFyZWFZRGlsYXRpb24/OiBudW1iZXI7XHJcbiAgbW91c2VBcmVhWERpbGF0aW9uPzogbnVtYmVyO1xyXG4gIG1vdXNlQXJlYVlEaWxhdGlvbj86IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFpvb21CdXR0b25Hcm91cE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFN0cmljdE9taXQ8Rmxvd0JveE9wdGlvbnMsICdjaGlsZHJlbic+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWm9vbUJ1dHRvbkdyb3VwIGV4dGVuZHMgRmxvd0JveCB7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSB6b29tSW5CdXR0b246IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbjtcclxuICBwdWJsaWMgcmVhZG9ubHkgem9vbU91dEJ1dHRvbjogUmVjdGFuZ3VsYXJQdXNoQnV0dG9uO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZVpvb21CdXR0b25Hcm91cDogKCkgPT4gdm9pZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHpvb21MZXZlbFByb3BlcnR5IC0gc21hbGxlciB2YWx1ZSBtZWFucyBtb3JlIHpvb21lZCBvdXRcclxuICAgKiBAcGFyYW0gem9vbUluSWNvblxyXG4gICAqIEBwYXJhbSB6b29tT3V0SWNvblxyXG4gICAqIEBwYXJhbSBwcm92aWRlZE9wdGlvbnM/XHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKCB6b29tTGV2ZWxQcm9wZXJ0eTogVFJhbmdlZFByb3BlcnR5LCB6b29tSW5JY29uOiBOb2RlLCB6b29tT3V0SWNvbjogTm9kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9ucz86IFpvb21CdXR0b25Hcm91cE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgem9vbUxldmVsUmFuZ2UgPSB6b29tTGV2ZWxQcm9wZXJ0eS5yYW5nZTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFpvb21CdXR0b25Hcm91cE9wdGlvbnMsIFNlbGZPcHRpb25zLCBGbG93Qm94T3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gWm9vbUJ1dHRvbkdyb3VwT3B0aW9uc1xyXG4gICAgICBhcHBseVpvb21JbjogKCBjdXJyZW50Wm9vbTogbnVtYmVyICkgPT4gY3VycmVudFpvb20gKyAxLFxyXG4gICAgICBhcHBseVpvb21PdXQ6ICggY3VycmVudFpvb206IG51bWJlciApID0+IGN1cnJlbnRab29tIC0gMSxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiAwLFxyXG4gICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDAsXHJcbiAgICAgIG1vdXNlQXJlYVhEaWxhdGlvbjogMCxcclxuICAgICAgbW91c2VBcmVhWURpbGF0aW9uOiAwLFxyXG4gICAgICBidXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgZmlyZU9uSG9sZDogdHJ1ZSxcclxuICAgICAgICBmaXJlT25Ib2xkRGVsYXk6IDYwMCwgLy8gbXNcclxuICAgICAgICBmaXJlT25Ib2xkSW50ZXJ2YWw6IDI1MCwgLy8gbXNcclxuICAgICAgICBwaGV0aW9WaXNpYmxlUHJvcGVydHlJbnN0cnVtZW50ZWQ6IGZhbHNlLFxyXG4gICAgICAgIHBoZXRpb0VuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZDogZmFsc2VcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIEZsb3dCb3hPcHRpb25zXHJcbiAgICAgIHNwYWNpbmc6IDAsXHJcbiAgICAgIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRUQsXHJcbiAgICAgIHRhbmRlbU5hbWVTdWZmaXg6ICdab29tQnV0dG9uR3JvdXAnLFxyXG4gICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gRm9yIHBvaW50ZXIgYXJlYXMuIERlcGVuZGVudCBvbiBvcHRpb25zLnNwYWNpbmcsIHBvaW50ZXIgYXJlYXMgd2lsbCBiZSBzaGlmdGVkIHRvIHByZXZlbnQgb3ZlcmxhcC5cclxuICAgIGNvbnN0IGhhbGZTcGFjaW5nID0gb3B0aW9ucy5zcGFjaW5nIC8gMjtcclxuICAgIGNvbnN0IG1vdXNlWFNoaWZ0ID0gTWF0aC5tYXgoIDAsIG9wdGlvbnMub3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJyA/IG9wdGlvbnMubW91c2VBcmVhWERpbGF0aW9uIC0gaGFsZlNwYWNpbmcgOiAwICk7XHJcbiAgICBjb25zdCB0b3VjaFhTaGlmdCA9IE1hdGgubWF4KCAwLCBvcHRpb25zLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyBvcHRpb25zLnRvdWNoQXJlYVhEaWxhdGlvbiAtIGhhbGZTcGFjaW5nIDogMCApO1xyXG4gICAgY29uc3QgbW91c2VZU2hpZnQgPSBNYXRoLm1heCggMCwgb3B0aW9ucy5vcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IG9wdGlvbnMubW91c2VBcmVhWURpbGF0aW9uIC0gaGFsZlNwYWNpbmcgOiAwICk7XHJcbiAgICBjb25zdCB0b3VjaFlTaGlmdCA9IE1hdGgubWF4KCAwLCBvcHRpb25zLm9yaWVudGF0aW9uID09PSAndmVydGljYWwnID8gb3B0aW9ucy50b3VjaEFyZWFZRGlsYXRpb24gLSBoYWxmU3BhY2luZyA6IDAgKTtcclxuXHJcbiAgICAvLyB6b29tIGluXHJcbiAgICBjb25zdCB6b29tSW5CdXR0b24gPSBuZXcgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uKCBjb21iaW5lT3B0aW9uczxSZWN0YW5ndWxhclB1c2hCdXR0b25PcHRpb25zPigge1xyXG4gICAgICBjb250ZW50OiB6b29tSW5JY29uLFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHpvb21MZXZlbFByb3BlcnR5LnZhbHVlID0gb3B0aW9ucy5hcHBseVpvb21Jbiggem9vbUxldmVsUHJvcGVydHkudmFsdWUgKTtcclxuICAgICAgfSxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiBvcHRpb25zLnRvdWNoQXJlYVhEaWxhdGlvbixcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiBvcHRpb25zLnRvdWNoQXJlYVlEaWxhdGlvbixcclxuICAgICAgbW91c2VBcmVhWERpbGF0aW9uOiBvcHRpb25zLm1vdXNlQXJlYVhEaWxhdGlvbixcclxuICAgICAgbW91c2VBcmVhWURpbGF0aW9uOiBvcHRpb25zLm1vdXNlQXJlYVlEaWxhdGlvbixcclxuICAgICAgdG91Y2hBcmVhWFNoaWZ0OiB0b3VjaFhTaGlmdCxcclxuICAgICAgdG91Y2hBcmVhWVNoaWZ0OiAtdG91Y2hZU2hpZnQsXHJcbiAgICAgIG1vdXNlQXJlYVhTaGlmdDogbW91c2VYU2hpZnQsXHJcbiAgICAgIG1vdXNlQXJlYVlTaGlmdDogLW1vdXNlWVNoaWZ0LFxyXG4gICAgICBhY2Nlc3NpYmxlTmFtZTogU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkuem9vbUluU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnem9vbUluQnV0dG9uJyApXHJcbiAgICB9LCBvcHRpb25zLmJ1dHRvbk9wdGlvbnMgKSApO1xyXG5cclxuICAgIC8vIHpvb20gb3V0XHJcbiAgICBjb25zdCB6b29tT3V0QnV0dG9uID0gbmV3IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbiggY29tYmluZU9wdGlvbnM8UmVjdGFuZ3VsYXJQdXNoQnV0dG9uT3B0aW9ucz4oIHtcclxuICAgICAgY29udGVudDogem9vbU91dEljb24sXHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgem9vbUxldmVsUHJvcGVydHkudmFsdWUgPSBvcHRpb25zLmFwcGx5Wm9vbU91dCggem9vbUxldmVsUHJvcGVydHkudmFsdWUgKTtcclxuICAgICAgfSxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiBvcHRpb25zLnRvdWNoQXJlYVhEaWxhdGlvbixcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiBvcHRpb25zLnRvdWNoQXJlYVlEaWxhdGlvbixcclxuICAgICAgbW91c2VBcmVhWERpbGF0aW9uOiBvcHRpb25zLm1vdXNlQXJlYVhEaWxhdGlvbixcclxuICAgICAgbW91c2VBcmVhWURpbGF0aW9uOiBvcHRpb25zLm1vdXNlQXJlYVlEaWxhdGlvbixcclxuICAgICAgdG91Y2hBcmVhWFNoaWZ0OiAtdG91Y2hYU2hpZnQsXHJcbiAgICAgIHRvdWNoQXJlYVlTaGlmdDogdG91Y2hZU2hpZnQsXHJcbiAgICAgIG1vdXNlQXJlYVhTaGlmdDogLW1vdXNlWFNoaWZ0LFxyXG4gICAgICBtb3VzZUFyZWFZU2hpZnQ6IG1vdXNlWVNoaWZ0LFxyXG4gICAgICBhY2Nlc3NpYmxlTmFtZTogU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkuem9vbU91dFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3pvb21PdXRCdXR0b24nIClcclxuICAgIH0sIG9wdGlvbnMuYnV0dG9uT3B0aW9ucyApICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9ICggb3B0aW9ucy5vcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnICkgPyBbIHpvb21PdXRCdXR0b24sIHpvb21JbkJ1dHRvbiBdIDogWyB6b29tSW5CdXR0b24sIHpvb21PdXRCdXR0b24gXTtcclxuXHJcbiAgICAvLyBkaXNhYmxlIGEgYnV0dG9uIGlmIHdlIHJlYWNoIHRoZSBtaW4gb3IgbWF4XHJcbiAgICBjb25zdCB6b29tTGV2ZWxMaXN0ZW5lciA9ICggem9vbUxldmVsOiBudW1iZXIgKSA9PiB7XHJcbiAgICAgIHpvb21PdXRCdXR0b24uZW5hYmxlZCA9IHpvb21MZXZlbFJhbmdlLmNvbnRhaW5zKCBvcHRpb25zLmFwcGx5Wm9vbU91dCggem9vbUxldmVsICkgKTtcclxuICAgICAgem9vbUluQnV0dG9uLmVuYWJsZWQgPSB6b29tTGV2ZWxSYW5nZS5jb250YWlucyggb3B0aW9ucy5hcHBseVpvb21Jbiggem9vbUxldmVsICkgKTtcclxuICAgIH07XHJcbiAgICB6b29tTGV2ZWxQcm9wZXJ0eS5saW5rKCB6b29tTGV2ZWxMaXN0ZW5lciApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gTWFrZSB0aGUgem9vbSBidXR0b25zIGF2YWlsYWJsZSBhcyBwcm9wZXJ0aWVzLlxyXG4gICAgdGhpcy56b29tT3V0QnV0dG9uID0gem9vbU91dEJ1dHRvbjtcclxuICAgIHRoaXMuem9vbUluQnV0dG9uID0gem9vbUluQnV0dG9uO1xyXG5cclxuICAgIHRoaXMuYWRkTGlua2VkRWxlbWVudCggem9vbUxldmVsUHJvcGVydHksIHtcclxuICAgICAgdGFuZGVtTmFtZTogJ3pvb21Qcm9wZXJ0eSdcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2Vab29tQnV0dG9uR3JvdXAgPSAoKSA9PiB7XHJcbiAgICAgIHpvb21JbkJ1dHRvbi5kaXNwb3NlKCk7XHJcbiAgICAgIHpvb21PdXRCdXR0b24uZGlzcG9zZSgpO1xyXG4gICAgICB6b29tTGV2ZWxQcm9wZXJ0eS51bmxpbmsoIHpvb21MZXZlbExpc3RlbmVyICk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2Vab29tQnV0dG9uR3JvdXAoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnWm9vbUJ1dHRvbkdyb3VwJywgWm9vbUJ1dHRvbkdyb3VwICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLFNBQVNBLE9BQU8sUUFBOEIsNkJBQTZCO0FBQzNFLE9BQU9DLHFCQUFxQixNQUF3QywrQ0FBK0M7QUFDbkgsT0FBT0MsTUFBTSxNQUFNLDJCQUEyQjtBQUM5QyxPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBUSxpQ0FBaUM7QUFDM0UsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUUxQyxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFzQnhELGVBQWUsTUFBTUMsZUFBZSxTQUFTUCxPQUFPLENBQUM7RUFNbkQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1lRLFdBQVdBLENBQUVDLGlCQUFrQyxFQUFFQyxVQUFnQixFQUFFQyxXQUFpQixFQUN2RUMsZUFBd0MsRUFBRztJQUVoRSxNQUFNQyxjQUFjLEdBQUdKLGlCQUFpQixDQUFDSyxLQUFLO0lBRTlDLE1BQU1DLE9BQU8sR0FBR1osU0FBUyxDQUFzRCxDQUFDLENBQUU7TUFFaEY7TUFDQWEsV0FBVyxFQUFJQyxXQUFtQixJQUFNQSxXQUFXLEdBQUcsQ0FBQztNQUN2REMsWUFBWSxFQUFJRCxXQUFtQixJQUFNQSxXQUFXLEdBQUcsQ0FBQztNQUN4REUsa0JBQWtCLEVBQUUsQ0FBQztNQUNyQkMsa0JBQWtCLEVBQUUsQ0FBQztNQUNyQkMsa0JBQWtCLEVBQUUsQ0FBQztNQUNyQkMsa0JBQWtCLEVBQUUsQ0FBQztNQUNyQkMsYUFBYSxFQUFFO1FBQ2JDLFVBQVUsRUFBRSxJQUFJO1FBQ2hCQyxlQUFlLEVBQUUsR0FBRztRQUFFO1FBQ3RCQyxrQkFBa0IsRUFBRSxHQUFHO1FBQUU7UUFDekJDLGlDQUFpQyxFQUFFLEtBQUs7UUFDeENDLGlDQUFpQyxFQUFFO01BQ3JDLENBQUM7TUFFRDtNQUNBQyxPQUFPLEVBQUUsQ0FBQztNQUNWQyxXQUFXLEVBQUUsWUFBWTtNQUN6QkMsS0FBSyxFQUFFLFFBQVE7TUFDZkMsTUFBTSxFQUFFOUIsTUFBTSxDQUFDK0IsUUFBUTtNQUN2QkMsZ0JBQWdCLEVBQUUsaUJBQWlCO01BQ25DQyxjQUFjLEVBQUU7SUFDbEIsQ0FBQyxFQUFFdkIsZUFBZ0IsQ0FBQzs7SUFFcEI7SUFDQSxNQUFNd0IsV0FBVyxHQUFHckIsT0FBTyxDQUFDYyxPQUFPLEdBQUcsQ0FBQztJQUN2QyxNQUFNUSxXQUFXLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFFLENBQUMsRUFBRXhCLE9BQU8sQ0FBQ2UsV0FBVyxLQUFLLFlBQVksR0FBR2YsT0FBTyxDQUFDTSxrQkFBa0IsR0FBR2UsV0FBVyxHQUFHLENBQUUsQ0FBQztJQUN0SCxNQUFNSSxXQUFXLEdBQUdGLElBQUksQ0FBQ0MsR0FBRyxDQUFFLENBQUMsRUFBRXhCLE9BQU8sQ0FBQ2UsV0FBVyxLQUFLLFlBQVksR0FBR2YsT0FBTyxDQUFDSSxrQkFBa0IsR0FBR2lCLFdBQVcsR0FBRyxDQUFFLENBQUM7SUFDdEgsTUFBTUssV0FBVyxHQUFHSCxJQUFJLENBQUNDLEdBQUcsQ0FBRSxDQUFDLEVBQUV4QixPQUFPLENBQUNlLFdBQVcsS0FBSyxVQUFVLEdBQUdmLE9BQU8sQ0FBQ08sa0JBQWtCLEdBQUdjLFdBQVcsR0FBRyxDQUFFLENBQUM7SUFDcEgsTUFBTU0sV0FBVyxHQUFHSixJQUFJLENBQUNDLEdBQUcsQ0FBRSxDQUFDLEVBQUV4QixPQUFPLENBQUNlLFdBQVcsS0FBSyxVQUFVLEdBQUdmLE9BQU8sQ0FBQ0ssa0JBQWtCLEdBQUdnQixXQUFXLEdBQUcsQ0FBRSxDQUFDOztJQUVwSDtJQUNBLE1BQU1PLFlBQVksR0FBRyxJQUFJMUMscUJBQXFCLENBQUVHLGNBQWMsQ0FBZ0M7TUFDNUZ3QyxPQUFPLEVBQUVsQyxVQUFVO01BQ25CbUMsUUFBUSxFQUFFQSxDQUFBLEtBQU07UUFDZHBDLGlCQUFpQixDQUFDcUMsS0FBSyxHQUFHL0IsT0FBTyxDQUFDQyxXQUFXLENBQUVQLGlCQUFpQixDQUFDcUMsS0FBTSxDQUFDO01BQzFFLENBQUM7TUFDRDNCLGtCQUFrQixFQUFFSixPQUFPLENBQUNJLGtCQUFrQjtNQUM5Q0Msa0JBQWtCLEVBQUVMLE9BQU8sQ0FBQ0ssa0JBQWtCO01BQzlDQyxrQkFBa0IsRUFBRU4sT0FBTyxDQUFDTSxrQkFBa0I7TUFDOUNDLGtCQUFrQixFQUFFUCxPQUFPLENBQUNPLGtCQUFrQjtNQUM5Q3lCLGVBQWUsRUFBRVAsV0FBVztNQUM1QlEsZUFBZSxFQUFFLENBQUNOLFdBQVc7TUFDN0JPLGVBQWUsRUFBRVosV0FBVztNQUM1QmEsZUFBZSxFQUFFLENBQUNULFdBQVc7TUFDN0JVLGNBQWMsRUFBRTdDLGtCQUFrQixDQUFDOEMsSUFBSSxDQUFDQyxvQkFBb0I7TUFDNURyQixNQUFNLEVBQUVqQixPQUFPLENBQUNpQixNQUFNLENBQUNzQixZQUFZLENBQUUsY0FBZTtJQUN0RCxDQUFDLEVBQUV2QyxPQUFPLENBQUNRLGFBQWMsQ0FBRSxDQUFDOztJQUU1QjtJQUNBLE1BQU1nQyxhQUFhLEdBQUcsSUFBSXRELHFCQUFxQixDQUFFRyxjQUFjLENBQWdDO01BQzdGd0MsT0FBTyxFQUFFakMsV0FBVztNQUNwQmtDLFFBQVEsRUFBRUEsQ0FBQSxLQUFNO1FBQ2RwQyxpQkFBaUIsQ0FBQ3FDLEtBQUssR0FBRy9CLE9BQU8sQ0FBQ0csWUFBWSxDQUFFVCxpQkFBaUIsQ0FBQ3FDLEtBQU0sQ0FBQztNQUMzRSxDQUFDO01BQ0QzQixrQkFBa0IsRUFBRUosT0FBTyxDQUFDSSxrQkFBa0I7TUFDOUNDLGtCQUFrQixFQUFFTCxPQUFPLENBQUNLLGtCQUFrQjtNQUM5Q0Msa0JBQWtCLEVBQUVOLE9BQU8sQ0FBQ00sa0JBQWtCO01BQzlDQyxrQkFBa0IsRUFBRVAsT0FBTyxDQUFDTyxrQkFBa0I7TUFDOUN5QixlQUFlLEVBQUUsQ0FBQ1AsV0FBVztNQUM3QlEsZUFBZSxFQUFFTixXQUFXO01BQzVCTyxlQUFlLEVBQUUsQ0FBQ1osV0FBVztNQUM3QmEsZUFBZSxFQUFFVCxXQUFXO01BQzVCVSxjQUFjLEVBQUU3QyxrQkFBa0IsQ0FBQzhDLElBQUksQ0FBQ0kscUJBQXFCO01BQzdEeEIsTUFBTSxFQUFFakIsT0FBTyxDQUFDaUIsTUFBTSxDQUFDc0IsWUFBWSxDQUFFLGVBQWdCO0lBQ3ZELENBQUMsRUFBRXZDLE9BQU8sQ0FBQ1EsYUFBYyxDQUFFLENBQUM7SUFFNUJSLE9BQU8sQ0FBQzBDLFFBQVEsR0FBSzFDLE9BQU8sQ0FBQ2UsV0FBVyxLQUFLLFlBQVksR0FBSyxDQUFFeUIsYUFBYSxFQUFFWixZQUFZLENBQUUsR0FBRyxDQUFFQSxZQUFZLEVBQUVZLGFBQWEsQ0FBRTs7SUFFL0g7SUFDQSxNQUFNRyxpQkFBaUIsR0FBS0MsU0FBaUIsSUFBTTtNQUNqREosYUFBYSxDQUFDSyxPQUFPLEdBQUcvQyxjQUFjLENBQUNnRCxRQUFRLENBQUU5QyxPQUFPLENBQUNHLFlBQVksQ0FBRXlDLFNBQVUsQ0FBRSxDQUFDO01BQ3BGaEIsWUFBWSxDQUFDaUIsT0FBTyxHQUFHL0MsY0FBYyxDQUFDZ0QsUUFBUSxDQUFFOUMsT0FBTyxDQUFDQyxXQUFXLENBQUUyQyxTQUFVLENBQUUsQ0FBQztJQUNwRixDQUFDO0lBQ0RsRCxpQkFBaUIsQ0FBQ3FELElBQUksQ0FBRUosaUJBQWtCLENBQUM7SUFFM0MsS0FBSyxDQUFFM0MsT0FBUSxDQUFDOztJQUVoQjtJQUNBLElBQUksQ0FBQ3dDLGFBQWEsR0FBR0EsYUFBYTtJQUNsQyxJQUFJLENBQUNaLFlBQVksR0FBR0EsWUFBWTtJQUVoQyxJQUFJLENBQUNvQixnQkFBZ0IsQ0FBRXRELGlCQUFpQixFQUFFO01BQ3hDdUQsVUFBVSxFQUFFO0lBQ2QsQ0FBRSxDQUFDO0lBRUgsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRyxNQUFNO01BQ2xDdEIsWUFBWSxDQUFDdUIsT0FBTyxDQUFDLENBQUM7TUFDdEJYLGFBQWEsQ0FBQ1csT0FBTyxDQUFDLENBQUM7TUFDdkJ6RCxpQkFBaUIsQ0FBQzBELE1BQU0sQ0FBRVQsaUJBQWtCLENBQUM7SUFDL0MsQ0FBQztFQUNIO0VBRWdCUSxPQUFPQSxDQUFBLEVBQVM7SUFDOUIsSUFBSSxDQUFDRCxzQkFBc0IsQ0FBQyxDQUFDO0lBQzdCLEtBQUssQ0FBQ0MsT0FBTyxDQUFDLENBQUM7RUFDakI7QUFDRjtBQUVBN0QsV0FBVyxDQUFDK0QsUUFBUSxDQUFFLGlCQUFpQixFQUFFN0QsZUFBZ0IsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==