// Copyright 2019-2024, University of Colorado Boulder

/**
 * A type of spinner UI component that supports 'fine' and 'coarse' changes to a numeric value.
 *
 *   <  <<  [ value ]  >>  >
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import InstanceRegistry from '../../phet-core/js/documentation/InstanceRegistry.js';
import optionize, { combineOptions } from '../../phet-core/js/optionize.js';
import { HBox, Node } from '../../scenery/js/imports.js';
import ArrowButton from '../../sun/js/buttons/ArrowButton.js';
import Tandem from '../../tandem/js/Tandem.js';
import NumberDisplay from './NumberDisplay.js';
import sceneryPhet from './sceneryPhet.js';
import AccessibleNumberSpinner from '../../sun/js/accessibility/AccessibleNumberSpinner.js';
export default class FineCoarseSpinner extends AccessibleNumberSpinner(Node, 0) {
  constructor(numberProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      deltaFine: 1,
      deltaCoarse: 10,
      spacing: 10,
      // AccessibleNumberSpinnerOptions
      valueProperty: numberProperty,
      enabledRangeProperty: numberProperty.rangeProperty,
      // Instead of changing the value with keyboard step options, the arrow buttons are synthetically
      // pressed in response to keyboard input so that the buttons look pressed.
      keyboardStep: 0,
      shiftKeyboardStep: 0,
      pageKeyboardStep: 0,
      // NodeOptions
      disabledOpacity: 0.5,
      // {number} opacity used to make the control look disabled
      tandem: Tandem.REQUIRED,
      tandemNameSuffix: 'Spinner',
      phetioFeatured: true,
      phetioEnabledPropertyInstrumented: true
    }, providedOptions);
    const range = numberProperty.range;
    assert && assert(options.deltaFine > 0, `invalid deltaFine: ${options.deltaFine}`);
    assert && assert(options.deltaCoarse > 0, `invalid deltaCoarse: ${options.deltaCoarse}`);

    // options for the 'fine' arrow buttons, which show 1 arrow
    const fineButtonOptions = combineOptions({
      focusable: false,
      numberOfArrows: 1,
      arrowWidth: 12,
      // width of base
      arrowHeight: 14,
      // from tip to base

      // pointer areas
      touchAreaXDilation: 3,
      touchAreaYDilation: 3,
      mouseAreaXDilation: 0,
      mouseAreaYDilation: 0,
      // phet-io, as requested in https://github.com/phetsims/sun/issues/575
      enabledPropertyOptions: {
        phetioReadOnly: true,
        phetioFeatured: false
      }
    }, options.arrowButtonOptions);
    assert && assert(fineButtonOptions.arrowHeight !== undefined);
    const fineButtonArrowHeight = fineButtonOptions.arrowHeight;

    // options for the 'coarse' arrow buttons, which show 2 arrows
    const coarseButtonOptions = combineOptions({}, fineButtonOptions, {
      focusable: false,
      numberOfArrows: 2,
      arrowSpacing: -0.5 * fineButtonArrowHeight,
      // arrows overlap

      // phet-io, as requested in https://github.com/phetsims/sun/issues/575
      enabledPropertyOptions: {
        phetioReadOnly: true,
        phetioFeatured: false
      }
    });

    // <
    const decrementFineButton = new ArrowButton('left', () => {
      numberProperty.value = numberProperty.value - options.deltaFine;
    }, combineOptions({}, fineButtonOptions, {
      tandem: options.tandem.createTandem('decrementFineButton')
    }));

    // <<
    const decrementCoarseButton = new ArrowButton('left', () => {
      const delta = Math.min(options.deltaCoarse, numberProperty.value - range.min);
      numberProperty.value = numberProperty.value - delta;
    }, combineOptions({}, coarseButtonOptions, {
      tandem: options.tandem.createTandem('decrementCoarseButton')
    }));

    // [ value ]
    const numberDisplay = new NumberDisplay(numberProperty, range, combineOptions({
      tandem: options.tandem.createTandem('numberDisplay')
    }, options.numberDisplayOptions));

    // >
    const incrementFineButton = new ArrowButton('right', () => {
      numberProperty.value = numberProperty.value + options.deltaFine;
    }, combineOptions({}, fineButtonOptions, {
      tandem: options.tandem.createTandem('incrementFineButton')
    }));

    // >>
    const incrementCoarseButton = new ArrowButton('right', () => {
      const delta = Math.min(options.deltaCoarse, range.max - numberProperty.value);
      numberProperty.value = numberProperty.value + delta;
    }, combineOptions({}, coarseButtonOptions, {
      tandem: options.tandem.createTandem('incrementCoarseButton')
    }));

    // <  <<  [ value ]  >>  >
    const hBox = new HBox({
      spacing: options.spacing,
      children: [decrementFineButton, decrementCoarseButton, numberDisplay, incrementCoarseButton, incrementFineButton]
    });

    // Wrap in Node to hide HBox API.
    options.children = [hBox];
    super(options);

    // Disable the buttons when the value is at min or max of the range
    const numberPropertyListener = value => {
      // left buttons
      decrementFineButton.enabled = decrementCoarseButton.enabled = value !== range.min;

      // right buttons
      incrementFineButton.enabled = incrementCoarseButton.enabled = value !== range.max;
    };
    numberProperty.link(numberPropertyListener); // unlink required in dispose

    // pdom - manually click arrow buttons from alt input events so that the buttons look pressed while the key is down
    const increasedListener = isDown => {
      if (isDown) {
        this.shiftKeyDown ? incrementFineButton.pdomClick() : incrementCoarseButton.pdomClick();
      }
    };
    const decreasedListener = isDown => {
      if (isDown) {
        this.shiftKeyDown ? decrementFineButton.pdomClick() : decrementCoarseButton.pdomClick();
      }
    };
    this.pdomIncrementDownEmitter.addListener(increasedListener);
    this.pdomDecrementDownEmitter.addListener(decreasedListener);
    this.disposeFineCoarseSpinner = () => {
      if (numberProperty.hasListener(numberPropertyListener)) {
        numberProperty.unlink(numberPropertyListener);
      }

      // unregister tandems
      numberDisplay.dispose();
      decrementFineButton.dispose();
      decrementCoarseButton.dispose();
      incrementFineButton.dispose();
      incrementCoarseButton.dispose();
    };

    // Create a link to associated Property, so it's easier to find in Studio.
    this.addLinkedElement(numberProperty, {
      tandemName: 'property'
    });

    // support for binder documentation, stripped out in builds and only runs when ?binder is specified
    assert && phet?.chipper?.queryParameters?.binder && InstanceRegistry.registerDataURL('scenery-phet', 'FineCoarseSpinner', this);
  }
  dispose() {
    this.disposeFineCoarseSpinner();
    super.dispose();
  }
}
sceneryPhet.register('FineCoarseSpinner', FineCoarseSpinner);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbnN0YW5jZVJlZ2lzdHJ5Iiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJIQm94IiwiTm9kZSIsIkFycm93QnV0dG9uIiwiVGFuZGVtIiwiTnVtYmVyRGlzcGxheSIsInNjZW5lcnlQaGV0IiwiQWNjZXNzaWJsZU51bWJlclNwaW5uZXIiLCJGaW5lQ29hcnNlU3Bpbm5lciIsImNvbnN0cnVjdG9yIiwibnVtYmVyUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiZGVsdGFGaW5lIiwiZGVsdGFDb2Fyc2UiLCJzcGFjaW5nIiwidmFsdWVQcm9wZXJ0eSIsImVuYWJsZWRSYW5nZVByb3BlcnR5IiwicmFuZ2VQcm9wZXJ0eSIsImtleWJvYXJkU3RlcCIsInNoaWZ0S2V5Ym9hcmRTdGVwIiwicGFnZUtleWJvYXJkU3RlcCIsImRpc2FibGVkT3BhY2l0eSIsInRhbmRlbSIsIlJFUVVJUkVEIiwidGFuZGVtTmFtZVN1ZmZpeCIsInBoZXRpb0ZlYXR1cmVkIiwicGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkIiwicmFuZ2UiLCJhc3NlcnQiLCJmaW5lQnV0dG9uT3B0aW9ucyIsImZvY3VzYWJsZSIsIm51bWJlck9mQXJyb3dzIiwiYXJyb3dXaWR0aCIsImFycm93SGVpZ2h0IiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwibW91c2VBcmVhWERpbGF0aW9uIiwibW91c2VBcmVhWURpbGF0aW9uIiwiZW5hYmxlZFByb3BlcnR5T3B0aW9ucyIsInBoZXRpb1JlYWRPbmx5IiwiYXJyb3dCdXR0b25PcHRpb25zIiwidW5kZWZpbmVkIiwiZmluZUJ1dHRvbkFycm93SGVpZ2h0IiwiY29hcnNlQnV0dG9uT3B0aW9ucyIsImFycm93U3BhY2luZyIsImRlY3JlbWVudEZpbmVCdXR0b24iLCJ2YWx1ZSIsImNyZWF0ZVRhbmRlbSIsImRlY3JlbWVudENvYXJzZUJ1dHRvbiIsImRlbHRhIiwiTWF0aCIsIm1pbiIsIm51bWJlckRpc3BsYXkiLCJudW1iZXJEaXNwbGF5T3B0aW9ucyIsImluY3JlbWVudEZpbmVCdXR0b24iLCJpbmNyZW1lbnRDb2Fyc2VCdXR0b24iLCJtYXgiLCJoQm94IiwiY2hpbGRyZW4iLCJudW1iZXJQcm9wZXJ0eUxpc3RlbmVyIiwiZW5hYmxlZCIsImxpbmsiLCJpbmNyZWFzZWRMaXN0ZW5lciIsImlzRG93biIsInNoaWZ0S2V5RG93biIsInBkb21DbGljayIsImRlY3JlYXNlZExpc3RlbmVyIiwicGRvbUluY3JlbWVudERvd25FbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJwZG9tRGVjcmVtZW50RG93bkVtaXR0ZXIiLCJkaXNwb3NlRmluZUNvYXJzZVNwaW5uZXIiLCJoYXNMaXN0ZW5lciIsInVubGluayIsImRpc3Bvc2UiLCJhZGRMaW5rZWRFbGVtZW50IiwidGFuZGVtTmFtZSIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwiYmluZGVyIiwicmVnaXN0ZXJEYXRhVVJMIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJGaW5lQ29hcnNlU3Bpbm5lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBIHR5cGUgb2Ygc3Bpbm5lciBVSSBjb21wb25lbnQgdGhhdCBzdXBwb3J0cyAnZmluZScgYW5kICdjb2Fyc2UnIGNoYW5nZXMgdG8gYSBudW1lcmljIHZhbHVlLlxyXG4gKlxyXG4gKiAgIDwgIDw8ICBbIHZhbHVlIF0gID4+ICA+XHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCBJbnN0YW5jZVJlZ2lzdHJ5IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9kb2N1bWVudGF0aW9uL0luc3RhbmNlUmVnaXN0cnkuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IGNvbWJpbmVPcHRpb25zIH0gZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIE5vZGUsIE5vZGVPcHRpb25zIH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFycm93QnV0dG9uLCB7IEFycm93QnV0dG9uT3B0aW9ucyB9IGZyb20gJy4uLy4uL3N1bi9qcy9idXR0b25zL0Fycm93QnV0dG9uLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IE51bWJlckRpc3BsYXksIHsgTnVtYmVyRGlzcGxheU9wdGlvbnMgfSBmcm9tICcuL051bWJlckRpc3BsYXkuanMnO1xyXG5pbXBvcnQgc2NlbmVyeVBoZXQgZnJvbSAnLi9zY2VuZXJ5UGhldC5qcyc7XHJcbmltcG9ydCBBY2Nlc3NpYmxlTnVtYmVyU3Bpbm5lciwgeyBBY2Nlc3NpYmxlTnVtYmVyU3Bpbm5lck9wdGlvbnMgfSBmcm9tICcuLi8uLi9zdW4vanMvYWNjZXNzaWJpbGl0eS9BY2Nlc3NpYmxlTnVtYmVyU3Bpbm5lci5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGRlbHRhRmluZT86IG51bWJlcjsgLy8gYW1vdW50IHRvIGluY3JlbWVudC9kZWNyZW1lbnQgd2hlbiB0aGUgJ2ZpbmUnIHR3ZWFrZXJzIGFyZSBwcmVzc2VkXHJcbiAgZGVsdGFDb2Fyc2U/OiBudW1iZXI7IC8vIGFtb3VudCB0byBpbmNyZW1lbnQvZGVjcmVtZW50IHdoZW4gdGhlICdjb2Fyc2UnIHR3ZWFrZXJzIGFyZSBwcmVzc2VkXHJcbiAgc3BhY2luZz86IG51bWJlcjsgLy8gaG9yaXpvbnRhbCBzcGFjZSBiZXR3ZWVuIHN1YmNvbXBvbmVudHNcclxuICBudW1iZXJEaXNwbGF5T3B0aW9ucz86IFN0cmljdE9taXQ8TnVtYmVyRGlzcGxheU9wdGlvbnMsICd0YW5kZW0nPjtcclxuICBhcnJvd0J1dHRvbk9wdGlvbnM/OiBTdHJpY3RPbWl0PEFycm93QnV0dG9uT3B0aW9ucywgJ251bWJlck9mQXJyb3dzJyB8ICd0YW5kZW0nIHwgJ2ZvY3VzYWJsZSc+O1xyXG59O1xyXG5cclxudHlwZSBQYXJlbnRPcHRpb25zID0gQWNjZXNzaWJsZU51bWJlclNwaW5uZXJPcHRpb25zICYgTm9kZU9wdGlvbnM7XHJcblxyXG5leHBvcnQgdHlwZSBGaW5lQ29hcnNlU3Bpbm5lck9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFN0cmljdE9taXQ8UGFyZW50T3B0aW9ucywgJ2NoaWxkcmVuJyB8ICd2YWx1ZVByb3BlcnR5JyB8ICdlbmFibGVkUmFuZ2VQcm9wZXJ0eScgfCAna2V5Ym9hcmRTdGVwJyB8ICdzaGlmdEtleWJvYXJkU3RlcCcgfCAncGFnZUtleWJvYXJkU3RlcCc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmluZUNvYXJzZVNwaW5uZXIgZXh0ZW5kcyBBY2Nlc3NpYmxlTnVtYmVyU3Bpbm5lciggTm9kZSwgMCApIHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlRmluZUNvYXJzZVNwaW5uZXI6ICgpID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbnVtYmVyUHJvcGVydHk6IE51bWJlclByb3BlcnR5LCBwcm92aWRlZE9wdGlvbnM/OiBGaW5lQ29hcnNlU3Bpbm5lck9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxGaW5lQ29hcnNlU3Bpbm5lck9wdGlvbnMsXHJcbiAgICAgIFN0cmljdE9taXQ8U2VsZk9wdGlvbnMsICdudW1iZXJEaXNwbGF5T3B0aW9ucycgfCAnYXJyb3dCdXR0b25PcHRpb25zJz4sIFBhcmVudE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIGRlbHRhRmluZTogMSxcclxuICAgICAgZGVsdGFDb2Fyc2U6IDEwLFxyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuXHJcbiAgICAgIC8vIEFjY2Vzc2libGVOdW1iZXJTcGlubmVyT3B0aW9uc1xyXG4gICAgICB2YWx1ZVByb3BlcnR5OiBudW1iZXJQcm9wZXJ0eSxcclxuICAgICAgZW5hYmxlZFJhbmdlUHJvcGVydHk6IG51bWJlclByb3BlcnR5LnJhbmdlUHJvcGVydHksXHJcblxyXG4gICAgICAvLyBJbnN0ZWFkIG9mIGNoYW5naW5nIHRoZSB2YWx1ZSB3aXRoIGtleWJvYXJkIHN0ZXAgb3B0aW9ucywgdGhlIGFycm93IGJ1dHRvbnMgYXJlIHN5bnRoZXRpY2FsbHlcclxuICAgICAgLy8gcHJlc3NlZCBpbiByZXNwb25zZSB0byBrZXlib2FyZCBpbnB1dCBzbyB0aGF0IHRoZSBidXR0b25zIGxvb2sgcHJlc3NlZC5cclxuICAgICAga2V5Ym9hcmRTdGVwOiAwLFxyXG4gICAgICBzaGlmdEtleWJvYXJkU3RlcDogMCxcclxuICAgICAgcGFnZUtleWJvYXJkU3RlcDogMCxcclxuXHJcbiAgICAgIC8vIE5vZGVPcHRpb25zXHJcbiAgICAgIGRpc2FibGVkT3BhY2l0eTogMC41LCAvLyB7bnVtYmVyfSBvcGFjaXR5IHVzZWQgdG8gbWFrZSB0aGUgY29udHJvbCBsb29rIGRpc2FibGVkXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVELFxyXG4gICAgICB0YW5kZW1OYW1lU3VmZml4OiAnU3Bpbm5lcicsXHJcbiAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlLFxyXG4gICAgICBwaGV0aW9FbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQ6IHRydWVcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IHJhbmdlID0gbnVtYmVyUHJvcGVydHkucmFuZ2U7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5kZWx0YUZpbmUgPiAwLCBgaW52YWxpZCBkZWx0YUZpbmU6ICR7b3B0aW9ucy5kZWx0YUZpbmV9YCApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5kZWx0YUNvYXJzZSA+IDAsIGBpbnZhbGlkIGRlbHRhQ29hcnNlOiAke29wdGlvbnMuZGVsdGFDb2Fyc2V9YCApO1xyXG5cclxuICAgIC8vIG9wdGlvbnMgZm9yIHRoZSAnZmluZScgYXJyb3cgYnV0dG9ucywgd2hpY2ggc2hvdyAxIGFycm93XHJcbiAgICBjb25zdCBmaW5lQnV0dG9uT3B0aW9uczogQXJyb3dCdXR0b25PcHRpb25zID0gY29tYmluZU9wdGlvbnM8QXJyb3dCdXR0b25PcHRpb25zPigge1xyXG4gICAgICBmb2N1c2FibGU6IGZhbHNlLFxyXG4gICAgICBudW1iZXJPZkFycm93czogMSxcclxuICAgICAgYXJyb3dXaWR0aDogMTIsIC8vIHdpZHRoIG9mIGJhc2VcclxuICAgICAgYXJyb3dIZWlnaHQ6IDE0LCAvLyBmcm9tIHRpcCB0byBiYXNlXHJcblxyXG4gICAgICAvLyBwb2ludGVyIGFyZWFzXHJcbiAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogMyxcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiAzLFxyXG4gICAgICBtb3VzZUFyZWFYRGlsYXRpb246IDAsXHJcbiAgICAgIG1vdXNlQXJlYVlEaWxhdGlvbjogMCxcclxuXHJcbiAgICAgIC8vIHBoZXQtaW8sIGFzIHJlcXVlc3RlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc3VuL2lzc3Vlcy81NzVcclxuICAgICAgZW5hYmxlZFByb3BlcnR5T3B0aW9uczoge1xyXG4gICAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlLFxyXG4gICAgICAgIHBoZXRpb0ZlYXR1cmVkOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9LCBvcHRpb25zLmFycm93QnV0dG9uT3B0aW9ucyApO1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZpbmVCdXR0b25PcHRpb25zLmFycm93SGVpZ2h0ICE9PSB1bmRlZmluZWQgKTtcclxuICAgIGNvbnN0IGZpbmVCdXR0b25BcnJvd0hlaWdodCA9IGZpbmVCdXR0b25PcHRpb25zLmFycm93SGVpZ2h0ITtcclxuXHJcbiAgICAvLyBvcHRpb25zIGZvciB0aGUgJ2NvYXJzZScgYXJyb3cgYnV0dG9ucywgd2hpY2ggc2hvdyAyIGFycm93c1xyXG4gICAgY29uc3QgY29hcnNlQnV0dG9uT3B0aW9ucyA9IGNvbWJpbmVPcHRpb25zPEFycm93QnV0dG9uT3B0aW9ucz4oIHt9LCBmaW5lQnV0dG9uT3B0aW9ucywge1xyXG4gICAgICBmb2N1c2FibGU6IGZhbHNlLFxyXG4gICAgICBudW1iZXJPZkFycm93czogMixcclxuICAgICAgYXJyb3dTcGFjaW5nOiAtMC41ICogZmluZUJ1dHRvbkFycm93SGVpZ2h0LCAvLyBhcnJvd3Mgb3ZlcmxhcFxyXG5cclxuICAgICAgLy8gcGhldC1pbywgYXMgcmVxdWVzdGVkIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9zdW4vaXNzdWVzLzU3NVxyXG4gICAgICBlbmFibGVkUHJvcGVydHlPcHRpb25zOiB7XHJcbiAgICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgcGhldGlvRmVhdHVyZWQ6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyA8XHJcbiAgICBjb25zdCBkZWNyZW1lbnRGaW5lQnV0dG9uID0gbmV3IEFycm93QnV0dG9uKCAnbGVmdCcsICggKCkgPT4ge1xyXG4gICAgICBudW1iZXJQcm9wZXJ0eS52YWx1ZSA9IG51bWJlclByb3BlcnR5LnZhbHVlIC0gb3B0aW9ucy5kZWx0YUZpbmU7XHJcbiAgICB9ICksIGNvbWJpbmVPcHRpb25zPEFycm93QnV0dG9uT3B0aW9ucz4oIHt9LCBmaW5lQnV0dG9uT3B0aW9ucyxcclxuICAgICAgeyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RlY3JlbWVudEZpbmVCdXR0b24nICkgfSApICk7XHJcblxyXG4gICAgLy8gPDxcclxuICAgIGNvbnN0IGRlY3JlbWVudENvYXJzZUJ1dHRvbiA9IG5ldyBBcnJvd0J1dHRvbiggJ2xlZnQnLCAoICgpID0+IHtcclxuICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLm1pbiggb3B0aW9ucy5kZWx0YUNvYXJzZSwgbnVtYmVyUHJvcGVydHkudmFsdWUgLSByYW5nZS5taW4gKTtcclxuICAgICAgbnVtYmVyUHJvcGVydHkudmFsdWUgPSBudW1iZXJQcm9wZXJ0eS52YWx1ZSAtIGRlbHRhO1xyXG4gICAgfSApLCBjb21iaW5lT3B0aW9uczxBcnJvd0J1dHRvbk9wdGlvbnM+KCB7fSwgY29hcnNlQnV0dG9uT3B0aW9ucywge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RlY3JlbWVudENvYXJzZUJ1dHRvbicgKVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gWyB2YWx1ZSBdXHJcbiAgICBjb25zdCBudW1iZXJEaXNwbGF5ID0gbmV3IE51bWJlckRpc3BsYXkoIG51bWJlclByb3BlcnR5LCByYW5nZSxcclxuICAgICAgY29tYmluZU9wdGlvbnM8TnVtYmVyRGlzcGxheU9wdGlvbnM+KCB7XHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdudW1iZXJEaXNwbGF5JyApXHJcbiAgICAgIH0sIG9wdGlvbnMubnVtYmVyRGlzcGxheU9wdGlvbnMgKSApO1xyXG5cclxuICAgIC8vID5cclxuICAgIGNvbnN0IGluY3JlbWVudEZpbmVCdXR0b24gPSBuZXcgQXJyb3dCdXR0b24oICdyaWdodCcsICggKCkgPT4ge1xyXG4gICAgICBudW1iZXJQcm9wZXJ0eS52YWx1ZSA9IG51bWJlclByb3BlcnR5LnZhbHVlICsgb3B0aW9ucy5kZWx0YUZpbmU7XHJcbiAgICB9ICksIGNvbWJpbmVPcHRpb25zPEFycm93QnV0dG9uT3B0aW9ucz4oIHt9LCBmaW5lQnV0dG9uT3B0aW9ucyxcclxuICAgICAgeyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2luY3JlbWVudEZpbmVCdXR0b24nICkgfSApICk7XHJcblxyXG4gICAgLy8gPj5cclxuICAgIGNvbnN0IGluY3JlbWVudENvYXJzZUJ1dHRvbiA9IG5ldyBBcnJvd0J1dHRvbiggJ3JpZ2h0JywgKCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5taW4oIG9wdGlvbnMuZGVsdGFDb2Fyc2UsIHJhbmdlLm1heCAtIG51bWJlclByb3BlcnR5LnZhbHVlICk7XHJcbiAgICAgIG51bWJlclByb3BlcnR5LnZhbHVlID0gbnVtYmVyUHJvcGVydHkudmFsdWUgKyBkZWx0YTtcclxuICAgIH0gKSwgY29tYmluZU9wdGlvbnM8QXJyb3dCdXR0b25PcHRpb25zPigge30sIGNvYXJzZUJ1dHRvbk9wdGlvbnMsXHJcbiAgICAgIHsgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdpbmNyZW1lbnRDb2Fyc2VCdXR0b24nICkgfSApICk7XHJcblxyXG4gICAgLy8gPCAgPDwgIFsgdmFsdWUgXSAgPj4gID5cclxuICAgIGNvbnN0IGhCb3ggPSBuZXcgSEJveCgge1xyXG4gICAgICBzcGFjaW5nOiBvcHRpb25zLnNwYWNpbmcsXHJcbiAgICAgIGNoaWxkcmVuOiBbIGRlY3JlbWVudEZpbmVCdXR0b24sIGRlY3JlbWVudENvYXJzZUJ1dHRvbiwgbnVtYmVyRGlzcGxheSwgaW5jcmVtZW50Q29hcnNlQnV0dG9uLCBpbmNyZW1lbnRGaW5lQnV0dG9uIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBXcmFwIGluIE5vZGUgdG8gaGlkZSBIQm94IEFQSS5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIGhCb3ggXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIERpc2FibGUgdGhlIGJ1dHRvbnMgd2hlbiB0aGUgdmFsdWUgaXMgYXQgbWluIG9yIG1heCBvZiB0aGUgcmFuZ2VcclxuICAgIGNvbnN0IG51bWJlclByb3BlcnR5TGlzdGVuZXIgPSAoIHZhbHVlOiBudW1iZXIgKSA9PiB7XHJcblxyXG4gICAgICAvLyBsZWZ0IGJ1dHRvbnNcclxuICAgICAgZGVjcmVtZW50RmluZUJ1dHRvbi5lbmFibGVkID0gZGVjcmVtZW50Q29hcnNlQnV0dG9uLmVuYWJsZWQgPSAoIHZhbHVlICE9PSByYW5nZS5taW4gKTtcclxuXHJcbiAgICAgIC8vIHJpZ2h0IGJ1dHRvbnNcclxuICAgICAgaW5jcmVtZW50RmluZUJ1dHRvbi5lbmFibGVkID0gaW5jcmVtZW50Q29hcnNlQnV0dG9uLmVuYWJsZWQgPSAoIHZhbHVlICE9PSByYW5nZS5tYXggKTtcclxuICAgIH07XHJcbiAgICBudW1iZXJQcm9wZXJ0eS5saW5rKCBudW1iZXJQcm9wZXJ0eUxpc3RlbmVyICk7IC8vIHVubGluayByZXF1aXJlZCBpbiBkaXNwb3NlXHJcblxyXG4gICAgLy8gcGRvbSAtIG1hbnVhbGx5IGNsaWNrIGFycm93IGJ1dHRvbnMgZnJvbSBhbHQgaW5wdXQgZXZlbnRzIHNvIHRoYXQgdGhlIGJ1dHRvbnMgbG9vayBwcmVzc2VkIHdoaWxlIHRoZSBrZXkgaXMgZG93blxyXG4gICAgY29uc3QgaW5jcmVhc2VkTGlzdGVuZXIgPSAoIGlzRG93bjogYm9vbGVhbiApID0+IHtcclxuICAgICAgaWYgKCBpc0Rvd24gKSB7XHJcbiAgICAgICAgdGhpcy5zaGlmdEtleURvd24gPyBpbmNyZW1lbnRGaW5lQnV0dG9uLnBkb21DbGljaygpIDogaW5jcmVtZW50Q29hcnNlQnV0dG9uLnBkb21DbGljaygpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZGVjcmVhc2VkTGlzdGVuZXIgPSAoIGlzRG93bjogYm9vbGVhbiApID0+IHtcclxuICAgICAgaWYgKCBpc0Rvd24gKSB7XHJcbiAgICAgICAgdGhpcy5zaGlmdEtleURvd24gPyBkZWNyZW1lbnRGaW5lQnV0dG9uLnBkb21DbGljaygpIDogZGVjcmVtZW50Q29hcnNlQnV0dG9uLnBkb21DbGljaygpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5wZG9tSW5jcmVtZW50RG93bkVtaXR0ZXIuYWRkTGlzdGVuZXIoIGluY3JlYXNlZExpc3RlbmVyICk7XHJcbiAgICB0aGlzLnBkb21EZWNyZW1lbnREb3duRW1pdHRlci5hZGRMaXN0ZW5lciggZGVjcmVhc2VkTGlzdGVuZXIgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VGaW5lQ29hcnNlU3Bpbm5lciA9ICgpID0+IHtcclxuXHJcbiAgICAgIGlmICggbnVtYmVyUHJvcGVydHkuaGFzTGlzdGVuZXIoIG51bWJlclByb3BlcnR5TGlzdGVuZXIgKSApIHtcclxuICAgICAgICBudW1iZXJQcm9wZXJ0eS51bmxpbmsoIG51bWJlclByb3BlcnR5TGlzdGVuZXIgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gdW5yZWdpc3RlciB0YW5kZW1zXHJcbiAgICAgIG51bWJlckRpc3BsYXkuZGlzcG9zZSgpO1xyXG4gICAgICBkZWNyZW1lbnRGaW5lQnV0dG9uLmRpc3Bvc2UoKTtcclxuICAgICAgZGVjcmVtZW50Q29hcnNlQnV0dG9uLmRpc3Bvc2UoKTtcclxuICAgICAgaW5jcmVtZW50RmluZUJ1dHRvbi5kaXNwb3NlKCk7XHJcbiAgICAgIGluY3JlbWVudENvYXJzZUJ1dHRvbi5kaXNwb3NlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIGxpbmsgdG8gYXNzb2NpYXRlZCBQcm9wZXJ0eSwgc28gaXQncyBlYXNpZXIgdG8gZmluZCBpbiBTdHVkaW8uXHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIG51bWJlclByb3BlcnR5LCB7XHJcbiAgICAgIHRhbmRlbU5hbWU6ICdwcm9wZXJ0eSdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBzdXBwb3J0IGZvciBiaW5kZXIgZG9jdW1lbnRhdGlvbiwgc3RyaXBwZWQgb3V0IGluIGJ1aWxkcyBhbmQgb25seSBydW5zIHdoZW4gP2JpbmRlciBpcyBzcGVjaWZpZWRcclxuICAgIGFzc2VydCAmJiBwaGV0Py5jaGlwcGVyPy5xdWVyeVBhcmFtZXRlcnM/LmJpbmRlciAmJiBJbnN0YW5jZVJlZ2lzdHJ5LnJlZ2lzdGVyRGF0YVVSTCggJ3NjZW5lcnktcGhldCcsICdGaW5lQ29hcnNlU3Bpbm5lcicsIHRoaXMgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlRmluZUNvYXJzZVNwaW5uZXIoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnRmluZUNvYXJzZVNwaW5uZXInLCBGaW5lQ29hcnNlU3Bpbm5lciApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUEsT0FBT0EsZ0JBQWdCLE1BQU0sc0RBQXNEO0FBQ25GLE9BQU9DLFNBQVMsSUFBSUMsY0FBYyxRQUFRLGlDQUFpQztBQUMzRSxTQUFTQyxJQUFJLEVBQUVDLElBQUksUUFBcUIsNkJBQTZCO0FBQ3JFLE9BQU9DLFdBQVcsTUFBOEIscUNBQXFDO0FBQ3JGLE9BQU9DLE1BQU0sTUFBTSwyQkFBMkI7QUFDOUMsT0FBT0MsYUFBYSxNQUFnQyxvQkFBb0I7QUFDeEUsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUMxQyxPQUFPQyx1QkFBdUIsTUFBMEMsdURBQXVEO0FBYy9ILGVBQWUsTUFBTUMsaUJBQWlCLFNBQVNELHVCQUF1QixDQUFFTCxJQUFJLEVBQUUsQ0FBRSxDQUFDLENBQUM7RUFJekVPLFdBQVdBLENBQUVDLGNBQThCLEVBQUVDLGVBQTBDLEVBQUc7SUFFL0YsTUFBTUMsT0FBTyxHQUFHYixTQUFTLENBQ2dFLENBQUMsQ0FBRTtNQUUxRjtNQUNBYyxTQUFTLEVBQUUsQ0FBQztNQUNaQyxXQUFX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