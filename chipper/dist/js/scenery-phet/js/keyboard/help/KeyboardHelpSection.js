// Copyright 2017-2023, University of Colorado Boulder

/**
 * KeyboardHelpSection contains a section of text and icons for a KeyboardHelpDialog. Typically multiple KeyboardHelpSections
 * are assembled to describe the keyboard interactions for the sim. Takes a heading string for the section label and
 * an array of contents for rows of labels and icons.
 *
 * This type has many static functions for creating and laying out rows of content.
 * Default values for spacing and fonts are also available through statics if necessary.
 *
 * Help sections are aligned with two groups. Text labels are aligned in one VBox, icons are aligned in another. To
 * structure the accessible content, we chose to instrument a11y on the icons in the section. To label content
 * in your own KeyboardHelpSection, instrument the icons not the label Text so a11y content is placed correctly in the DOM.
 * KeyboardHelpSections are generally a list of items, so each icon has a  tagName of 'li' be default.
 *
 * @author Jesse Greenberg
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import StringProperty from '../../../../axon/js/StringProperty.js';
import { isTReadOnlyProperty } from '../../../../axon/js/TReadOnlyProperty.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import { HBox, ReadingBlock, RichText, VBox } from '../../../../scenery/js/imports.js';
import ResponsePacket from '../../../../utterance-queue/js/ResponsePacket.js';
import PhetFont from '../../PhetFont.js';
import sceneryPhet from '../../sceneryPhet.js';
// heading defaults
const DEFAULT_HEADING_CONTENT_SPACING = 13; // spacing between h
const DEFAULT_HEADING_FONT = new PhetFont({
  size: 19,
  weight: 'bold'
});
const DEFAULT_LABEL_ICON_SPACING = 28; // spacing between Text labels and icons in a KeyboardHelpSectionRow
const DEFAULT_VERTICAL_ICON_SPACING = 13;

// text fonts and max widths
const DEFAULT_LABEL_MAX_WIDTH = 235;
const DEFAULT_HEADING_MAX_WIDTH = 335;
export default class KeyboardHelpSection extends ReadingBlock(VBox) {
  // the translatable heading for this section

  // collection of icons in this section

  // used by methods to adjust spacing if necessary

  static DEFAULT_VERTICAL_ICON_SPACING = DEFAULT_VERTICAL_ICON_SPACING;

  /**
   * @param headingString - the translatable heading for this section
   * @param content -  icons and labels are each placed in their own VBox, and these layout boxes are aligned
   *   horizontally. It is assumed that label and icon have identical bounds so that each row of content can be
   *   aligned by KeyboardHelpSection. Static functions in this file use AlignGroup to achieve this. For examples,
   *   see labelWithIcon() and labelWithIconList().
   * @param [providedOptions]
   */
  constructor(headingString, content, providedOptions) {
    const options = optionize()({
      // SelfOptions
      headingOptions: {
        font: DEFAULT_HEADING_FONT,
        maxWidth: DEFAULT_HEADING_MAX_WIDTH,
        // pdom
        tagName: 'h2',
        innerContent: headingString
      },
      textMaxWidth: DEFAULT_LABEL_MAX_WIDTH,
      vBoxOptions: {
        align: 'left',
        spacing: DEFAULT_VERTICAL_ICON_SPACING
      },
      a11yContentTagName: 'ul',
      // ParentOptions
      spacing: DEFAULT_HEADING_CONTENT_SPACING,
      align: 'left'
    }, providedOptions);

    // create the heading
    const headingText = new RichText(headingString, options.headingOptions);

    // place icons in labels in unique layout boxes for alignment
    const icons = [];
    const labels = [];
    for (let i = 0; i < content.length; i++) {
      const helpSectionRow = content[i];
      assert && assert(helpSectionRow.text.maxWidth === null, 'KeyboardHelpSection sets maxWidth for children');
      helpSectionRow.text.maxWidth = options.textMaxWidth;
      icons.push(helpSectionRow.icon);
      labels.push(helpSectionRow.label);
    }

    // parent for all labels
    const labelVBox = new VBox(combineOptions({
      children: labels
    }, options.vBoxOptions));

    // parent for all icons
    const iconVBox = new VBox(combineOptions({
      children: icons,
      // pdom
      tagName: options.a11yContentTagName
    }, options.vBoxOptions));

    // labels and icons horizontally aligned
    const contentHBox = new HBox({
      children: [labelVBox, iconVBox],
      spacing: DEFAULT_LABEL_ICON_SPACING
    });

    // heading and content aligned in a VBox
    assert && assert(!options.children, 'KeyboardHelpSection sets children');
    options.children = [headingText, contentHBox];
    super(options);
    this.headingStringProperty = typeof headingString === 'string' ? new StringProperty(headingString) : headingString;
    this.icons = icons;
    this.iconVBox = iconVBox;
    this.contentHBox = contentHBox;
    this.keyboardHelpSectionRows = content;
    const readingBlockResponseProperty = this.createReadingBlockResponseProperty();
    this.setReadingBlockNameResponse(readingBlockResponseProperty);
  }

  /**
   * Assemble the content that is read for this KeyboardHelpSection as a ReadingBlock. When
   * Voicing is enabled, activating the section will read all the content to the user.
   *
   * NOTE: Though this supports dynamic string Properties, this probably doesn't hold up for i18n. That said Voicing
   * does not support translation and that will have to be worked on another time.
   */
  createReadingBlockResponseProperty() {
    const dependencies = [this.headingStringProperty];
    for (let i = 0; i < this.keyboardHelpSectionRows.length; i++) {
      const keyboardHelpSectionRow = this.keyboardHelpSectionRows[i];
      if (isTReadOnlyProperty(keyboardHelpSectionRow.readingBlockContent)) {
        dependencies.push(keyboardHelpSectionRow.readingBlockContent);
      }
    }
    return DerivedProperty.deriveAny(dependencies, () => {
      let readingBlockNameResponse = '';

      // Include the section heading. Headings typically don't have punctuation, but don't use a period because
      // it may appear to the synth as an abbreviation and change the pronunciation.
      readingBlockNameResponse += `${this.headingStringProperty.value}, `;

      // Append the readingBlockNameResponse assigned to each row.
      this.keyboardHelpSectionRows.forEach(row => {
        if (row.readingBlockContent) {
          readingBlockNameResponse += `${ResponsePacket.getResponseText(row.readingBlockContent)} `;
        }
      });
      return readingBlockNameResponse;
    });
  }

  /**
   * Vertically align icons for a number of different KeyboardHelpSections. Useful when two KeyboardHelpSection
   * sections are stacked vertically in a Dialog. Loops through sectionArray and finds the max x value of the left
   * edge of the icon VBox. Then increases spacing of all other content HBoxes accordingly.
   */
  static alignHelpSectionIcons(sectionArray) {
    assert && assert(sectionArray.length > 0, 'Must provide at least one KeyboardHelpSection to align.');

    // left edge of icons farthest to the right in the array of KeyboardHelpSection
    const leftMostKeyboardHelpSection = _.maxBy(sectionArray, section => section.iconVBox.left);
    assert && assert(leftMostKeyboardHelpSection, 'There must be a KeyboardHelpSection if sectionArray has entries.');
    const maxLeftEdge = leftMostKeyboardHelpSection.iconVBox.left;

    // adjust the spacing of all section HBoxes so that they align
    sectionArray.forEach(section => {
      section.contentHBox.spacing = section.contentHBox.spacing + maxLeftEdge - section.iconVBox.left;
    });
  }
}
sceneryPhet.register('KeyboardHelpSection', KeyboardHelpSection);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJTdHJpbmdQcm9wZXJ0eSIsImlzVFJlYWRPbmx5UHJvcGVydHkiLCJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIkhCb3giLCJSZWFkaW5nQmxvY2siLCJSaWNoVGV4dCIsIlZCb3giLCJSZXNwb25zZVBhY2tldCIsIlBoZXRGb250Iiwic2NlbmVyeVBoZXQiLCJERUZBVUxUX0hFQURJTkdfQ09OVEVOVF9TUEFDSU5HIiwiREVGQVVMVF9IRUFESU5HX0ZPTlQiLCJzaXplIiwid2VpZ2h0IiwiREVGQVVMVF9MQUJFTF9JQ09OX1NQQUNJTkciLCJERUZBVUxUX1ZFUlRJQ0FMX0lDT05fU1BBQ0lORyIsIkRFRkFVTFRfTEFCRUxfTUFYX1dJRFRIIiwiREVGQVVMVF9IRUFESU5HX01BWF9XSURUSCIsIktleWJvYXJkSGVscFNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsImhlYWRpbmdTdHJpbmciLCJjb250ZW50IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImhlYWRpbmdPcHRpb25zIiwiZm9udCIsIm1heFdpZHRoIiwidGFnTmFtZSIsImlubmVyQ29udGVudCIsInRleHRNYXhXaWR0aCIsInZCb3hPcHRpb25zIiwiYWxpZ24iLCJzcGFjaW5nIiwiYTExeUNvbnRlbnRUYWdOYW1lIiwiaGVhZGluZ1RleHQiLCJpY29ucyIsImxhYmVscyIsImkiLCJsZW5ndGgiLCJoZWxwU2VjdGlvblJvdyIsImFzc2VydCIsInRleHQiLCJwdXNoIiwiaWNvbiIsImxhYmVsIiwibGFiZWxWQm94IiwiY2hpbGRyZW4iLCJpY29uVkJveCIsImNvbnRlbnRIQm94IiwiaGVhZGluZ1N0cmluZ1Byb3BlcnR5Iiwia2V5Ym9hcmRIZWxwU2VjdGlvblJvd3MiLCJyZWFkaW5nQmxvY2tSZXNwb25zZVByb3BlcnR5IiwiY3JlYXRlUmVhZGluZ0Jsb2NrUmVzcG9uc2VQcm9wZXJ0eSIsInNldFJlYWRpbmdCbG9ja05hbWVSZXNwb25zZSIsImRlcGVuZGVuY2llcyIsImtleWJvYXJkSGVscFNlY3Rpb25Sb3ciLCJyZWFkaW5nQmxvY2tDb250ZW50IiwiZGVyaXZlQW55IiwicmVhZGluZ0Jsb2NrTmFtZVJlc3BvbnNlIiwidmFsdWUiLCJmb3JFYWNoIiwicm93IiwiZ2V0UmVzcG9uc2VUZXh0IiwiYWxpZ25IZWxwU2VjdGlvbkljb25zIiwic2VjdGlvbkFycmF5IiwibGVmdE1vc3RLZXlib2FyZEhlbHBTZWN0aW9uIiwiXyIsIm1heEJ5Iiwic2VjdGlvbiIsImxlZnQiLCJtYXhMZWZ0RWRnZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiS2V5Ym9hcmRIZWxwU2VjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBLZXlib2FyZEhlbHBTZWN0aW9uIGNvbnRhaW5zIGEgc2VjdGlvbiBvZiB0ZXh0IGFuZCBpY29ucyBmb3IgYSBLZXlib2FyZEhlbHBEaWFsb2cuIFR5cGljYWxseSBtdWx0aXBsZSBLZXlib2FyZEhlbHBTZWN0aW9uc1xyXG4gKiBhcmUgYXNzZW1ibGVkIHRvIGRlc2NyaWJlIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgZm9yIHRoZSBzaW0uIFRha2VzIGEgaGVhZGluZyBzdHJpbmcgZm9yIHRoZSBzZWN0aW9uIGxhYmVsIGFuZFxyXG4gKiBhbiBhcnJheSBvZiBjb250ZW50cyBmb3Igcm93cyBvZiBsYWJlbHMgYW5kIGljb25zLlxyXG4gKlxyXG4gKiBUaGlzIHR5cGUgaGFzIG1hbnkgc3RhdGljIGZ1bmN0aW9ucyBmb3IgY3JlYXRpbmcgYW5kIGxheWluZyBvdXQgcm93cyBvZiBjb250ZW50LlxyXG4gKiBEZWZhdWx0IHZhbHVlcyBmb3Igc3BhY2luZyBhbmQgZm9udHMgYXJlIGFsc28gYXZhaWxhYmxlIHRocm91Z2ggc3RhdGljcyBpZiBuZWNlc3NhcnkuXHJcbiAqXHJcbiAqIEhlbHAgc2VjdGlvbnMgYXJlIGFsaWduZWQgd2l0aCB0d28gZ3JvdXBzLiBUZXh0IGxhYmVscyBhcmUgYWxpZ25lZCBpbiBvbmUgVkJveCwgaWNvbnMgYXJlIGFsaWduZWQgaW4gYW5vdGhlci4gVG9cclxuICogc3RydWN0dXJlIHRoZSBhY2Nlc3NpYmxlIGNvbnRlbnQsIHdlIGNob3NlIHRvIGluc3RydW1lbnQgYTExeSBvbiB0aGUgaWNvbnMgaW4gdGhlIHNlY3Rpb24uIFRvIGxhYmVsIGNvbnRlbnRcclxuICogaW4geW91ciBvd24gS2V5Ym9hcmRIZWxwU2VjdGlvbiwgaW5zdHJ1bWVudCB0aGUgaWNvbnMgbm90IHRoZSBsYWJlbCBUZXh0IHNvIGExMXkgY29udGVudCBpcyBwbGFjZWQgY29ycmVjdGx5IGluIHRoZSBET00uXHJcbiAqIEtleWJvYXJkSGVscFNlY3Rpb25zIGFyZSBnZW5lcmFsbHkgYSBsaXN0IG9mIGl0ZW1zLCBzbyBlYWNoIGljb24gaGFzIGEgIHRhZ05hbWUgb2YgJ2xpJyBiZSBkZWZhdWx0LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZ1xyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgU3RyaW5nUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9TdHJpbmdQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSwgeyBpc1RSZWFkT25seVByb3BlcnR5IH0gZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgeyBIQm94LCBOb2RlLCBSZWFkaW5nQmxvY2ssIFJlYWRpbmdCbG9ja09wdGlvbnMsIFJpY2hUZXh0LCBSaWNoVGV4dE9wdGlvbnMsIFZCb3gsIFZCb3hPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFJlc3BvbnNlUGFja2V0IGZyb20gJy4uLy4uLy4uLy4uL3V0dGVyYW5jZS1xdWV1ZS9qcy9SZXNwb25zZVBhY2tldC5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCBzY2VuZXJ5UGhldCBmcm9tICcuLi8uLi9zY2VuZXJ5UGhldC5qcyc7XHJcbmltcG9ydCBLZXlib2FyZEhlbHBTZWN0aW9uUm93IGZyb20gJy4vS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5qcyc7XHJcblxyXG4vLyBoZWFkaW5nIGRlZmF1bHRzXHJcbmNvbnN0IERFRkFVTFRfSEVBRElOR19DT05URU5UX1NQQUNJTkcgPSAxMzsgLy8gc3BhY2luZyBiZXR3ZWVuIGhcclxuY29uc3QgREVGQVVMVF9IRUFESU5HX0ZPTlQgPSBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMTksIHdlaWdodDogJ2JvbGQnIH0gKTtcclxuXHJcbmNvbnN0IERFRkFVTFRfTEFCRUxfSUNPTl9TUEFDSU5HID0gMjg7IC8vIHNwYWNpbmcgYmV0d2VlbiBUZXh0IGxhYmVscyBhbmQgaWNvbnMgaW4gYSBLZXlib2FyZEhlbHBTZWN0aW9uUm93XHJcbmNvbnN0IERFRkFVTFRfVkVSVElDQUxfSUNPTl9TUEFDSU5HID0gMTM7XHJcblxyXG4vLyB0ZXh0IGZvbnRzIGFuZCBtYXggd2lkdGhzXHJcbmNvbnN0IERFRkFVTFRfTEFCRUxfTUFYX1dJRFRIID0gMjM1O1xyXG5jb25zdCBERUZBVUxUX0hFQURJTkdfTUFYX1dJRFRIID0gMzM1O1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gcHJvcGFnYXRlZCB0byB0aGUgVGV4dCBmb3IgdGhlIHNlY3Rpb24gaGVhZGluZ1xyXG4gIGhlYWRpbmdPcHRpb25zPzogUmljaFRleHRPcHRpb25zO1xyXG5cclxuICAvLyBVc2VkIGFzIG1heFdpZHRoIGZvciBlYWNoIEtleWJvYXJkSGVscFNlY3Rpb25Sb3cudGV4dFxyXG4gIHRleHRNYXhXaWR0aD86IG51bWJlcjtcclxuXHJcbiAgLy8gcHJvcGFnYXRlZCB0byBWQm94IGZvciBsYXlvdXRcclxuICB2Qm94T3B0aW9ucz86IFN0cmljdE9taXQ8VkJveE9wdGlvbnMsICd0YWdOYW1lJz47XHJcblxyXG4gIC8vIHRhZyBuYW1lIGZvciB0aGUgZW50aXJlIGNvbnRlbnQsIHVzdWFsbHkgY29udGVudCBpcyBhIGxpc3Qgb2YgaXRlbXNcclxuICBhMTF5Q29udGVudFRhZ05hbWU/OiBzdHJpbmcgfCBudWxsO1xyXG59O1xyXG50eXBlIFBhcmVudE9wdGlvbnMgPSBSZWFkaW5nQmxvY2tPcHRpb25zICYgVkJveE9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlIEtleWJvYXJkSGVscFNlY3Rpb25PcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQYXJlbnRPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5Ym9hcmRIZWxwU2VjdGlvbiBleHRlbmRzIFJlYWRpbmdCbG9jayggVkJveCApIHtcclxuXHJcbiAgLy8gdGhlIHRyYW5zbGF0YWJsZSBoZWFkaW5nIGZvciB0aGlzIHNlY3Rpb25cclxuICBwcml2YXRlIHJlYWRvbmx5IGhlYWRpbmdTdHJpbmdQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPjtcclxuXHJcbiAgLy8gY29sbGVjdGlvbiBvZiBpY29ucyBpbiB0aGlzIHNlY3Rpb25cclxuICBwcml2YXRlIHJlYWRvbmx5IGljb25zOiBOb2RlW107XHJcblxyXG4gIHByaXZhdGUga2V5Ym9hcmRIZWxwU2VjdGlvblJvd3M6IEtleWJvYXJkSGVscFNlY3Rpb25Sb3dbXTtcclxuXHJcbiAgLy8gdXNlZCBieSBtZXRob2RzIHRvIGFkanVzdCBzcGFjaW5nIGlmIG5lY2Vzc2FyeVxyXG4gIHByaXZhdGUgcmVhZG9ubHkgaWNvblZCb3g6IFZCb3g7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBjb250ZW50SEJveDogSEJveDtcclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBERUZBVUxUX1ZFUlRJQ0FMX0lDT05fU1BBQ0lORyA9IERFRkFVTFRfVkVSVElDQUxfSUNPTl9TUEFDSU5HO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gaGVhZGluZ1N0cmluZyAtIHRoZSB0cmFuc2xhdGFibGUgaGVhZGluZyBmb3IgdGhpcyBzZWN0aW9uXHJcbiAgICogQHBhcmFtIGNvbnRlbnQgLSAgaWNvbnMgYW5kIGxhYmVscyBhcmUgZWFjaCBwbGFjZWQgaW4gdGhlaXIgb3duIFZCb3gsIGFuZCB0aGVzZSBsYXlvdXQgYm94ZXMgYXJlIGFsaWduZWRcclxuICAgKiAgIGhvcml6b250YWxseS4gSXQgaXMgYXNzdW1lZCB0aGF0IGxhYmVsIGFuZCBpY29uIGhhdmUgaWRlbnRpY2FsIGJvdW5kcyBzbyB0aGF0IGVhY2ggcm93IG9mIGNvbnRlbnQgY2FuIGJlXHJcbiAgICogICBhbGlnbmVkIGJ5IEtleWJvYXJkSGVscFNlY3Rpb24uIFN0YXRpYyBmdW5jdGlvbnMgaW4gdGhpcyBmaWxlIHVzZSBBbGlnbkdyb3VwIHRvIGFjaGlldmUgdGhpcy4gRm9yIGV4YW1wbGVzLFxyXG4gICAqICAgc2VlIGxhYmVsV2l0aEljb24oKSBhbmQgbGFiZWxXaXRoSWNvbkxpc3QoKS5cclxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGhlYWRpbmdTdHJpbmc6IHN0cmluZyB8IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz4sIGNvbnRlbnQ6IEtleWJvYXJkSGVscFNlY3Rpb25Sb3dbXSxcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9ucz86IEtleWJvYXJkSGVscFNlY3Rpb25PcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8S2V5Ym9hcmRIZWxwU2VjdGlvbk9wdGlvbnMsIFNlbGZPcHRpb25zLCBQYXJlbnRPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBoZWFkaW5nT3B0aW9uczoge1xyXG4gICAgICAgIGZvbnQ6IERFRkFVTFRfSEVBRElOR19GT05ULFxyXG4gICAgICAgIG1heFdpZHRoOiBERUZBVUxUX0hFQURJTkdfTUFYX1dJRFRILFxyXG5cclxuICAgICAgICAvLyBwZG9tXHJcbiAgICAgICAgdGFnTmFtZTogJ2gyJyxcclxuXHJcbiAgICAgICAgaW5uZXJDb250ZW50OiBoZWFkaW5nU3RyaW5nXHJcbiAgICAgIH0sXHJcbiAgICAgIHRleHRNYXhXaWR0aDogREVGQVVMVF9MQUJFTF9NQVhfV0lEVEgsXHJcbiAgICAgIHZCb3hPcHRpb25zOiB7XHJcbiAgICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgICBzcGFjaW5nOiBERUZBVUxUX1ZFUlRJQ0FMX0lDT05fU1BBQ0lOR1xyXG4gICAgICB9LFxyXG4gICAgICBhMTF5Q29udGVudFRhZ05hbWU6ICd1bCcsXHJcblxyXG4gICAgICAvLyBQYXJlbnRPcHRpb25zXHJcbiAgICAgIHNwYWNpbmc6IERFRkFVTFRfSEVBRElOR19DT05URU5UX1NQQUNJTkcsXHJcbiAgICAgIGFsaWduOiAnbGVmdCdcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgaGVhZGluZ1xyXG4gICAgY29uc3QgaGVhZGluZ1RleHQgPSBuZXcgUmljaFRleHQoIGhlYWRpbmdTdHJpbmcsIG9wdGlvbnMuaGVhZGluZ09wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBwbGFjZSBpY29ucyBpbiBsYWJlbHMgaW4gdW5pcXVlIGxheW91dCBib3hlcyBmb3IgYWxpZ25tZW50XHJcbiAgICBjb25zdCBpY29ucyA9IFtdO1xyXG4gICAgY29uc3QgbGFiZWxzID0gW107XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBjb250ZW50Lmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCBoZWxwU2VjdGlvblJvdyA9IGNvbnRlbnRbIGkgXTtcclxuXHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGhlbHBTZWN0aW9uUm93LnRleHQubWF4V2lkdGggPT09IG51bGwsICdLZXlib2FyZEhlbHBTZWN0aW9uIHNldHMgbWF4V2lkdGggZm9yIGNoaWxkcmVuJyApO1xyXG4gICAgICBoZWxwU2VjdGlvblJvdy50ZXh0Lm1heFdpZHRoID0gb3B0aW9ucy50ZXh0TWF4V2lkdGg7XHJcblxyXG4gICAgICBpY29ucy5wdXNoKCBoZWxwU2VjdGlvblJvdy5pY29uICk7XHJcbiAgICAgIGxhYmVscy5wdXNoKCBoZWxwU2VjdGlvblJvdy5sYWJlbCApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBhcmVudCBmb3IgYWxsIGxhYmVsc1xyXG4gICAgY29uc3QgbGFiZWxWQm94ID0gbmV3IFZCb3goIGNvbWJpbmVPcHRpb25zPFZCb3hPcHRpb25zPigge1xyXG4gICAgICBjaGlsZHJlbjogbGFiZWxzXHJcbiAgICB9LCBvcHRpb25zLnZCb3hPcHRpb25zICkgKTtcclxuXHJcbiAgICAvLyBwYXJlbnQgZm9yIGFsbCBpY29uc1xyXG4gICAgY29uc3QgaWNvblZCb3ggPSBuZXcgVkJveCggY29tYmluZU9wdGlvbnM8VkJveE9wdGlvbnM+KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBpY29ucyxcclxuXHJcbiAgICAgIC8vIHBkb21cclxuICAgICAgdGFnTmFtZTogb3B0aW9ucy5hMTF5Q29udGVudFRhZ05hbWVcclxuICAgIH0sIG9wdGlvbnMudkJveE9wdGlvbnMgKSApO1xyXG5cclxuICAgIC8vIGxhYmVscyBhbmQgaWNvbnMgaG9yaXpvbnRhbGx5IGFsaWduZWRcclxuICAgIGNvbnN0IGNvbnRlbnRIQm94ID0gbmV3IEhCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgbGFiZWxWQm94LCBpY29uVkJveCBdLFxyXG4gICAgICBzcGFjaW5nOiBERUZBVUxUX0xBQkVMX0lDT05fU1BBQ0lOR1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGhlYWRpbmcgYW5kIGNvbnRlbnQgYWxpZ25lZCBpbiBhIFZCb3hcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmNoaWxkcmVuLCAnS2V5Ym9hcmRIZWxwU2VjdGlvbiBzZXRzIGNoaWxkcmVuJyApO1xyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgaGVhZGluZ1RleHQsIGNvbnRlbnRIQm94IF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmhlYWRpbmdTdHJpbmdQcm9wZXJ0eSA9ICggdHlwZW9mIGhlYWRpbmdTdHJpbmcgPT09ICdzdHJpbmcnICkgPyBuZXcgU3RyaW5nUHJvcGVydHkoIGhlYWRpbmdTdHJpbmcgKSA6IGhlYWRpbmdTdHJpbmc7XHJcbiAgICB0aGlzLmljb25zID0gaWNvbnM7XHJcbiAgICB0aGlzLmljb25WQm94ID0gaWNvblZCb3g7XHJcbiAgICB0aGlzLmNvbnRlbnRIQm94ID0gY29udGVudEhCb3g7XHJcbiAgICB0aGlzLmtleWJvYXJkSGVscFNlY3Rpb25Sb3dzID0gY29udGVudDtcclxuXHJcbiAgICBjb25zdCByZWFkaW5nQmxvY2tSZXNwb25zZVByb3BlcnR5ID0gdGhpcy5jcmVhdGVSZWFkaW5nQmxvY2tSZXNwb25zZVByb3BlcnR5KCk7XHJcbiAgICB0aGlzLnNldFJlYWRpbmdCbG9ja05hbWVSZXNwb25zZSggcmVhZGluZ0Jsb2NrUmVzcG9uc2VQcm9wZXJ0eSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXNzZW1ibGUgdGhlIGNvbnRlbnQgdGhhdCBpcyByZWFkIGZvciB0aGlzIEtleWJvYXJkSGVscFNlY3Rpb24gYXMgYSBSZWFkaW5nQmxvY2suIFdoZW5cclxuICAgKiBWb2ljaW5nIGlzIGVuYWJsZWQsIGFjdGl2YXRpbmcgdGhlIHNlY3Rpb24gd2lsbCByZWFkIGFsbCB0aGUgY29udGVudCB0byB0aGUgdXNlci5cclxuICAgKlxyXG4gICAqIE5PVEU6IFRob3VnaCB0aGlzIHN1cHBvcnRzIGR5bmFtaWMgc3RyaW5nIFByb3BlcnRpZXMsIHRoaXMgcHJvYmFibHkgZG9lc24ndCBob2xkIHVwIGZvciBpMThuLiBUaGF0IHNhaWQgVm9pY2luZ1xyXG4gICAqIGRvZXMgbm90IHN1cHBvcnQgdHJhbnNsYXRpb24gYW5kIHRoYXQgd2lsbCBoYXZlIHRvIGJlIHdvcmtlZCBvbiBhbm90aGVyIHRpbWUuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVSZWFkaW5nQmxvY2tSZXNwb25zZVByb3BlcnR5KCk6IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz4ge1xyXG5cclxuICAgIGNvbnN0IGRlcGVuZGVuY2llczogVFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj5bXSA9IFsgdGhpcy5oZWFkaW5nU3RyaW5nUHJvcGVydHkgXTtcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMua2V5Ym9hcmRIZWxwU2VjdGlvblJvd3MubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IGtleWJvYXJkSGVscFNlY3Rpb25Sb3cgPSB0aGlzLmtleWJvYXJkSGVscFNlY3Rpb25Sb3dzWyBpIF07XHJcblxyXG4gICAgICBpZiAoIGlzVFJlYWRPbmx5UHJvcGVydHkoIGtleWJvYXJkSGVscFNlY3Rpb25Sb3cucmVhZGluZ0Jsb2NrQ29udGVudCApICkge1xyXG4gICAgICAgIGRlcGVuZGVuY2llcy5wdXNoKCBrZXlib2FyZEhlbHBTZWN0aW9uUm93LnJlYWRpbmdCbG9ja0NvbnRlbnQgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBEZXJpdmVkUHJvcGVydHkuZGVyaXZlQW55KCBkZXBlbmRlbmNpZXMsICgpID0+IHtcclxuXHJcbiAgICAgIGxldCByZWFkaW5nQmxvY2tOYW1lUmVzcG9uc2UgPSAnJztcclxuXHJcbiAgICAgIC8vIEluY2x1ZGUgdGhlIHNlY3Rpb24gaGVhZGluZy4gSGVhZGluZ3MgdHlwaWNhbGx5IGRvbid0IGhhdmUgcHVuY3R1YXRpb24sIGJ1dCBkb24ndCB1c2UgYSBwZXJpb2QgYmVjYXVzZVxyXG4gICAgICAvLyBpdCBtYXkgYXBwZWFyIHRvIHRoZSBzeW50aCBhcyBhbiBhYmJyZXZpYXRpb24gYW5kIGNoYW5nZSB0aGUgcHJvbnVuY2lhdGlvbi5cclxuICAgICAgcmVhZGluZ0Jsb2NrTmFtZVJlc3BvbnNlICs9IGAke3RoaXMuaGVhZGluZ1N0cmluZ1Byb3BlcnR5LnZhbHVlfSwgYDtcclxuXHJcbiAgICAgIC8vIEFwcGVuZCB0aGUgcmVhZGluZ0Jsb2NrTmFtZVJlc3BvbnNlIGFzc2lnbmVkIHRvIGVhY2ggcm93LlxyXG4gICAgICB0aGlzLmtleWJvYXJkSGVscFNlY3Rpb25Sb3dzLmZvckVhY2goIHJvdyA9PiB7XHJcbiAgICAgICAgaWYgKCByb3cucmVhZGluZ0Jsb2NrQ29udGVudCApIHtcclxuICAgICAgICAgIHJlYWRpbmdCbG9ja05hbWVSZXNwb25zZSArPSBgJHtSZXNwb25zZVBhY2tldC5nZXRSZXNwb25zZVRleHQoIHJvdy5yZWFkaW5nQmxvY2tDb250ZW50ICl9IGA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICAgIHJldHVybiByZWFkaW5nQmxvY2tOYW1lUmVzcG9uc2U7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWZXJ0aWNhbGx5IGFsaWduIGljb25zIGZvciBhIG51bWJlciBvZiBkaWZmZXJlbnQgS2V5Ym9hcmRIZWxwU2VjdGlvbnMuIFVzZWZ1bCB3aGVuIHR3byBLZXlib2FyZEhlbHBTZWN0aW9uXHJcbiAgICogc2VjdGlvbnMgYXJlIHN0YWNrZWQgdmVydGljYWxseSBpbiBhIERpYWxvZy4gTG9vcHMgdGhyb3VnaCBzZWN0aW9uQXJyYXkgYW5kIGZpbmRzIHRoZSBtYXggeCB2YWx1ZSBvZiB0aGUgbGVmdFxyXG4gICAqIGVkZ2Ugb2YgdGhlIGljb24gVkJveC4gVGhlbiBpbmNyZWFzZXMgc3BhY2luZyBvZiBhbGwgb3RoZXIgY29udGVudCBIQm94ZXMgYWNjb3JkaW5nbHkuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhbGlnbkhlbHBTZWN0aW9uSWNvbnMoIHNlY3Rpb25BcnJheTogS2V5Ym9hcmRIZWxwU2VjdGlvbltdICk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc2VjdGlvbkFycmF5Lmxlbmd0aCA+IDAsICdNdXN0IHByb3ZpZGUgYXQgbGVhc3Qgb25lIEtleWJvYXJkSGVscFNlY3Rpb24gdG8gYWxpZ24uJyApO1xyXG5cclxuICAgIC8vIGxlZnQgZWRnZSBvZiBpY29ucyBmYXJ0aGVzdCB0byB0aGUgcmlnaHQgaW4gdGhlIGFycmF5IG9mIEtleWJvYXJkSGVscFNlY3Rpb25cclxuICAgIGNvbnN0IGxlZnRNb3N0S2V5Ym9hcmRIZWxwU2VjdGlvbiA9IF8ubWF4QnkoIHNlY3Rpb25BcnJheSwgc2VjdGlvbiA9PiBzZWN0aW9uLmljb25WQm94LmxlZnQgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGxlZnRNb3N0S2V5Ym9hcmRIZWxwU2VjdGlvbixcclxuICAgICAgJ1RoZXJlIG11c3QgYmUgYSBLZXlib2FyZEhlbHBTZWN0aW9uIGlmIHNlY3Rpb25BcnJheSBoYXMgZW50cmllcy4nICk7XHJcbiAgICBjb25zdCBtYXhMZWZ0RWRnZSA9IGxlZnRNb3N0S2V5Ym9hcmRIZWxwU2VjdGlvbiEuaWNvblZCb3gubGVmdDtcclxuXHJcbiAgICAvLyBhZGp1c3QgdGhlIHNwYWNpbmcgb2YgYWxsIHNlY3Rpb24gSEJveGVzIHNvIHRoYXQgdGhleSBhbGlnblxyXG4gICAgc2VjdGlvbkFycmF5LmZvckVhY2goIHNlY3Rpb24gPT4ge1xyXG4gICAgICBzZWN0aW9uLmNvbnRlbnRIQm94LnNwYWNpbmcgPSBzZWN0aW9uLmNvbnRlbnRIQm94LnNwYWNpbmcgKyBtYXhMZWZ0RWRnZSAtIHNlY3Rpb24uaWNvblZCb3gubGVmdDtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnS2V5Ym9hcmRIZWxwU2VjdGlvbicsIEtleWJvYXJkSGVscFNlY3Rpb24gKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLGNBQWMsTUFBTSx1Q0FBdUM7QUFDbEUsU0FBNEJDLG1CQUFtQixRQUFRLDBDQUEwQztBQUNqRyxPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBUSx1Q0FBdUM7QUFFakYsU0FBU0MsSUFBSSxFQUFRQyxZQUFZLEVBQXVCQyxRQUFRLEVBQW1CQyxJQUFJLFFBQXFCLG1DQUFtQztBQUMvSSxPQUFPQyxjQUFjLE1BQU0sa0RBQWtEO0FBQzdFLE9BQU9DLFFBQVEsTUFBTSxtQkFBbUI7QUFDeEMsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUc5QztBQUNBLE1BQU1DLCtCQUErQixHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzVDLE1BQU1DLG9CQUFvQixHQUFHLElBQUlILFFBQVEsQ0FBRTtFQUFFSSxJQUFJLEVBQUUsRUFBRTtFQUFFQyxNQUFNLEVBQUU7QUFBTyxDQUFFLENBQUM7QUFFekUsTUFBTUMsMEJBQTBCLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDdkMsTUFBTUMsNkJBQTZCLEdBQUcsRUFBRTs7QUFFeEM7QUFDQSxNQUFNQyx1QkFBdUIsR0FBRyxHQUFHO0FBQ25DLE1BQU1DLHlCQUF5QixHQUFHLEdBQUc7QUFtQnJDLGVBQWUsTUFBTUMsbUJBQW1CLFNBQVNkLFlBQVksQ0FBRUUsSUFBSyxDQUFDLENBQUM7RUFFcEU7O0VBR0E7O0VBS0E7O0VBSUEsT0FBdUJTLDZCQUE2QixHQUFHQSw2QkFBNkI7O0VBRXBGO0FBQ0Y7QUFD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