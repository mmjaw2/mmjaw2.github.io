// Copyright 2019-2023, University of Colorado Boulder

/**
 * Reusable icons to be created for keyboard help shortcuts dialogs.
 * This type is only a collection of static methods, and should not be instantiated.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import { HBox, Node, Text } from '../../../../scenery/js/imports.js';
import PhetFont from '../../PhetFont.js';
import PlusNode from '../../PlusNode.js';
import sceneryPhet from '../../sceneryPhet.js';
import SceneryPhetStrings from '../../SceneryPhetStrings.js';
import ArrowKeyNode from '../ArrowKeyNode.js';
import LetterKeyNode from '../LetterKeyNode.js';
import TextKeyNode from '../TextKeyNode.js';

// constants
const DEFAULT_HORIZONTAL_KEY_SPACING = 1.3;
const OR_TEXT_MAX_WIDTH = 16;
const LABEL_FONT = new PhetFont(16);

// Options for most static methods herein

// Options for the handful of static methods that additionally involve PlusNode

export default class KeyboardHelpIconFactory {
  static DEFAULT_ICON_SPACING = 6.5;
  constructor() {
    assert && assert(false, 'do not construct this, instead use its helper static methods for icon creation');
  }

  /**
   * Horizontal layout of a set of icons, in left-to-right order.
   */
  static iconRow(icons, providedOptions) {
    const options = optionize()({
      spacing: DEFAULT_HORIZONTAL_KEY_SPACING,
      children: icons
    }, providedOptions);
    return new HBox(options);
  }

  /**
   * Two icons with horizontal layout, separated by 'or' text.
   */
  static iconOrIcon(leftIcon, rightIcon, providedOptions) {
    const options = combineOptions({
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING
    }, providedOptions);
    const orText = new Text(SceneryPhetStrings.keyboardHelpDialog.orStringProperty, {
      font: LABEL_FONT,
      maxWidth: OR_TEXT_MAX_WIDTH
    });
    return KeyboardHelpIconFactory.iconRow([new Node({
      children: [leftIcon]
    }), orText, new Node({
      children: [rightIcon]
    })], options);
  }

  /**
   * Two icons with horizontal layout, and separated by '-' text. This is useful for a range, like 0-9.
   */
  static iconToIcon(leftIcon, rightIcon, providedOptions) {
    const options = combineOptions({
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING / 2
    }, providedOptions);
    const hyphenText = new Text(SceneryPhetStrings.keyboardHelpDialog.hyphenStringProperty, {
      font: LABEL_FONT,
      maxWidth: OR_TEXT_MAX_WIDTH
    });
    return KeyboardHelpIconFactory.iconRow([new Node({
      children: [leftIcon]
    }), hyphenText, new Node({
      children: [rightIcon]
    })], options);
  }

  /**
   * Two icons with horizontal layout, separated by '+' text.
   */
  static iconPlusIcon(leftIcon, rightIcon, providedOptions) {
    return KeyboardHelpIconFactory.iconPlusIconRow([leftIcon, rightIcon], providedOptions);
  }

  /**
   * Returns a row of icons separated by '+'. Useful when a keyboard shortcut has multiple modifier keys for one
   * key press listener.
   */
  static iconPlusIconRow(iconList, providedOptions) {
    const options = combineOptions({
      plusIconSize: new Dimension2(8, 1.2),
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING
    }, providedOptions);

    // Weave plus icons into the provided array of icons. Like Array.join, but with a new array instead of a string.
    const iconListWithSeparators = [];
    for (let i = 0; i < iconList.length; i++) {
      // Scenery layout controls transforms of children. Since we don't own the iconNode, we have to wrap it in another
      // so that layout will work in cases of DAG.
      iconListWithSeparators.push(new Node({
        children: [iconList[i]]
      }));

      // don't add the separator to the last item
      if (i < iconList.length - 1) {
        iconListWithSeparators.push(new PlusNode({
          size: options.plusIconSize
        }));
      }
    }
    return KeyboardHelpIconFactory.iconRow(iconListWithSeparators, {
      spacing: options.spacing
    });
  }

  /**
   * An icon with horizontal layout in order: shift, plus, and provided icon.
   */
  static shiftPlusIcon(icon, providedOptions) {
    const shiftKeyIcon = TextKeyNode.shift();
    return KeyboardHelpIconFactory.iconPlusIcon(shiftKeyIcon, icon, providedOptions);
  }

  /**
   * An icon with horizontal layout in order: alt, plus, and provided icon.
   */
  static altPlusIcon(icon, providedOptions) {
    const altKeyIcon = TextKeyNode.altOrOption();
    return KeyboardHelpIconFactory.iconPlusIcon(altKeyIcon, icon, providedOptions);
  }

  /**
   * "Space or Enter" icon
   */
  static spaceOrEnter() {
    const spaceKey = TextKeyNode.space();
    const enterKey = TextKeyNode.enter();
    return KeyboardHelpIconFactory.iconOrIcon(spaceKey, enterKey);
  }

  /**
   * An icon with up and down arrows, separated by 'or', in horizontal layout.
   */
  static upOrDown() {
    const upArrowKeyNode = new ArrowKeyNode('up');
    const downArrowKeyNode = new ArrowKeyNode('down');
    return KeyboardHelpIconFactory.iconOrIcon(upArrowKeyNode, downArrowKeyNode);
  }

  /**
   * An icon with up and down arrow keys, in a horizontal layout.
   */
  static wasdRowIcon(providedOptions) {
    const options = optionize()({
      spacing: DEFAULT_HORIZONTAL_KEY_SPACING
    }, providedOptions);
    const WKeyNode = LetterKeyNode.w();
    const AKeyNode = LetterKeyNode.a();
    const SKeyNode = LetterKeyNode.s();
    const DKeyNode = LetterKeyNode.d();

    // Strings are not translated because they map directly to specific key codes.
    const icons = [WKeyNode, AKeyNode, SKeyNode, DKeyNode];
    return KeyboardHelpIconFactory.iconRow(icons, options);
  }

  /**
   * An icon with the 4 arrow keys, in a horizontal layout.
   */
  static arrowKeysRowIcon(providedOptions) {
    const options = optionize()({
      spacing: DEFAULT_HORIZONTAL_KEY_SPACING
    }, providedOptions);

    // order of these icons matches movement with the WASD keys
    const upArrowKeyNode = new ArrowKeyNode('up');
    const leftArrowKeyNode = new ArrowKeyNode('left');
    const downArrowKeyNode = new ArrowKeyNode('down');
    const rightArrowKeyNode = new ArrowKeyNode('right');
    return KeyboardHelpIconFactory.iconRow([upArrowKeyNode, leftArrowKeyNode, downArrowKeyNode, rightArrowKeyNode], options);
  }

  /**
   * An icon with the 4 arrow keys, WASD keys, separated by "or", in horizontal layout.
   */
  static arrowOrWasdKeysRowIcon(providedOptions) {
    const options = optionize()({
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING
    }, providedOptions);
    const arrowKeys = KeyboardHelpIconFactory.arrowKeysRowIcon();
    const wasdKeys = KeyboardHelpIconFactory.wasdRowIcon();
    return KeyboardHelpIconFactory.iconOrIcon(arrowKeys, wasdKeys, options);
  }

  /**
   * An icon with page up/down keys, in horizontal layout.
   */
  static pageUpPageDownRowIcon(providedOptions) {
    const options = optionize()({
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING
    }, providedOptions);
    const pageUpKeyNode = TextKeyNode.pageUp();
    const pageDownKeyNode = TextKeyNode.pageDown();
    const icons = [pageUpKeyNode, pageDownKeyNode];
    return KeyboardHelpIconFactory.iconRow(icons, options);
  }

  /**
   * An icon with up and down arrow keys, in horizontal layout.
   */
  static upDownArrowKeysRowIcon(providedOptions) {
    const upArrowKeyNode = new ArrowKeyNode('up');
    const downArrowKeyNode = new ArrowKeyNode('down');
    return KeyboardHelpIconFactory.iconRow([upArrowKeyNode, downArrowKeyNode], providedOptions);
  }

  /**
   * An icon with left and right arrow keys, in horizontal layout.
   */
  static leftRightArrowKeysRowIcon(providedOptions) {
    const leftArrowKeyNode = new ArrowKeyNode('left');
    const rightArrowKeyNode = new ArrowKeyNode('right');
    return KeyboardHelpIconFactory.iconRow([leftArrowKeyNode, rightArrowKeyNode], providedOptions);
  }
}
assert && assert(Object.keys(KeyboardHelpIconFactory.prototype).length === 0, 'KeyboardHelpIconFactory only has static functions');
sceneryPhet.register('KeyboardHelpIconFactory', KeyboardHelpIconFactory);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJIQm94IiwiTm9kZSIsIlRleHQiLCJQaGV0Rm9udCIsIlBsdXNOb2RlIiwic2NlbmVyeVBoZXQiLCJTY2VuZXJ5UGhldFN0cmluZ3MiLCJBcnJvd0tleU5vZGUiLCJMZXR0ZXJLZXlOb2RlIiwiVGV4dEtleU5vZGUiLCJERUZBVUxUX0hPUklaT05UQUxfS0VZX1NQQUNJTkciLCJPUl9URVhUX01BWF9XSURUSCIsIkxBQkVMX0ZPTlQiLCJLZXlib2FyZEhlbHBJY29uRmFjdG9yeSIsIkRFRkFVTFRfSUNPTl9TUEFDSU5HIiwiY29uc3RydWN0b3IiLCJhc3NlcnQiLCJpY29uUm93IiwiaWNvbnMiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwic3BhY2luZyIsImNoaWxkcmVuIiwiaWNvbk9ySWNvbiIsImxlZnRJY29uIiwicmlnaHRJY29uIiwib3JUZXh0Iiwia2V5Ym9hcmRIZWxwRGlhbG9nIiwib3JTdHJpbmdQcm9wZXJ0eSIsImZvbnQiLCJtYXhXaWR0aCIsImljb25Ub0ljb24iLCJoeXBoZW5UZXh0IiwiaHlwaGVuU3RyaW5nUHJvcGVydHkiLCJpY29uUGx1c0ljb24iLCJpY29uUGx1c0ljb25Sb3ciLCJpY29uTGlzdCIsInBsdXNJY29uU2l6ZSIsImljb25MaXN0V2l0aFNlcGFyYXRvcnMiLCJpIiwibGVuZ3RoIiwicHVzaCIsInNpemUiLCJzaGlmdFBsdXNJY29uIiwiaWNvbiIsInNoaWZ0S2V5SWNvbiIsInNoaWZ0IiwiYWx0UGx1c0ljb24iLCJhbHRLZXlJY29uIiwiYWx0T3JPcHRpb24iLCJzcGFjZU9yRW50ZXIiLCJzcGFjZUtleSIsInNwYWNlIiwiZW50ZXJLZXkiLCJlbnRlciIsInVwT3JEb3duIiwidXBBcnJvd0tleU5vZGUiLCJkb3duQXJyb3dLZXlOb2RlIiwid2FzZFJvd0ljb24iLCJXS2V5Tm9kZSIsInciLCJBS2V5Tm9kZSIsImEiLCJTS2V5Tm9kZSIsInMiLCJES2V5Tm9kZSIsImQiLCJhcnJvd0tleXNSb3dJY29uIiwibGVmdEFycm93S2V5Tm9kZSIsInJpZ2h0QXJyb3dLZXlOb2RlIiwiYXJyb3dPcldhc2RLZXlzUm93SWNvbiIsImFycm93S2V5cyIsIndhc2RLZXlzIiwicGFnZVVwUGFnZURvd25Sb3dJY29uIiwicGFnZVVwS2V5Tm9kZSIsInBhZ2VVcCIsInBhZ2VEb3duS2V5Tm9kZSIsInBhZ2VEb3duIiwidXBEb3duQXJyb3dLZXlzUm93SWNvbiIsImxlZnRSaWdodEFycm93S2V5c1Jvd0ljb24iLCJPYmplY3QiLCJrZXlzIiwicHJvdG90eXBlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJLZXlib2FyZEhlbHBJY29uRmFjdG9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBSZXVzYWJsZSBpY29ucyB0byBiZSBjcmVhdGVkIGZvciBrZXlib2FyZCBoZWxwIHNob3J0Y3V0cyBkaWFsb2dzLlxyXG4gKiBUaGlzIHR5cGUgaXMgb25seSBhIGNvbGxlY3Rpb24gb2Ygc3RhdGljIG1ldGhvZHMsIGFuZCBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZC5cclxuICpcclxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucywgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIEhCb3hPcHRpb25zLCBOb2RlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uL1BoZXRGb250LmpzJztcclxuaW1wb3J0IFBsdXNOb2RlIGZyb20gJy4uLy4uL1BsdXNOb2RlLmpzJztcclxuaW1wb3J0IHNjZW5lcnlQaGV0IGZyb20gJy4uLy4uL3NjZW5lcnlQaGV0LmpzJztcclxuaW1wb3J0IFNjZW5lcnlQaGV0U3RyaW5ncyBmcm9tICcuLi8uLi9TY2VuZXJ5UGhldFN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQXJyb3dLZXlOb2RlIGZyb20gJy4uL0Fycm93S2V5Tm9kZS5qcyc7XHJcbmltcG9ydCBMZXR0ZXJLZXlOb2RlIGZyb20gJy4uL0xldHRlcktleU5vZGUuanMnO1xyXG5pbXBvcnQgVGV4dEtleU5vZGUgZnJvbSAnLi4vVGV4dEtleU5vZGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IERFRkFVTFRfSE9SSVpPTlRBTF9LRVlfU1BBQ0lORyA9IDEuMztcclxuY29uc3QgT1JfVEVYVF9NQVhfV0lEVEggPSAxNjtcclxuY29uc3QgTEFCRUxfRk9OVCA9IG5ldyBQaGV0Rm9udCggMTYgKTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxuLy8gT3B0aW9ucyBmb3IgbW9zdCBzdGF0aWMgbWV0aG9kcyBoZXJlaW5cclxudHlwZSBLZXlib2FyZEhlbHBJY29uRmFjdG9yeU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFN0cmljdE9taXQ8SEJveE9wdGlvbnMsICdjaGlsZHJlbic+O1xyXG5cclxuLy8gT3B0aW9ucyBmb3IgdGhlIGhhbmRmdWwgb2Ygc3RhdGljIG1ldGhvZHMgdGhhdCBhZGRpdGlvbmFsbHkgaW52b2x2ZSBQbHVzTm9kZVxyXG50eXBlIFdpdGhQbHVzSWNvblNlbGZPcHRpb25zID0ge1xyXG4gIHBsdXNJY29uU2l6ZT86IERpbWVuc2lvbjI7XHJcbn07XHJcbnR5cGUgV2l0aFBsdXNJY29uT3B0aW9ucyA9IFdpdGhQbHVzSWNvblNlbGZPcHRpb25zICYgS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2V5Ym9hcmRIZWxwSWNvbkZhY3Rvcnkge1xyXG5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfSUNPTl9TUEFDSU5HID0gNi41O1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2RvIG5vdCBjb25zdHJ1Y3QgdGhpcywgaW5zdGVhZCB1c2UgaXRzIGhlbHBlciBzdGF0aWMgbWV0aG9kcyBmb3IgaWNvbiBjcmVhdGlvbicgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhvcml6b250YWwgbGF5b3V0IG9mIGEgc2V0IG9mIGljb25zLCBpbiBsZWZ0LXRvLXJpZ2h0IG9yZGVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaWNvblJvdyggaWNvbnM6IE5vZGVbXSwgcHJvdmlkZWRPcHRpb25zPzogS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zICk6IE5vZGUge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxLZXlib2FyZEhlbHBJY29uRmFjdG9yeU9wdGlvbnMsIFNlbGZPcHRpb25zLCBIQm94T3B0aW9ucz4oKSgge1xyXG4gICAgICBzcGFjaW5nOiBERUZBVUxUX0hPUklaT05UQUxfS0VZX1NQQUNJTkcsXHJcbiAgICAgIGNoaWxkcmVuOiBpY29uc1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcbiAgICByZXR1cm4gbmV3IEhCb3goIG9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFR3byBpY29ucyB3aXRoIGhvcml6b250YWwgbGF5b3V0LCBzZXBhcmF0ZWQgYnkgJ29yJyB0ZXh0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaWNvbk9ySWNvbiggbGVmdEljb246IE5vZGUsIHJpZ2h0SWNvbjogTm9kZSwgcHJvdmlkZWRPcHRpb25zPzogS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zICk6IE5vZGUge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBjb21iaW5lT3B0aW9uczxLZXlib2FyZEhlbHBJY29uRmFjdG9yeU9wdGlvbnM+KCB7XHJcbiAgICAgIHNwYWNpbmc6IEtleWJvYXJkSGVscEljb25GYWN0b3J5LkRFRkFVTFRfSUNPTl9TUEFDSU5HXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBvclRleHQgPSBuZXcgVGV4dCggU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5vclN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IExBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiBPUl9URVhUX01BWF9XSURUSFxyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5pY29uUm93KCBbIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIGxlZnRJY29uIF0gfSApLCBvclRleHQsXHJcbiAgICAgIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIHJpZ2h0SWNvbiBdIH0gKSBdLCBvcHRpb25zICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUd28gaWNvbnMgd2l0aCBob3Jpem9udGFsIGxheW91dCwgYW5kIHNlcGFyYXRlZCBieSAnLScgdGV4dC4gVGhpcyBpcyB1c2VmdWwgZm9yIGEgcmFuZ2UsIGxpa2UgMC05LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaWNvblRvSWNvbiggbGVmdEljb246IE5vZGUsIHJpZ2h0SWNvbjogTm9kZSwgcHJvdmlkZWRPcHRpb25zPzogS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zICk6IE5vZGUge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBjb21iaW5lT3B0aW9uczxLZXlib2FyZEhlbHBJY29uRmFjdG9yeU9wdGlvbnM+KCB7XHJcbiAgICAgIHNwYWNpbmc6IEtleWJvYXJkSGVscEljb25GYWN0b3J5LkRFRkFVTFRfSUNPTl9TUEFDSU5HIC8gMlxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgaHlwaGVuVGV4dCA9IG5ldyBUZXh0KCBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLmh5cGhlblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IExBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiBPUl9URVhUX01BWF9XSURUSFxyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5pY29uUm93KCBbIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIGxlZnRJY29uIF0gfSApLCBoeXBoZW5UZXh0LCBuZXcgTm9kZSggeyBjaGlsZHJlbjogWyByaWdodEljb24gXSB9ICkgXSwgb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHdvIGljb25zIHdpdGggaG9yaXpvbnRhbCBsYXlvdXQsIHNlcGFyYXRlZCBieSAnKycgdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGljb25QbHVzSWNvbiggbGVmdEljb246IE5vZGUsIHJpZ2h0SWNvbjogTm9kZSwgcHJvdmlkZWRPcHRpb25zPzogV2l0aFBsdXNJY29uT3B0aW9ucyApOiBOb2RlIHtcclxuICAgIHJldHVybiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5pY29uUGx1c0ljb25Sb3coIFsgbGVmdEljb24sIHJpZ2h0SWNvbiBdLCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSByb3cgb2YgaWNvbnMgc2VwYXJhdGVkIGJ5ICcrJy4gVXNlZnVsIHdoZW4gYSBrZXlib2FyZCBzaG9ydGN1dCBoYXMgbXVsdGlwbGUgbW9kaWZpZXIga2V5cyBmb3Igb25lXHJcbiAgICoga2V5IHByZXNzIGxpc3RlbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaWNvblBsdXNJY29uUm93KCBpY29uTGlzdDogTm9kZVtdLCBwcm92aWRlZE9wdGlvbnM/OiBXaXRoUGx1c0ljb25PcHRpb25zICk6IE5vZGUge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbWJpbmVPcHRpb25zPFdpdGhQbHVzSWNvbk9wdGlvbnM+KCB7XHJcbiAgICAgIHBsdXNJY29uU2l6ZTogbmV3IERpbWVuc2lvbjIoIDgsIDEuMiApLFxyXG4gICAgICBzcGFjaW5nOiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5ERUZBVUxUX0lDT05fU1BBQ0lOR1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gV2VhdmUgcGx1cyBpY29ucyBpbnRvIHRoZSBwcm92aWRlZCBhcnJheSBvZiBpY29ucy4gTGlrZSBBcnJheS5qb2luLCBidXQgd2l0aCBhIG5ldyBhcnJheSBpbnN0ZWFkIG9mIGEgc3RyaW5nLlxyXG4gICAgY29uc3QgaWNvbkxpc3RXaXRoU2VwYXJhdG9ycyA9IFtdO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgaWNvbkxpc3QubGVuZ3RoOyBpKysgKSB7XHJcblxyXG4gICAgICAvLyBTY2VuZXJ5IGxheW91dCBjb250cm9scyB0cmFuc2Zvcm1zIG9mIGNoaWxkcmVuLiBTaW5jZSB3ZSBkb24ndCBvd24gdGhlIGljb25Ob2RlLCB3ZSBoYXZlIHRvIHdyYXAgaXQgaW4gYW5vdGhlclxyXG4gICAgICAvLyBzbyB0aGF0IGxheW91dCB3aWxsIHdvcmsgaW4gY2FzZXMgb2YgREFHLlxyXG4gICAgICBpY29uTGlzdFdpdGhTZXBhcmF0b3JzLnB1c2goXHJcbiAgICAgICAgbmV3IE5vZGUoIHtcclxuICAgICAgICAgIGNoaWxkcmVuOiBbIGljb25MaXN0WyBpIF0gXVxyXG4gICAgICAgIH0gKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gZG9uJ3QgYWRkIHRoZSBzZXBhcmF0b3IgdG8gdGhlIGxhc3QgaXRlbVxyXG4gICAgICBpZiAoIGkgPCBpY29uTGlzdC5sZW5ndGggLSAxICkge1xyXG4gICAgICAgIGljb25MaXN0V2l0aFNlcGFyYXRvcnMucHVzaCggbmV3IFBsdXNOb2RlKCB7XHJcbiAgICAgICAgICBzaXplOiBvcHRpb25zLnBsdXNJY29uU2l6ZVxyXG4gICAgICAgIH0gKSApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIEtleWJvYXJkSGVscEljb25GYWN0b3J5Lmljb25Sb3coIGljb25MaXN0V2l0aFNlcGFyYXRvcnMsIHtcclxuICAgICAgc3BhY2luZzogb3B0aW9ucy5zcGFjaW5nXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbiBpY29uIHdpdGggaG9yaXpvbnRhbCBsYXlvdXQgaW4gb3JkZXI6IHNoaWZ0LCBwbHVzLCBhbmQgcHJvdmlkZWQgaWNvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHNoaWZ0UGx1c0ljb24oIGljb246IE5vZGUsIHByb3ZpZGVkT3B0aW9ucz86IFdpdGhQbHVzSWNvbk9wdGlvbnMgKTogTm9kZSB7XHJcbiAgICBjb25zdCBzaGlmdEtleUljb24gPSBUZXh0S2V5Tm9kZS5zaGlmdCgpO1xyXG4gICAgcmV0dXJuIEtleWJvYXJkSGVscEljb25GYWN0b3J5Lmljb25QbHVzSWNvbiggc2hpZnRLZXlJY29uLCBpY29uLCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGljb24gd2l0aCBob3Jpem9udGFsIGxheW91dCBpbiBvcmRlcjogYWx0LCBwbHVzLCBhbmQgcHJvdmlkZWQgaWNvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFsdFBsdXNJY29uKCBpY29uOiBOb2RlLCBwcm92aWRlZE9wdGlvbnM/OiBXaXRoUGx1c0ljb25PcHRpb25zICk6IE5vZGUge1xyXG4gICAgY29uc3QgYWx0S2V5SWNvbiA9IFRleHRLZXlOb2RlLmFsdE9yT3B0aW9uKCk7XHJcbiAgICByZXR1cm4gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuaWNvblBsdXNJY29uKCBhbHRLZXlJY29uLCBpY29uLCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFwiU3BhY2Ugb3IgRW50ZXJcIiBpY29uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBzcGFjZU9yRW50ZXIoKTogTm9kZSB7XHJcbiAgICBjb25zdCBzcGFjZUtleSA9IFRleHRLZXlOb2RlLnNwYWNlKCk7XHJcbiAgICBjb25zdCBlbnRlcktleSA9IFRleHRLZXlOb2RlLmVudGVyKCk7XHJcbiAgICByZXR1cm4gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuaWNvbk9ySWNvbiggc3BhY2VLZXksIGVudGVyS2V5ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbiBpY29uIHdpdGggdXAgYW5kIGRvd24gYXJyb3dzLCBzZXBhcmF0ZWQgYnkgJ29yJywgaW4gaG9yaXpvbnRhbCBsYXlvdXQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyB1cE9yRG93bigpOiBOb2RlIHtcclxuICAgIGNvbnN0IHVwQXJyb3dLZXlOb2RlID0gbmV3IEFycm93S2V5Tm9kZSggJ3VwJyApO1xyXG4gICAgY29uc3QgZG93bkFycm93S2V5Tm9kZSA9IG5ldyBBcnJvd0tleU5vZGUoICdkb3duJyApO1xyXG4gICAgcmV0dXJuIEtleWJvYXJkSGVscEljb25GYWN0b3J5Lmljb25Pckljb24oIHVwQXJyb3dLZXlOb2RlLCBkb3duQXJyb3dLZXlOb2RlICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbiBpY29uIHdpdGggdXAgYW5kIGRvd24gYXJyb3cga2V5cywgaW4gYSBob3Jpem9udGFsIGxheW91dC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHdhc2RSb3dJY29uKCBwcm92aWRlZE9wdGlvbnM/OiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeU9wdGlvbnMgKTogTm9kZSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxLZXlib2FyZEhlbHBJY29uRmFjdG9yeU9wdGlvbnMsIFNlbGZPcHRpb25zLCBIQm94T3B0aW9ucz4oKSgge1xyXG4gICAgICBzcGFjaW5nOiBERUZBVUxUX0hPUklaT05UQUxfS0VZX1NQQUNJTkdcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IFdLZXlOb2RlID0gTGV0dGVyS2V5Tm9kZS53KCk7XHJcbiAgICBjb25zdCBBS2V5Tm9kZSA9IExldHRlcktleU5vZGUuYSgpO1xyXG4gICAgY29uc3QgU0tleU5vZGUgPSBMZXR0ZXJLZXlOb2RlLnMoKTtcclxuICAgIGNvbnN0IERLZXlOb2RlID0gTGV0dGVyS2V5Tm9kZS5kKCk7XHJcblxyXG4gICAgLy8gU3RyaW5ncyBhcmUgbm90IHRyYW5zbGF0ZWQgYmVjYXVzZSB0aGV5IG1hcCBkaXJlY3RseSB0byBzcGVjaWZpYyBrZXkgY29kZXMuXHJcbiAgICBjb25zdCBpY29ucyA9IFsgV0tleU5vZGUsIEFLZXlOb2RlLCBTS2V5Tm9kZSwgREtleU5vZGUgXTtcclxuXHJcbiAgICByZXR1cm4gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuaWNvblJvdyggaWNvbnMsIG9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGljb24gd2l0aCB0aGUgNCBhcnJvdyBrZXlzLCBpbiBhIGhvcml6b250YWwgbGF5b3V0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXJyb3dLZXlzUm93SWNvbiggcHJvdmlkZWRPcHRpb25zPzogS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zICk6IE5vZGUge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8S2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zLCBTZWxmT3B0aW9ucywgSEJveE9wdGlvbnM+KCkoIHtcclxuICAgICAgc3BhY2luZzogREVGQVVMVF9IT1JJWk9OVEFMX0tFWV9TUEFDSU5HXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBvcmRlciBvZiB0aGVzZSBpY29ucyBtYXRjaGVzIG1vdmVtZW50IHdpdGggdGhlIFdBU0Qga2V5c1xyXG4gICAgY29uc3QgdXBBcnJvd0tleU5vZGUgPSBuZXcgQXJyb3dLZXlOb2RlKCAndXAnICk7XHJcbiAgICBjb25zdCBsZWZ0QXJyb3dLZXlOb2RlID0gbmV3IEFycm93S2V5Tm9kZSggJ2xlZnQnICk7XHJcbiAgICBjb25zdCBkb3duQXJyb3dLZXlOb2RlID0gbmV3IEFycm93S2V5Tm9kZSggJ2Rvd24nICk7XHJcbiAgICBjb25zdCByaWdodEFycm93S2V5Tm9kZSA9IG5ldyBBcnJvd0tleU5vZGUoICdyaWdodCcgKTtcclxuICAgIHJldHVybiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5pY29uUm93KCBbIHVwQXJyb3dLZXlOb2RlLCBsZWZ0QXJyb3dLZXlOb2RlLCBkb3duQXJyb3dLZXlOb2RlLCByaWdodEFycm93S2V5Tm9kZSBdLCBvcHRpb25zICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbiBpY29uIHdpdGggdGhlIDQgYXJyb3cga2V5cywgV0FTRCBrZXlzLCBzZXBhcmF0ZWQgYnkgXCJvclwiLCBpbiBob3Jpem9udGFsIGxheW91dC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFycm93T3JXYXNkS2V5c1Jvd0ljb24oIHByb3ZpZGVkT3B0aW9ucz86IEtleWJvYXJkSGVscEljb25GYWN0b3J5T3B0aW9ucyApOiBOb2RlIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEtleWJvYXJkSGVscEljb25GYWN0b3J5T3B0aW9ucywgU2VsZk9wdGlvbnMsIEhCb3hPcHRpb25zPigpKCB7XHJcbiAgICAgIHNwYWNpbmc6IEtleWJvYXJkSGVscEljb25GYWN0b3J5LkRFRkFVTFRfSUNPTl9TUEFDSU5HXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBhcnJvd0tleXMgPSBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5hcnJvd0tleXNSb3dJY29uKCk7XHJcbiAgICBjb25zdCB3YXNkS2V5cyA9IEtleWJvYXJkSGVscEljb25GYWN0b3J5Lndhc2RSb3dJY29uKCk7XHJcblxyXG4gICAgcmV0dXJuIEtleWJvYXJkSGVscEljb25GYWN0b3J5Lmljb25Pckljb24oIGFycm93S2V5cywgd2FzZEtleXMsIG9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGljb24gd2l0aCBwYWdlIHVwL2Rvd24ga2V5cywgaW4gaG9yaXpvbnRhbCBsYXlvdXQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBwYWdlVXBQYWdlRG93blJvd0ljb24oIHByb3ZpZGVkT3B0aW9ucz86IEtleWJvYXJkSGVscEljb25GYWN0b3J5T3B0aW9ucyApOiBOb2RlIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEtleWJvYXJkSGVscEljb25GYWN0b3J5T3B0aW9ucywgU2VsZk9wdGlvbnMsIEhCb3hPcHRpb25zPigpKCB7XHJcbiAgICAgIHNwYWNpbmc6IEtleWJvYXJkSGVscEljb25GYWN0b3J5LkRFRkFVTFRfSUNPTl9TUEFDSU5HXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBwYWdlVXBLZXlOb2RlID0gVGV4dEtleU5vZGUucGFnZVVwKCk7XHJcbiAgICBjb25zdCBwYWdlRG93bktleU5vZGUgPSBUZXh0S2V5Tm9kZS5wYWdlRG93bigpO1xyXG4gICAgY29uc3QgaWNvbnMgPSBbIHBhZ2VVcEtleU5vZGUsIHBhZ2VEb3duS2V5Tm9kZSBdO1xyXG5cclxuICAgIHJldHVybiBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS5pY29uUm93KCBpY29ucywgb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQW4gaWNvbiB3aXRoIHVwIGFuZCBkb3duIGFycm93IGtleXMsIGluIGhvcml6b250YWwgbGF5b3V0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgdXBEb3duQXJyb3dLZXlzUm93SWNvbiggcHJvdmlkZWRPcHRpb25zPzogS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnlPcHRpb25zICk6IE5vZGUge1xyXG4gICAgY29uc3QgdXBBcnJvd0tleU5vZGUgPSBuZXcgQXJyb3dLZXlOb2RlKCAndXAnICk7XHJcbiAgICBjb25zdCBkb3duQXJyb3dLZXlOb2RlID0gbmV3IEFycm93S2V5Tm9kZSggJ2Rvd24nICk7XHJcbiAgICByZXR1cm4gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuaWNvblJvdyggWyB1cEFycm93S2V5Tm9kZSwgZG93bkFycm93S2V5Tm9kZSBdLCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGljb24gd2l0aCBsZWZ0IGFuZCByaWdodCBhcnJvdyBrZXlzLCBpbiBob3Jpem9udGFsIGxheW91dC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGxlZnRSaWdodEFycm93S2V5c1Jvd0ljb24oIHByb3ZpZGVkT3B0aW9ucz86IEtleWJvYXJkSGVscEljb25GYWN0b3J5T3B0aW9ucyApOiBOb2RlIHtcclxuICAgIGNvbnN0IGxlZnRBcnJvd0tleU5vZGUgPSBuZXcgQXJyb3dLZXlOb2RlKCAnbGVmdCcgKTtcclxuICAgIGNvbnN0IHJpZ2h0QXJyb3dLZXlOb2RlID0gbmV3IEFycm93S2V5Tm9kZSggJ3JpZ2h0JyApO1xyXG4gICAgcmV0dXJuIEtleWJvYXJkSGVscEljb25GYWN0b3J5Lmljb25Sb3coIFsgbGVmdEFycm93S2V5Tm9kZSwgcmlnaHRBcnJvd0tleU5vZGUgXSwgcHJvdmlkZWRPcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3NlcnQgJiYgYXNzZXJ0KCBPYmplY3Qua2V5cyggS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkucHJvdG90eXBlICkubGVuZ3RoID09PSAwLFxyXG4gICdLZXlib2FyZEhlbHBJY29uRmFjdG9yeSBvbmx5IGhhcyBzdGF0aWMgZnVuY3Rpb25zJyApO1xyXG5cclxuc2NlbmVyeVBoZXQucmVnaXN0ZXIoICdLZXlib2FyZEhlbHBJY29uRmFjdG9yeScsIEtleWJvYXJkSGVscEljb25GYWN0b3J5ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBMEIsdUNBQXVDO0FBRW5HLFNBQVNDLElBQUksRUFBZUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ2pGLE9BQU9DLFFBQVEsTUFBTSxtQkFBbUI7QUFDeEMsT0FBT0MsUUFBUSxNQUFNLG1CQUFtQjtBQUN4QyxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBQzlDLE9BQU9DLGtCQUFrQixNQUFNLDZCQUE2QjtBQUM1RCxPQUFPQyxZQUFZLE1BQU0sb0JBQW9CO0FBQzdDLE9BQU9DLGFBQWEsTUFBTSxxQkFBcUI7QUFDL0MsT0FBT0MsV0FBVyxNQUFNLG1CQUFtQjs7QUFFM0M7QUFDQSxNQUFNQyw4QkFBOEIsR0FBRyxHQUFHO0FBQzFDLE1BQU1DLGlCQUFpQixHQUFHLEVBQUU7QUFDNUIsTUFBTUMsVUFBVSxHQUFHLElBQUlULFFBQVEsQ0FBRSxFQUFHLENBQUM7O0FBSXJDOztBQUdBOztBQU1BLGVBQWUsTUFBTVUsdUJBQXVCLENBQUM7RUFFM0MsT0FBdUJDLG9CQUFvQixHQUFHLEdBQUc7RUFFMUNDLFdBQVdBLENBQUEsRUFBRztJQUNuQkMsTUFBTSxJQUFJQSxNQUFNLENBQUUsS0FBSyxFQUFFLGdGQUFpRixDQUFDO0VBQzdHOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWNDLE9BQU9BLENBQUVDLEtBQWEsRUFBRUMsZUFBZ0QsRUFBUztJQUM3RixNQUFNQyxPQUFPLEdBQUd0QixTQUFTLENBQTJELENBQUMsQ0FBRTtNQUNyRnVCLE9BQU8sRUFBRVgsOEJBQThCO01BQ3ZDWSxRQUFRLEVBQUVKO0lBQ1osQ0FBQyxFQUFFQyxlQUFnQixDQUFDO0lBQ3BCLE9BQU8sSUFBSW5CLElBQUksQ0FBRW9CLE9BQVEsQ0FBQztFQUM1Qjs7RUFFQTtBQUNGO0FBQ0E7RUFDRSxPQUFjRyxVQUFVQSxDQUFFQyxRQUFjLEVBQUVDLFNBQWUsRUFBRU4sZUFBZ0QsRUFBUztJQUVsSCxNQUFNQyxPQUFPLEdBQUdyQixjQUFjLENBQWtDO01BQzlEc0IsT0FBTyxFQUFFUix1QkFBdUIsQ0FBQ0M7SUFDbkMsQ0FBQyxFQUFFSyxlQUFnQixDQUFDO0lBRXBCLE1BQU1PLE1BQU0sR0FBRyxJQUFJeEIsSUFBSSxDQUFFSSxrQkFBa0IsQ0FBQ3FCLGtCQUFrQixDQUFDQyxnQkFBZ0IsRUFBRTtNQUMvRUMsSUFBSSxFQUFFakIsVUFBVTtNQUNoQmtCLFFBQVEsRUFBRW5CO0lBQ1osQ0FBRSxDQUFDO0lBRUgsT0FBT0UsdUJBQXVCLENBQUNJLE9BQU8sQ0FBRSxDQUFFLElBQUloQixJQUFJLENBQUU7TUFBRXFCLFFBQVEsRUFBRSxDQUFFRSxRQUFRO0lBQUcsQ0FBRSxDQUFDLEVBQUVFLE1BQU0sRUFDdEYsSUFBSXpCLElBQUksQ0FBRTtNQUFFcUIsUUFBUSxFQUFFLENBQUVHLFNBQVM7SUFBRyxDQUFFLENBQUMsQ0FBRSxFQUFFTCxPQUFRLENBQUM7RUFDeEQ7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY1csVUFBVUEsQ0FBRVAsUUFBYyxFQUFFQyxTQUFlLEVBQUVOLGVBQWdELEVBQVM7SUFFbEgsTUFBTUMsT0FBTyxHQUFHckIsY0FBYyxDQUFrQztNQUM5RHNCLE9BQU8sRUFBRVIsdUJBQXVCLENBQUNDLG9CQUFvQixHQUFHO0lBQzFELENBQUMsRUFBRUssZUFBZ0IsQ0FBQztJQUVwQixNQUFNYSxVQUFVLEdBQUcsSUFBSTlCLElBQUksQ0FBRUksa0JBQWtCLENBQUNxQixrQkFBa0IsQ0FBQ00sb0JBQW9CLEVBQUU7TUFDdkZKLElBQUksRUFBRWpCLFVBQVU7TUFDaEJrQixRQUFRLEVBQUVuQjtJQUNaLENBQUUsQ0FBQztJQUVILE9BQU9FLHVCQUF1QixDQUFDSSxPQUFPLENBQUUsQ0FBRSxJQUFJaEIsSUFBSSxDQUFFO01BQUVxQixRQUFRLEVBQUUsQ0FBRUUsUUFBUTtJQUFHLENBQUUsQ0FBQyxFQUFFUSxVQUFVLEVBQUUsSUFBSS9CLElBQUksQ0FBRTtNQUFFcUIsUUFBUSxFQUFFLENBQUVHLFNBQVM7SUFBRyxDQUFFLENBQUMsQ0FBRSxFQUFFTCxPQUFRLENBQUM7RUFDcEo7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY2MsWUFBWUEsQ0FBRVYsUUFBYyxFQUFFQyxTQUFlLEVBQUVOLGVBQXFDLEVBQVM7SUFDekcsT0FBT04sdUJBQXVCLENBQUNzQixlQUFlLENBQUUsQ0FBRVgsUUFBUSxFQUFFQyxTQUFTLENBQUUsRUFBRU4sZUFBZ0IsQ0FBQztFQUM1Rjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNFLE9BQWNnQixlQUFlQSxDQUFFQyxRQUFnQixFQUFFakIsZUFBcUMsRUFBUztJQUM3RixNQUFNQyxPQUFPLEdBQUdyQixjQUFjLENBQXVCO01BQ25Ec0MsWUFBWSxFQUFFLElBQUl4QyxVQUFVLENBQUUsQ0FBQyxFQUFFLEdBQUksQ0FBQztNQUN0Q3dCLE9BQU8sRUFBRVIsdUJBQXVCLENBQUNDO0lBQ25DLENBQUMsRUFBRUssZUFBZ0IsQ0FBQzs7SUFFcEI7SUFDQSxNQUFNbUIsc0JBQXNCLEdBQUcsRUFBRTtJQUNqQyxLQUFNLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0gsUUFBUSxDQUFDSSxNQUFNLEVBQUVELENBQUMsRUFBRSxFQUFHO01BRTFDO01BQ0E7TUFDQUQsc0JBQXNCLENBQUNHLElBQUksQ0FDekIsSUFBSXhDLElBQUksQ0FBRTtRQUNScUIsUUFBUSxFQUFFLENBQUVjLFFBQVEsQ0FBRUcsQ0FBQyxDQUFFO01BQzNCLENBQUUsQ0FDSixDQUFDOztNQUVEO01BQ0EsSUFBS0EsQ0FBQyxHQUFHSCxRQUFRLENBQUNJLE1BQU0sR0FBRyxDQUFDLEVBQUc7UUFDN0JGLHNCQUFzQixDQUFDRyxJQUFJLENBQUUsSUFBSXJDLFFBQVEsQ0FBRTtVQUN6Q3NDLElBQUksRUFBRXRCLE9BQU8sQ0FBQ2lCO1FBQ2hCLENBQUUsQ0FBRSxDQUFDO01BQ1A7SUFDRjtJQUVBLE9BQU94Qix1QkFBdUIsQ0FBQ0ksT0FBTyxDQUFFcUIsc0JBQXNCLEVBQUU7TUFDOURqQixPQUFPLEVBQUVELE9BQU8sQ0FBQ0M7SUFDbkIsQ0FBRSxDQUFDO0VBQ0w7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY3NCLGFBQWFBLENBQUVDLElBQVUsRUFBRXpCLGVBQXFDLEVBQVM7SUFDckYsTUFBTTBCLFlBQVksR0FBR3BDLFdBQVcsQ0FBQ3FDLEtBQUssQ0FBQyxDQUFDO0lBQ3hDLE9BQU9qQyx1QkFBdUIsQ0FBQ3FCLFlBQVksQ0FBRVcsWUFBWSxFQUFFRCxJQUFJLEVBQUV6QixlQUFnQixDQUFDO0VBQ3BGOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWM0QixXQUFXQSxDQUFFSCxJQUFVLEVBQUV6QixlQUFxQyxFQUFTO0lBQ25GLE1BQU02QixVQUFVLEdBQUd2QyxXQUFXLENBQUN3QyxXQUFXLENBQUMsQ0FBQztJQUM1QyxPQUFPcEMsdUJBQXVCLENBQUNxQixZQUFZLENBQUVjLFVBQVUsRUFBRUosSUFBSSxFQUFFekIsZUFBZ0IsQ0FBQztFQUNsRjs7RUFFQTtBQUNGO0FBQ0E7RUFDRSxPQUFjK0IsWUFBWUEsQ0FBQSxFQUFTO0lBQ2pDLE1BQU1DLFFBQVEsR0FBRzFDLFdBQVcsQ0FBQzJDLEtBQUssQ0FBQyxDQUFDO0lBQ3BDLE1BQU1DLFFBQVEsR0FBRzVDLFdBQVcsQ0FBQzZDLEtBQUssQ0FBQyxDQUFDO0lBQ3BDLE9BQU96Qyx1QkFBdUIsQ0FBQ1UsVUFBVSxDQUFFNEIsUUFBUSxFQUFFRSxRQUFTLENBQUM7RUFDakU7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY0UsUUFBUUEsQ0FBQSxFQUFTO0lBQzdCLE1BQU1DLGNBQWMsR0FBRyxJQUFJakQsWUFBWSxDQUFFLElBQUssQ0FBQztJQUMvQyxNQUFNa0QsZ0JBQWdCLEdBQUcsSUFBSWxELFlBQVksQ0FBRSxNQUFPLENBQUM7SUFDbkQsT0FBT00sdUJBQXVCLENBQUNVLFVBQVUsQ0FBRWlDLGNBQWMsRUFBRUMsZ0JBQWlCLENBQUM7RUFDL0U7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY0MsV0FBV0EsQ0FBRXZDLGVBQWdELEVBQVM7SUFFbEYsTUFBTUMsT0FBTyxHQUFHdEIsU0FBUyxDQUEyRCxDQUFDLENBQUU7TUFDckZ1QixPQUFPLEVBQUVYO0lBQ1gsQ0FBQyxFQUFFUyxlQUFnQixDQUFDO0lBRXBCLE1BQU13QyxRQUFRLEdBQUduRCxhQUFhLENBQUNvRCxDQUFDLENBQUMsQ0FBQztJQUNsQyxNQUFNQyxRQUFRLEdBQUdyRCxhQUFhLENBQUNzRCxDQUFDLENBQUMsQ0FBQztJQUNsQyxNQUFNQyxRQUFRLEdBQUd2RCxhQUFhLENBQUN3RCxDQUFDLENBQUMsQ0FBQztJQUNsQyxNQUFNQyxRQUFRLEdBQUd6RCxhQUFhLENBQUMwRCxDQUFDLENBQUMsQ0FBQzs7SUFFbEM7SUFDQSxNQUFNaEQsS0FBSyxHQUFHLENBQUV5QyxRQUFRLEVBQUVFLFFBQVEsRUFBRUUsUUFBUSxFQUFFRSxRQUFRLENBQUU7SUFFeEQsT0FBT3BELHVCQUF1QixDQUFDSSxPQUFPLENBQUVDLEtBQUssRUFBRUUsT0FBUSxDQUFDO0VBQzFEOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWMrQyxnQkFBZ0JBLENBQUVoRCxlQUFnRCxFQUFTO0lBRXZGLE1BQU1DLE9BQU8sR0FBR3RCLFNBQVMsQ0FBMkQsQ0FBQyxDQUFFO01BQ3JGdUIsT0FBTyxFQUFFWDtJQUNYLENBQUMsRUFBRVMsZUFBZ0IsQ0FBQzs7SUFFcEI7SUFDQSxNQUFNcUMsY0FBYyxHQUFHLElBQUlqRCxZQUFZLENBQUUsSUFBSyxDQUFDO0lBQy9DLE1BQU02RCxnQkFBZ0IsR0FBRyxJQUFJN0QsWUFBWSxDQUFFLE1BQU8sQ0FBQztJQUNuRCxNQUFNa0QsZ0JBQWdCLEdBQUcsSUFBSWxELFlBQVksQ0FBRSxNQUFPLENBQUM7SUFDbkQsTUFBTThELGlCQUFpQixHQUFHLElBQUk5RCxZQUFZLENBQUUsT0FBUSxDQUFDO0lBQ3JELE9BQU9NLHVCQUF1QixDQUFDSSxPQUFPLENBQUUsQ0FBRXVDLGNBQWMsRUFBRVksZ0JBQWdCLEVBQUVYLGdCQUFnQixFQUFFWSxpQkFBaUIsQ0FBRSxFQUFFakQsT0FBUSxDQUFDO0VBQzlIOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWNrRCxzQkFBc0JBLENBQUVuRCxlQUFnRCxFQUFTO0lBRTdGLE1BQU1DLE9BQU8sR0FBR3RCLFNBQVMsQ0FBMkQsQ0FBQyxDQUFFO01BQ3JGdUIsT0FBTyxFQUFFUix1QkFBdUIsQ0FBQ0M7SUFDbkMsQ0FBQyxFQUFFSyxlQUFnQixDQUFDO0lBRXBCLE1BQU1vRCxTQUFTLEdBQUcxRCx1QkFBdUIsQ0FBQ3NELGdCQUFnQixDQUFDLENBQUM7SUFDNUQsTUFBTUssUUFBUSxHQUFHM0QsdUJBQXVCLENBQUM2QyxXQUFXLENBQUMsQ0FBQztJQUV0RCxPQUFPN0MsdUJBQXVCLENBQUNVLFVBQVUsQ0FBRWdELFNBQVMsRUFBRUMsUUFBUSxFQUFFcEQsT0FBUSxDQUFDO0VBQzNFOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWNxRCxxQkFBcUJBLENBQUV0RCxlQUFnRCxFQUFTO0lBRTVGLE1BQU1DLE9BQU8sR0FBR3RCLFNBQVMsQ0FBMkQsQ0FBQyxDQUFFO01BQ3JGdUIsT0FBTyxFQUFFUix1QkFBdUIsQ0FBQ0M7SUFDbkMsQ0FBQyxFQUFFSyxlQUFnQixDQUFDO0lBRXBCLE1BQU11RCxhQUFhLEdBQUdqRSxXQUFXLENBQUNrRSxNQUFNLENBQUMsQ0FBQztJQUMxQyxNQUFNQyxlQUFlLEdBQUduRSxXQUFXLENBQUNvRSxRQUFRLENBQUMsQ0FBQztJQUM5QyxNQUFNM0QsS0FBSyxHQUFHLENBQUV3RCxhQUFhLEVBQUVFLGVBQWUsQ0FBRTtJQUVoRCxPQUFPL0QsdUJBQXVCLENBQUNJLE9BQU8sQ0FBRUMsS0FBSyxFQUFFRSxPQUFRLENBQUM7RUFDMUQ7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBYzBELHNCQUFzQkEsQ0FBRTNELGVBQWdELEVBQVM7SUFDN0YsTUFBTXFDLGNBQWMsR0FBRyxJQUFJakQsWUFBWSxDQUFFLElBQUssQ0FBQztJQUMvQyxNQUFNa0QsZ0JBQWdCLEdBQUcsSUFBSWxELFlBQVksQ0FBRSxNQUFPLENBQUM7SUFDbkQsT0FBT00sdUJBQXVCLENBQUNJLE9BQU8sQ0FBRSxDQUFFdUMsY0FBYyxFQUFFQyxnQkFBZ0IsQ0FBRSxFQUFFdEMsZUFBZ0IsQ0FBQztFQUNqRzs7RUFFQTtBQUNGO0FBQ0E7RUFDRSxPQUFjNEQseUJBQXlCQSxDQUFFNUQsZUFBZ0QsRUFBUztJQUNoRyxNQUFNaUQsZ0JBQWdCLEdBQUcsSUFBSTdELFlBQVksQ0FBRSxNQUFPLENBQUM7SUFDbkQsTUFBTThELGlCQUFpQixHQUFHLElBQUk5RCxZQUFZLENBQUUsT0FBUSxDQUFDO0lBQ3JELE9BQU9NLHVCQUF1QixDQUFDSSxPQUFPLENBQUUsQ0FBRW1ELGdCQUFnQixFQUFFQyxpQkFBaUIsQ0FBRSxFQUFFbEQsZUFBZ0IsQ0FBQztFQUNwRztBQUNGO0FBRUFILE1BQU0sSUFBSUEsTUFBTSxDQUFFZ0UsTUFBTSxDQUFDQyxJQUFJLENBQUVwRSx1QkFBdUIsQ0FBQ3FFLFNBQVUsQ0FBQyxDQUFDMUMsTUFBTSxLQUFLLENBQUMsRUFDN0UsbURBQW9ELENBQUM7QUFFdkRuQyxXQUFXLENBQUM4RSxRQUFRLENBQUUseUJBQXlCLEVBQUV0RSx1QkFBd0IsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==