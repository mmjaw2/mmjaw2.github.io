// Copyright 2015-2024, University of Colorado Boulder

/**
 * Displays a Property of type {number} in a background rectangle.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../axon/js/DerivedProperty.js';
import TinyProperty from '../../axon/js/TinyProperty.js';
import Utils from '../../dot/js/Utils.js';
import optionize, { combineOptions } from '../../phet-core/js/optionize.js';
import StringUtils from '../../phetcommon/js/util/StringUtils.js';
import { ManualConstraint, Node, Rectangle, RichText, Text } from '../../scenery/js/imports.js';
import SunConstants from '../../sun/js/SunConstants.js';
import IOType from '../../tandem/js/types/IOType.js';
import MathSymbols from './MathSymbols.js';
import PhetFont from './PhetFont.js';
import sceneryPhet from './sceneryPhet.js';
import Tandem from '../../tandem/js/Tandem.js';
import StringIO from '../../tandem/js/types/StringIO.js';
import Vector2 from '../../dot/js/Vector2.js';

// constants
const DEFAULT_FONT = new PhetFont(20);

// valid values for options.align and options.noValueAlign
const ALIGN_VALUES = ['center', 'left', 'right'];
const DEFAULT_DECIMAL_PLACES = 0;
export default class NumberDisplay extends Node {
  // called by dispose

  /**
   * @param numberProperty
   * @param displayRange - this range, with options.decimals or numberFormatter applied, is used to determine
   *                     - the display width. It is unrelated to the range of numberProperty.
   * @param providedOptions
   */
  constructor(numberProperty, displayRange, providedOptions) {
    const options = optionize()({
      align: 'right',
      valuePattern: SunConstants.VALUE_NAMED_PLACEHOLDER,
      decimalPlaces: DEFAULT_DECIMAL_PLACES,
      numberFormatter: null,
      numberFormatterDependencies: [],
      useRichText: false,
      useFullHeight: false,
      textOptions: {
        font: DEFAULT_FONT,
        fill: 'black',
        maxWidth: null,
        // {number|null} if null, then it will be computed based on displayRange
        phetioReadOnly: true
      },
      xMargin: 8,
      yMargin: 2,
      cornerRadius: 0,
      backgroundFill: 'white',
      backgroundStroke: 'lightGray',
      backgroundLineWidth: 1,
      backgroundLineDash: [],
      minBackgroundWidth: 0,
      noValueString: MathSymbols.NO_VALUE,
      noValueAlign: null,
      noValuePattern: null,
      // phet-io
      tandem: Tandem.OPT_OUT,
      phetioType: NumberDisplay.NumberDisplayIO
    }, providedOptions);

    // valuePattern|decimalPlaces is mutually exclusive with numberFormatter
    if (assert) {
      const numberFormatterProvided = !!options.numberFormatter;
      const decimalPlacesProvided = options.decimalPlaces !== DEFAULT_DECIMAL_PLACES;
      const valuePatternProvided = options.valuePattern !== SunConstants.VALUE_NAMED_PLACEHOLDER;
      const decimalOrValueProvided = decimalPlacesProvided || valuePatternProvided;
      if (numberFormatterProvided || decimalOrValueProvided) {
        assert && assert(numberFormatterProvided !== decimalOrValueProvided, 'options.numberFormatter is mutually exclusive with options.valuePattern and options.decimalPlaces');
      }
    }
    const numberFormatterProperty = new TinyProperty(options.numberFormatter ? options.numberFormatter : value => {
      if (options.decimalPlaces === null) {
        return `${value}`;
      } else {
        return Utils.toFixed(value, options.decimalPlaces);
      }
    });
    assert && assert(!options.hasOwnProperty('unitsNode'), 'unitsNode is not a supported option');

    // Set default alignments and validate
    assert && assert(_.includes(ALIGN_VALUES, options.align), `invalid align: ${options.align}`);
    if (!options.noValueAlign) {
      options.noValueAlign = options.align;
    }
    assert && assert(_.includes(ALIGN_VALUES, options.noValueAlign), `invalid noValueAlign: ${options.noValueAlign}`);
    assert && assert(options.textOptions, 'did you accidentally set textOptions to null?');

    // Support numbered (old-style) placeholder by replacing it with the corresponding named placeholder.
    // See https://github.com/phetsims/scenery-phet/issues/446
    const replaceValuePatternValue = valuePattern => {
      if (valuePattern.includes(SunConstants.VALUE_NUMBERED_PLACEHOLDER)) {
        return StringUtils.format(valuePattern, SunConstants.VALUE_NAMED_PLACEHOLDER);
      } else {
        return valuePattern;
      }
    };
    const valuePatternProperty = typeof options.valuePattern === 'string' ? new TinyProperty(replaceValuePatternValue(options.valuePattern)) : new DerivedProperty([options.valuePattern], replaceValuePatternValue);
    assert && assert(!!phet?.chipper?.queryParameters?.stringTest || valuePatternProperty.value.includes(SunConstants.VALUE_NAMED_PLACEHOLDER), `missing value placeholder in options.valuePattern: ${valuePatternProperty.value}`);

    // Set default and validate
    if (!options.noValuePattern) {
      // So we don't have duplicated Properties in our DerivedProperty (it's not supported by that)
      options.noValuePattern = new DerivedProperty([valuePatternProperty], x => x);
    }
    const noValuePatternProperty = typeof options.noValuePattern === 'string' ? new TinyProperty(options.noValuePattern) : options.noValuePattern;
    assert && assert(!!phet?.chipper?.queryParameters?.stringTest || noValuePatternProperty.value.includes(SunConstants.VALUE_NAMED_PLACEHOLDER), `missing value placeholder in options.noValuePattern: ${noValuePatternProperty.value}`);

    // determine the widest value
    const minStringProperty = DerivedProperty.deriveAny([numberFormatterProperty, ...options.numberFormatterDependencies], () => {
      return valueToString(displayRange.min, options.noValueString, numberFormatterProperty.value);
    });
    const maxStringProperty = DerivedProperty.deriveAny([numberFormatterProperty, ...options.numberFormatterDependencies], () => {
      return valueToString(displayRange.max, options.noValueString, numberFormatterProperty.value);
    });
    const longestStringProperty = new DerivedProperty([valuePatternProperty, minStringProperty, maxStringProperty], (valuePattern, minString, maxString) => {
      return StringUtils.fillIn(valuePattern, {
        value: minString.length > maxString.length ? minString : maxString
      });
    });

    // value
    const ValueTextConstructor = options.useRichText ? RichText : Text;
    const valueTextTandem = options.textOptions.tandem || options.tandem.createTandem('valueText');
    const valueStringProperty = DerivedProperty.deriveAny([numberProperty, noValuePatternProperty, valuePatternProperty, numberFormatterProperty, ...options.numberFormatterDependencies], () => {
      const value = numberProperty.value;
      const noValuePattern = noValuePatternProperty.value;
      const valuePatternValue = valuePatternProperty.value;
      const numberFormatter = numberFormatterProperty.value;
      const valuePattern = value === null && noValuePattern ? noValuePattern : valuePatternValue;
      const stringValue = valueToString(value, options.noValueString, numberFormatter);
      return StringUtils.fillIn(valuePattern, {
        value: stringValue
      });
    }, {
      // These options were copied here when we moved from DerivedStringProperty to DerivedProperty.
      phetioFeatured: true,
      phetioValueType: StringIO,
      tandemNameSuffix: 'StringProperty',
      tandem: valueTextTandem.createTandem(Text.STRING_PROPERTY_TANDEM_NAME)
    });
    const valueTextOptions = combineOptions({
      tandem: valueTextTandem
    }, options.textOptions, {
      maxWidth: null // we are handling maxWidth manually, so we don't want to provide it initially.
    });
    const valueText = new ValueTextConstructor(valueStringProperty, valueTextOptions);
    const originalTextHeight = valueText.height;

    // background rectangle
    const backgroundNode = new Rectangle({
      cornerRadius: options.cornerRadius,
      fill: options.backgroundFill,
      stroke: options.backgroundStroke,
      lineWidth: options.backgroundLineWidth,
      lineDash: options.backgroundLineDash
    });

    // Manually set maxWidth later, adjusting it to the width of the longest string if it's null
    longestStringProperty.link(longestString => {
      const demoText = new ValueTextConstructor(longestString, _.omit(valueTextOptions, 'tandem'));
      valueText.maxWidth = options.textOptions.maxWidth !== null ? options.textOptions.maxWidth : demoText.width !== 0 ? demoText.width : null;
      demoText.maxWidth = valueText.maxWidth;
      backgroundNode.rectWidth = Math.max(options.minBackgroundWidth, demoText.width + 2 * options.xMargin);
      backgroundNode.rectHeight = (options.useFullHeight ? originalTextHeight : demoText.height) + 2 * options.yMargin;
    });

    // Avoid infinite loops like https://github.com/phetsims/axon/issues/447 by applying the maxWidth to a different Node
    // than the one that is used for layout.
    const valueTextContainer = new Node({
      children: [valueText]
    });
    options.children = [backgroundNode, valueTextContainer];
    super();
    this.numberFormatterProperty = numberFormatterProperty;
    this.valueText = valueText;
    this.backgroundNode = backgroundNode;

    // Align the value in the background.
    ManualConstraint.create(this, [valueTextContainer, backgroundNode], (valueTextContainerProxy, backgroundNodeProxy) => {
      // Alignment depends on whether we have a non-null value.
      const align = numberProperty.value === null ? options.noValueAlign : options.align;

      // vertical alignment
      const centerY = backgroundNodeProxy.centerY;

      // horizontal alignment
      if (align === 'center') {
        valueTextContainerProxy.center = new Vector2(backgroundNodeProxy.centerX, centerY);
      } else if (align === 'left') {
        valueTextContainerProxy.leftCenter = new Vector2(backgroundNodeProxy.left + options.xMargin, centerY);
      } else {
        // right
        valueTextContainerProxy.rightCenter = new Vector2(backgroundNodeProxy.right - options.xMargin, centerY);
      }
    });
    this.mutate(options);
    this.disposeNumberDisplay = () => {
      valueStringProperty.dispose();
      valuePatternProperty.dispose();
    };
  }
  dispose() {
    this.disposeNumberDisplay();
    super.dispose();
  }

  /**
   * Sets the number text font.
   */
  setNumberFont(font) {
    this.valueText.font = font;
  }
  set numberFont(value) {
    this.setNumberFont(value);
  }

  /**
   * Sets the number text fill.
   */
  setNumberFill(fill) {
    this.valueText.fill = fill;
  }
  set numberFill(value) {
    this.setNumberFill(value);
  }

  /**
   * Sets the background fill.
   */
  setBackgroundFill(fill) {
    this.backgroundNode.fill = fill;
  }
  set backgroundFill(value) {
    this.setBackgroundFill(value);
  }
  get backgroundFill() {
    return this.getBackgroundFill();
  }

  /**
   * Gets the background fill.
   */
  getBackgroundFill() {
    return this.backgroundNode.fill;
  }

  /**
   * Sets the background stroke.
   */
  setBackgroundStroke(stroke) {
    this.backgroundNode.stroke = stroke;
  }
  set backgroundStroke(value) {
    this.setBackgroundStroke(value);
  }

  /**
   * Get the width of the background.
   */
  getBackgroundWidth() {
    return this.backgroundNode.getRectWidth();
  }

  /**
   * Set the width of the background node.
   */
  setBackgroundWidth(width) {
    this.backgroundNode.setRectWidth(width);
  }
  get backgroundWidth() {
    return this.getBackgroundWidth();
  }
  set backgroundWidth(width) {
    this.setBackgroundWidth(width);
  }
  static NumberDisplayIO = new IOType('NumberDisplayIO', {
    valueType: NumberDisplay,
    supertype: Node.NodeIO,
    documentation: 'A numeric readout with a background'
  });
}
sceneryPhet.register('NumberDisplay', NumberDisplay);

/**
 * Converts a numeric value to a string.
 * @param value
 * @param decimalPlaces - if null, use the full value
 * @param noValueString
 * @param numberFormatter - if provided, function that converts {number} => {string}
 */
const valueToString = (value, noValueString, numberFormatter) => {
  let stringValue = noValueString;
  if (value !== null) {
    stringValue = numberFormatter(value);
  }
  return stringValue;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJUaW55UHJvcGVydHkiLCJVdGlscyIsIm9wdGlvbml6ZSIsImNvbWJpbmVPcHRpb25zIiwiU3RyaW5nVXRpbHMiLCJNYW51YWxDb25zdHJhaW50IiwiTm9kZSIsIlJlY3RhbmdsZSIsIlJpY2hUZXh0IiwiVGV4dCIsIlN1bkNvbnN0YW50cyIsIklPVHlwZSIsIk1hdGhTeW1ib2xzIiwiUGhldEZvbnQiLCJzY2VuZXJ5UGhldCIsIlRhbmRlbSIsIlN0cmluZ0lPIiwiVmVjdG9yMiIsIkRFRkFVTFRfRk9OVCIsIkFMSUdOX1ZBTFVFUyIsIkRFRkFVTFRfREVDSU1BTF9QTEFDRVMiLCJOdW1iZXJEaXNwbGF5IiwiY29uc3RydWN0b3IiLCJudW1iZXJQcm9wZXJ0eSIsImRpc3BsYXlSYW5nZSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJhbGlnbiIsInZhbHVlUGF0dGVybiIsIlZBTFVFX05BTUVEX1BMQUNFSE9MREVSIiwiZGVjaW1hbFBsYWNlcyIsIm51bWJlckZvcm1hdHRlciIsIm51bWJlckZvcm1hdHRlckRlcGVuZGVuY2llcyIsInVzZVJpY2hUZXh0IiwidXNlRnVsbEhlaWdodCIsInRleHRPcHRpb25zIiwiZm9udCIsImZpbGwiLCJtYXhXaWR0aCIsInBoZXRpb1JlYWRPbmx5IiwieE1hcmdpbiIsInlNYXJnaW4iLCJjb3JuZXJSYWRpdXMiLCJiYWNrZ3JvdW5kRmlsbCIsImJhY2tncm91bmRTdHJva2UiLCJiYWNrZ3JvdW5kTGluZVdpZHRoIiwiYmFja2dyb3VuZExpbmVEYXNoIiwibWluQmFja2dyb3VuZFdpZHRoIiwibm9WYWx1ZVN0cmluZyIsIk5PX1ZBTFVFIiwibm9WYWx1ZUFsaWduIiwibm9WYWx1ZVBhdHRlcm4iLCJ0YW5kZW0iLCJPUFRfT1VUIiwicGhldGlvVHlwZSIsIk51bWJlckRpc3BsYXlJTyIsImFzc2VydCIsIm51bWJlckZvcm1hdHRlclByb3ZpZGVkIiwiZGVjaW1hbFBsYWNlc1Byb3ZpZGVkIiwidmFsdWVQYXR0ZXJuUHJvdmlkZWQiLCJkZWNpbWFsT3JWYWx1ZVByb3ZpZGVkIiwibnVtYmVyRm9ybWF0dGVyUHJvcGVydHkiLCJ2YWx1ZSIsInRvRml4ZWQiLCJoYXNPd25Qcm9wZXJ0eSIsIl8iLCJpbmNsdWRlcyIsInJlcGxhY2VWYWx1ZVBhdHRlcm5WYWx1ZSIsIlZBTFVFX05VTUJFUkVEX1BMQUNFSE9MREVSIiwiZm9ybWF0IiwidmFsdWVQYXR0ZXJuUHJvcGVydHkiLCJwaGV0IiwiY2hpcHBlciIsInF1ZXJ5UGFyYW1ldGVycyIsInN0cmluZ1Rlc3QiLCJ4Iiwibm9WYWx1ZVBhdHRlcm5Qcm9wZXJ0eSIsIm1pblN0cmluZ1Byb3BlcnR5IiwiZGVyaXZlQW55IiwidmFsdWVUb1N0cmluZyIsIm1pbiIsIm1heFN0cmluZ1Byb3BlcnR5IiwibWF4IiwibG9uZ2VzdFN0cmluZ1Byb3BlcnR5IiwibWluU3RyaW5nIiwibWF4U3RyaW5nIiwiZmlsbEluIiwibGVuZ3RoIiwiVmFsdWVUZXh0Q29uc3RydWN0b3IiLCJ2YWx1ZVRleHRUYW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJ2YWx1ZVN0cmluZ1Byb3BlcnR5IiwidmFsdWVQYXR0ZXJuVmFsdWUiLCJzdHJpbmdWYWx1ZSIsInBoZXRpb0ZlYXR1cmVkIiwicGhldGlvVmFsdWVUeXBlIiwidGFuZGVtTmFtZVN1ZmZpeCIsIlNUUklOR19QUk9QRVJUWV9UQU5ERU1fTkFNRSIsInZhbHVlVGV4dE9wdGlvbnMiLCJ2YWx1ZVRleHQiLCJvcmlnaW5hbFRleHRIZWlnaHQiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kTm9kZSIsInN0cm9rZSIsImxpbmVXaWR0aCIsImxpbmVEYXNoIiwibGluayIsImxvbmdlc3RTdHJpbmciLCJkZW1vVGV4dCIsIm9taXQiLCJ3aWR0aCIsInJlY3RXaWR0aCIsIk1hdGgiLCJyZWN0SGVpZ2h0IiwidmFsdWVUZXh0Q29udGFpbmVyIiwiY2hpbGRyZW4iLCJjcmVhdGUiLCJ2YWx1ZVRleHRDb250YWluZXJQcm94eSIsImJhY2tncm91bmROb2RlUHJveHkiLCJjZW50ZXJZIiwiY2VudGVyIiwiY2VudGVyWCIsImxlZnRDZW50ZXIiLCJsZWZ0IiwicmlnaHRDZW50ZXIiLCJyaWdodCIsIm11dGF0ZSIsImRpc3Bvc2VOdW1iZXJEaXNwbGF5IiwiZGlzcG9zZSIsInNldE51bWJlckZvbnQiLCJudW1iZXJGb250Iiwic2V0TnVtYmVyRmlsbCIsIm51bWJlckZpbGwiLCJzZXRCYWNrZ3JvdW5kRmlsbCIsImdldEJhY2tncm91bmRGaWxsIiwic2V0QmFja2dyb3VuZFN0cm9rZSIsImdldEJhY2tncm91bmRXaWR0aCIsImdldFJlY3RXaWR0aCIsInNldEJhY2tncm91bmRXaWR0aCIsInNldFJlY3RXaWR0aCIsImJhY2tncm91bmRXaWR0aCIsInZhbHVlVHlwZSIsInN1cGVydHlwZSIsIk5vZGVJTyIsImRvY3VtZW50YXRpb24iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk51bWJlckRpc3BsYXkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYSBQcm9wZXJ0eSBvZiB0eXBlIHtudW1iZXJ9IGluIGEgYmFja2dyb3VuZCByZWN0YW5nbGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUaW55UHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UaW55UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvVFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IHsgRm9udCwgTWFudWFsQ29uc3RyYWludCwgTm9kZSwgTm9kZU9wdGlvbnMsIFJlY3RhbmdsZSwgUmljaFRleHQsIFJpY2hUZXh0T3B0aW9ucywgVGV4dCwgVGV4dE9wdGlvbnMsIFRQYWludCB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBTdW5Db25zdGFudHMgZnJvbSAnLi4vLi4vc3VuL2pzL1N1bkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XHJcbmltcG9ydCBNYXRoU3ltYm9scyBmcm9tICcuL01hdGhTeW1ib2xzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4vUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgc2NlbmVyeVBoZXQgZnJvbSAnLi9zY2VuZXJ5UGhldC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgREVGQVVMVF9GT05UID0gbmV3IFBoZXRGb250KCAyMCApO1xyXG5cclxuLy8gdmFsaWQgdmFsdWVzIGZvciBvcHRpb25zLmFsaWduIGFuZCBvcHRpb25zLm5vVmFsdWVBbGlnblxyXG5jb25zdCBBTElHTl9WQUxVRVMgPSBbICdjZW50ZXInLCAnbGVmdCcsICdyaWdodCcgXSBhcyBjb25zdDtcclxudHlwZSBOdW1iZXJEaXNwbGF5QWxpZ24gPSB0eXBlb2YgQUxJR05fVkFMVUVTW251bWJlcl07XHJcblxyXG5jb25zdCBERUZBVUxUX0RFQ0lNQUxfUExBQ0VTID0gMDtcclxuXHJcbnR5cGUgTnVtYmVyRm9ybWF0dGVyID0gKCBuOiBudW1iZXIgKSA9PiBzdHJpbmc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG5cclxuICBhbGlnbj86IE51bWJlckRpc3BsYXlBbGlnbjtcclxuXHJcbiAgLy8gUGF0dGVybiB1c2VkIHRvIGZvcm1hdCB0aGUgdmFsdWUuXHJcbiAgLy8gTXVzdCBjb250YWluIFN1bkNvbnN0YW50cy5WQUxVRV9OQU1FRF9QTEFDRUhPTERFUiBvciBTdW5Db25zdGFudHMuVkFMVUVfTlVNQkVSRURfUExBQ0VIT0xERVIuXHJcbiAgdmFsdWVQYXR0ZXJuPzogc3RyaW5nIHwgVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPjtcclxuXHJcbiAgLy8gVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byBzaG93LiBJZiBudWxsLCB0aGUgZnVsbCB2YWx1ZSBpcyBkaXNwbGF5ZWQuXHJcbiAgLy8gV2UgYXR0ZW1wdGVkIHRvIGNoYW5nZSB0aGUgZGVmYXVsdCB0byBudWxsLCBidXQgdGhlcmUgd2VyZSB0b28gbWFueSB1c2FnZXMgdGhhdCByZWxpZWQgb24gdGhlIDAgZGVmYXVsdC5cclxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnktcGhldC9pc3N1ZXMvNTExXHJcbiAgZGVjaW1hbFBsYWNlcz86IG51bWJlciB8IG51bGw7XHJcblxyXG4gIC8vIFRha2VzIGEge251bWJlcn0gYW5kIHJldHVybnMgYSB7c3RyaW5nfSBmb3IgZnVsbCBjb250cm9sLiBNdXR1YWxseSBleGNsdXNpdmUgd2l0aCB2YWx1ZVBhdHRlcm4gYW5kXHJcbiAgLy8gZGVjaW1hbFBsYWNlcy4gIE5hbWVkIFwibnVtYmVyRm9ybWF0dGVyXCIgaW5zdGVhZCBvZiBcImZvcm1hdHRlclwiIHRvIGhlbHAgY2xhcmlmeSB0aGF0IGl0IGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAgLy8gbm9WYWx1ZVN0cmluZy9BbGlnbi9QYXR0ZXJuIGRlZmluZWQgYmVsb3cuIFBsZWFzZSBzZWUgYWxzbyBudW1iZXJGb3JtYXR0ZXJEZXBlbmRlbmNpZXNcclxuICBudW1iZXJGb3JtYXR0ZXI/OiAoICggbjogbnVtYmVyICkgPT4gc3RyaW5nICkgfCBudWxsO1xyXG5cclxuICAvLyBJZiB5b3VyIG51bWJlckZvcm1hdHRlciBkZXBlbmRzIG9uIG90aGVyIFByb3BlcnRpZXMsIHlvdSBtdXN0IHNwZWNpZnkgdGhlbSBzbyB0aGF0IHRoZSB0ZXh0IHdpbGwgdXBkYXRlIHdoZW4gdGhvc2VcclxuICAvLyBkZXBlbmRlbmNpZXMgY2hhbmdlLiBZb3UgY2FuIHRlc3QgZm9yIG1pc3NpbmcgZGVwZW5kZW5jaWVzIHdpdGggP3N0cmljdEF4b25EZXBlbmRlbmNpZXM9dHJ1ZVxyXG4gIG51bWJlckZvcm1hdHRlckRlcGVuZGVuY2llcz86IFRSZWFkT25seVByb3BlcnR5PHVua25vd24+W107XHJcblxyXG4gIHVzZVJpY2hUZXh0PzogYm9vbGVhbjtcclxuXHJcbiAgLy8gSWYgc2V0IHRvIHRydWUsIHRoZSBzbWFsbGVyIHRleHQgaGVpZ2h0IChmcm9tIGFwcGx5aW5nIHRoZSBtYXhXaWR0aCkgd2lsbCBOT1QgYmUgdXNlZCwgYW5kIGluc3RlYWRcclxuICAvLyB0aGUgaGVpZ2h0IG9mIHRoZSB0ZXh0IChhcyBpZiB0aGVyZSB3YXMgbm8gbWF4V2lkdGgpIHdpbGwgYmUgdXNlZCBmb3IgbGF5b3V0IGFuZCB0aGUgYmFja2dyb3VuZC5cclxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2RlbnNpdHkvaXNzdWVzLzM0LlxyXG4gIHVzZUZ1bGxIZWlnaHQ/OiBib29sZWFuO1xyXG5cclxuICAvLyAvLyBvcHRpb25zIHBhc3NlZCB0byBUZXh0IG9yIFJpY2hUZXh0IChkZXBlbmRpbmcgb24gdGhlIHZhbHVlIG9mIG9wdGlvbnMudXNlUmljaFRleHQpIHRoYXQgZGlzcGxheXMgdGhlIHZhbHVlXHJcbiAgdGV4dE9wdGlvbnM/OiBUZXh0T3B0aW9ucyB8IFJpY2hUZXh0T3B0aW9ucztcclxuXHJcbiAgeE1hcmdpbj86IG51bWJlcjtcclxuICB5TWFyZ2luPzogbnVtYmVyO1xyXG4gIGNvcm5lclJhZGl1cz86IG51bWJlcjtcclxuICBiYWNrZ3JvdW5kRmlsbD86IFRQYWludDtcclxuICBiYWNrZ3JvdW5kU3Ryb2tlPzogVFBhaW50O1xyXG4gIGJhY2tncm91bmRMaW5lV2lkdGg/OiBudW1iZXI7XHJcbiAgYmFja2dyb3VuZExpbmVEYXNoPzogbnVtYmVyW107XHJcbiAgbWluQmFja2dyb3VuZFdpZHRoPzogbnVtYmVyO1xyXG5cclxuICAvLyBvcHRpb25zIHJlbGF0ZWQgdG8gZGlzcGxheSB3aGVuIG51bWJlclByb3BlcnR5LnZhbHVlID09PSBudWxsXHJcbiAgbm9WYWx1ZVN0cmluZz86IHN0cmluZzsgLy8gZGVmYXVsdCBpcyB0aGUgUGhFVCBzdGFuZGFyZCwgZG8gbm90IG92ZXJyaWRlIGxpZ2h0bHkuXHJcbiAgbm9WYWx1ZUFsaWduPzogTnVtYmVyRGlzcGxheUFsaWduIHwgbnVsbDsgLy8gc2VlIEFMSUdOX1ZBTFVFUy4gSWYgbnVsbCwgZGVmYXVsdHMgdG8gb3B0aW9ucy5hbGlnblxyXG4gIG5vVmFsdWVQYXR0ZXJuPzogc3RyaW5nIHwgVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiB8IG51bGw7IC8vIElmIG51bGwsIGRlZmF1bHRzIHRvIG9wdGlvbnMudmFsdWVQYXR0ZXJuXHJcbn07XHJcbmV4cG9ydCB0eXBlIE51bWJlckRpc3BsYXlPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTdHJpY3RPbWl0PE5vZGVPcHRpb25zLCAnY2hpbGRyZW4nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE51bWJlckRpc3BsYXkgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBudW1iZXJGb3JtYXR0ZXJQcm9wZXJ0eTogVFByb3BlcnR5PE51bWJlckZvcm1hdHRlcj47XHJcbiAgcHJpdmF0ZSByZWFkb25seSB2YWx1ZVRleHQ6IFJpY2hUZXh0IHwgVGV4dDtcclxuICBwcml2YXRlIHJlYWRvbmx5IGJhY2tncm91bmROb2RlOiBSZWN0YW5nbGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlTnVtYmVyRGlzcGxheTogKCkgPT4gdm9pZDsgLy8gY2FsbGVkIGJ5IGRpc3Bvc2VcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIG51bWJlclByb3BlcnR5XHJcbiAgICogQHBhcmFtIGRpc3BsYXlSYW5nZSAtIHRoaXMgcmFuZ2UsIHdpdGggb3B0aW9ucy5kZWNpbWFscyBvciBudW1iZXJGb3JtYXR0ZXIgYXBwbGllZCwgaXMgdXNlZCB0byBkZXRlcm1pbmVcclxuICAgKiAgICAgICAgICAgICAgICAgICAgIC0gdGhlIGRpc3BsYXkgd2lkdGguIEl0IGlzIHVucmVsYXRlZCB0byB0aGUgcmFuZ2Ugb2YgbnVtYmVyUHJvcGVydHkuXHJcbiAgICogQHBhcmFtIHByb3ZpZGVkT3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbnVtYmVyUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PG51bWJlciB8IG51bGw+LCBkaXNwbGF5UmFuZ2U6IFJhbmdlLCBwcm92aWRlZE9wdGlvbnM/OiBOdW1iZXJEaXNwbGF5T3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPE51bWJlckRpc3BsYXlPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuICAgICAgYWxpZ246ICdyaWdodCcsXHJcbiAgICAgIHZhbHVlUGF0dGVybjogU3VuQ29uc3RhbnRzLlZBTFVFX05BTUVEX1BMQUNFSE9MREVSLFxyXG4gICAgICBkZWNpbWFsUGxhY2VzOiBERUZBVUxUX0RFQ0lNQUxfUExBQ0VTLFxyXG4gICAgICBudW1iZXJGb3JtYXR0ZXI6IG51bGwsXHJcbiAgICAgIG51bWJlckZvcm1hdHRlckRlcGVuZGVuY2llczogW10sXHJcbiAgICAgIHVzZVJpY2hUZXh0OiBmYWxzZSxcclxuICAgICAgdXNlRnVsbEhlaWdodDogZmFsc2UsXHJcbiAgICAgIHRleHRPcHRpb25zOiB7XHJcbiAgICAgICAgZm9udDogREVGQVVMVF9GT05ULFxyXG4gICAgICAgIGZpbGw6ICdibGFjaycsXHJcbiAgICAgICAgbWF4V2lkdGg6IG51bGwsIC8vIHtudW1iZXJ8bnVsbH0gaWYgbnVsbCwgdGhlbiBpdCB3aWxsIGJlIGNvbXB1dGVkIGJhc2VkIG9uIGRpc3BsYXlSYW5nZVxyXG4gICAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB4TWFyZ2luOiA4LFxyXG4gICAgICB5TWFyZ2luOiAyLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IDAsXHJcbiAgICAgIGJhY2tncm91bmRGaWxsOiAnd2hpdGUnLFxyXG4gICAgICBiYWNrZ3JvdW5kU3Ryb2tlOiAnbGlnaHRHcmF5JyxcclxuICAgICAgYmFja2dyb3VuZExpbmVXaWR0aDogMSxcclxuICAgICAgYmFja2dyb3VuZExpbmVEYXNoOiBbXSxcclxuICAgICAgbWluQmFja2dyb3VuZFdpZHRoOiAwLFxyXG5cclxuICAgICAgbm9WYWx1ZVN0cmluZzogTWF0aFN5bWJvbHMuTk9fVkFMVUUsXHJcbiAgICAgIG5vVmFsdWVBbGlnbjogbnVsbCxcclxuICAgICAgbm9WYWx1ZVBhdHRlcm46IG51bGwsXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICAgIHBoZXRpb1R5cGU6IE51bWJlckRpc3BsYXkuTnVtYmVyRGlzcGxheUlPXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyB2YWx1ZVBhdHRlcm58ZGVjaW1hbFBsYWNlcyBpcyBtdXR1YWxseSBleGNsdXNpdmUgd2l0aCBudW1iZXJGb3JtYXR0ZXJcclxuICAgIGlmICggYXNzZXJ0ICkge1xyXG4gICAgICBjb25zdCBudW1iZXJGb3JtYXR0ZXJQcm92aWRlZCA9ICEhb3B0aW9ucy5udW1iZXJGb3JtYXR0ZXI7XHJcbiAgICAgIGNvbnN0IGRlY2ltYWxQbGFjZXNQcm92aWRlZCA9IG9wdGlvbnMuZGVjaW1hbFBsYWNlcyAhPT0gREVGQVVMVF9ERUNJTUFMX1BMQUNFUztcclxuICAgICAgY29uc3QgdmFsdWVQYXR0ZXJuUHJvdmlkZWQgPSBvcHRpb25zLnZhbHVlUGF0dGVybiAhPT0gU3VuQ29uc3RhbnRzLlZBTFVFX05BTUVEX1BMQUNFSE9MREVSO1xyXG4gICAgICBjb25zdCBkZWNpbWFsT3JWYWx1ZVByb3ZpZGVkID0gZGVjaW1hbFBsYWNlc1Byb3ZpZGVkIHx8IHZhbHVlUGF0dGVyblByb3ZpZGVkO1xyXG4gICAgICBpZiAoIG51bWJlckZvcm1hdHRlclByb3ZpZGVkIHx8IGRlY2ltYWxPclZhbHVlUHJvdmlkZWQgKSB7XHJcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggbnVtYmVyRm9ybWF0dGVyUHJvdmlkZWQgIT09IGRlY2ltYWxPclZhbHVlUHJvdmlkZWQsXHJcbiAgICAgICAgICAnb3B0aW9ucy5udW1iZXJGb3JtYXR0ZXIgaXMgbXV0dWFsbHkgZXhjbHVzaXZlIHdpdGggb3B0aW9ucy52YWx1ZVBhdHRlcm4gYW5kIG9wdGlvbnMuZGVjaW1hbFBsYWNlcycgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG51bWJlckZvcm1hdHRlclByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggb3B0aW9ucy5udW1iZXJGb3JtYXR0ZXIgPyBvcHRpb25zLm51bWJlckZvcm1hdHRlciA6ICggdmFsdWU6IG51bWJlciApID0+IHtcclxuICAgICAgaWYgKCBvcHRpb25zLmRlY2ltYWxQbGFjZXMgPT09IG51bGwgKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfWA7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLnRvRml4ZWQoIHZhbHVlLCBvcHRpb25zLmRlY2ltYWxQbGFjZXMgKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmhhc093blByb3BlcnR5KCAndW5pdHNOb2RlJyApLCAndW5pdHNOb2RlIGlzIG5vdCBhIHN1cHBvcnRlZCBvcHRpb24nICk7XHJcblxyXG4gICAgLy8gU2V0IGRlZmF1bHQgYWxpZ25tZW50cyBhbmQgdmFsaWRhdGVcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIF8uaW5jbHVkZXMoIEFMSUdOX1ZBTFVFUywgb3B0aW9ucy5hbGlnbiApLCBgaW52YWxpZCBhbGlnbjogJHtvcHRpb25zLmFsaWdufWAgKTtcclxuICAgIGlmICggIW9wdGlvbnMubm9WYWx1ZUFsaWduICkge1xyXG4gICAgICBvcHRpb25zLm5vVmFsdWVBbGlnbiA9IG9wdGlvbnMuYWxpZ247XHJcbiAgICB9XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBfLmluY2x1ZGVzKCBBTElHTl9WQUxVRVMsIG9wdGlvbnMubm9WYWx1ZUFsaWduICksIGBpbnZhbGlkIG5vVmFsdWVBbGlnbjogJHtvcHRpb25zLm5vVmFsdWVBbGlnbn1gICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLnRleHRPcHRpb25zLCAnZGlkIHlvdSBhY2NpZGVudGFsbHkgc2V0IHRleHRPcHRpb25zIHRvIG51bGw/JyApO1xyXG5cclxuICAgIC8vIFN1cHBvcnQgbnVtYmVyZWQgKG9sZC1zdHlsZSkgcGxhY2Vob2xkZXIgYnkgcmVwbGFjaW5nIGl0IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgbmFtZWQgcGxhY2Vob2xkZXIuXHJcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnktcGhldC9pc3N1ZXMvNDQ2XHJcbiAgICBjb25zdCByZXBsYWNlVmFsdWVQYXR0ZXJuVmFsdWUgPSAoIHZhbHVlUGF0dGVybjogc3RyaW5nICkgPT4ge1xyXG4gICAgICBpZiAoIHZhbHVlUGF0dGVybi5pbmNsdWRlcyggU3VuQ29uc3RhbnRzLlZBTFVFX05VTUJFUkVEX1BMQUNFSE9MREVSICkgKSB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLmZvcm1hdCggdmFsdWVQYXR0ZXJuLCBTdW5Db25zdGFudHMuVkFMVUVfTkFNRURfUExBQ0VIT0xERVIgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdmFsdWVQYXR0ZXJuO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHZhbHVlUGF0dGVyblByb3BlcnR5ID0gKCB0eXBlb2Ygb3B0aW9ucy52YWx1ZVBhdHRlcm4gPT09ICdzdHJpbmcnIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgVGlueVByb3BlcnR5KCByZXBsYWNlVmFsdWVQYXR0ZXJuVmFsdWUoIG9wdGlvbnMudmFsdWVQYXR0ZXJuICkgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgb3B0aW9ucy52YWx1ZVBhdHRlcm4gXSwgcmVwbGFjZVZhbHVlUGF0dGVyblZhbHVlICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggISFwaGV0Py5jaGlwcGVyPy5xdWVyeVBhcmFtZXRlcnM/LnN0cmluZ1Rlc3QgfHxcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlUGF0dGVyblByb3BlcnR5LnZhbHVlLmluY2x1ZGVzKCBTdW5Db25zdGFudHMuVkFMVUVfTkFNRURfUExBQ0VIT0xERVIgKSxcclxuICAgICAgYG1pc3NpbmcgdmFsdWUgcGxhY2Vob2xkZXIgaW4gb3B0aW9ucy52YWx1ZVBhdHRlcm46ICR7dmFsdWVQYXR0ZXJuUHJvcGVydHkudmFsdWV9YCApO1xyXG5cclxuICAgIC8vIFNldCBkZWZhdWx0IGFuZCB2YWxpZGF0ZVxyXG4gICAgaWYgKCAhb3B0aW9ucy5ub1ZhbHVlUGF0dGVybiApIHtcclxuICAgICAgLy8gU28gd2UgZG9uJ3QgaGF2ZSBkdXBsaWNhdGVkIFByb3BlcnRpZXMgaW4gb3VyIERlcml2ZWRQcm9wZXJ0eSAoaXQncyBub3Qgc3VwcG9ydGVkIGJ5IHRoYXQpXHJcbiAgICAgIG9wdGlvbnMubm9WYWx1ZVBhdHRlcm4gPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHZhbHVlUGF0dGVyblByb3BlcnR5IF0sIHggPT4geCApO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm9WYWx1ZVBhdHRlcm5Qcm9wZXJ0eSA9IHR5cGVvZiBvcHRpb25zLm5vVmFsdWVQYXR0ZXJuID09PSAnc3RyaW5nJyA/IG5ldyBUaW55UHJvcGVydHkoIG9wdGlvbnMubm9WYWx1ZVBhdHRlcm4gKSA6IG9wdGlvbnMubm9WYWx1ZVBhdHRlcm47XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggISFwaGV0Py5jaGlwcGVyPy5xdWVyeVBhcmFtZXRlcnM/LnN0cmluZ1Rlc3QgfHxcclxuICAgICAgICAgICAgICAgICAgICAgIG5vVmFsdWVQYXR0ZXJuUHJvcGVydHkudmFsdWUuaW5jbHVkZXMoIFN1bkNvbnN0YW50cy5WQUxVRV9OQU1FRF9QTEFDRUhPTERFUiApLFxyXG4gICAgICBgbWlzc2luZyB2YWx1ZSBwbGFjZWhvbGRlciBpbiBvcHRpb25zLm5vVmFsdWVQYXR0ZXJuOiAke25vVmFsdWVQYXR0ZXJuUHJvcGVydHkudmFsdWV9YCApO1xyXG5cclxuICAgIC8vIGRldGVybWluZSB0aGUgd2lkZXN0IHZhbHVlXHJcbiAgICBjb25zdCBtaW5TdHJpbmdQcm9wZXJ0eSA9IERlcml2ZWRQcm9wZXJ0eS5kZXJpdmVBbnkoIFsgbnVtYmVyRm9ybWF0dGVyUHJvcGVydHksIC4uLm9wdGlvbnMubnVtYmVyRm9ybWF0dGVyRGVwZW5kZW5jaWVzIF0sICgpID0+IHtcclxuICAgICAgcmV0dXJuIHZhbHVlVG9TdHJpbmcoIGRpc3BsYXlSYW5nZS5taW4sIG9wdGlvbnMubm9WYWx1ZVN0cmluZywgbnVtYmVyRm9ybWF0dGVyUHJvcGVydHkudmFsdWUgKTtcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IG1heFN0cmluZ1Byb3BlcnR5ID0gRGVyaXZlZFByb3BlcnR5LmRlcml2ZUFueSggWyBudW1iZXJGb3JtYXR0ZXJQcm9wZXJ0eSwgLi4ub3B0aW9ucy5udW1iZXJGb3JtYXR0ZXJEZXBlbmRlbmNpZXMgXSwgKCkgPT4ge1xyXG4gICAgICByZXR1cm4gdmFsdWVUb1N0cmluZyggZGlzcGxheVJhbmdlLm1heCwgb3B0aW9ucy5ub1ZhbHVlU3RyaW5nLCBudW1iZXJGb3JtYXR0ZXJQcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbG9uZ2VzdFN0cmluZ1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggW1xyXG4gICAgICB2YWx1ZVBhdHRlcm5Qcm9wZXJ0eSxcclxuICAgICAgbWluU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIG1heFN0cmluZ1Byb3BlcnR5XHJcbiAgICBdLCAoIHZhbHVlUGF0dGVybiwgbWluU3RyaW5nLCBtYXhTdHJpbmcgKSA9PiB7XHJcbiAgICAgIHJldHVybiBTdHJpbmdVdGlscy5maWxsSW4oIHZhbHVlUGF0dGVybiwge1xyXG4gICAgICAgIHZhbHVlOiAoICggbWluU3RyaW5nLmxlbmd0aCA+IG1heFN0cmluZy5sZW5ndGggKSA/IG1pblN0cmluZyA6IG1heFN0cmluZyApXHJcbiAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyB2YWx1ZVxyXG4gICAgY29uc3QgVmFsdWVUZXh0Q29uc3RydWN0b3IgPSBvcHRpb25zLnVzZVJpY2hUZXh0ID8gUmljaFRleHQgOiBUZXh0O1xyXG4gICAgY29uc3QgdmFsdWVUZXh0VGFuZGVtID0gb3B0aW9ucy50ZXh0T3B0aW9ucy50YW5kZW0gfHwgb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndmFsdWVUZXh0JyApO1xyXG4gICAgY29uc3QgdmFsdWVTdHJpbmdQcm9wZXJ0eSA9IERlcml2ZWRQcm9wZXJ0eS5kZXJpdmVBbnkoXHJcbiAgICAgIFsgbnVtYmVyUHJvcGVydHksIG5vVmFsdWVQYXR0ZXJuUHJvcGVydHksIHZhbHVlUGF0dGVyblByb3BlcnR5LCBudW1iZXJGb3JtYXR0ZXJQcm9wZXJ0eSwgLi4ub3B0aW9ucy5udW1iZXJGb3JtYXR0ZXJEZXBlbmRlbmNpZXMgXSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gbnVtYmVyUHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgY29uc3Qgbm9WYWx1ZVBhdHRlcm4gPSBub1ZhbHVlUGF0dGVyblByb3BlcnR5LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlUGF0dGVyblZhbHVlID0gdmFsdWVQYXR0ZXJuUHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyRm9ybWF0dGVyID0gbnVtYmVyRm9ybWF0dGVyUHJvcGVydHkudmFsdWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHZhbHVlUGF0dGVybiA9ICggdmFsdWUgPT09IG51bGwgJiYgbm9WYWx1ZVBhdHRlcm4gKSA/IG5vVmFsdWVQYXR0ZXJuIDogdmFsdWVQYXR0ZXJuVmFsdWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0cmluZ1ZhbHVlID0gdmFsdWVUb1N0cmluZyggdmFsdWUsIG9wdGlvbnMubm9WYWx1ZVN0cmluZywgbnVtYmVyRm9ybWF0dGVyICk7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLmZpbGxJbiggdmFsdWVQYXR0ZXJuLCB7XHJcbiAgICAgICAgICB2YWx1ZTogc3RyaW5nVmFsdWVcclxuICAgICAgICB9ICk7XHJcbiAgICAgIH0sIHtcclxuXHJcbiAgICAgICAgLy8gVGhlc2Ugb3B0aW9ucyB3ZXJlIGNvcGllZCBoZXJlIHdoZW4gd2UgbW92ZWQgZnJvbSBEZXJpdmVkU3RyaW5nUHJvcGVydHkgdG8gRGVyaXZlZFByb3BlcnR5LlxyXG4gICAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlLFxyXG4gICAgICAgIHBoZXRpb1ZhbHVlVHlwZTogU3RyaW5nSU8sXHJcbiAgICAgICAgdGFuZGVtTmFtZVN1ZmZpeDogJ1N0cmluZ1Byb3BlcnR5JyxcclxuXHJcbiAgICAgICAgdGFuZGVtOiB2YWx1ZVRleHRUYW5kZW0uY3JlYXRlVGFuZGVtKCBUZXh0LlNUUklOR19QUk9QRVJUWV9UQU5ERU1fTkFNRSApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB2YWx1ZVRleHRPcHRpb25zID0gY29tYmluZU9wdGlvbnM8VGV4dE9wdGlvbnMgfCBSaWNoVGV4dE9wdGlvbnM+KCB7XHJcbiAgICAgIHRhbmRlbTogdmFsdWVUZXh0VGFuZGVtXHJcbiAgICB9LCBvcHRpb25zLnRleHRPcHRpb25zLCB7XHJcbiAgICAgIG1heFdpZHRoOiBudWxsIC8vIHdlIGFyZSBoYW5kbGluZyBtYXhXaWR0aCBtYW51YWxseSwgc28gd2UgZG9uJ3Qgd2FudCB0byBwcm92aWRlIGl0IGluaXRpYWxseS5cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB2YWx1ZVRleHQ6IFRleHQgfCBSaWNoVGV4dCA9IG5ldyBWYWx1ZVRleHRDb25zdHJ1Y3RvciggdmFsdWVTdHJpbmdQcm9wZXJ0eSwgdmFsdWVUZXh0T3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IG9yaWdpbmFsVGV4dEhlaWdodCA9IHZhbHVlVGV4dC5oZWlnaHQ7XHJcblxyXG4gICAgLy8gYmFja2dyb3VuZCByZWN0YW5nbGVcclxuICAgIGNvbnN0IGJhY2tncm91bmROb2RlID0gbmV3IFJlY3RhbmdsZSgge1xyXG4gICAgICBjb3JuZXJSYWRpdXM6IG9wdGlvbnMuY29ybmVyUmFkaXVzLFxyXG4gICAgICBmaWxsOiBvcHRpb25zLmJhY2tncm91bmRGaWxsLFxyXG4gICAgICBzdHJva2U6IG9wdGlvbnMuYmFja2dyb3VuZFN0cm9rZSxcclxuICAgICAgbGluZVdpZHRoOiBvcHRpb25zLmJhY2tncm91bmRMaW5lV2lkdGgsXHJcbiAgICAgIGxpbmVEYXNoOiBvcHRpb25zLmJhY2tncm91bmRMaW5lRGFzaFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIE1hbnVhbGx5IHNldCBtYXhXaWR0aCBsYXRlciwgYWRqdXN0aW5nIGl0IHRvIHRoZSB3aWR0aCBvZiB0aGUgbG9uZ2VzdCBzdHJpbmcgaWYgaXQncyBudWxsXHJcbiAgICBsb25nZXN0U3RyaW5nUHJvcGVydHkubGluayggbG9uZ2VzdFN0cmluZyA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbW9UZXh0ID0gbmV3IFZhbHVlVGV4dENvbnN0cnVjdG9yKCBsb25nZXN0U3RyaW5nLCBfLm9taXQoIHZhbHVlVGV4dE9wdGlvbnMsICd0YW5kZW0nICkgKTtcclxuXHJcbiAgICAgIHZhbHVlVGV4dC5tYXhXaWR0aCA9ICggb3B0aW9ucy50ZXh0T3B0aW9ucy5tYXhXaWR0aCAhPT0gbnVsbCApID8gb3B0aW9ucy50ZXh0T3B0aW9ucy5tYXhXaWR0aCEgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoIGRlbW9UZXh0LndpZHRoICE9PSAwICkgPyBkZW1vVGV4dC53aWR0aCA6IG51bGw7XHJcbiAgICAgIGRlbW9UZXh0Lm1heFdpZHRoID0gdmFsdWVUZXh0Lm1heFdpZHRoO1xyXG5cclxuICAgICAgYmFja2dyb3VuZE5vZGUucmVjdFdpZHRoID0gTWF0aC5tYXgoIG9wdGlvbnMubWluQmFja2dyb3VuZFdpZHRoLCBkZW1vVGV4dC53aWR0aCArIDIgKiBvcHRpb25zLnhNYXJnaW4gKTtcclxuICAgICAgYmFja2dyb3VuZE5vZGUucmVjdEhlaWdodCA9ICggb3B0aW9ucy51c2VGdWxsSGVpZ2h0ID8gb3JpZ2luYWxUZXh0SGVpZ2h0IDogZGVtb1RleHQuaGVpZ2h0ICkgKyAyICogb3B0aW9ucy55TWFyZ2luO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEF2b2lkIGluZmluaXRlIGxvb3BzIGxpa2UgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2F4b24vaXNzdWVzLzQ0NyBieSBhcHBseWluZyB0aGUgbWF4V2lkdGggdG8gYSBkaWZmZXJlbnQgTm9kZVxyXG4gICAgLy8gdGhhbiB0aGUgb25lIHRoYXQgaXMgdXNlZCBmb3IgbGF5b3V0LlxyXG4gICAgY29uc3QgdmFsdWVUZXh0Q29udGFpbmVyID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgdmFsdWVUZXh0IF1cclxuICAgIH0gKTtcclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIGJhY2tncm91bmROb2RlLCB2YWx1ZVRleHRDb250YWluZXIgXTtcclxuXHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMubnVtYmVyRm9ybWF0dGVyUHJvcGVydHkgPSBudW1iZXJGb3JtYXR0ZXJQcm9wZXJ0eTtcclxuICAgIHRoaXMudmFsdWVUZXh0ID0gdmFsdWVUZXh0O1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kTm9kZSA9IGJhY2tncm91bmROb2RlO1xyXG5cclxuLy8gQWxpZ24gdGhlIHZhbHVlIGluIHRoZSBiYWNrZ3JvdW5kLlxyXG4gICAgTWFudWFsQ29uc3RyYWludC5jcmVhdGUoIHRoaXMsIFsgdmFsdWVUZXh0Q29udGFpbmVyLCBiYWNrZ3JvdW5kTm9kZSBdLCAoIHZhbHVlVGV4dENvbnRhaW5lclByb3h5LCBiYWNrZ3JvdW5kTm9kZVByb3h5ICkgPT4ge1xyXG5cclxuICAgICAgLy8gQWxpZ25tZW50IGRlcGVuZHMgb24gd2hldGhlciB3ZSBoYXZlIGEgbm9uLW51bGwgdmFsdWUuXHJcbiAgICAgIGNvbnN0IGFsaWduID0gKCBudW1iZXJQcm9wZXJ0eS52YWx1ZSA9PT0gbnVsbCApID8gb3B0aW9ucy5ub1ZhbHVlQWxpZ24gOiBvcHRpb25zLmFsaWduO1xyXG5cclxuICAgICAgLy8gdmVydGljYWwgYWxpZ25tZW50XHJcbiAgICAgIGNvbnN0IGNlbnRlclkgPSBiYWNrZ3JvdW5kTm9kZVByb3h5LmNlbnRlclk7XHJcblxyXG4gICAgICAvLyBob3Jpem9udGFsIGFsaWdubWVudFxyXG4gICAgICBpZiAoIGFsaWduID09PSAnY2VudGVyJyApIHtcclxuICAgICAgICB2YWx1ZVRleHRDb250YWluZXJQcm94eS5jZW50ZXIgPSBuZXcgVmVjdG9yMiggYmFja2dyb3VuZE5vZGVQcm94eS5jZW50ZXJYLCBjZW50ZXJZICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoIGFsaWduID09PSAnbGVmdCcgKSB7XHJcbiAgICAgICAgdmFsdWVUZXh0Q29udGFpbmVyUHJveHkubGVmdENlbnRlciA9IG5ldyBWZWN0b3IyKCBiYWNrZ3JvdW5kTm9kZVByb3h5LmxlZnQgKyBvcHRpb25zLnhNYXJnaW4sIGNlbnRlclkgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHsgLy8gcmlnaHRcclxuICAgICAgICB2YWx1ZVRleHRDb250YWluZXJQcm94eS5yaWdodENlbnRlciA9IG5ldyBWZWN0b3IyKCBiYWNrZ3JvdW5kTm9kZVByb3h5LnJpZ2h0IC0gb3B0aW9ucy54TWFyZ2luLCBjZW50ZXJZICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZU51bWJlckRpc3BsYXkgPSAoKSA9PiB7XHJcbiAgICAgIHZhbHVlU3RyaW5nUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgICB2YWx1ZVBhdHRlcm5Qcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2VOdW1iZXJEaXNwbGF5KCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBudW1iZXIgdGV4dCBmb250LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXROdW1iZXJGb250KCBmb250OiBGb250ICk6IHZvaWQge1xyXG4gICAgdGhpcy52YWx1ZVRleHQuZm9udCA9IGZvbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IG51bWJlckZvbnQoIHZhbHVlOiBGb250ICkgeyB0aGlzLnNldE51bWJlckZvbnQoIHZhbHVlICk7IH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgbnVtYmVyIHRleHQgZmlsbC5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0TnVtYmVyRmlsbCggZmlsbDogVFBhaW50ICk6IHZvaWQge1xyXG4gICAgdGhpcy52YWx1ZVRleHQuZmlsbCA9IGZpbGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IG51bWJlckZpbGwoIHZhbHVlOiBUUGFpbnQgKSB7IHRoaXMuc2V0TnVtYmVyRmlsbCggdmFsdWUgKTsgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBiYWNrZ3JvdW5kIGZpbGwuXHJcbiAgICovXHJcbiAgcHVibGljIHNldEJhY2tncm91bmRGaWxsKCBmaWxsOiBUUGFpbnQgKTogdm9pZCB7XHJcbiAgICB0aGlzLmJhY2tncm91bmROb2RlLmZpbGwgPSBmaWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBiYWNrZ3JvdW5kRmlsbCggdmFsdWU6IFRQYWludCApIHsgdGhpcy5zZXRCYWNrZ3JvdW5kRmlsbCggdmFsdWUgKTsgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGJhY2tncm91bmRGaWxsKCk6IFRQYWludCB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRCYWNrZ3JvdW5kRmlsbCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgYmFja2dyb3VuZCBmaWxsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRCYWNrZ3JvdW5kRmlsbCgpOiBUUGFpbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZE5vZGUuZmlsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGJhY2tncm91bmQgc3Ryb2tlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRCYWNrZ3JvdW5kU3Ryb2tlKCBzdHJva2U6IFRQYWludCApOiB2b2lkIHtcclxuICAgIHRoaXMuYmFja2dyb3VuZE5vZGUuc3Ryb2tlID0gc3Ryb2tlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBiYWNrZ3JvdW5kU3Ryb2tlKCB2YWx1ZTogVFBhaW50ICkgeyB0aGlzLnNldEJhY2tncm91bmRTdHJva2UoIHZhbHVlICk7IH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSB3aWR0aCBvZiB0aGUgYmFja2dyb3VuZC5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0QmFja2dyb3VuZFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kTm9kZS5nZXRSZWN0V2lkdGgoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgd2lkdGggb2YgdGhlIGJhY2tncm91bmQgbm9kZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0QmFja2dyb3VuZFdpZHRoKCB3aWR0aDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kTm9kZS5zZXRSZWN0V2lkdGgoIHdpZHRoICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGJhY2tncm91bmRXaWR0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5nZXRCYWNrZ3JvdW5kV2lkdGgoKTsgfVxyXG5cclxuICBwdWJsaWMgc2V0IGJhY2tncm91bmRXaWR0aCggd2lkdGg6IG51bWJlciApIHsgdGhpcy5zZXRCYWNrZ3JvdW5kV2lkdGgoIHdpZHRoICk7IH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBOdW1iZXJEaXNwbGF5SU8gPSBuZXcgSU9UeXBlKCAnTnVtYmVyRGlzcGxheUlPJywge1xyXG4gICAgdmFsdWVUeXBlOiBOdW1iZXJEaXNwbGF5LFxyXG4gICAgc3VwZXJ0eXBlOiBOb2RlLk5vZGVJTyxcclxuICAgIGRvY3VtZW50YXRpb246ICdBIG51bWVyaWMgcmVhZG91dCB3aXRoIGEgYmFja2dyb3VuZCdcclxuICB9ICk7XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnTnVtYmVyRGlzcGxheScsIE51bWJlckRpc3BsYXkgKTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIG51bWVyaWMgdmFsdWUgdG8gYSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB2YWx1ZVxyXG4gKiBAcGFyYW0gZGVjaW1hbFBsYWNlcyAtIGlmIG51bGwsIHVzZSB0aGUgZnVsbCB2YWx1ZVxyXG4gKiBAcGFyYW0gbm9WYWx1ZVN0cmluZ1xyXG4gKiBAcGFyYW0gbnVtYmVyRm9ybWF0dGVyIC0gaWYgcHJvdmlkZWQsIGZ1bmN0aW9uIHRoYXQgY29udmVydHMge251bWJlcn0gPT4ge3N0cmluZ31cclxuICovXHJcbmNvbnN0IHZhbHVlVG9TdHJpbmcgPSA8UyBleHRlbmRzIG51bWJlciB8IG51bGw+KCB2YWx1ZTogUywgbm9WYWx1ZVN0cmluZzogc3RyaW5nLCBudW1iZXJGb3JtYXR0ZXI6IE51bWJlckZvcm1hdHRlciApOiAoIFMgZXh0ZW5kcyBudWxsID8gKCBzdHJpbmcgfCBudWxsICkgOiBzdHJpbmcgKSA9PiB7XHJcbiAgbGV0IHN0cmluZ1ZhbHVlID0gbm9WYWx1ZVN0cmluZztcclxuICBpZiAoIHZhbHVlICE9PSBudWxsICkge1xyXG4gICAgc3RyaW5nVmFsdWUgPSBudW1iZXJGb3JtYXR0ZXIoIHZhbHVlICk7XHJcbiAgfVxyXG4gIHJldHVybiBzdHJpbmdWYWx1ZTtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLGtDQUFrQztBQUM5RCxPQUFPQyxZQUFZLE1BQU0sK0JBQStCO0FBSXhELE9BQU9DLEtBQUssTUFBTSx1QkFBdUI7QUFDekMsT0FBT0MsU0FBUyxJQUFJQyxjQUFjLFFBQVEsaUNBQWlDO0FBRTNFLE9BQU9DLFdBQVcsTUFBTSx5Q0FBeUM7QUFDakUsU0FBZUMsZ0JBQWdCLEVBQUVDLElBQUksRUFBZUMsU0FBUyxFQUFFQyxRQUFRLEVBQW1CQyxJQUFJLFFBQTZCLDZCQUE2QjtBQUN4SixPQUFPQyxZQUFZLE1BQU0sOEJBQThCO0FBQ3ZELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUMxQyxPQUFPQyxRQUFRLE1BQU0sZUFBZTtBQUNwQyxPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBQzFDLE9BQU9DLE1BQU0sTUFBTSwyQkFBMkI7QUFDOUMsT0FBT0MsUUFBUSxNQUFNLG1DQUFtQztBQUN4RCxPQUFPQyxPQUFPLE1BQU0seUJBQXlCOztBQUU3QztBQUNBLE1BQU1DLFlBQVksR0FBRyxJQUFJTCxRQUFRLENBQUUsRUFBRyxDQUFDOztBQUV2QztBQUNBLE1BQU1NLFlBQVksR0FBRyxDQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFXO0FBRzNELE1BQU1DLHNCQUFzQixHQUFHLENBQUM7QUFvRGhDLGVBQWUsTUFBTUMsYUFBYSxTQUFTZixJQUFJLENBQUM7RUFLSzs7RUFFbkQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NnQixXQUFXQSxDQUFFQyxjQUFnRCxFQUFFQyxZQUFtQixFQUFFQyxlQUFzQyxFQUFHO0lBRWxJLE1BQU1DLE9BQU8sR0FBR3hCLFNBQVMsQ0FBaUQsQ0FBQyxDQUFFO01BQzNFeUIsS0FBSyxFQUFFLE9BQU87TUFDZEMsWUFBWSxFQUFFbEIsWUFBWSxDQUFDbUIsdUJBQXVCO01BQ2xEQyxhQUFhLEVBQUVWLHNCQUFzQjtNQUNyQ1csZUFBZSxFQUFFLElBQUk7TUFDckJDLDJCQUEyQixFQUFFLEVBQUU7TUFDL0JDLFdBQVcsRUFBRSxLQUFLO01BQ2xCQyxhQUFhLEVBQUUsS0FBSztNQUNwQkMsV0FBVyxFQUFFO1FBQ1hDLElBQUksRUFBRWxCLFlBQVk7UUFDbEJtQixJQUFJLEVBQUUsT0FBTztRQUNiQyxRQUFRLEVBQUUsSUFBSTtRQUFFO1FBQ2hCQyxjQUFjLEVBQUU7TUFDbEIsQ0FBQztNQUVEQyxPQUFPLEVBQUUsQ0FBQztNQUNWQyxPQUFPLEVBQUUsQ0FBQztNQUNWQyxZQUFZLEVBQUUsQ0FBQztNQUNmQyxjQUFjLEVBQUUsT0FBTztNQUN2QkMsZ0JBQWdCLEVBQUUsV0FBVztNQUM3QkMsbUJBQW1CLEVBQUUsQ0FBQztNQUN0QkMsa0JBQWtCLEVBQUUsRUFBRTtNQUN0QkMsa0JBQWtCLEVBQUUsQ0FBQztNQUVyQkMsYUFBYSxFQUFFcEMsV0FBVyxDQUFDcUMsUUFBUTtNQUNuQ0MsWUFBWSxFQUFFLElBQUk7TUFDbEJDLGNBQWMsRUFBRSxJQUFJO01BRXBCO01BQ0FDLE1BQU0sRUFBRXJDLE1BQU0sQ0FBQ3NDLE9BQU87TUFDdEJDLFVBQVUsRUFBRWpDLGFBQWEsQ0FBQ2tDO0lBQzVCLENBQUMsRUFBRTlCLGVBQWdCLENBQUM7O0lBRXBCO0lBQ0EsSUFBSytCLE1BQU0sRUFBRztNQUNaLE1BQU1DLHVCQUF1QixHQUFHLENBQUMsQ0FBQy9CLE9BQU8sQ0FBQ0ssZUFBZTtNQUN6RCxNQUFNMkIscUJBQXFCLEdBQUdoQyxPQUFPLENBQUNJLGFBQWEsS0FBS1Ysc0JBQXNCO01BQzlFLE1BQU11QyxvQkFBb0IsR0FBR2pDLE9BQU8sQ0FBQ0UsWUFBWSxLQUFLbEIsWUFBWSxDQUFDbUIsdUJBQXVCO01BQzFGLE1BQU0rQixzQkFBc0IsR0FBR0YscUJBQXFCLElBQUlDLG9CQUFvQjtNQUM1RSxJQUFLRix1QkFBdUIsSUFBSUcsc0JBQXNCLEVBQUc7UUFDdkRKLE1BQU0sSUFBSUEsTUFBTSxDQUFFQyx1QkFBdUIsS0FBS0csc0JBQXNCLEVBQ2xFLG1HQUFvRyxDQUFDO01BQ3pHO0lBQ0Y7SUFFQSxNQUFNQyx1QkFBdUIsR0FBRyxJQUFJN0QsWUFBWSxDQUFFMEIsT0FBTyxDQUFDSyxlQUFlLEdBQUdMLE9BQU8sQ0FBQ0ssZUFBZSxHQUFLK0IsS0FBYSxJQUFNO01BQ3pILElBQUtwQyxPQUFPLENBQUNJLGFBQWEsS0FBSyxJQUFJLEVBQUc7UUFDcEMsT0FBUSxHQUFFZ0MsS0FBTSxFQUFDO01BQ25CLENBQUMsTUFDSTtRQUNILE9BQU83RCxLQUFLLENBQUM4RCxPQUFPLENBQUVELEtBQUssRUFBRXBDLE9BQU8sQ0FBQ0ksYUFBYyxDQUFDO01BQ3REO0lBQ0YsQ0FBRSxDQUFDO0lBRUgwQixNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDOUIsT0FBTyxDQUFDc0MsY0FBYyxDQUFFLFdBQVksQ0FBQyxFQUFFLHFDQUFzQyxDQUFDOztJQUVqRztJQUNBUixNQUFNLElBQUlBLE1BQU0sQ0FBRVMsQ0FBQyxDQUFDQyxRQUFRLENBQUUvQyxZQUFZLEVBQUVPLE9BQU8sQ0FBQ0MsS0FBTSxDQUFDLEVBQUcsa0JBQWlCRCxPQUFPLENBQUNDLEtBQU0sRUFBRSxDQUFDO0lBQ2hHLElBQUssQ0FBQ0QsT0FBTyxDQUFDd0IsWUFBWSxFQUFHO01BQzNCeEIsT0FBTyxDQUFDd0IsWUFBWSxHQUFHeEIsT0FBTyxDQUFDQyxLQUFLO0lBQ3RDO0lBQ0E2QixNQUFNLElBQUlBLE1BQU0sQ0FBRVMsQ0FBQyxDQUFDQyxRQUFRLENBQUUvQyxZQUFZLEVBQUVPLE9BQU8sQ0FBQ3dCLFlBQWEsQ0FBQyxFQUFHLHlCQUF3QnhCLE9BQU8sQ0FBQ3dCLFlBQWEsRUFBRSxDQUFDO0lBQ3JITSxNQUFNLElBQUlBLE1BQU0sQ0FBRTlCLE9BQU8sQ0FBQ1MsV0FBVyxFQUFFLCtDQUFnRCxDQUFDOztJQUV4RjtJQUNBO0lBQ0EsTUFBTWdDLHdCQUF3QixHQUFLdkMsWUFBb0IsSUFBTTtNQUMzRCxJQUFLQSxZQUFZLENBQUNzQyxRQUFRLENBQUV4RCxZQUFZLENBQUMwRCwwQkFBMkIsQ0FBQyxFQUFHO1FBQ3RFLE9BQU9oRSxXQUFXLENBQUNpRSxNQUFNLENBQUV6QyxZQUFZLEVBQUVsQixZQUFZLENBQUNtQix1QkFBd0IsQ0FBQztNQUNqRixDQUFDLE1BQ0k7UUFDSCxPQUFPRCxZQUFZO01BQ3JCO0lBQ0YsQ0FBQztJQUVELE1BQU0wQyxvQkFBb0IsR0FBSyxPQUFPNUMsT0FBTyxDQUFDRSxZQUFZLEtBQUssUUFBUSxHQUN4QyxJQUFJNUIsWUFBWSxDQUFFbUUsd0JBQXdCLENBQUV6QyxPQUFPLENBQUNFLFlBQWEsQ0FBRSxDQUFDLEdBQ3BFLElBQUk3QixlQUFlLENBQUUsQ0FBRTJCLE9BQU8sQ0FBQ0UsWUFBWSxDQUFFLEVBQUV1Qyx3QkFBeUIsQ0FBQztJQUV4R1gsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQyxDQUFDZSxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsZUFBZSxFQUFFQyxVQUFVLElBQzVDSixvQkFBb0IsQ0FBQ1IsS0FBSyxDQUFDSSxRQUFRLENBQUV4RCxZQUFZLENBQUNtQix1QkFBd0IsQ0FBQyxFQUMxRixzREFBcUR5QyxvQkFBb0IsQ0FBQ1IsS0FBTSxFQUFFLENBQUM7O0lBRXRGO0lBQ0EsSUFBSyxDQUFDcEMsT0FBTyxDQUFDeUIsY0FBYyxFQUFHO01BQzdCO01BQ0F6QixPQUFPLENBQUN5QixjQUFjLEdBQUcsSUFBSXBELGVBQWUsQ0FBRSxDQUFFdUUsb0JBQW9CLENBQUUsRUFBRUssQ0FBQyxJQUFJQSxDQUFFLENBQUM7SUFDbEY7SUFDQSxNQUFNQyxzQkFBc0IsR0FBRyxPQUFPbEQsT0FBTyxDQUFDeUIsY0FBYyxLQUFLLFFBQVEsR0FBRyxJQUFJbkQsWUFBWSxDQUFFMEIsT0FBTyxDQUFDeUIsY0FBZSxDQUFDLEdBQUd6QixPQUFPLENBQUN5QixjQUFjO0lBRS9JSyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDLENBQUNlLElBQUksRUFBRUMsT0FBTyxFQUFFQyxlQUFlLEVBQUVDLFVBQVUsSUFDNUNFLHNCQUFzQixDQUFDZCxLQUFLLENBQUNJLFFBQVEsQ0FBRXhELFlBQVksQ0FBQ21CLHVCQUF3QixDQUFDLEVBQzVGLHdEQUF1RCtDLHNCQUFzQixDQUFDZCxLQUFNLEVBQUUsQ0FBQzs7SUFFMUY7SUFDQSxNQUFNZSxpQkFBaUIsR0FBRzlFLGVBQWUsQ0FBQytFLFNBQVMsQ0FBRSxDQUFFakIsdUJBQXVCLEVBQUUsR0FBR25DLE9BQU8sQ0FBQ00sMkJBQTJCLENBQUUsRUFBRSxNQUFNO01BQzlILE9BQU8rQyxhQUFhLENBQUV2RCxZQUFZLENBQUN3RCxHQUFHLEVBQUV0RCxPQUFPLENBQUNzQixhQUFhLEVBQUVhLHVCQUF1QixDQUFDQyxLQUFNLENBQUM7SUFDaEcsQ0FBRSxDQUFDO0lBQ0gsTUFBTW1CLGlCQUFpQixHQUFHbEYsZUFBZSxDQUFDK0UsU0FBUyxDQUFFLENBQUVqQix1QkFBdUIsRUFBRSxHQUFHbkMsT0FBTyxDQUFDTSwyQkFBMkIsQ0FBRSxFQUFFLE1BQU07TUFDOUgsT0FBTytDLGFBQWEsQ0FBRXZELFlBQVksQ0FBQzBELEdBQUcsRUFBRXhELE9BQU8sQ0FBQ3NCLGFBQWEsRUFBRWEsdUJBQXVCLENBQUNDLEtBQU0sQ0FBQztJQUNoRyxDQUFFLENBQUM7SUFDSCxNQUFNcUIscUJBQXFCLEdBQUcsSUFBSXBGLGVBQWUsQ0FBRSxDQUNqRHVFLG9CQUFvQixFQUNwQk8saUJBQWlCLEVBQ2pCSSxpQkFBaUIsQ0FDbEIsRUFBRSxDQUFFckQsWUFBWSxFQUFFd0QsU0FBUyxFQUFFQyxTQUFTLEtBQU07TUFDM0MsT0FBT2pGLFdBQVcsQ0FBQ2tGLE1BQU0sQ0FBRTFELFlBQVksRUFBRTtRQUN2Q2tDLEtBQUssRUFBTXNCLFNBQVMsQ0FBQ0csTUFBTSxHQUFHRixTQUFTLENBQUNFLE1BQU0sR0FBS0gsU0FBUyxHQUFHQztNQUNqRSxDQUFFLENBQUM7SUFDTCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNRyxvQkFBb0IsR0FBRzlELE9BQU8sQ0FBQ08sV0FBVyxHQUFHekIsUUFBUSxHQUFHQyxJQUFJO0lBQ2xFLE1BQU1nRixlQUFlLEdBQUcvRCxPQUFPLENBQUNTLFdBQVcsQ0FBQ2lCLE1BQU0sSUFBSTFCLE9BQU8sQ0FBQzBCLE1BQU0sQ0FBQ3NDLFlBQVksQ0FBRSxXQUFZLENBQUM7SUFDaEcsTUFBTUMsbUJBQW1CLEdBQUc1RixlQUFlLENBQUMrRSxTQUFTLENBQ25ELENBQUV2RCxjQUFjLEVBQUVxRCxzQkFBc0IsRUFBRU4sb0JBQW9CLEVBQUVULHVCQUF1QixFQUFFLEdBQUduQyxPQUFPLENBQUNNLDJCQUEyQixDQUFFLEVBQ2pJLE1BQU07TUFDSixNQUFNOEIsS0FBSyxHQUFHdkMsY0FBYyxDQUFDdUMsS0FBSztNQUNsQyxNQUFNWCxjQUFjLEdBQUd5QixzQkFBc0IsQ0FBQ2QsS0FBSztNQUNuRCxNQUFNOEIsaUJBQWlCLEdBQUd0QixvQkFBb0IsQ0FBQ1IsS0FBSztNQUNwRCxNQUFNL0IsZUFBZSxHQUFHOEIsdUJBQXVCLENBQUNDLEtBQUs7TUFFckQsTUFBTWxDLFlBQVksR0FBS2tDLEtBQUssS0FBSyxJQUFJLElBQUlYLGNBQWMsR0FBS0EsY0FBYyxHQUFHeUMsaUJBQWlCO01BRTlGLE1BQU1DLFdBQVcsR0FBR2QsYUFBYSxDQUFFakIsS0FBSyxFQUFFcEMsT0FBTyxDQUFDc0IsYUFBYSxFQUFFakIsZUFBZ0IsQ0FBQztNQUNsRixPQUFPM0IsV0FBVyxDQUFDa0YsTUFBTSxDQUFFMUQsWUFBWSxFQUFFO1FBQ3ZDa0MsS0FBSyxFQUFFK0I7TUFDVCxDQUFFLENBQUM7SUFDTCxDQUFDLEVBQUU7TUFFRDtNQUNBQyxjQUFjLEVBQUUsSUFBSTtNQUNwQkMsZUFBZSxFQUFFL0UsUUFBUTtNQUN6QmdGLGdCQUFnQixFQUFFLGdCQUFnQjtNQUVsQzVDLE1BQU0sRUFBRXFDLGVBQWUsQ0FBQ0MsWUFBWSxDQUFFakYsSUFBSSxDQUFDd0YsMkJBQTRCO0lBQ3pFLENBQUUsQ0FBQztJQUVMLE1BQU1DLGdCQUFnQixHQUFHL0YsY0FBYyxDQUFpQztNQUN0RWlELE1BQU0sRUFBRXFDO0lBQ1YsQ0FBQyxFQUFFL0QsT0FBTyxDQUFDUyxXQUFXLEVBQUU7TUFDdEJHLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDakIsQ0FBRSxDQUFDO0lBRUgsTUFBTTZELFNBQTBCLEdBQUcsSUFBSVgsb0JBQW9CLENBQUVHLG1CQUFtQixFQUFFTyxnQkFBaUIsQ0FBQztJQUVwRyxNQUFNRSxrQkFBa0IsR0FBR0QsU0FBUyxDQUFDRSxNQUFNOztJQUUzQztJQUNBLE1BQU1DLGNBQWMsR0FBRyxJQUFJL0YsU0FBUyxDQUFFO01BQ3BDbUMsWUFBWSxFQUFFaEIsT0FBTyxDQUFDZ0IsWUFBWTtNQUNsQ0wsSUFBSSxFQUFFWCxPQUFPLENBQUNpQixjQUFjO01BQzVCNEQsTUFBTSxFQUFFN0UsT0FBTyxDQUFDa0IsZ0JBQWdCO01BQ2hDNEQsU0FBUyxFQUFFOUUsT0FBTyxDQUFDbUIsbUJBQW1CO01BQ3RDNEQsUUFBUSxFQUFFL0UsT0FBTyxDQUFDb0I7SUFDcEIsQ0FBRSxDQUFDOztJQUVIO0lBQ0FxQyxxQkFBcUIsQ0FBQ3VCLElBQUksQ0FBRUMsYUFBYSxJQUFJO01BQzNDLE1BQU1DLFFBQVEsR0FBRyxJQUFJcEIsb0JBQW9CLENBQUVtQixhQUFhLEVBQUUxQyxDQUFDLENBQUM0QyxJQUFJLENBQUVYLGdCQUFnQixFQUFFLFFBQVMsQ0FBRSxDQUFDO01BRWhHQyxTQUFTLENBQUM3RCxRQUFRLEdBQUtaLE9BQU8sQ0FBQ1MsV0FBVyxDQUFDRyxRQUFRLEtBQUssSUFBSSxHQUFLWixPQUFPLENBQUNTLFdBQVcsQ0FBQ0csUUFBUSxHQUN0RXNFLFFBQVEsQ0FBQ0UsS0FBSyxLQUFLLENBQUMsR0FBS0YsUUFBUSxDQUFDRSxLQUFLLEdBQUcsSUFBSTtNQUNyRUYsUUFBUSxDQUFDdEUsUUFBUSxHQUFHNkQsU0FBUyxDQUFDN0QsUUFBUTtNQUV0Q2dFLGNBQWMsQ0FBQ1MsU0FBUyxHQUFHQyxJQUFJLENBQUM5QixHQUFHLENBQUV4RCxPQUFPLENBQUNxQixrQkFBa0IsRUFBRTZELFFBQVEsQ0FBQ0UsS0FBSyxHQUFHLENBQUMsR0FBR3BGLE9BQU8sQ0FBQ2MsT0FBUSxDQUFDO01BQ3ZHOEQsY0FBYyxDQUFDVyxVQUFVLEdBQUcsQ0FBRXZGLE9BQU8sQ0FBQ1EsYUFBYSxHQUFHa0Usa0JBQWtCLEdBQUdRLFFBQVEsQ0FBQ1AsTUFBTSxJQUFLLENBQUMsR0FBRzNFLE9BQU8sQ0FBQ2UsT0FBTztJQUNwSCxDQUFFLENBQUM7O0lBRUg7SUFDQTtJQUNBLE1BQU15RSxrQkFBa0IsR0FBRyxJQUFJNUcsSUFBSSxDQUFFO01BQ25DNkcsUUFBUSxFQUFFLENBQUVoQixTQUFTO0lBQ3ZCLENBQUUsQ0FBQztJQUNIekUsT0FBTyxDQUFDeUYsUUFBUSxHQUFHLENBQUViLGNBQWMsRUFBRVksa0JBQWtCLENBQUU7SUFFekQsS0FBSyxDQUFDLENBQUM7SUFFUCxJQUFJLENBQUNyRCx1QkFBdUIsR0FBR0EsdUJBQXVCO0lBQ3RELElBQUksQ0FBQ3NDLFNBQVMsR0FBR0EsU0FBUztJQUMxQixJQUFJLENBQUNHLGNBQWMsR0FBR0EsY0FBYzs7SUFFeEM7SUFDSWpHLGdCQUFnQixDQUFDK0csTUFBTSxDQUFFLElBQUksRUFBRSxDQUFFRixrQkFBa0IsRUFBRVosY0FBYyxDQUFFLEVBQUUsQ0FBRWUsdUJBQXVCLEVBQUVDLG1CQUFtQixLQUFNO01BRXpIO01BQ0EsTUFBTTNGLEtBQUssR0FBS0osY0FBYyxDQUFDdUMsS0FBSyxLQUFLLElBQUksR0FBS3BDLE9BQU8sQ0FBQ3dCLFlBQVksR0FBR3hCLE9BQU8sQ0FBQ0MsS0FBSzs7TUFFdEY7TUFDQSxNQUFNNEYsT0FBTyxHQUFHRCxtQkFBbUIsQ0FBQ0MsT0FBTzs7TUFFM0M7TUFDQSxJQUFLNUYsS0FBSyxLQUFLLFFBQVEsRUFBRztRQUN4QjBGLHVCQUF1QixDQUFDRyxNQUFNLEdBQUcsSUFBSXZHLE9BQU8sQ0FBRXFHLG1CQUFtQixDQUFDRyxPQUFPLEVBQUVGLE9BQVEsQ0FBQztNQUN0RixDQUFDLE1BQ0ksSUFBSzVGLEtBQUssS0FBSyxNQUFNLEVBQUc7UUFDM0IwRix1QkFBdUIsQ0FBQ0ssVUFBVSxHQUFHLElBQUl6RyxPQUFPLENBQUVxRyxtQkFBbUIsQ0FBQ0ssSUFBSSxHQUFHakcsT0FBTyxDQUFDYyxPQUFPLEVBQUUrRSxPQUFRLENBQUM7TUFDekcsQ0FBQyxNQUNJO1FBQUU7UUFDTEYsdUJBQXVCLENBQUNPLFdBQVcsR0FBRyxJQUFJM0csT0FBTyxDQUFFcUcsbUJBQW1CLENBQUNPLEtBQUssR0FBR25HLE9BQU8sQ0FBQ2MsT0FBTyxFQUFFK0UsT0FBUSxDQUFDO01BQzNHO0lBQ0YsQ0FBRSxDQUFDO0lBRUgsSUFBSSxDQUFDTyxNQUFNLENBQUVwRyxPQUFRLENBQUM7SUFFdEIsSUFBSSxDQUFDcUcsb0JBQW9CLEdBQUcsTUFBTTtNQUNoQ3BDLG1CQUFtQixDQUFDcUMsT0FBTyxDQUFDLENBQUM7TUFDN0IxRCxvQkFBb0IsQ0FBQzBELE9BQU8sQ0FBQyxDQUFDO0lBQ2hDLENBQUM7RUFDSDtFQUVnQkEsT0FBT0EsQ0FBQSxFQUFTO0lBQzlCLElBQUksQ0FBQ0Qsb0JBQW9CLENBQUMsQ0FBQztJQUMzQixLQUFLLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtFQUNTQyxhQUFhQSxDQUFFN0YsSUFBVSxFQUFTO0lBQ3ZDLElBQUksQ0FBQytELFNBQVMsQ0FBQy9ELElBQUksR0FBR0EsSUFBSTtFQUM1QjtFQUVBLElBQVc4RixVQUFVQSxDQUFFcEUsS0FBVyxFQUFHO0lBQUUsSUFBSSxDQUFDbUUsYUFBYSxDQUFFbkUsS0FBTSxDQUFDO0VBQUU7O0VBRXBFO0FBQ0Y7QUFDQTtFQUNTcUUsYUFBYUEsQ0FBRTlGLElBQVksRUFBUztJQUN6QyxJQUFJLENBQUM4RCxTQUFTLENBQUM5RCxJQUFJLEdBQUdBLElBQUk7RUFDNUI7RUFFQSxJQUFXK0YsVUFBVUEsQ0FBRXRFLEtBQWEsRUFBRztJQUFFLElBQUksQ0FBQ3FFLGFBQWEsQ0FBRXJFLEtBQU0sQ0FBQztFQUFFOztFQUV0RTtBQUNGO0FBQ0E7RUFDU3VFLGlCQUFpQkEsQ0FBRWhHLElBQVksRUFBUztJQUM3QyxJQUFJLENBQUNpRSxjQUFjLENBQUNqRSxJQUFJLEdBQUdBLElBQUk7RUFDakM7RUFFQSxJQUFXTSxjQUFjQSxDQUFFbUIsS0FBYSxFQUFHO0lBQUUsSUFBSSxDQUFDdUUsaUJBQWlCLENBQUV2RSxLQUFNLENBQUM7RUFBRTtFQUU5RSxJQUFXbkIsY0FBY0EsQ0FBQSxFQUFXO0lBQ2xDLE9BQU8sSUFBSSxDQUFDMkYsaUJBQWlCLENBQUMsQ0FBQztFQUNqQzs7RUFFQTtBQUNGO0FBQ0E7RUFDU0EsaUJBQWlCQSxDQUFBLEVBQVc7SUFDakMsT0FBTyxJQUFJLENBQUNoQyxjQUFjLENBQUNqRSxJQUFJO0VBQ2pDOztFQUVBO0FBQ0Y7QUFDQTtFQUNTa0csbUJBQW1CQSxDQUFFaEMsTUFBYyxFQUFTO0lBQ2pELElBQUksQ0FBQ0QsY0FBYyxDQUFDQyxNQUFNLEdBQUdBLE1BQU07RUFDckM7RUFFQSxJQUFXM0QsZ0JBQWdCQSxDQUFFa0IsS0FBYSxFQUFHO0lBQUUsSUFBSSxDQUFDeUUsbUJBQW1CLENBQUV6RSxLQUFNLENBQUM7RUFBRTs7RUFFbEY7QUFDRjtBQUNBO0VBQ1MwRSxrQkFBa0JBLENBQUEsRUFBVztJQUNsQyxPQUFPLElBQUksQ0FBQ2xDLGNBQWMsQ0FBQ21DLFlBQVksQ0FBQyxDQUFDO0VBQzNDOztFQUVBO0FBQ0Y7QUFDQTtFQUNTQyxrQkFBa0JBLENBQUU1QixLQUFhLEVBQVM7SUFDL0MsSUFBSSxDQUFDUixjQUFjLENBQUNxQyxZQUFZLENBQUU3QixLQUFNLENBQUM7RUFDM0M7RUFFQSxJQUFXOEIsZUFBZUEsQ0FBQSxFQUFXO0lBQUUsT0FBTyxJQUFJLENBQUNKLGtCQUFrQixDQUFDLENBQUM7RUFBRTtFQUV6RSxJQUFXSSxlQUFlQSxDQUFFOUIsS0FBYSxFQUFHO0lBQUUsSUFBSSxDQUFDNEIsa0JBQWtCLENBQUU1QixLQUFNLENBQUM7RUFBRTtFQUVoRixPQUF1QnZELGVBQWUsR0FBRyxJQUFJNUMsTUFBTSxDQUFFLGlCQUFpQixFQUFFO0lBQ3RFa0ksU0FBUyxFQUFFeEgsYUFBYTtJQUN4QnlILFNBQVMsRUFBRXhJLElBQUksQ0FBQ3lJLE1BQU07SUFDdEJDLGFBQWEsRUFBRTtFQUNqQixDQUFFLENBQUM7QUFDTDtBQUVBbEksV0FBVyxDQUFDbUksUUFBUSxDQUFFLGVBQWUsRUFBRTVILGFBQWMsQ0FBQzs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNMEQsYUFBYSxHQUFHQSxDQUEyQmpCLEtBQVEsRUFBRWQsYUFBcUIsRUFBRWpCLGVBQWdDLEtBQXVEO0VBQ3ZLLElBQUk4RCxXQUFXLEdBQUc3QyxhQUFhO0VBQy9CLElBQUtjLEtBQUssS0FBSyxJQUFJLEVBQUc7SUFDcEIrQixXQUFXLEdBQUc5RCxlQUFlLENBQUUrQixLQUFNLENBQUM7RUFDeEM7RUFDQSxPQUFPK0IsV0FBVztBQUNwQixDQUFDIiwiaWdub3JlTGlzdCI6W119