// Copyright 2021-2024, University of Colorado Boulder

/**
 * Base class that defines a settable Property that determines whether the Object is enabled or not. This includes
 * support for phet-io instrumentation and a variety of options to customize the enabled Property as well as how it is
 * created.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import EnabledProperty from './EnabledProperty.js';
import merge from '../../phet-core/js/merge.js';
import { optionize3 } from '../../phet-core/js/optionize.js';
import Tandem from '../../tandem/js/Tandem.js';
import axon from './axon.js';
import Disposable from './Disposable.js';
import PhetioObject from '../../tandem/js/PhetioObject.js';

// constants
const DEFAULT_OPTIONS = {
  enabledProperty: null,
  enabled: true,
  enabledPropertyOptions: null,
  phetioEnabledPropertyInstrumented: true,
  tandem: PhetioObject.DEFAULT_OPTIONS.tandem
};
export default class EnabledComponent extends Disposable {
  constructor(providedOptions) {
    const options = optionize3()({}, DEFAULT_OPTIONS, providedOptions);
    const ownsEnabledProperty = !options.enabledProperty;
    assert && options.enabledPropertyOptions && assert(!(!options.phetioEnabledPropertyInstrumented && options.enabledPropertyOptions.tandem), 'incompatible options. Cannot specify phetioEnabledPropertyInstrumented opt out and a Tandem via enabledPropertyOptions.');
    super(options);

    // @ts-expect-error There is no way without a plethora of parameterized types to convey if this enabledProperty is
    // settable, so accept unsettable, and typecast to settable.
    this.enabledProperty = options.enabledProperty || new EnabledProperty(options.enabled, merge({
      tandem: options.phetioEnabledPropertyInstrumented ? options.tandem.createTandem(EnabledProperty.TANDEM_NAME) : Tandem.OPT_OUT
    }, options.enabledPropertyOptions));
    this.disposeEnabledComponent = () => {
      ownsEnabledProperty && this.enabledProperty.dispose();
    };
  }
  setEnabled(enabled) {
    assert && assert(this.enabledProperty.isSettable(), 'cannot set enabledProperty');
    this.enabledProperty.value = enabled;
  }
  set enabled(value) {
    this.setEnabled(value);
  }
  get enabled() {
    return this.isEnabled();
  }
  isEnabled() {
    return this.enabledProperty.value;
  }
  dispose() {
    this.disposeEnabledComponent();
    super.dispose();
  }
}
axon.register('EnabledComponent', EnabledComponent);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbmFibGVkUHJvcGVydHkiLCJtZXJnZSIsIm9wdGlvbml6ZTMiLCJUYW5kZW0iLCJheG9uIiwiRGlzcG9zYWJsZSIsIlBoZXRpb09iamVjdCIsIkRFRkFVTFRfT1BUSU9OUyIsImVuYWJsZWRQcm9wZXJ0eSIsImVuYWJsZWQiLCJlbmFibGVkUHJvcGVydHlPcHRpb25zIiwicGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkIiwidGFuZGVtIiwiRW5hYmxlZENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsIm93bnNFbmFibGVkUHJvcGVydHkiLCJhc3NlcnQiLCJjcmVhdGVUYW5kZW0iLCJUQU5ERU1fTkFNRSIsIk9QVF9PVVQiLCJkaXNwb3NlRW5hYmxlZENvbXBvbmVudCIsImRpc3Bvc2UiLCJzZXRFbmFibGVkIiwiaXNTZXR0YWJsZSIsInZhbHVlIiwiaXNFbmFibGVkIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFbmFibGVkQ29tcG9uZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgdGhhdCBkZWZpbmVzIGEgc2V0dGFibGUgUHJvcGVydHkgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIE9iamVjdCBpcyBlbmFibGVkIG9yIG5vdC4gVGhpcyBpbmNsdWRlc1xyXG4gKiBzdXBwb3J0IGZvciBwaGV0LWlvIGluc3RydW1lbnRhdGlvbiBhbmQgYSB2YXJpZXR5IG9mIG9wdGlvbnMgdG8gY3VzdG9taXplIHRoZSBlbmFibGVkIFByb3BlcnR5IGFzIHdlbGwgYXMgaG93IGl0IGlzXHJcbiAqIGNyZWF0ZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgRW5hYmxlZFByb3BlcnR5LCB7IEVuYWJsZWRQcm9wZXJ0eU9wdGlvbnMgfSBmcm9tICcuL0VuYWJsZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgeyBvcHRpb25pemUzIH0gZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XHJcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi9UUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEaXNwb3NhYmxlLCB7IERpc3Bvc2FibGVPcHRpb25zIH0gZnJvbSAnLi9EaXNwb3NhYmxlLmpzJztcclxuaW1wb3J0IFBoZXRpb09iamVjdCwgeyBQaGV0aW9PYmplY3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgREVGQVVMVF9PUFRJT05TID0ge1xyXG4gIGVuYWJsZWRQcm9wZXJ0eTogbnVsbCxcclxuICBlbmFibGVkOiB0cnVlLFxyXG4gIGVuYWJsZWRQcm9wZXJ0eU9wdGlvbnM6IG51bGwsXHJcbiAgcGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkOiB0cnVlLFxyXG4gIHRhbmRlbTogUGhldGlvT2JqZWN0LkRFRkFVTFRfT1BUSU9OUy50YW5kZW1cclxufSBhcyBjb25zdDtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcblxyXG4gIC8vIGlmIG5vdCBwcm92aWRlZCwgYSBQcm9wZXJ0eSB3aWxsIGJlIGNyZWF0ZWRcclxuICBlbmFibGVkUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPiB8IG51bGw7XHJcblxyXG4gIC8vIGluaXRpYWwgdmFsdWUgb2YgZW5hYmxlZFByb3BlcnR5IGlmIHdlIGNyZWF0ZSBpdCwgaWdub3JlZCBpZiBlbmFibGVkUHJvcGVydHkgaXMgcHJvdmlkZWRcclxuICBlbmFibGVkPzogYm9vbGVhbjtcclxuXHJcbiAgLy8gb3B0aW9ucyB0byBlbmFibGVkUHJvcGVydHkgaWYgd2UgY3JlYXRlIGl0LCBpZ25vcmVkIGlmIGVuYWJsZWRQcm9wZXJ0eSBpcyBwcm92aWRlZFxyXG4gIGVuYWJsZWRQcm9wZXJ0eU9wdGlvbnM/OiBFbmFibGVkUHJvcGVydHlPcHRpb25zIHwgbnVsbDtcclxuXHJcbiAgLy8gV2hldGhlciB0aGUgZGVmYXVsdC1jcmVhdGVkIGVuYWJsZWRQcm9wZXJ0eSBzaG91bGQgYmUgaW5zdHJ1bWVudGVkIGZvciBQaEVULWlPLiBJZ25vcmVkIGlmXHJcbiAgLy8gb3B0aW9ucy5lbmFibGVkUHJvcGVydHkgaXMgcHJvdmlkZWQuXHJcbiAgcGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkPzogYm9vbGVhbjtcclxufSAmIFBpY2s8UGhldGlvT2JqZWN0T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IHR5cGUgRW5hYmxlZENvbXBvbmVudE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIERpc3Bvc2FibGVPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5hYmxlZENvbXBvbmVudCBleHRlbmRzIERpc3Bvc2FibGUge1xyXG5cclxuICBwdWJsaWMgZW5hYmxlZFByb3BlcnR5OiBUUHJvcGVydHk8Ym9vbGVhbj47XHJcblxyXG4gIHByaXZhdGUgZGlzcG9zZUVuYWJsZWRDb21wb25lbnQ6ICgpID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvdmlkZWRPcHRpb25zPzogRW5hYmxlZENvbXBvbmVudE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTM8RW5hYmxlZENvbXBvbmVudE9wdGlvbnMsIFNlbGZPcHRpb25zLCBEaXNwb3NhYmxlT3B0aW9ucz4oKSgge30sIERFRkFVTFRfT1BUSU9OUywgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3Qgb3duc0VuYWJsZWRQcm9wZXJ0eSA9ICFvcHRpb25zLmVuYWJsZWRQcm9wZXJ0eTtcclxuXHJcbiAgICBhc3NlcnQgJiYgb3B0aW9ucy5lbmFibGVkUHJvcGVydHlPcHRpb25zICYmIGFzc2VydCggISggIW9wdGlvbnMucGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkICYmIG9wdGlvbnMuZW5hYmxlZFByb3BlcnR5T3B0aW9ucy50YW5kZW0gKSxcclxuICAgICAgJ2luY29tcGF0aWJsZSBvcHRpb25zLiBDYW5ub3Qgc3BlY2lmeSBwaGV0aW9FbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQgb3B0IG91dCBhbmQgYSBUYW5kZW0gdmlhIGVuYWJsZWRQcm9wZXJ0eU9wdGlvbnMuJyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUaGVyZSBpcyBubyB3YXkgd2l0aG91dCBhIHBsZXRob3JhIG9mIHBhcmFtZXRlcml6ZWQgdHlwZXMgdG8gY29udmV5IGlmIHRoaXMgZW5hYmxlZFByb3BlcnR5IGlzXHJcbiAgICAvLyBzZXR0YWJsZSwgc28gYWNjZXB0IHVuc2V0dGFibGUsIGFuZCB0eXBlY2FzdCB0byBzZXR0YWJsZS5cclxuICAgIHRoaXMuZW5hYmxlZFByb3BlcnR5ID0gb3B0aW9ucy5lbmFibGVkUHJvcGVydHkgfHwgbmV3IEVuYWJsZWRQcm9wZXJ0eSggb3B0aW9ucy5lbmFibGVkLCBtZXJnZSgge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMucGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkID8gb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBFbmFibGVkUHJvcGVydHkuVEFOREVNX05BTUUgKSA6IFRhbmRlbS5PUFRfT1VUXHJcbiAgICB9LCBvcHRpb25zLmVuYWJsZWRQcm9wZXJ0eU9wdGlvbnMgKSApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZUVuYWJsZWRDb21wb25lbnQgPSAoKSA9PiB7XHJcbiAgICAgIG93bnNFbmFibGVkUHJvcGVydHkgJiYgdGhpcy5lbmFibGVkUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RW5hYmxlZCggZW5hYmxlZDogYm9vbGVhbiApOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZW5hYmxlZFByb3BlcnR5LmlzU2V0dGFibGUoKSwgJ2Nhbm5vdCBzZXQgZW5hYmxlZFByb3BlcnR5JyApO1xyXG4gICAgdGhpcy5lbmFibGVkUHJvcGVydHkudmFsdWUgPSBlbmFibGVkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBlbmFibGVkKCB2YWx1ZTogYm9vbGVhbiApIHsgdGhpcy5zZXRFbmFibGVkKCB2YWx1ZSApOyB9XHJcblxyXG4gIHB1YmxpYyBnZXQgZW5hYmxlZCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuaXNFbmFibGVkKCk7IH1cclxuXHJcbiAgcHVibGljIGlzRW5hYmxlZCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuZW5hYmxlZFByb3BlcnR5LnZhbHVlOyB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlRW5hYmxlZENvbXBvbmVudCgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuYXhvbi5yZWdpc3RlciggJ0VuYWJsZWRDb21wb25lbnQnLCBFbmFibGVkQ29tcG9uZW50ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtB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