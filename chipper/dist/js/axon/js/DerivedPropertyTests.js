// Copyright 2017-2024, University of Colorado Boulder

/**
 * QUnit tests for DerivedProperty
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Tandem from '../../tandem/js/Tandem.js';
import NumberIO from '../../tandem/js/types/NumberIO.js';
import DerivedProperty from './DerivedProperty.js';
import Property from './Property.js';
import propertyStateHandlerSingleton from './propertyStateHandlerSingleton.js';
QUnit.module('DerivedProperty');
QUnit.test('Test stale values in DerivedProperty', assert => {
  const aProperty = new Property(1);
  const bProperty = new Property(2);
  const cProperty = new DerivedProperty([aProperty, bProperty], (aProperty, bProperty) => {
    return aProperty + bProperty;
  });
  aProperty.value = 7;
  assert.equal(cProperty.value, 9);
});
QUnit.test('Test DerivedProperty.unlink', assert => {
  const widthProperty = new Property(2);
  const startingWidthListenerCount = widthProperty['getListenerCount']();
  const heightProperty = new Property(3);
  const startingHeightListenerCount = heightProperty['getListenerCount']();
  const areaPropertyDependencies = [widthProperty, heightProperty];
  const areaProperty = new DerivedProperty(areaPropertyDependencies, (width, height) => width * height);
  const listener = function (area) {/*console.log( 'area = ' + area );*/};
  areaProperty.link(listener);
  assert.equal(widthProperty['getListenerCount'](), 1 + startingWidthListenerCount);
  assert.equal(heightProperty['getListenerCount'](), 1 + startingHeightListenerCount);
  assert.equal(areaPropertyDependencies.length, 2);

  // Unlink the listener
  areaProperty.unlink(listener);
  areaProperty.dispose();
  assert.equal(widthProperty['getListenerCount'](), startingWidthListenerCount);
  assert.equal(heightProperty['getListenerCount'](), startingHeightListenerCount);
  assert.equal(areaProperty['dependencies'], null);

  // @ts-expect-error, type of dependencyListeners is implicitly any because DerivedProperty can have up to 16 dependencies of any type
  assert.equal(areaProperty['dependencyListeners'], null);
  assert.equal(areaProperty['dependencies'], null);
});
QUnit.test('DerivedProperty.valueEquals', assert => {
  const aProperty = new Property('a');
  const bProperty = new Property('b');
  const cProperty = DerivedProperty['valueEquals'](aProperty, bProperty);
  assert.equal(cProperty.value, false);
  aProperty.value = 'b';
  assert.equal(cProperty.value, true);
});
QUnit.test('Test defer', assert => {
  const firstProperty = new Property(0);
  const secondProperty = new Property(2);
  const derivedProperty = new DerivedProperty([firstProperty, secondProperty], (a, b) => a + b);
  assert.ok(derivedProperty.value === 2, 'base case, no defer');

  // test a dependency being deferred
  firstProperty.setDeferred(true);
  assert.ok(derivedProperty.value === 2, 'same value even after defer');
  firstProperty.value = 2;
  assert.ok(derivedProperty.value === 2, 'same value even when set to new');
  const update = firstProperty.setDeferred(false);
  assert.ok(firstProperty.value === 2, 'property has new value now');
  assert.ok(derivedProperty.value === 2, 'but the derivedProperty doesnt');
  update && update();
  assert.ok(derivedProperty.value === 4, 'now derivedProperty was updated');

  // test the DerivedProperty being deferred
  derivedProperty.setDeferred(true);
  assert.ok(derivedProperty.value === 4, 'still 4');
  firstProperty.value = 4;
  assert.ok(derivedProperty.value === 4, 'still 4 after update');
  const updateAgain = derivedProperty.setDeferred(false);
  assert.ok(derivedProperty.value === 6, 'now has the correct value');
  updateAgain && updateAgain();
  assert.ok(derivedProperty.value === 6, 'nothing changed');
});
QUnit.test('DerivedProperty and/or', assert => {
  const aProperty = new Property(false);
  const bProperty = new Property(false);
  const cProperty = new Property(false);

  // correct usages of 'and' and 'or'
  const andProperty = DerivedProperty.and([aProperty, bProperty, cProperty]);
  const orProperty = DerivedProperty.or([aProperty, bProperty, cProperty]);
  assert.equal(andProperty.value, false);
  assert.equal(orProperty.value, false);
  aProperty.value = true;
  assert.equal(andProperty.value, false);
  assert.equal(orProperty.value, true);
  bProperty.value = true;
  assert.equal(andProperty.value, false);
  assert.equal(orProperty.value, true);
  cProperty.value = true;
  assert.equal(andProperty.value, true);
  assert.equal(orProperty.value, true);

  // @ts-expect-error INTENTIONAL fail: setting a dependency to a non-boolean value
  window.assert && assert.throws(() => {
    aProperty.value = 0;
  }, 'DerivedProperty dependency must have boolean value');
});
QUnit.test('DerivedProperty add/multiply', assert => {
  const aProperty = new Property(1);
  const bProperty = new Property(2);
  const cProperty = new Property(3);

  // correct usages of 'and' and 'or'
  const addProperty = DerivedProperty.add([aProperty, bProperty, cProperty]);
  const mulitplyProperty = DerivedProperty.multiply([aProperty, bProperty, cProperty]);
  assert.equal(addProperty.value, 6);
  assert.equal(mulitplyProperty.value, 6);
  aProperty.value = 3;
  assert.equal(addProperty.value, 8);
  assert.equal(mulitplyProperty.value, 18);
  bProperty.value = 0;
  assert.equal(addProperty.value, 6);
  assert.equal(mulitplyProperty.value, 0);
  bProperty.value = 1;
  cProperty.value = 10;
  assert.equal(addProperty.value, 14);
  assert.equal(mulitplyProperty.value, 30);
});
if (Tandem.PHET_IO_ENABLED) {
  QUnit.test('propertyStateHandlerSingleton tests for DerivedProperty', assert => {
    const parentTandem = Tandem.ROOT_TEST;
    const originalOrderDependencyLength = propertyStateHandlerSingleton.getNumberOfOrderDependencies();
    const getOrderDependencyLength = () => propertyStateHandlerSingleton.getNumberOfOrderDependencies() - originalOrderDependencyLength;
    const firstProperty = new Property(1, {
      tandem: parentTandem.createTandem('firstProperty'),
      phetioValueType: NumberIO
    });
    const secondProperty = new Property(1, {
      tandem: parentTandem.createTandem('secondProperty'),
      phetioValueType: NumberIO
    });
    const thirdProperty = new Property(1, {
      tandem: parentTandem.createTandem('thirdProperty'),
      phetioValueType: NumberIO
    });
    const derivedProperty = new DerivedProperty([firstProperty, secondProperty, thirdProperty], () => 3, {
      tandem: parentTandem.createTandem('derivedProperty'),
      phetioValueType: NumberIO
    });
    assert.ok(getOrderDependencyLength() === 3, 'derivedProperty adds order dependency for each dependency');
    firstProperty.dispose();
    assert.ok(getOrderDependencyLength() === 2, 'dependency dispose only removes what it effects');
    derivedProperty.dispose();
    assert.ok(getOrderDependencyLength() === 0, 'no orderDependencies after derivedProperty dispose');
    secondProperty.dispose();
    thirdProperty.dispose();
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYW5kZW0iLCJOdW1iZXJJTyIsIkRlcml2ZWRQcm9wZXJ0eSIsIlByb3BlcnR5IiwicHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24iLCJRVW5pdCIsIm1vZHVsZSIsInRlc3QiLCJhc3NlcnQiLCJhUHJvcGVydHkiLCJiUHJvcGVydHkiLCJjUHJvcGVydHkiLCJ2YWx1ZSIsImVxdWFsIiwid2lkdGhQcm9wZXJ0eSIsInN0YXJ0aW5nV2lkdGhMaXN0ZW5lckNvdW50IiwiaGVpZ2h0UHJvcGVydHkiLCJzdGFydGluZ0hlaWdodExpc3RlbmVyQ291bnQiLCJhcmVhUHJvcGVydHlEZXBlbmRlbmNpZXMiLCJhcmVhUHJvcGVydHkiLCJ3aWR0aCIsImhlaWdodCIsImxpc3RlbmVyIiwiYXJlYSIsImxpbmsiLCJsZW5ndGgiLCJ1bmxpbmsiLCJkaXNwb3NlIiwiZmlyc3RQcm9wZXJ0eSIsInNlY29uZFByb3BlcnR5IiwiZGVyaXZlZFByb3BlcnR5IiwiYSIsImIiLCJvayIsInNldERlZmVycmVkIiwidXBkYXRlIiwidXBkYXRlQWdhaW4iLCJhbmRQcm9wZXJ0eSIsImFuZCIsIm9yUHJvcGVydHkiLCJvciIsIndpbmRvdyIsInRocm93cyIsImFkZFByb3BlcnR5IiwiYWRkIiwibXVsaXRwbHlQcm9wZXJ0eSIsIm11bHRpcGx5IiwiUEhFVF9JT19FTkFCTEVEIiwicGFyZW50VGFuZGVtIiwiUk9PVF9URVNUIiwib3JpZ2luYWxPcmRlckRlcGVuZGVuY3lMZW5ndGgiLCJnZXROdW1iZXJPZk9yZGVyRGVwZW5kZW5jaWVzIiwiZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwicGhldGlvVmFsdWVUeXBlIiwidGhpcmRQcm9wZXJ0eSJdLCJzb3VyY2VzIjpbIkRlcml2ZWRQcm9wZXJ0eVRlc3RzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFFVbml0IHRlc3RzIGZvciBEZXJpdmVkUHJvcGVydHlcclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgTnVtYmVySU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL051bWJlcklPLmpzJztcclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uIGZyb20gJy4vcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24uanMnO1xyXG5cclxuUVVuaXQubW9kdWxlKCAnRGVyaXZlZFByb3BlcnR5JyApO1xyXG5cclxuUVVuaXQudGVzdCggJ1Rlc3Qgc3RhbGUgdmFsdWVzIGluIERlcml2ZWRQcm9wZXJ0eScsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgYVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAxICk7XHJcbiAgY29uc3QgYlByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAyICk7XHJcbiAgY29uc3QgY1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyBhUHJvcGVydHksIGJQcm9wZXJ0eSBdLCAoICggYVByb3BlcnR5LCBiUHJvcGVydHkgKSA9PiB7cmV0dXJuIGFQcm9wZXJ0eSArIGJQcm9wZXJ0eTt9ICkgKTtcclxuICBhUHJvcGVydHkudmFsdWUgPSA3O1xyXG4gIGFzc2VydC5lcXVhbCggY1Byb3BlcnR5LnZhbHVlLCA5ICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdUZXN0IERlcml2ZWRQcm9wZXJ0eS51bmxpbmsnLCBhc3NlcnQgPT4ge1xyXG5cclxuICBjb25zdCB3aWR0aFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAyICk7XHJcbiAgY29uc3Qgc3RhcnRpbmdXaWR0aExpc3RlbmVyQ291bnQgPSB3aWR0aFByb3BlcnR5WyAnZ2V0TGlzdGVuZXJDb3VudCcgXSgpO1xyXG4gIGNvbnN0IGhlaWdodFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAzICk7XHJcbiAgY29uc3Qgc3RhcnRpbmdIZWlnaHRMaXN0ZW5lckNvdW50ID0gaGVpZ2h0UHJvcGVydHlbICdnZXRMaXN0ZW5lckNvdW50JyBdKCk7XHJcbiAgY29uc3QgYXJlYVByb3BlcnR5RGVwZW5kZW5jaWVzOiByZWFkb25seSBbIFByb3BlcnR5PG51bWJlcj4sIFByb3BlcnR5PG51bWJlcj4gXSA9IFsgd2lkdGhQcm9wZXJ0eSwgaGVpZ2h0UHJvcGVydHkgXSBhcyBjb25zdDtcclxuICBjb25zdCBhcmVhUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBhcmVhUHJvcGVydHlEZXBlbmRlbmNpZXMsXHJcbiAgICAoICggd2lkdGgsIGhlaWdodCApID0+IHdpZHRoICogaGVpZ2h0ICkgKTtcclxuICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uKCBhcmVhOiBudW1iZXIgKSB7IC8qY29uc29sZS5sb2coICdhcmVhID0gJyArIGFyZWEgKTsqLyB9O1xyXG4gIGFyZWFQcm9wZXJ0eS5saW5rKCBsaXN0ZW5lciApO1xyXG5cclxuICBhc3NlcnQuZXF1YWwoIHdpZHRoUHJvcGVydHlbICdnZXRMaXN0ZW5lckNvdW50JyBdKCksIDEgKyBzdGFydGluZ1dpZHRoTGlzdGVuZXJDb3VudCApO1xyXG4gIGFzc2VydC5lcXVhbCggaGVpZ2h0UHJvcGVydHlbICdnZXRMaXN0ZW5lckNvdW50JyBdKCksIDEgKyBzdGFydGluZ0hlaWdodExpc3RlbmVyQ291bnQgKTtcclxuICBhc3NlcnQuZXF1YWwoIGFyZWFQcm9wZXJ0eURlcGVuZGVuY2llcy5sZW5ndGgsIDIgKTtcclxuXHJcbiAgLy8gVW5saW5rIHRoZSBsaXN0ZW5lclxyXG4gIGFyZWFQcm9wZXJ0eS51bmxpbmsoIGxpc3RlbmVyICk7XHJcbiAgYXJlYVByb3BlcnR5LmRpc3Bvc2UoKTtcclxuXHJcbiAgYXNzZXJ0LmVxdWFsKCB3aWR0aFByb3BlcnR5WyAnZ2V0TGlzdGVuZXJDb3VudCcgXSgpLCBzdGFydGluZ1dpZHRoTGlzdGVuZXJDb3VudCApO1xyXG4gIGFzc2VydC5lcXVhbCggaGVpZ2h0UHJvcGVydHlbICdnZXRMaXN0ZW5lckNvdW50JyBdKCksIHN0YXJ0aW5nSGVpZ2h0TGlzdGVuZXJDb3VudCApO1xyXG5cclxuICBhc3NlcnQuZXF1YWwoIGFyZWFQcm9wZXJ0eVsgJ2RlcGVuZGVuY2llcycgXSwgbnVsbCApO1xyXG5cclxuICAvLyBAdHMtZXhwZWN0LWVycm9yLCB0eXBlIG9mIGRlcGVuZGVuY3lMaXN0ZW5lcnMgaXMgaW1wbGljaXRseSBhbnkgYmVjYXVzZSBEZXJpdmVkUHJvcGVydHkgY2FuIGhhdmUgdXAgdG8gMTYgZGVwZW5kZW5jaWVzIG9mIGFueSB0eXBlXHJcbiAgYXNzZXJ0LmVxdWFsKCBhcmVhUHJvcGVydHlbICdkZXBlbmRlbmN5TGlzdGVuZXJzJyBdLCBudWxsICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBhcmVhUHJvcGVydHlbICdkZXBlbmRlbmNpZXMnIF0sIG51bGwgKTtcclxufSApO1xyXG5cclxuUVVuaXQudGVzdCggJ0Rlcml2ZWRQcm9wZXJ0eS52YWx1ZUVxdWFscycsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgYVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAnYScgKTtcclxuICBjb25zdCBiUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoICdiJyApO1xyXG4gIGNvbnN0IGNQcm9wZXJ0eSA9IERlcml2ZWRQcm9wZXJ0eVsgJ3ZhbHVlRXF1YWxzJyBdKCBhUHJvcGVydHksIGJQcm9wZXJ0eSApO1xyXG4gIGFzc2VydC5lcXVhbCggY1Byb3BlcnR5LnZhbHVlLCBmYWxzZSApO1xyXG4gIGFQcm9wZXJ0eS52YWx1ZSA9ICdiJztcclxuICBhc3NlcnQuZXF1YWwoIGNQcm9wZXJ0eS52YWx1ZSwgdHJ1ZSApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnVGVzdCBkZWZlcicsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgZmlyc3RQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMCApO1xyXG4gIGNvbnN0IHNlY29uZFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAyICk7XHJcbiAgY29uc3QgZGVyaXZlZFByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyBmaXJzdFByb3BlcnR5LCBzZWNvbmRQcm9wZXJ0eSBdLCAoIGEsIGIgKSA9PiBhICsgYiApO1xyXG4gIGFzc2VydC5vayggZGVyaXZlZFByb3BlcnR5LnZhbHVlID09PSAyLCAnYmFzZSBjYXNlLCBubyBkZWZlcicgKTtcclxuXHJcbiAgLy8gdGVzdCBhIGRlcGVuZGVuY3kgYmVpbmcgZGVmZXJyZWRcclxuICBmaXJzdFByb3BlcnR5LnNldERlZmVycmVkKCB0cnVlICk7XHJcbiAgYXNzZXJ0Lm9rKCBkZXJpdmVkUHJvcGVydHkudmFsdWUgPT09IDIsICdzYW1lIHZhbHVlIGV2ZW4gYWZ0ZXIgZGVmZXInICk7XHJcbiAgZmlyc3RQcm9wZXJ0eS52YWx1ZSA9IDI7XHJcbiAgYXNzZXJ0Lm9rKCBkZXJpdmVkUHJvcGVydHkudmFsdWUgPT09IDIsICdzYW1lIHZhbHVlIGV2ZW4gd2hlbiBzZXQgdG8gbmV3JyApO1xyXG4gIGNvbnN0IHVwZGF0ZSA9IGZpcnN0UHJvcGVydHkuc2V0RGVmZXJyZWQoIGZhbHNlICk7XHJcbiAgYXNzZXJ0Lm9rKCBmaXJzdFByb3BlcnR5LnZhbHVlID09PSAyLCAncHJvcGVydHkgaGFzIG5ldyB2YWx1ZSBub3cnICk7XHJcbiAgYXNzZXJ0Lm9rKCBkZXJpdmVkUHJvcGVydHkudmFsdWUgPT09IDIsICdidXQgdGhlIGRlcml2ZWRQcm9wZXJ0eSBkb2VzbnQnICk7XHJcbiAgdXBkYXRlICYmIHVwZGF0ZSgpO1xyXG4gIGFzc2VydC5vayggZGVyaXZlZFByb3BlcnR5LnZhbHVlID09PSA0LCAnbm93IGRlcml2ZWRQcm9wZXJ0eSB3YXMgdXBkYXRlZCcgKTtcclxuXHJcbiAgLy8gdGVzdCB0aGUgRGVyaXZlZFByb3BlcnR5IGJlaW5nIGRlZmVycmVkXHJcbiAgZGVyaXZlZFByb3BlcnR5LnNldERlZmVycmVkKCB0cnVlICk7XHJcbiAgYXNzZXJ0Lm9rKCBkZXJpdmVkUHJvcGVydHkudmFsdWUgPT09IDQsICdzdGlsbCA0JyApO1xyXG4gIGZpcnN0UHJvcGVydHkudmFsdWUgPSA0O1xyXG4gIGFzc2VydC5vayggZGVyaXZlZFByb3BlcnR5LnZhbHVlID09PSA0LCAnc3RpbGwgNCBhZnRlciB1cGRhdGUnICk7XHJcbiAgY29uc3QgdXBkYXRlQWdhaW4gPSBkZXJpdmVkUHJvcGVydHkuc2V0RGVmZXJyZWQoIGZhbHNlICk7XHJcbiAgYXNzZXJ0Lm9rKCBkZXJpdmVkUHJvcGVydHkudmFsdWUgPT09IDYsICdub3cgaGFzIHRoZSBjb3JyZWN0IHZhbHVlJyApO1xyXG4gIHVwZGF0ZUFnYWluICYmIHVwZGF0ZUFnYWluKCk7XHJcbiAgYXNzZXJ0Lm9rKCBkZXJpdmVkUHJvcGVydHkudmFsdWUgPT09IDYsICdub3RoaW5nIGNoYW5nZWQnICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdEZXJpdmVkUHJvcGVydHkgYW5kL29yJywgYXNzZXJ0ID0+IHtcclxuXHJcbiAgY29uc3QgYVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBmYWxzZSApO1xyXG4gIGNvbnN0IGJQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggZmFsc2UgKTtcclxuICBjb25zdCBjUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIGZhbHNlICk7XHJcblxyXG4gIC8vIGNvcnJlY3QgdXNhZ2VzIG9mICdhbmQnIGFuZCAnb3InXHJcbiAgY29uc3QgYW5kUHJvcGVydHkgPSBEZXJpdmVkUHJvcGVydHkuYW5kKCBbIGFQcm9wZXJ0eSwgYlByb3BlcnR5LCBjUHJvcGVydHkgXSApO1xyXG4gIGNvbnN0IG9yUHJvcGVydHkgPSBEZXJpdmVkUHJvcGVydHkub3IoIFsgYVByb3BlcnR5LCBiUHJvcGVydHksIGNQcm9wZXJ0eSBdICk7XHJcblxyXG4gIGFzc2VydC5lcXVhbCggYW5kUHJvcGVydHkudmFsdWUsIGZhbHNlICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBvclByb3BlcnR5LnZhbHVlLCBmYWxzZSApO1xyXG5cclxuICBhUHJvcGVydHkudmFsdWUgPSB0cnVlO1xyXG4gIGFzc2VydC5lcXVhbCggYW5kUHJvcGVydHkudmFsdWUsIGZhbHNlICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBvclByb3BlcnR5LnZhbHVlLCB0cnVlICk7XHJcblxyXG4gIGJQcm9wZXJ0eS52YWx1ZSA9IHRydWU7XHJcbiAgYXNzZXJ0LmVxdWFsKCBhbmRQcm9wZXJ0eS52YWx1ZSwgZmFsc2UgKTtcclxuICBhc3NlcnQuZXF1YWwoIG9yUHJvcGVydHkudmFsdWUsIHRydWUgKTtcclxuXHJcbiAgY1Byb3BlcnR5LnZhbHVlID0gdHJ1ZTtcclxuICBhc3NlcnQuZXF1YWwoIGFuZFByb3BlcnR5LnZhbHVlLCB0cnVlICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBvclByb3BlcnR5LnZhbHVlLCB0cnVlICk7XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgSU5URU5USU9OQUwgZmFpbDogc2V0dGluZyBhIGRlcGVuZGVuY3kgdG8gYSBub24tYm9vbGVhbiB2YWx1ZVxyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4geyBhUHJvcGVydHkudmFsdWUgPSAwOyB9LFxyXG4gICAgJ0Rlcml2ZWRQcm9wZXJ0eSBkZXBlbmRlbmN5IG11c3QgaGF2ZSBib29sZWFuIHZhbHVlJyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnRGVyaXZlZFByb3BlcnR5IGFkZC9tdWx0aXBseScsIGFzc2VydCA9PiB7XHJcblxyXG4gIGNvbnN0IGFQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMSApO1xyXG4gIGNvbnN0IGJQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMiApO1xyXG4gIGNvbnN0IGNQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMyApO1xyXG5cclxuICAvLyBjb3JyZWN0IHVzYWdlcyBvZiAnYW5kJyBhbmQgJ29yJ1xyXG4gIGNvbnN0IGFkZFByb3BlcnR5ID0gRGVyaXZlZFByb3BlcnR5LmFkZCggWyBhUHJvcGVydHksIGJQcm9wZXJ0eSwgY1Byb3BlcnR5IF0gKTtcclxuICBjb25zdCBtdWxpdHBseVByb3BlcnR5ID0gRGVyaXZlZFByb3BlcnR5Lm11bHRpcGx5KCBbIGFQcm9wZXJ0eSwgYlByb3BlcnR5LCBjUHJvcGVydHkgXSApO1xyXG5cclxuICBhc3NlcnQuZXF1YWwoIGFkZFByb3BlcnR5LnZhbHVlLCA2ICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBtdWxpdHBseVByb3BlcnR5LnZhbHVlLCA2ICk7XHJcblxyXG4gIGFQcm9wZXJ0eS52YWx1ZSA9IDM7XHJcbiAgYXNzZXJ0LmVxdWFsKCBhZGRQcm9wZXJ0eS52YWx1ZSwgOCApO1xyXG4gIGFzc2VydC5lcXVhbCggbXVsaXRwbHlQcm9wZXJ0eS52YWx1ZSwgMTggKTtcclxuXHJcbiAgYlByb3BlcnR5LnZhbHVlID0gMDtcclxuICBhc3NlcnQuZXF1YWwoIGFkZFByb3BlcnR5LnZhbHVlLCA2ICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBtdWxpdHBseVByb3BlcnR5LnZhbHVlLCAwICk7XHJcblxyXG4gIGJQcm9wZXJ0eS52YWx1ZSA9IDE7XHJcbiAgY1Byb3BlcnR5LnZhbHVlID0gMTA7XHJcbiAgYXNzZXJ0LmVxdWFsKCBhZGRQcm9wZXJ0eS52YWx1ZSwgMTQgKTtcclxuICBhc3NlcnQuZXF1YWwoIG11bGl0cGx5UHJvcGVydHkudmFsdWUsIDMwICk7XHJcbn0gKTtcclxuXHJcbmlmICggVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCApIHtcclxuICBRVW5pdC50ZXN0KCAncHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24gdGVzdHMgZm9yIERlcml2ZWRQcm9wZXJ0eScsIGFzc2VydCA9PiB7XHJcblxyXG4gICAgY29uc3QgcGFyZW50VGFuZGVtID0gVGFuZGVtLlJPT1RfVEVTVDtcclxuXHJcbiAgICBjb25zdCBvcmlnaW5hbE9yZGVyRGVwZW5kZW5jeUxlbmd0aCA9IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uLmdldE51bWJlck9mT3JkZXJEZXBlbmRlbmNpZXMoKTtcclxuICAgIGNvbnN0IGdldE9yZGVyRGVwZW5kZW5jeUxlbmd0aCA9ICgpID0+IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uLmdldE51bWJlck9mT3JkZXJEZXBlbmRlbmNpZXMoKSAtIG9yaWdpbmFsT3JkZXJEZXBlbmRlbmN5TGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0UHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEsIHtcclxuICAgICAgdGFuZGVtOiBwYXJlbnRUYW5kZW0uY3JlYXRlVGFuZGVtKCAnZmlyc3RQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvVmFsdWVUeXBlOiBOdW1iZXJJT1xyXG4gICAgfSApO1xyXG4gICAgY29uc3Qgc2Vjb25kUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEsIHtcclxuICAgICAgdGFuZGVtOiBwYXJlbnRUYW5kZW0uY3JlYXRlVGFuZGVtKCAnc2Vjb25kUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogTnVtYmVySU9cclxuICAgIH0gKTtcclxuICAgIGNvbnN0IHRoaXJkUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEsIHtcclxuICAgICAgdGFuZGVtOiBwYXJlbnRUYW5kZW0uY3JlYXRlVGFuZGVtKCAndGhpcmRQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvVmFsdWVUeXBlOiBOdW1iZXJJT1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGRlcml2ZWRQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgZmlyc3RQcm9wZXJ0eSwgc2Vjb25kUHJvcGVydHksIHRoaXJkUHJvcGVydHkgXSwgKCkgPT4gMywge1xyXG4gICAgICB0YW5kZW06IHBhcmVudFRhbmRlbS5jcmVhdGVUYW5kZW0oICdkZXJpdmVkUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogTnVtYmVySU9cclxuICAgIH0gKTtcclxuICAgIGFzc2VydC5vayggZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoKCkgPT09IDMsICdkZXJpdmVkUHJvcGVydHkgYWRkcyBvcmRlciBkZXBlbmRlbmN5IGZvciBlYWNoIGRlcGVuZGVuY3knICk7XHJcblxyXG4gICAgZmlyc3RQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICBhc3NlcnQub2soIGdldE9yZGVyRGVwZW5kZW5jeUxlbmd0aCgpID09PSAyLCAnZGVwZW5kZW5jeSBkaXNwb3NlIG9ubHkgcmVtb3ZlcyB3aGF0IGl0IGVmZmVjdHMnICk7XHJcbiAgICBkZXJpdmVkUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgYXNzZXJ0Lm9rKCBnZXRPcmRlckRlcGVuZGVuY3lMZW5ndGgoKSA9PT0gMCwgJ25vIG9yZGVyRGVwZW5kZW5jaWVzIGFmdGVyIGRlcml2ZWRQcm9wZXJ0eSBkaXNwb3NlJyApO1xyXG5cclxuICAgIHNlY29uZFByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIHRoaXJkUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gIH0gKTtcclxufSJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxNQUFNLE1BQU0sMkJBQTJCO0FBQzlDLE9BQU9DLFFBQVEsTUFBTSxtQ0FBbUM7QUFDeEQsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUNsRCxPQUFPQyxRQUFRLE1BQU0sZUFBZTtBQUNwQyxPQUFPQyw2QkFBNkIsTUFBTSxvQ0FBb0M7QUFFOUVDLEtBQUssQ0FBQ0MsTUFBTSxDQUFFLGlCQUFrQixDQUFDO0FBRWpDRCxLQUFLLENBQUNFLElBQUksQ0FBRSxzQ0FBc0MsRUFBRUMsTUFBTSxJQUFJO0VBQzVELE1BQU1DLFNBQVMs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