// Copyright 2022-2024, University of Colorado Boulder

/**
 * PatternStringProperty tests
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import TinyProperty from './TinyProperty.js';
import PatternStringProperty from './PatternStringProperty.js';
import Tandem from '../../tandem/js/Tandem.js';
QUnit.module('PatternStringProperty');
QUnit.test('Basic usage', assert => {
  const patternProperty = new TinyProperty('Value: {{value}}');
  const valueProperty = new TinyProperty(5);
  const property = new PatternStringProperty(patternProperty, {
    value: valueProperty
  }, {
    tandem: Tandem.OPT_OUT
  });
  assert.equal(property.value, 'Value: 5');
  patternProperty.value = 'Why {{value}}?';
  assert.equal(property.value, 'Why 5?');
  valueProperty.value = 10;
  assert.equal(property.value, 'Why 10?');
});
QUnit.test('Constant usage', assert => {
  const patternProperty = new TinyProperty('Value: {{value}}');
  const property = new PatternStringProperty(patternProperty, {
    value: 5
  }, {
    tandem: Tandem.OPT_OUT
  });
  assert.equal(property.value, 'Value: 5');
  patternProperty.value = 'Why {{value}}?';
  assert.equal(property.value, 'Why 5?');
});
QUnit.test('Multiple Properties', assert => {
  const patternProperty = new TinyProperty('Is {{valueA}} greater than {{valueB}}?');
  const valueAProperty = new TinyProperty(4);
  const valueBProperty = new TinyProperty(6);
  const property = new PatternStringProperty(patternProperty, {
    valueA: valueAProperty,
    valueB: valueBProperty
  }, {
    tandem: Tandem.OPT_OUT
  });
  assert.equal(property.value, 'Is 4 greater than 6?');
  valueAProperty.value = 7;
  assert.equal(property.value, 'Is 7 greater than 6?');
  valueBProperty.value = 10;
  assert.equal(property.value, 'Is 7 greater than 10?');
});
QUnit.test('Decimal Places (basic)', assert => {
  const patternProperty = new TinyProperty('Value: {{value}}');
  const valueProperty = new TinyProperty(4);
  const property = new PatternStringProperty(patternProperty, {
    value: valueProperty
  }, {
    tandem: Tandem.OPT_OUT,
    decimalPlaces: 2
  });
  assert.equal(property.value, 'Value: 4.00');
  valueProperty.value = Math.PI;
  assert.equal(property.value, 'Value: 3.14');
});
QUnit.test('Decimal Places (multiple)', assert => {
  const patternProperty = new TinyProperty('Is {{valueA}} greater than {{valueB}}?');
  const valueAProperty = new TinyProperty(4);
  const valueBProperty = new TinyProperty(6);
  const property = new PatternStringProperty(patternProperty, {
    valueA: valueAProperty,
    valueB: valueBProperty
  }, {
    tandem: Tandem.OPT_OUT,
    decimalPlaces: {
      valueA: 1,
      valueB: 2
    }
  });
  assert.equal(property.value, 'Is 4.0 greater than 6.00?');
});
QUnit.test('Decimal Places (only one)', assert => {
  const patternProperty = new TinyProperty('Is {{valueA}} greater than {{valueB}}?');
  const valueAProperty = new TinyProperty(4);
  const valueBProperty = new TinyProperty(6);
  const property = new PatternStringProperty(patternProperty, {
    valueA: valueAProperty,
    valueB: valueBProperty
  }, {
    tandem: Tandem.OPT_OUT,
    decimalPlaces: {
      valueA: null,
      valueB: 2
    }
  });
  assert.equal(property.value, 'Is 4 greater than 6.00?');
});
QUnit.test('Map (basic)', assert => {
  const patternProperty = new TinyProperty('Value: {{value}}');
  const valueProperty = new TinyProperty(4);
  const property = new PatternStringProperty(patternProperty, {
    value: valueProperty
  }, {
    tandem: Tandem.OPT_OUT,
    maps: {
      value: n => n * 2
    }
  });
  assert.equal(property.value, 'Value: 8');
  valueProperty.value = 1;
  assert.equal(property.value, 'Value: 2');
});
QUnit.test('Map (with decimal places)', assert => {
  const patternProperty = new TinyProperty('Value: {{value}}');
  const valueProperty = new TinyProperty(2);
  const property = new PatternStringProperty(patternProperty, {
    value: valueProperty
  }, {
    tandem: Tandem.OPT_OUT,
    maps: {
      value: n => n / 4
    },
    decimalPlaces: 2
  });
  assert.equal(property.value, 'Value: 0.50');
  valueProperty.value = 1;
  assert.equal(property.value, 'Value: 0.25');
});
QUnit.test('Map (string)', assert => {
  const patternProperty = new TinyProperty('What does the fox say: {{value}}');
  const valueProperty = new TinyProperty('Hello');
  const property = new PatternStringProperty(patternProperty, {
    value: valueProperty
  }, {
    tandem: Tandem.OPT_OUT,
    maps: {
      value: str => `${str}!`
    }
  });
  assert.equal(property.value, 'What does the fox say: Hello!');
});
QUnit.test('Map (non-value)', assert => {
  const patternProperty = new TinyProperty('Sum is {{sum}}');
  const valueProperty = new TinyProperty([1, 2, 3]);
  const property = new PatternStringProperty(patternProperty, {
    sum: valueProperty
  }, {
    tandem: Tandem.OPT_OUT,
    maps: {
      sum: values => _.sum(values)
    }
  });
  assert.equal(property.value, 'Sum is 6');
  valueProperty.value = [4, 0, 9];
  assert.equal(property.value, 'Sum is 13');
});
QUnit.test('formatNames', assert => {
  const patternProperty = new TinyProperty('Values: {0} and {1}');
  const property = new PatternStringProperty(patternProperty, {
    valueA: 5,
    valueB: 7
  }, {
    tandem: Tandem.OPT_OUT,
    formatNames: ['valueA', 'valueB']
  });
  assert.equal(property.value, 'Values: 5 and 7');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUaW55UHJvcGVydHkiLCJQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJUYW5kZW0iLCJRVW5pdCIsIm1vZHVsZSIsInRlc3QiLCJhc3NlcnQiLCJwYXR0ZXJuUHJvcGVydHkiLCJ2YWx1ZVByb3BlcnR5IiwicHJvcGVydHkiLCJ2YWx1ZSIsInRhbmRlbSIsIk9QVF9PVVQiLCJlcXVhbCIsInZhbHVlQVByb3BlcnR5IiwidmFsdWVCUHJvcGVydHkiLCJ2YWx1ZUEiLCJ2YWx1ZUIiLCJkZWNpbWFsUGxhY2VzIiwiTWF0aCIsIlBJIiwibWFwcyIsIm4iLCJzdHIiLCJzdW0iLCJ2YWx1ZXMiLCJfIiwiZm9ybWF0TmFtZXMiXSwic291cmNlcyI6WyJQYXR0ZXJuU3RyaW5nUHJvcGVydHlUZXN0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQYXR0ZXJuU3RyaW5nUHJvcGVydHkgdGVzdHNcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBUaW55UHJvcGVydHkgZnJvbSAnLi9UaW55UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGF0dGVyblN0cmluZ1Byb3BlcnR5IGZyb20gJy4vUGF0dGVyblN0cmluZ1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuXHJcblFVbml0Lm1vZHVsZSggJ1BhdHRlcm5TdHJpbmdQcm9wZXJ0eScgKTtcclxuXHJcblFVbml0LnRlc3QoICdCYXNpYyB1c2FnZScsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcGF0dGVyblByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ1ZhbHVlOiB7e3ZhbHVlfX0nICk7XHJcbiAgY29uc3QgdmFsdWVQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDUgKTtcclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHBhdHRlcm5Qcm9wZXJ0eSwge1xyXG4gICAgdmFsdWU6IHZhbHVlUHJvcGVydHlcclxuICB9LCB7IHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgfSApO1xyXG5cclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnVmFsdWU6IDUnICk7XHJcblxyXG4gIHBhdHRlcm5Qcm9wZXJ0eS52YWx1ZSA9ICdXaHkge3t2YWx1ZX19Pyc7XHJcbiAgYXNzZXJ0LmVxdWFsKCBwcm9wZXJ0eS52YWx1ZSwgJ1doeSA1PycgKTtcclxuXHJcbiAgdmFsdWVQcm9wZXJ0eS52YWx1ZSA9IDEwO1xyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdXaHkgMTA/JyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnQ29uc3RhbnQgdXNhZ2UnLCBhc3NlcnQgPT4ge1xyXG4gIGNvbnN0IHBhdHRlcm5Qcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoICdWYWx1ZToge3t2YWx1ZX19JyApO1xyXG4gIGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggcGF0dGVyblByb3BlcnR5LCB7XHJcbiAgICB2YWx1ZTogNVxyXG4gIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcblxyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdWYWx1ZTogNScgKTtcclxuXHJcbiAgcGF0dGVyblByb3BlcnR5LnZhbHVlID0gJ1doeSB7e3ZhbHVlfX0/JztcclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnV2h5IDU/JyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnTXVsdGlwbGUgUHJvcGVydGllcycsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcGF0dGVyblByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ0lzIHt7dmFsdWVBfX0gZ3JlYXRlciB0aGFuIHt7dmFsdWVCfX0/JyApO1xyXG4gIGNvbnN0IHZhbHVlQVByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggNCApO1xyXG4gIGNvbnN0IHZhbHVlQlByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggNiApO1xyXG4gIGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggcGF0dGVyblByb3BlcnR5LCB7XHJcbiAgICB2YWx1ZUE6IHZhbHVlQVByb3BlcnR5LFxyXG4gICAgdmFsdWVCOiB2YWx1ZUJQcm9wZXJ0eVxyXG4gIH0sIHsgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcblxyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdJcyA0IGdyZWF0ZXIgdGhhbiA2PycgKTtcclxuXHJcbiAgdmFsdWVBUHJvcGVydHkudmFsdWUgPSA3O1xyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdJcyA3IGdyZWF0ZXIgdGhhbiA2PycgKTtcclxuXHJcbiAgdmFsdWVCUHJvcGVydHkudmFsdWUgPSAxMDtcclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnSXMgNyBncmVhdGVyIHRoYW4gMTA/JyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnRGVjaW1hbCBQbGFjZXMgKGJhc2ljKScsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcGF0dGVyblByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ1ZhbHVlOiB7e3ZhbHVlfX0nICk7XHJcbiAgY29uc3QgdmFsdWVQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDQgKTtcclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHBhdHRlcm5Qcm9wZXJ0eSwge1xyXG4gICAgdmFsdWU6IHZhbHVlUHJvcGVydHlcclxuICB9LCB7XHJcbiAgICB0YW5kZW06IFRhbmRlbS5PUFRfT1VULFxyXG4gICAgZGVjaW1hbFBsYWNlczogMlxyXG4gIH0gKTtcclxuXHJcbiAgYXNzZXJ0LmVxdWFsKCBwcm9wZXJ0eS52YWx1ZSwgJ1ZhbHVlOiA0LjAwJyApO1xyXG5cclxuICB2YWx1ZVByb3BlcnR5LnZhbHVlID0gTWF0aC5QSTtcclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnVmFsdWU6IDMuMTQnICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdEZWNpbWFsIFBsYWNlcyAobXVsdGlwbGUpJywgYXNzZXJ0ID0+IHtcclxuICBjb25zdCBwYXR0ZXJuUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCAnSXMge3t2YWx1ZUF9fSBncmVhdGVyIHRoYW4ge3t2YWx1ZUJ9fT8nICk7XHJcbiAgY29uc3QgdmFsdWVBUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCA0ICk7XHJcbiAgY29uc3QgdmFsdWVCUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCA2ICk7XHJcbiAgY29uc3QgcHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBwYXR0ZXJuUHJvcGVydHksIHtcclxuICAgIHZhbHVlQTogdmFsdWVBUHJvcGVydHksXHJcbiAgICB2YWx1ZUI6IHZhbHVlQlByb3BlcnR5XHJcbiAgfSwge1xyXG4gICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCxcclxuICAgIGRlY2ltYWxQbGFjZXM6IHtcclxuICAgICAgdmFsdWVBOiAxLFxyXG4gICAgICB2YWx1ZUI6IDJcclxuICAgIH1cclxuICB9ICk7XHJcblxyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdJcyA0LjAgZ3JlYXRlciB0aGFuIDYuMDA/JyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnRGVjaW1hbCBQbGFjZXMgKG9ubHkgb25lKScsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcGF0dGVyblByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ0lzIHt7dmFsdWVBfX0gZ3JlYXRlciB0aGFuIHt7dmFsdWVCfX0/JyApO1xyXG4gIGNvbnN0IHZhbHVlQVByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggNCApO1xyXG4gIGNvbnN0IHZhbHVlQlByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggNiApO1xyXG4gIGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggcGF0dGVyblByb3BlcnR5LCB7XHJcbiAgICB2YWx1ZUE6IHZhbHVlQVByb3BlcnR5LFxyXG4gICAgdmFsdWVCOiB2YWx1ZUJQcm9wZXJ0eVxyXG4gIH0sIHtcclxuICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICBkZWNpbWFsUGxhY2VzOiB7XHJcbiAgICAgIHZhbHVlQTogbnVsbCxcclxuICAgICAgdmFsdWVCOiAyXHJcbiAgICB9XHJcbiAgfSApO1xyXG5cclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnSXMgNCBncmVhdGVyIHRoYW4gNi4wMD8nICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdNYXAgKGJhc2ljKScsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcGF0dGVyblByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ1ZhbHVlOiB7e3ZhbHVlfX0nICk7XHJcbiAgY29uc3QgdmFsdWVQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDQgKTtcclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHBhdHRlcm5Qcm9wZXJ0eSwge1xyXG4gICAgdmFsdWU6IHZhbHVlUHJvcGVydHlcclxuICB9LCB7XHJcbiAgICB0YW5kZW06IFRhbmRlbS5PUFRfT1VULFxyXG4gICAgbWFwczoge1xyXG4gICAgICB2YWx1ZTogKCBuOiBudW1iZXIgKSA9PiBuICogMlxyXG4gICAgfVxyXG4gIH0gKTtcclxuXHJcbiAgYXNzZXJ0LmVxdWFsKCBwcm9wZXJ0eS52YWx1ZSwgJ1ZhbHVlOiA4JyApO1xyXG5cclxuICB2YWx1ZVByb3BlcnR5LnZhbHVlID0gMTtcclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnVmFsdWU6IDInICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdNYXAgKHdpdGggZGVjaW1hbCBwbGFjZXMpJywgYXNzZXJ0ID0+IHtcclxuICBjb25zdCBwYXR0ZXJuUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCAnVmFsdWU6IHt7dmFsdWV9fScgKTtcclxuICBjb25zdCB2YWx1ZVByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggMiApO1xyXG4gIGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggcGF0dGVyblByb3BlcnR5LCB7XHJcbiAgICB2YWx1ZTogdmFsdWVQcm9wZXJ0eVxyXG4gIH0sIHtcclxuICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICBtYXBzOiB7XHJcbiAgICAgIHZhbHVlOiAoIG46IG51bWJlciApID0+IG4gLyA0XHJcbiAgICB9LFxyXG4gICAgZGVjaW1hbFBsYWNlczogMlxyXG4gIH0gKTtcclxuXHJcbiAgYXNzZXJ0LmVxdWFsKCBwcm9wZXJ0eS52YWx1ZSwgJ1ZhbHVlOiAwLjUwJyApO1xyXG5cclxuICB2YWx1ZVByb3BlcnR5LnZhbHVlID0gMTtcclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnVmFsdWU6IDAuMjUnICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdNYXAgKHN0cmluZyknLCBhc3NlcnQgPT4ge1xyXG4gIGNvbnN0IHBhdHRlcm5Qcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoICdXaGF0IGRvZXMgdGhlIGZveCBzYXk6IHt7dmFsdWV9fScgKTtcclxuICBjb25zdCB2YWx1ZVByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ0hlbGxvJyApO1xyXG4gIGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggcGF0dGVyblByb3BlcnR5LCB7XHJcbiAgICB2YWx1ZTogdmFsdWVQcm9wZXJ0eVxyXG4gIH0sIHtcclxuICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICBtYXBzOiB7XHJcbiAgICAgIHZhbHVlOiAoIHN0cjogc3RyaW5nICkgPT4gYCR7c3RyfSFgXHJcbiAgICB9XHJcbiAgfSApO1xyXG5cclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5LnZhbHVlLCAnV2hhdCBkb2VzIHRoZSBmb3ggc2F5OiBIZWxsbyEnICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdNYXAgKG5vbi12YWx1ZSknLCBhc3NlcnQgPT4ge1xyXG4gIGNvbnN0IHBhdHRlcm5Qcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoICdTdW0gaXMge3tzdW19fScgKTtcclxuICBjb25zdCB2YWx1ZVByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggWyAxLCAyLCAzIF0gKTtcclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHBhdHRlcm5Qcm9wZXJ0eSwge1xyXG4gICAgc3VtOiB2YWx1ZVByb3BlcnR5XHJcbiAgfSwge1xyXG4gICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCxcclxuICAgIG1hcHM6IHtcclxuICAgICAgc3VtOiAoIHZhbHVlczogbnVtYmVyW10gKSA9PiBfLnN1bSggdmFsdWVzIClcclxuICAgIH1cclxuICB9ICk7XHJcblxyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdTdW0gaXMgNicgKTtcclxuXHJcbiAgdmFsdWVQcm9wZXJ0eS52YWx1ZSA9IFsgNCwgMCwgOSBdO1xyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsICdTdW0gaXMgMTMnICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdmb3JtYXROYW1lcycsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcGF0dGVyblByb3BlcnR5ID0gbmV3IFRpbnlQcm9wZXJ0eSggJ1ZhbHVlczogezB9IGFuZCB7MX0nICk7XHJcbiAgY29uc3QgcHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBwYXR0ZXJuUHJvcGVydHksIHtcclxuICAgIHZhbHVlQTogNSxcclxuICAgIHZhbHVlQjogN1xyXG4gIH0sIHtcclxuICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQsXHJcbiAgICBmb3JtYXROYW1lczogWyAndmFsdWVBJywgJ3ZhbHVlQicgXVxyXG4gIH0gKTtcclxuXHJcbiAgYXNzZXJ0LmVxdWFsKCBwcm9wZXJ0eS52YWx1ZSwgJ1ZhbHVlczogNSBhbmQgNycgKTtcclxufSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxZQUFZLE1BQU0sbUJBQW1CO0FBQzVDLE9BQU9DLHFCQUFxQixNQUFNLDRCQUE0QjtBQUM5RCxPQUFPQyxNQUFNLE1BQU0sMkJBQTJCO0FBRTlDQyxLQUFLLENBQUNDLE1BQU0sQ0FBRSx1QkFBd0IsQ0FBQztBQUV2Q0QsS0FBSyxDQUFDRSxJQUFJLENBQUUsYUFBYSxFQUFFQyxNQUFNLElBQUk7RUFDbkMsTUFBTUMsZUFBZSxHQUFHLElBQUlQLFlBQVksQ0FBRSxrQkFBbUIsQ0FBQztFQUM5RCxNQUFNUSxhQUFhLEdBQUcsSUFBSVIsWUFBWSxDQUFFLENBQUUsQ0FBQztFQUMzQyxNQUFNUyxRQUFRLEdBQUcsSUFBSVIscUJBQXFCLENBQUVNLGVBQWUsRUFBRTtJQUMzREcsS0FBSyxFQUFFRjtFQUNULENBQUMsRUFBRTtJQUFFRyxNQUFNLEVBQUVULE1BQU0sQ0FBQ1U7RUFBUSxDQUFFLENBQUM7RUFFL0JOLE1BQU0sQ0FBQ08sS0FBSyxDQUFFSixRQUFRLENBQUNDLEtBQUssRUFBRSxVQUFXLENBQUM7RUFFMUNILGVBQWUsQ0FBQ0csS0FBSyxHQUFHLGdCQUFnQjtFQUN4Q0osTUFBTSxDQUFDTyxLQUFLLENBQUVKLFFBQVEsQ0FBQ0MsS0FBSyxFQUFFLFFBQVMsQ0FBQztFQUV4Q0YsYUFBYSxDQUFDRSxLQUFLLEdBQUcsRUFB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