// Copyright 2024, University of Colorado Boulder

/**
 * TODO: Move over to updateLocaleInfo.js once we are ready to propagate the locale changes https://github.com/phetsims/joist/issues/963
 *
 * WARNING: This will commit/push the changes. Those changes likely be propagated immediately to the website and rosetta.
 *
 * NOTE: Run with CWD of chipper/js/data
 *
 * @author Matt Pennington (PhET Interactive Simulations)
 */

const child_process = require('child_process');
const fs = require('fs');

/**
 * Converts locale data from babel/localeData.json into legacy formats used by rosetta and the website.
 *
 * Overall description of the localeData system:
 *
 * - babel/localeData.json - Ground truth, includes the "new" format with locale3 and englishName instead of name
 * - chipper/js/data/localeInfo.js - CommonJS legacy module
 * - chipper/js/data/localeInfoModule.js - ES6 legacy module
 * - chipper/js/data/localeInfo.json - JSON legacy
 *
 * IMPORTANT - MUST READ!!!
 * You may modify babel/localeData.json file with new locale information. After modifying the file you must take the following steps:
 * 1. Run ./updateLocaleInfo.js, so that the automatically generated files are also update
 * 2. Notify the responsible developers for rosetta, weddell, yotta, and the website that localeInfo was updated.
 * 3. TODO figure out next steps, see https://github.com/phetsims/joist/issues/963
 *
 * Locale data was originally based on Java's Locale object, but has been modified. Essentially each locale has the
 * following data:
 *
 * - locale: Either in the format `xx` or `xx_XX` (ISO-639-1 with 2-letter country code optional). Sometimes these
 *           do not match with ISO-639-1, we have had to add some for our needs.
 *           - language codes are ISO 639-1, see http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes
 *           - country codes are ISO 3166-1 alpha2, see http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2
 *
 *           NOTE: We are using an older version of ISO 639-1 because java.util.Locale maps some of the newer language codes to
 *           older codes. See Locale.convertOldISOCodes.
 *           The affected country codes are:
 *           he -> iw (Hebrew)
 *           yi -> ji (Yiddish)
 *           id -> in (Indonesian)
 * - locale3: Format of `xxx`. The ISO-639-2 code for the language (3-letter code), if available. Some locales do not
 *            have this information (most do).
 * - direction: either `ltr` or `rtl` for left-to-right or right-to-left
 * - englishName: The name of the locale in English
 * - localizedName: The name of the locale in the locale itself
 *
 * ALSO NOTE: We had a request to support Lakota, which is not included in ISO 639-1, and is only defined as a three-
 * letter code in ISO 639-3.  The locale combination 'lk' was not taken in ISO 639-1, so we added it.  Strictly
 * speaking, this is a deviation from the spec.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

// Load our ground source of truth
const localeData = JSON.parse(fs.readFileSync('../../../babel/localeData.json', 'utf8'));

// Construct the concise JS that defines the legacy locale-info format
let localeInfoSnippet = '{';
// eslint-disable-next-line bad-text
const badText = 'Slave'; // There is an englishName that contains this word, see https://en.wikipedia.org/?title=Slave_language_(Athapascan)&redirect=no
// Add properties for all locales
for (const locale of Object.keys(localeData)) {
  localeInfoSnippet += `
  ${locale}: {
    ${localeData[locale].englishName.includes(badText) ? '// eslint-disable-next-line bad-text\n    ' : ''}name: '${localeData[locale].englishName.replace(/'/g, '\\\'')}',
    localizedName: '${localeData[locale].localizedName.replace(/'/g, '\\\'')}',
    direction: '${localeData[locale].direction}'
  },`;
}
// Remove the trailing comma
localeInfoSnippet = localeInfoSnippet.slice(0, -1);
// Close the object
localeInfoSnippet += '\n}';
const localeInfo = {};
for (const locale of Object.keys(localeData)) {
  localeInfo[locale] = {
    name: localeData[locale].englishName,
    localizedName: localeData[locale].localizedName,
    direction: localeData[locale].direction
  };
}
const newLocaleInfo = {
  _comment: 'This file is automatically generated by js/data/updateLocaleInfo.js. Do not modify it directly.',
  ...localeInfo
};
fs.writeFileSync('../../data/localeInfo.json', JSON.stringify(newLocaleInfo, null, 2));
const commonDocumentation = `// Copyright 2015-${new Date().getFullYear()}, University of Colorado Boulder

/**
  * This file is automatically generated by js/data/updateLocaleInfo.js. Do not modify it directly.
  *
  * @author automatically generated by updateLocaleInfo.js
  */

/* eslint-env browser, node */


`;
const newCommonJSSouceCode = `${commonDocumentation}module.exports = ${localeInfoSnippet};`;
fs.writeFileSync('./localeInfo.js', newCommonJSSouceCode);
const newModuleSourceCode = `${commonDocumentation}export default ${localeInfoSnippet};`;
fs.writeFileSync('./localeInfoModule.js', newModuleSourceCode);
console.log('locale info files updated');
throw new Error('NO COMMIT YET, safeguard so we do not commit changes to main yet'); // TODO: remove for https://github.com/phetsims/joist/issues/963

// eslint-disable-next-line no-unreachable
let needsCommit = false;
try {
  // 0 exit code if there are no working copy changes from HEAD.
  child_process.execSync('git diff-index --quiet HEAD --');
  console.log('No locale info changes, no commit needed.');
} catch (e) {
  needsCommit = true;
}
if (needsCommit) {
  try {
    console.log('pulling');

    // Some devs have rebase set by default, and you cannot rebase-pull with working copy changes.
    child_process.execSync('git pull --no-rebase');
    child_process.execSync('git add ../../data/localeInfo.json');
    child_process.execSync('git add ./localeInfo.js');
    child_process.execSync('git add ./localeInfoModule.js');
    if (needsCommit) {
      console.log('committing');
      child_process.execSync('git commit --no-verify ../../data/localeInfo.json ./localeInfo.js ./localeInfoModule.js -m "Automatically updated generated localeInfo files"');
      console.log('pushing');
      child_process.execSync('git push');
    }
  } catch (e) {
    console.error('Unable to update files in git.', e);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjaGlsZF9wcm9jZXNzIiwicmVxdWlyZSIsImZzIiwibG9jYWxlRGF0YSIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsImxvY2FsZUluZm9TbmlwcGV0IiwiYmFkVGV4dCIsImxvY2FsZSIsIk9iamVjdCIsImtleXMiLCJlbmdsaXNoTmFtZSIsImluY2x1ZGVzIiwicmVwbGFjZSIsImxvY2FsaXplZE5hbWUiLCJkaXJlY3Rpb24iLCJzbGljZSIsImxvY2FsZUluZm8iLCJuYW1lIiwibmV3TG9jYWxlSW5mbyIsIl9jb21tZW50Iiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsImNvbW1vbkRvY3VtZW50YXRpb24iLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJuZXdDb21tb25KU1NvdWNlQ29kZSIsIm5ld01vZHVsZVNvdXJjZUNvZGUiLCJjb25zb2xlIiwibG9nIiwiRXJyb3IiLCJuZWVkc0NvbW1pdCIsImV4ZWNTeW5jIiwiZSIsImVycm9yIl0sInNvdXJjZXMiOlsibmV3VXBkYXRlTG9jYWxlSW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVE9ETzogTW92ZSBvdmVyIHRvIHVwZGF0ZUxvY2FsZUluZm8uanMgb25jZSB3ZSBhcmUgcmVhZHkgdG8gcHJvcGFnYXRlIHRoZSBsb2NhbGUgY2hhbmdlcyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzk2M1xyXG4gKlxyXG4gKiBXQVJOSU5HOiBUaGlzIHdpbGwgY29tbWl0L3B1c2ggdGhlIGNoYW5nZXMuIFRob3NlIGNoYW5nZXMgbGlrZWx5IGJlIHByb3BhZ2F0ZWQgaW1tZWRpYXRlbHkgdG8gdGhlIHdlYnNpdGUgYW5kIHJvc2V0dGEuXHJcbiAqXHJcbiAqIE5PVEU6IFJ1biB3aXRoIENXRCBvZiBjaGlwcGVyL2pzL2RhdGFcclxuICpcclxuICogQGF1dGhvciBNYXR0IFBlbm5pbmd0b24gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuY29uc3QgY2hpbGRfcHJvY2VzcyA9IHJlcXVpcmUoICdjaGlsZF9wcm9jZXNzJyApO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoICdmcycgKTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBsb2NhbGUgZGF0YSBmcm9tIGJhYmVsL2xvY2FsZURhdGEuanNvbiBpbnRvIGxlZ2FjeSBmb3JtYXRzIHVzZWQgYnkgcm9zZXR0YSBhbmQgdGhlIHdlYnNpdGUuXHJcbiAqXHJcbiAqIE92ZXJhbGwgZGVzY3JpcHRpb24gb2YgdGhlIGxvY2FsZURhdGEgc3lzdGVtOlxyXG4gKlxyXG4gKiAtIGJhYmVsL2xvY2FsZURhdGEuanNvbiAtIEdyb3VuZCB0cnV0aCwgaW5jbHVkZXMgdGhlIFwibmV3XCIgZm9ybWF0IHdpdGggbG9jYWxlMyBhbmQgZW5nbGlzaE5hbWUgaW5zdGVhZCBvZiBuYW1lXHJcbiAqIC0gY2hpcHBlci9qcy9kYXRhL2xvY2FsZUluZm8uanMgLSBDb21tb25KUyBsZWdhY3kgbW9kdWxlXHJcbiAqIC0gY2hpcHBlci9qcy9kYXRhL2xvY2FsZUluZm9Nb2R1bGUuanMgLSBFUzYgbGVnYWN5IG1vZHVsZVxyXG4gKiAtIGNoaXBwZXIvanMvZGF0YS9sb2NhbGVJbmZvLmpzb24gLSBKU09OIGxlZ2FjeVxyXG4gKlxyXG4gKiBJTVBPUlRBTlQgLSBNVVNUIFJFQUQhISFcclxuICogWW91IG1heSBtb2RpZnkgYmFiZWwvbG9jYWxlRGF0YS5qc29uIGZpbGUgd2l0aCBuZXcgbG9jYWxlIGluZm9ybWF0aW9uLiBBZnRlciBtb2RpZnlpbmcgdGhlIGZpbGUgeW91IG11c3QgdGFrZSB0aGUgZm9sbG93aW5nIHN0ZXBzOlxyXG4gKiAxLiBSdW4gLi91cGRhdGVMb2NhbGVJbmZvLmpzLCBzbyB0aGF0IHRoZSBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBmaWxlcyBhcmUgYWxzbyB1cGRhdGVcclxuICogMi4gTm90aWZ5IHRoZSByZXNwb25zaWJsZSBkZXZlbG9wZXJzIGZvciByb3NldHRhLCB3ZWRkZWxsLCB5b3R0YSwgYW5kIHRoZSB3ZWJzaXRlIHRoYXQgbG9jYWxlSW5mbyB3YXMgdXBkYXRlZC5cclxuICogMy4gVE9ETyBmaWd1cmUgb3V0IG5leHQgc3RlcHMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzk2M1xyXG4gKlxyXG4gKiBMb2NhbGUgZGF0YSB3YXMgb3JpZ2luYWxseSBiYXNlZCBvbiBKYXZhJ3MgTG9jYWxlIG9iamVjdCwgYnV0IGhhcyBiZWVuIG1vZGlmaWVkLiBFc3NlbnRpYWxseSBlYWNoIGxvY2FsZSBoYXMgdGhlXHJcbiAqIGZvbGxvd2luZyBkYXRhOlxyXG4gKlxyXG4gKiAtIGxvY2FsZTogRWl0aGVyIGluIHRoZSBmb3JtYXQgYHh4YCBvciBgeHhfWFhgIChJU08tNjM5LTEgd2l0aCAyLWxldHRlciBjb3VudHJ5IGNvZGUgb3B0aW9uYWwpLiBTb21ldGltZXMgdGhlc2VcclxuICogICAgICAgICAgIGRvIG5vdCBtYXRjaCB3aXRoIElTTy02MzktMSwgd2UgaGF2ZSBoYWQgdG8gYWRkIHNvbWUgZm9yIG91ciBuZWVkcy5cclxuICogICAgICAgICAgIC0gbGFuZ3VhZ2UgY29kZXMgYXJlIElTTyA2MzktMSwgc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXNcclxuICogICAgICAgICAgIC0gY291bnRyeSBjb2RlcyBhcmUgSVNPIDMxNjYtMSBhbHBoYTIsIHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT18zMTY2LTFfYWxwaGEtMlxyXG4gKlxyXG4gKiAgICAgICAgICAgTk9URTogV2UgYXJlIHVzaW5nIGFuIG9sZGVyIHZlcnNpb24gb2YgSVNPIDYzOS0xIGJlY2F1c2UgamF2YS51dGlsLkxvY2FsZSBtYXBzIHNvbWUgb2YgdGhlIG5ld2VyIGxhbmd1YWdlIGNvZGVzIHRvXHJcbiAqICAgICAgICAgICBvbGRlciBjb2Rlcy4gU2VlIExvY2FsZS5jb252ZXJ0T2xkSVNPQ29kZXMuXHJcbiAqICAgICAgICAgICBUaGUgYWZmZWN0ZWQgY291bnRyeSBjb2RlcyBhcmU6XHJcbiAqICAgICAgICAgICBoZSAtPiBpdyAoSGVicmV3KVxyXG4gKiAgICAgICAgICAgeWkgLT4gamkgKFlpZGRpc2gpXHJcbiAqICAgICAgICAgICBpZCAtPiBpbiAoSW5kb25lc2lhbilcclxuICogLSBsb2NhbGUzOiBGb3JtYXQgb2YgYHh4eGAuIFRoZSBJU08tNjM5LTIgY29kZSBmb3IgdGhlIGxhbmd1YWdlICgzLWxldHRlciBjb2RlKSwgaWYgYXZhaWxhYmxlLiBTb21lIGxvY2FsZXMgZG8gbm90XHJcbiAqICAgICAgICAgICAgaGF2ZSB0aGlzIGluZm9ybWF0aW9uIChtb3N0IGRvKS5cclxuICogLSBkaXJlY3Rpb246IGVpdGhlciBgbHRyYCBvciBgcnRsYCBmb3IgbGVmdC10by1yaWdodCBvciByaWdodC10by1sZWZ0XHJcbiAqIC0gZW5nbGlzaE5hbWU6IFRoZSBuYW1lIG9mIHRoZSBsb2NhbGUgaW4gRW5nbGlzaFxyXG4gKiAtIGxvY2FsaXplZE5hbWU6IFRoZSBuYW1lIG9mIHRoZSBsb2NhbGUgaW4gdGhlIGxvY2FsZSBpdHNlbGZcclxuICpcclxuICogQUxTTyBOT1RFOiBXZSBoYWQgYSByZXF1ZXN0IHRvIHN1cHBvcnQgTGFrb3RhLCB3aGljaCBpcyBub3QgaW5jbHVkZWQgaW4gSVNPIDYzOS0xLCBhbmQgaXMgb25seSBkZWZpbmVkIGFzIGEgdGhyZWUtXHJcbiAqIGxldHRlciBjb2RlIGluIElTTyA2MzktMy4gIFRoZSBsb2NhbGUgY29tYmluYXRpb24gJ2xrJyB3YXMgbm90IHRha2VuIGluIElTTyA2MzktMSwgc28gd2UgYWRkZWQgaXQuICBTdHJpY3RseVxyXG4gKiBzcGVha2luZywgdGhpcyBpcyBhIGRldmlhdGlvbiBmcm9tIHRoZSBzcGVjLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuLy8gTG9hZCBvdXIgZ3JvdW5kIHNvdXJjZSBvZiB0cnV0aFxyXG5jb25zdCBsb2NhbGVEYXRhID0gSlNPTi5wYXJzZSggZnMucmVhZEZpbGVTeW5jKCAnLi4vLi4vLi4vYmFiZWwvbG9jYWxlRGF0YS5qc29uJywgJ3V0ZjgnICkgKTtcclxuXHJcbi8vIENvbnN0cnVjdCB0aGUgY29uY2lzZSBKUyB0aGF0IGRlZmluZXMgdGhlIGxlZ2FjeSBsb2NhbGUtaW5mbyBmb3JtYXRcclxubGV0IGxvY2FsZUluZm9TbmlwcGV0ID0gJ3snO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFkLXRleHRcclxuY29uc3QgYmFkVGV4dCA9ICdTbGF2ZSc7IC8vIFRoZXJlIGlzIGFuIGVuZ2xpc2hOYW1lIHRoYXQgY29udGFpbnMgdGhpcyB3b3JkLCBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnLz90aXRsZT1TbGF2ZV9sYW5ndWFnZV8oQXRoYXBhc2NhbikmcmVkaXJlY3Q9bm9cclxuLy8gQWRkIHByb3BlcnRpZXMgZm9yIGFsbCBsb2NhbGVzXHJcbmZvciAoIGNvbnN0IGxvY2FsZSBvZiBPYmplY3Qua2V5cyggbG9jYWxlRGF0YSApICkge1xyXG4gIGxvY2FsZUluZm9TbmlwcGV0ICs9IGBcclxuICAke2xvY2FsZX06IHtcclxuICAgICR7bG9jYWxlRGF0YVsgbG9jYWxlIF0uZW5nbGlzaE5hbWUuaW5jbHVkZXMoIGJhZFRleHQgKSA/ICcvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFkLXRleHRcXG4gICAgJyA6ICcnfW5hbWU6ICcke2xvY2FsZURhdGFbIGxvY2FsZSBdLmVuZ2xpc2hOYW1lLnJlcGxhY2UoIC8nL2csICdcXFxcXFwnJyApfScsXHJcbiAgICBsb2NhbGl6ZWROYW1lOiAnJHtsb2NhbGVEYXRhWyBsb2NhbGUgXS5sb2NhbGl6ZWROYW1lLnJlcGxhY2UoIC8nL2csICdcXFxcXFwnJyApfScsXHJcbiAgICBkaXJlY3Rpb246ICcke2xvY2FsZURhdGFbIGxvY2FsZSBdLmRpcmVjdGlvbn0nXHJcbiAgfSxgO1xyXG59XHJcbi8vIFJlbW92ZSB0aGUgdHJhaWxpbmcgY29tbWFcclxubG9jYWxlSW5mb1NuaXBwZXQgPSBsb2NhbGVJbmZvU25pcHBldC5zbGljZSggMCwgLTEgKTtcclxuLy8gQ2xvc2UgdGhlIG9iamVjdFxyXG5sb2NhbGVJbmZvU25pcHBldCArPSAnXFxufSc7XHJcblxyXG5jb25zdCBsb2NhbGVJbmZvID0ge307XHJcbmZvciAoIGNvbnN0IGxvY2FsZSBvZiBPYmplY3Qua2V5cyggbG9jYWxlRGF0YSApICkge1xyXG4gIGxvY2FsZUluZm9bIGxvY2FsZSBdID0ge1xyXG4gICAgbmFtZTogbG9jYWxlRGF0YVsgbG9jYWxlIF0uZW5nbGlzaE5hbWUsXHJcbiAgICBsb2NhbGl6ZWROYW1lOiBsb2NhbGVEYXRhWyBsb2NhbGUgXS5sb2NhbGl6ZWROYW1lLFxyXG4gICAgZGlyZWN0aW9uOiBsb2NhbGVEYXRhWyBsb2NhbGUgXS5kaXJlY3Rpb25cclxuICB9O1xyXG59XHJcblxyXG5jb25zdCBuZXdMb2NhbGVJbmZvID0ge1xyXG4gIF9jb21tZW50OiAnVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IGpzL2RhdGEvdXBkYXRlTG9jYWxlSW5mby5qcy4gRG8gbm90IG1vZGlmeSBpdCBkaXJlY3RseS4nLFxyXG4gIC4uLmxvY2FsZUluZm9cclxufTtcclxuXHJcbmZzLndyaXRlRmlsZVN5bmMoICcuLi8uLi9kYXRhL2xvY2FsZUluZm8uanNvbicsIEpTT04uc3RyaW5naWZ5KCBuZXdMb2NhbGVJbmZvLCBudWxsLCAyICkgKTtcclxuXHJcbmNvbnN0IGNvbW1vbkRvY3VtZW50YXRpb24gPSBgLy8gQ29weXJpZ2h0IDIwMTUtJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gICogVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IGpzL2RhdGEvdXBkYXRlTG9jYWxlSW5mby5qcy4gRG8gbm90IG1vZGlmeSBpdCBkaXJlY3RseS5cclxuICAqXHJcbiAgKiBAYXV0aG9yIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IHVwZGF0ZUxvY2FsZUluZm8uanNcclxuICAqL1xyXG5cclxuLyogZXNsaW50LWVudiBicm93c2VyLCBub2RlICovXHJcblxyXG5cclxuYDtcclxuXHJcbmNvbnN0IG5ld0NvbW1vbkpTU291Y2VDb2RlID0gYCR7Y29tbW9uRG9jdW1lbnRhdGlvbn1tb2R1bGUuZXhwb3J0cyA9ICR7bG9jYWxlSW5mb1NuaXBwZXR9O2A7XHJcbmZzLndyaXRlRmlsZVN5bmMoICcuL2xvY2FsZUluZm8uanMnLCBuZXdDb21tb25KU1NvdWNlQ29kZSApO1xyXG5cclxuY29uc3QgbmV3TW9kdWxlU291cmNlQ29kZSA9IGAke2NvbW1vbkRvY3VtZW50YXRpb259ZXhwb3J0IGRlZmF1bHQgJHtsb2NhbGVJbmZvU25pcHBldH07YDtcclxuZnMud3JpdGVGaWxlU3luYyggJy4vbG9jYWxlSW5mb01vZHVsZS5qcycsIG5ld01vZHVsZVNvdXJjZUNvZGUgKTtcclxuXHJcbmNvbnNvbGUubG9nKCAnbG9jYWxlIGluZm8gZmlsZXMgdXBkYXRlZCcgKTtcclxuXHJcbnRocm93IG5ldyBFcnJvciggJ05PIENPTU1JVCBZRVQsIHNhZmVndWFyZCBzbyB3ZSBkbyBub3QgY29tbWl0IGNoYW5nZXMgdG8gbWFpbiB5ZXQnICk7IC8vIFRPRE86IHJlbW92ZSBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2pvaXN0L2lzc3Vlcy85NjNcclxuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnJlYWNoYWJsZVxyXG5sZXQgbmVlZHNDb21taXQgPSBmYWxzZTtcclxudHJ5IHtcclxuXHJcbiAgLy8gMCBleGl0IGNvZGUgaWYgdGhlcmUgYXJlIG5vIHdvcmtpbmcgY29weSBjaGFuZ2VzIGZyb20gSEVBRC5cclxuICBjaGlsZF9wcm9jZXNzLmV4ZWNTeW5jKCAnZ2l0IGRpZmYtaW5kZXggLS1xdWlldCBIRUFEIC0tJyApO1xyXG4gIGNvbnNvbGUubG9nKCAnTm8gbG9jYWxlIGluZm8gY2hhbmdlcywgbm8gY29tbWl0IG5lZWRlZC4nICk7XHJcbn1cclxuY2F0Y2goIGUgKSB7XHJcbiAgbmVlZHNDb21taXQgPSB0cnVlO1xyXG59XHJcblxyXG5pZiAoIG5lZWRzQ29tbWl0ICkge1xyXG4gIHRyeSB7XHJcblxyXG4gICAgY29uc29sZS5sb2coICdwdWxsaW5nJyApO1xyXG5cclxuICAgIC8vIFNvbWUgZGV2cyBoYXZlIHJlYmFzZSBzZXQgYnkgZGVmYXVsdCwgYW5kIHlvdSBjYW5ub3QgcmViYXNlLXB1bGwgd2l0aCB3b3JraW5nIGNvcHkgY2hhbmdlcy5cclxuICAgIGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoICdnaXQgcHVsbCAtLW5vLXJlYmFzZScgKTtcclxuXHJcbiAgICBjaGlsZF9wcm9jZXNzLmV4ZWNTeW5jKCAnZ2l0IGFkZCAuLi8uLi9kYXRhL2xvY2FsZUluZm8uanNvbicgKTtcclxuICAgIGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoICdnaXQgYWRkIC4vbG9jYWxlSW5mby5qcycgKTtcclxuICAgIGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoICdnaXQgYWRkIC4vbG9jYWxlSW5mb01vZHVsZS5qcycgKTtcclxuXHJcbiAgICBpZiAoIG5lZWRzQ29tbWl0ICkge1xyXG4gICAgICBjb25zb2xlLmxvZyggJ2NvbW1pdHRpbmcnICk7XHJcbiAgICAgIGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoICdnaXQgY29tbWl0IC0tbm8tdmVyaWZ5IC4uLy4uL2RhdGEvbG9jYWxlSW5mby5qc29uIC4vbG9jYWxlSW5mby5qcyAuL2xvY2FsZUluZm9Nb2R1bGUuanMgLW0gXCJBdXRvbWF0aWNhbGx5IHVwZGF0ZWQgZ2VuZXJhdGVkIGxvY2FsZUluZm8gZmlsZXNcIicgKTtcclxuICAgICAgY29uc29sZS5sb2coICdwdXNoaW5nJyApO1xyXG4gICAgICBjaGlsZF9wcm9jZXNzLmV4ZWNTeW5jKCAnZ2l0IHB1c2gnICk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNhdGNoKCBlICkge1xyXG4gICAgY29uc29sZS5lcnJvciggJ1VuYWJsZSB0byB1cGRhdGUgZmlsZXMgaW4gZ2l0LicsIGUgKTtcclxuICB9XHJcbn0iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxhQUFhLEdBQUdDLE9BQU8sQ0FBRSxlQUFnQixDQUFDO0FBQ2hELE1BQU1DLEVBQUUsR0FBR0QsT0FBTyxDQUFFLElBQUssQ0FBQzs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTUUsVUFBVSxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBRUgsRUFBRSxDQUFDSSxZQUFZLENBQUUsZ0NBQWdDLEVBQUUsTUFBTyxDQUFFLENBQUM7O0FBRTVGO0FBQ0EsSUFBSUMsaUJBQWlCLEdBQUcsR0FBRztBQUMzQjtBQUNBLE1BQU1DLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQztBQUN6QjtBQUNBLEtBQU0sTUFBTUMsTUFBTSxJQUFJQyxNQUFNLENBQUNDLElBQUksQ0FBRVIsVUFBVyxDQUFDLEVBQUc7RUFDaERJLGlCQUFpQixJQUFLO0FBQ3hCLElBQUlFLE1BQU87QUFDWCxNQUFNTixVQUFVLENBQUVNLE1BQU0sQ0FBRSxDQUFDRyxXQUFXLENBQUNDLFFBQVEsQ0FBRUwsT0FBUSxDQUFDLEdBQUcsNENBQTRDLEdBQUcsRUFBRyxVQUFTTCxVQUFVLENBQUVNLE1BQU0sQ0FBRSxDQUFDRyxXQUFXLENBQUNFLE9BQU8sQ0FBRSxJQUFJLEVBQUUsTUFBTyxDQUFFO0FBQ2pMLHNCQUFzQlgsVUFBVSxDQUFFTSxNQUFNLENBQUUsQ0FBQ00sYUFBYSxDQUFDRCxPQUFPLENBQUUsSUFBSSxFQUFFLE1BQU8sQ0FBRTtBQUNqRixrQkFBa0JYLFVBQVUsQ0FBRU0sTUFBTSxDQUFFLENBQUNPLFNBQVU7QUFDakQsS0FBSztBQUNMO0FBQ0E7QUFDQVQsaUJBQWlCLEdBQUdBLGlCQUFpQixDQUFDVSxLQUFLLENBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRSxDQUFDO0FBQ3BEO0FBQ0FWLGlCQUFpQixJQUFJLEtBQUs7QUFFMUIsTUFBTVcsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNyQixLQUFNLE1BQU1ULE1BQU0sSUFBSUMsTUFBTSxDQUFDQyxJQUFJLENBQUVSLFVBQVcsQ0FBQyxFQUFHO0VBQ2hEZSxVQUFVLENBQUVULE1BQU0sQ0FBRSxHQUFHO0lBQ3JCVSxJQUFJLEVBQUVoQixVQUFVLENBQUVNLE1BQU0sQ0FBRSxDQUFDRyxXQUFXO0lBQ3RDRyxhQUFhLEVBQUVaLFVBQVUsQ0FBRU0sTUFBTSxDQUFFLENBQUNNLGFBQWE7SUFDakRDLFNBQVMsRUFBRWIsVUFBVSxDQUFFTSxNQUFNLENBQUUsQ0FBQ087RUFDbEMsQ0FBQztBQUNIO0FBRUEsTUFBTUksYUFBYSxHQUFHO0VBQ3BCQyxRQUFRLEVBQUUsaUdBQWlHO0VBQzNHLEdBQUdIO0FBQ0wsQ0FBQztBQUVEaEIsRUFBRSxDQUFDb0IsYUFBYSxDQUFFLDRCQUE0QixFQUFFbEIsSUFBSSxDQUFDbUIsU0FBUyxDQUFFSCxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUUsQ0FBRSxDQUFDO0FBRTFGLE1BQU1JLG1CQUFtQixHQUFJLHFCQUFvQixJQUFJQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFFRCxNQUFNQyxvQkFBb0IsR0FBSSxHQUFFSCxtQkFBb0Isb0JBQW1CakIsaUJBQWtCLEdBQUU7QUFDM0ZMLEVBQUUsQ0FBQ29CLGFBQWEsQ0FBRSxpQkFBaUIsRUFBRUssb0JBQXFCLENBQUM7QUFFM0QsTUFBTUMsbUJBQW1CLEdBQUksR0FBRUosbUJBQW9CLGtCQUFpQmpCLGlCQUFrQixHQUFFO0FBQ3hGTCxFQUFFLENBQUNvQixhQUFhLENBQUUsdUJBQXVCLEVBQUVNLG1CQUFvQixDQUFDO0FBRWhFQyxPQUFPLENBQUNDLEdBQUcsQ0FBRSwyQkFBNEIsQ0FBQztBQUUxQyxNQUFNLElBQUlDLEtBQUssQ0FBRSxrRUFBbUUsQ0FBQyxDQUFDLENBQUM7O0FBRXZGO0FBQ0EsSUFBSUMsV0FBVyxHQUFHLEtBQUs7QUFDdkIsSUFBSTtFQUVGO0VBQ0FoQyxhQUFhLENBQUNpQyxRQUFRLENBQUUsZ0NBQWlDLENBQUM7RUFDMURKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLDJDQUE0QyxDQUFDO0FBQzVELENBQUMsQ0FDRCxPQUFPSSxDQUFDLEVBQUc7RUFDVEYsV0FBVyxHQUFHLElBQUk7QUFDcEI7QUFFQSxJQUFLQSxXQUFXLEVBQUc7RUFDakIsSUFBSTtJQUVGSCxPQUFPLENBQUNDLEdBQUcsQ0FBRSxTQUFVLENBQUM7O0lBRXhCO0lBQ0E5QixhQUFhLENBQUNpQyxRQUFRLENBQUUsc0JBQXVCLENBQUM7SUFFaERqQyxhQUFhLENBQUNpQyxRQUFRLENBQUUsb0NBQXFDLENBQUM7SUFDOURqQyxhQUFhLENBQUNpQyxRQUFRLENBQUUseUJBQTBCLENBQUM7SUFDbkRqQyxhQUFhLENBQUNpQyxRQUFRLENBQUUsK0JBQWdDLENBQUM7SUFFekQsSUFBS0QsV0FBVyxFQUFHO01BQ2pCSCxPQUFPLENBQUNDLEdBQUcsQ0FBRSxZQUFhLENBQUM7TUFDM0I5QixhQUFhLENBQUNpQyxRQUFRLENBQUUsK0lBQWdKLENBQUM7TUFDektKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLFNBQVUsQ0FBQztNQUN4QjlCLGFBQWEsQ0FBQ2lDLFFBQVEsQ0FBRSxVQUFXLENBQUM7SUFDdEM7RUFDRixDQUFDLENBQ0QsT0FBT0MsQ0FBQyxFQUFHO0lBQ1RMLE9BQU8sQ0FBQ00sS0FBSyxDQUFFLGdDQUFnQyxFQUFFRCxDQUFFLENBQUM7RUFDdEQ7QUFDRiIsImlnbm9yZUxpc3QiOltdfQ==