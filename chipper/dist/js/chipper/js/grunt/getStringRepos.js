// Copyright 2020-2024, University of Colorado Boulder

/**
 * For a given repository, it returns the JSON object content that should go in phet.chipper.stringRepos for a
 * compilation-free simulation run.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

// modules
const fs = require('fs');
const getDependencies = require('./getDependencies');

/**
 * @returns {Promise.<Object>}
 */
module.exports = async repo => {
  return Object.keys(await getDependencies(repo)).filter(stringRepo => stringRepo !== 'comment').filter(stringRepo => {
    return fs.existsSync(`../${stringRepo}/${stringRepo}-strings_en.json`);
  }).map(stringRepo => {
    return {
      repo: stringRepo,
      requirejsNamespace: JSON.parse(fs.readFileSync(`../${stringRepo}/package.json`, 'utf-8')).phet.requirejsNamespace
    };
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJnZXREZXBlbmRlbmNpZXMiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVwbyIsIk9iamVjdCIsImtleXMiLCJmaWx0ZXIiLCJzdHJpbmdSZXBvIiwiZXhpc3RzU3luYyIsIm1hcCIsInJlcXVpcmVqc05hbWVzcGFjZSIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsInBoZXQiXSwic291cmNlcyI6WyJnZXRTdHJpbmdSZXBvcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBGb3IgYSBnaXZlbiByZXBvc2l0b3J5LCBpdCByZXR1cm5zIHRoZSBKU09OIG9iamVjdCBjb250ZW50IHRoYXQgc2hvdWxkIGdvIGluIHBoZXQuY2hpcHBlci5zdHJpbmdSZXBvcyBmb3IgYVxyXG4gKiBjb21waWxhdGlvbi1mcmVlIHNpbXVsYXRpb24gcnVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuXHJcbi8vIG1vZHVsZXNcclxuY29uc3QgZnMgPSByZXF1aXJlKCAnZnMnICk7XHJcbmNvbnN0IGdldERlcGVuZGVuY2llcyA9IHJlcXVpcmUoICcuL2dldERlcGVuZGVuY2llcycgKTtcclxuXHJcbi8qKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgcmVwbyA9PiB7XHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKCBhd2FpdCBnZXREZXBlbmRlbmNpZXMoIHJlcG8gKSApLmZpbHRlciggc3RyaW5nUmVwbyA9PiBzdHJpbmdSZXBvICE9PSAnY29tbWVudCcgKS5maWx0ZXIoIHN0cmluZ1JlcG8gPT4ge1xyXG4gICAgcmV0dXJuIGZzLmV4aXN0c1N5bmMoIGAuLi8ke3N0cmluZ1JlcG99LyR7c3RyaW5nUmVwb30tc3RyaW5nc19lbi5qc29uYCApO1xyXG4gIH0gKS5tYXAoIHN0cmluZ1JlcG8gPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVwbzogc3RyaW5nUmVwbyxcclxuICAgICAgcmVxdWlyZWpzTmFtZXNwYWNlOiBKU09OLnBhcnNlKCBmcy5yZWFkRmlsZVN5bmMoIGAuLi8ke3N0cmluZ1JlcG99L3BhY2thZ2UuanNvbmAsICd1dGYtOCcgKSApLnBoZXQucmVxdWlyZWpzTmFtZXNwYWNlXHJcbiAgICB9O1xyXG4gIH0gKTtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFFLElBQUssQ0FBQztBQUMxQixNQUFNQyxlQUFlLEdBQUdELE9BQU8sQ0FBRSxtQkFBb0IsQ0FBQzs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0FFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLE1BQU1DLElBQUksSUFBSTtFQUM3QixPQUFPQyxNQUFNLENBQUNDLElBQUksQ0FBRSxNQUFNTCxlQUFlLENBQUVHLElBQUssQ0FBRSxDQUFDLENBQUNHLE1BQU0sQ0FBRUMsVUFBVSxJQUFJQSxVQUFVLEtBQUssU0FBVSxDQUFDLENBQUNELE1BQU0sQ0FBRUMsVUFBVSxJQUFJO0lBQ3pILE9BQU9ULEVBQUUsQ0FBQ1UsVUFBVSxDQUFHLE1BQUtELFVBQVcsSUFBR0EsVUFBVyxrQkFBa0IsQ0FBQztFQUMxRSxDQUFFLENBQUMsQ0FBQ0UsR0FBRyxDQUFFRixVQUFVLElBQUk7SUFDckIsT0FBTztNQUNMSixJQUFJLEVBQUVJLFVBQVU7TUFDaEJHLGtCQUFrQixFQUFFQyxJQUFJLENBQUNDLEtBQUssQ0FBRWQsRUFBRSxDQUFDZSxZQUFZLENBQUcsTUFBS04sVUFBVyxlQUFjLEVBQUUsT0FBUSxDQUFFLENBQUMsQ0FBQ08sSUFBSSxDQUFDSjtJQUNyRyxDQUFDO0VBQ0gsQ0FBRSxDQUFDO0FBQ0wsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==