// Copyright 2018-2024, University of Colorado Boulder

/**
 * Fills in values for the chipper initialization script script.
 *
 * NOTE: This should not be minified! It contains licenses that should be human readable as well as important formatting
 * for rosetta translation.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

// modules
const _ = require('lodash');
const assert = require('assert');
const ChipperConstants = require('../common/ChipperConstants');
const ChipperStringUtils = require('../common/ChipperStringUtils');
const fs = require('fs');
const grunt = require('grunt');
const transpile = require('./transpile');
const stringEncoding = require('../common/stringEncoding');

/**
 * Returns a string for the JS of the initialization script.
 * @public
 *
 * @param {Object} config
 * @returns {string}
 */
module.exports = function (config) {
  const {
    brand,
    // {string}, e.g. 'phet', 'phet-io'
    repo,
    // {string}
    allLocales,
    // {string[]}
    stringMap,
    // {Object}, map[ locale ][ stringKey ] => {string}
    stringMetadata,
    // {Object}, map[ stringKey ] => {Object}
    version,
    // {string}
    dependencies,
    // {Object} - From getDependencies
    timestamp,
    // {string}
    locale,
    // {string}
    includeAllLocales,
    // {boolean}
    isDebugBuild,
    // {boolean}
    allowLocaleSwitching,
    // {boolean}
    encodeStringMap,
    // {boolean}
    profileFileSize,
    // {boolean}
    packageObject
  } = config;
  assert(typeof repo === 'string', 'Requires repo');
  assert(stringMap, 'Requires stringMap');
  assert(typeof version === 'string', 'Requires version');
  assert(dependencies, 'Requires dependencies');
  assert(typeof timestamp === 'string', 'Requires timestamp');
  assert(typeof locale === 'string', 'Requires locale');
  assert(typeof includeAllLocales === 'boolean', 'Requires includeAllLocales');
  assert(typeof isDebugBuild === 'boolean', 'Requires isDebugBuild');

  // Load localeData
  const fullLocaleData = JSON.parse(fs.readFileSync('../babel/localeData.json', 'utf8'));

  // Include a subset of locales' translated strings
  let phetStrings = stringMap;
  if (!includeAllLocales) {
    phetStrings = {};

    // Go through all of the potential fallback locales, and include the strings for each of them
    const requiredLocales = [
    // duplicates OK
    locale, ...(fullLocaleData[locale].fallbackLocales || []), ChipperConstants.FALLBACK_LOCALE];
    for (const locale of requiredLocales) {
      phetStrings[locale] = stringMap[locale];
    }
  }

  // Include a (larger) subset of locales' localeData.
  const includedDataLocales = _.sortBy(_.uniq([
  // Always include the fallback (en)
  ChipperConstants.FALLBACK_LOCALE,
  // Include directly-used locales
  ...allLocales,
  // Include locales that will fall back to directly-used locales
  ...Object.keys(fullLocaleData).filter(locale => {
    return fullLocaleData[locale].fallbackLocales && fullLocaleData[locale].fallbackLocales.some(fallbackLocale => {
      return allLocales.includes(fallbackLocale);
    });
  })]));
  const localeData = {};
  for (const locale of includedDataLocales) {
    localeData[locale] = fullLocaleData[locale];
  }
  return ChipperStringUtils.replacePlaceholders(grunt.file.read('../chipper/templates/chipper-initialization.js'), {
    PHET_PROJECT: repo,
    PHET_VERSION: version,
    PHET_BUILD_TIMESTAMP: timestamp,
    PHET_BRAND: brand,
    PHET_LOCALE: locale,
    PHET_LOCALE_DATA: JSON.stringify(localeData),
    PHET_DEPENDENCIES: JSON.stringify(dependencies, null, 2),
    // If it's a debug build, don't encode the strings, so that they are easier to inspect
    PHET_STRINGS: isDebugBuild || !encodeStringMap ? JSON.stringify(phetStrings, null, isDebugBuild ? 2 : '') : stringEncoding.encodeStringMapToJS(phetStrings),
    PHET_BEFORE_STRINGS: profileFileSize ? 'console.log("START_STRINGS");' : '',
    PHET_AFTER_STRINGS: profileFileSize ? 'console.log("END_STRINGS");' : '',
    PHET_STRING_METADATA: JSON.stringify(stringMetadata, null, isDebugBuild ? 2 : ''),
    PHET_IS_DEBUG_BUILD: !!isDebugBuild,
    PHET_ALLOW_LOCALE_SWITCHING: !!allowLocaleSwitching,
    PHET_PACKAGE_OBJECT: JSON.stringify(packageObject),
    IE_DETECTION_SCRIPT: transpile(grunt.file.read('../chipper/js/ie-detection.js'), true)
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfIiwicmVxdWlyZSIsImFzc2VydCIsIkNoaXBwZXJDb25zdGFudHMiLCJDaGlwcGVyU3RyaW5nVXRpbHMiLCJmcyIsImdydW50IiwidHJhbnNwaWxlIiwic3RyaW5nRW5jb2RpbmciLCJtb2R1bGUiLCJleHBvcnRzIiwiY29uZmlnIiwiYnJhbmQiLCJyZXBvIiwiYWxsTG9jYWxlcyIsInN0cmluZ01hcCIsInN0cmluZ01ldGFkYXRhIiwidmVyc2lvbiIsImRlcGVuZGVuY2llcyIsInRpbWVzdGFtcCIsImxvY2FsZSIsImluY2x1ZGVBbGxMb2NhbGVzIiwiaXNEZWJ1Z0J1aWxkIiwiYWxsb3dMb2NhbGVTd2l0Y2hpbmciLCJlbmNvZGVTdHJpbmdNYXAiLCJwcm9maWxlRmlsZVNpemUiLCJwYWNrYWdlT2JqZWN0IiwiZnVsbExvY2FsZURhdGEiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJwaGV0U3RyaW5ncyIsInJlcXVpcmVkTG9jYWxlcyIsImZhbGxiYWNrTG9jYWxlcyIsIkZBTExCQUNLX0xPQ0FMRSIsImluY2x1ZGVkRGF0YUxvY2FsZXMiLCJzb3J0QnkiLCJ1bmlxIiwiT2JqZWN0Iiwia2V5cyIsImZpbHRlciIsInNvbWUiLCJmYWxsYmFja0xvY2FsZSIsImluY2x1ZGVzIiwibG9jYWxlRGF0YSIsInJlcGxhY2VQbGFjZWhvbGRlcnMiLCJmaWxlIiwicmVhZCIsIlBIRVRfUFJPSkVDVCIsIlBIRVRfVkVSU0lPTiIsIlBIRVRfQlVJTERfVElNRVNUQU1QIiwiUEhFVF9CUkFORCIsIlBIRVRfTE9DQUxFIiwiUEhFVF9MT0NBTEVfREFUQSIsInN0cmluZ2lmeSIsIlBIRVRfREVQRU5ERU5DSUVTIiwiUEhFVF9TVFJJTkdTIiwiZW5jb2RlU3RyaW5nTWFwVG9KUyIsIlBIRVRfQkVGT1JFX1NUUklOR1MiLCJQSEVUX0FGVEVSX1NUUklOR1MiLCJQSEVUX1NUUklOR19NRVRBREFUQSIsIlBIRVRfSVNfREVCVUdfQlVJTEQiLCJQSEVUX0FMTE9XX0xPQ0FMRV9TV0lUQ0hJTkciLCJQSEVUX1BBQ0tBR0VfT0JKRUNUIiwiSUVfREVURUNUSU9OX1NDUklQVCJdLCJzb3VyY2VzIjpbImdldEluaXRpYWxpemF0aW9uU2NyaXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEZpbGxzIGluIHZhbHVlcyBmb3IgdGhlIGNoaXBwZXIgaW5pdGlhbGl6YXRpb24gc2NyaXB0IHNjcmlwdC5cclxuICpcclxuICogTk9URTogVGhpcyBzaG91bGQgbm90IGJlIG1pbmlmaWVkISBJdCBjb250YWlucyBsaWNlbnNlcyB0aGF0IHNob3VsZCBiZSBodW1hbiByZWFkYWJsZSBhcyB3ZWxsIGFzIGltcG9ydGFudCBmb3JtYXR0aW5nXHJcbiAqIGZvciByb3NldHRhIHRyYW5zbGF0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuXHJcbi8vIG1vZHVsZXNcclxuY29uc3QgXyA9IHJlcXVpcmUoICdsb2Rhc2gnICk7XHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoICdhc3NlcnQnICk7XHJcbmNvbnN0IENoaXBwZXJDb25zdGFudHMgPSByZXF1aXJlKCAnLi4vY29tbW9uL0NoaXBwZXJDb25zdGFudHMnICk7XHJcbmNvbnN0IENoaXBwZXJTdHJpbmdVdGlscyA9IHJlcXVpcmUoICcuLi9jb21tb24vQ2hpcHBlclN0cmluZ1V0aWxzJyApO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoICdmcycgKTtcclxuY29uc3QgZ3J1bnQgPSByZXF1aXJlKCAnZ3J1bnQnICk7XHJcbmNvbnN0IHRyYW5zcGlsZSA9IHJlcXVpcmUoICcuL3RyYW5zcGlsZScgKTtcclxuY29uc3Qgc3RyaW5nRW5jb2RpbmcgPSByZXF1aXJlKCAnLi4vY29tbW9uL3N0cmluZ0VuY29kaW5nJyApO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBzdHJpbmcgZm9yIHRoZSBKUyBvZiB0aGUgaW5pdGlhbGl6YXRpb24gc2NyaXB0LlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oIGNvbmZpZyApIHtcclxuICBjb25zdCB7XHJcbiAgICBicmFuZCwgLy8ge3N0cmluZ30sIGUuZy4gJ3BoZXQnLCAncGhldC1pbydcclxuICAgIHJlcG8sIC8vIHtzdHJpbmd9XHJcbiAgICBhbGxMb2NhbGVzLCAvLyB7c3RyaW5nW119XHJcbiAgICBzdHJpbmdNYXAsIC8vIHtPYmplY3R9LCBtYXBbIGxvY2FsZSBdWyBzdHJpbmdLZXkgXSA9PiB7c3RyaW5nfVxyXG4gICAgc3RyaW5nTWV0YWRhdGEsIC8vIHtPYmplY3R9LCBtYXBbIHN0cmluZ0tleSBdID0+IHtPYmplY3R9XHJcbiAgICB2ZXJzaW9uLCAvLyB7c3RyaW5nfVxyXG4gICAgZGVwZW5kZW5jaWVzLCAvLyB7T2JqZWN0fSAtIEZyb20gZ2V0RGVwZW5kZW5jaWVzXHJcbiAgICB0aW1lc3RhbXAsIC8vIHtzdHJpbmd9XHJcbiAgICBsb2NhbGUsIC8vIHtzdHJpbmd9XHJcbiAgICBpbmNsdWRlQWxsTG9jYWxlcywgLy8ge2Jvb2xlYW59XHJcbiAgICBpc0RlYnVnQnVpbGQsIC8vIHtib29sZWFufVxyXG4gICAgYWxsb3dMb2NhbGVTd2l0Y2hpbmcsIC8vIHtib29sZWFufVxyXG4gICAgZW5jb2RlU3RyaW5nTWFwLCAvLyB7Ym9vbGVhbn1cclxuICAgIHByb2ZpbGVGaWxlU2l6ZSwgLy8ge2Jvb2xlYW59XHJcbiAgICBwYWNrYWdlT2JqZWN0XHJcbiAgfSA9IGNvbmZpZztcclxuICBhc3NlcnQoIHR5cGVvZiByZXBvID09PSAnc3RyaW5nJywgJ1JlcXVpcmVzIHJlcG8nICk7XHJcbiAgYXNzZXJ0KCBzdHJpbmdNYXAsICdSZXF1aXJlcyBzdHJpbmdNYXAnICk7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgdmVyc2lvbiA9PT0gJ3N0cmluZycsICdSZXF1aXJlcyB2ZXJzaW9uJyApO1xyXG4gIGFzc2VydCggZGVwZW5kZW5jaWVzLCAnUmVxdWlyZXMgZGVwZW5kZW5jaWVzJyApO1xyXG4gIGFzc2VydCggdHlwZW9mIHRpbWVzdGFtcCA9PT0gJ3N0cmluZycsICdSZXF1aXJlcyB0aW1lc3RhbXAnICk7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgbG9jYWxlID09PSAnc3RyaW5nJywgJ1JlcXVpcmVzIGxvY2FsZScgKTtcclxuICBhc3NlcnQoIHR5cGVvZiBpbmNsdWRlQWxsTG9jYWxlcyA9PT0gJ2Jvb2xlYW4nLCAnUmVxdWlyZXMgaW5jbHVkZUFsbExvY2FsZXMnICk7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgaXNEZWJ1Z0J1aWxkID09PSAnYm9vbGVhbicsICdSZXF1aXJlcyBpc0RlYnVnQnVpbGQnICk7XHJcblxyXG4gIC8vIExvYWQgbG9jYWxlRGF0YVxyXG4gIGNvbnN0IGZ1bGxMb2NhbGVEYXRhID0gSlNPTi5wYXJzZSggZnMucmVhZEZpbGVTeW5jKCAnLi4vYmFiZWwvbG9jYWxlRGF0YS5qc29uJywgJ3V0ZjgnICkgKTtcclxuXHJcbiAgLy8gSW5jbHVkZSBhIHN1YnNldCBvZiBsb2NhbGVzJyB0cmFuc2xhdGVkIHN0cmluZ3NcclxuICBsZXQgcGhldFN0cmluZ3MgPSBzdHJpbmdNYXA7XHJcbiAgaWYgKCAhaW5jbHVkZUFsbExvY2FsZXMgKSB7XHJcbiAgICBwaGV0U3RyaW5ncyA9IHt9O1xyXG5cclxuICAgIC8vIEdvIHRocm91Z2ggYWxsIG9mIHRoZSBwb3RlbnRpYWwgZmFsbGJhY2sgbG9jYWxlcywgYW5kIGluY2x1ZGUgdGhlIHN0cmluZ3MgZm9yIGVhY2ggb2YgdGhlbVxyXG4gICAgY29uc3QgcmVxdWlyZWRMb2NhbGVzID0gW1xyXG4gICAgICAvLyBkdXBsaWNhdGVzIE9LXHJcbiAgICAgIGxvY2FsZSxcclxuICAgICAgLi4uKCBmdWxsTG9jYWxlRGF0YVsgbG9jYWxlIF0uZmFsbGJhY2tMb2NhbGVzIHx8IFtdICksXHJcbiAgICAgIENoaXBwZXJDb25zdGFudHMuRkFMTEJBQ0tfTE9DQUxFXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAoIGNvbnN0IGxvY2FsZSBvZiByZXF1aXJlZExvY2FsZXMgKSB7XHJcbiAgICAgIHBoZXRTdHJpbmdzWyBsb2NhbGUgXSA9IHN0cmluZ01hcFsgbG9jYWxlIF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBJbmNsdWRlIGEgKGxhcmdlcikgc3Vic2V0IG9mIGxvY2FsZXMnIGxvY2FsZURhdGEuXHJcbiAgY29uc3QgaW5jbHVkZWREYXRhTG9jYWxlcyA9IF8uc29ydEJ5KCBfLnVuaXEoIFtcclxuICAgIC8vIEFsd2F5cyBpbmNsdWRlIHRoZSBmYWxsYmFjayAoZW4pXHJcbiAgICBDaGlwcGVyQ29uc3RhbnRzLkZBTExCQUNLX0xPQ0FMRSxcclxuXHJcbiAgICAvLyBJbmNsdWRlIGRpcmVjdGx5LXVzZWQgbG9jYWxlc1xyXG4gICAgLi4uYWxsTG9jYWxlcyxcclxuXHJcbiAgICAvLyBJbmNsdWRlIGxvY2FsZXMgdGhhdCB3aWxsIGZhbGwgYmFjayB0byBkaXJlY3RseS11c2VkIGxvY2FsZXNcclxuICAgIC4uLk9iamVjdC5rZXlzKCBmdWxsTG9jYWxlRGF0YSApLmZpbHRlciggbG9jYWxlID0+IHtcclxuICAgICAgcmV0dXJuIGZ1bGxMb2NhbGVEYXRhWyBsb2NhbGUgXS5mYWxsYmFja0xvY2FsZXMgJiYgZnVsbExvY2FsZURhdGFbIGxvY2FsZSBdLmZhbGxiYWNrTG9jYWxlcy5zb21lKCBmYWxsYmFja0xvY2FsZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFsbExvY2FsZXMuaW5jbHVkZXMoIGZhbGxiYWNrTG9jYWxlICk7XHJcbiAgICAgIH0gKTtcclxuICAgIH0gKVxyXG4gIF0gKSApO1xyXG4gIGNvbnN0IGxvY2FsZURhdGEgPSB7fTtcclxuICBmb3IgKCBjb25zdCBsb2NhbGUgb2YgaW5jbHVkZWREYXRhTG9jYWxlcyApIHtcclxuICAgIGxvY2FsZURhdGFbIGxvY2FsZSBdID0gZnVsbExvY2FsZURhdGFbIGxvY2FsZSBdO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIENoaXBwZXJTdHJpbmdVdGlscy5yZXBsYWNlUGxhY2Vob2xkZXJzKCBncnVudC5maWxlLnJlYWQoICcuLi9jaGlwcGVyL3RlbXBsYXRlcy9jaGlwcGVyLWluaXRpYWxpemF0aW9uLmpzJyApLCB7XHJcbiAgICBQSEVUX1BST0pFQ1Q6IHJlcG8sXHJcbiAgICBQSEVUX1ZFUlNJT046IHZlcnNpb24sXHJcbiAgICBQSEVUX0JVSUxEX1RJTUVTVEFNUDogdGltZXN0YW1wLFxyXG4gICAgUEhFVF9CUkFORDogYnJhbmQsXHJcbiAgICBQSEVUX0xPQ0FMRTogbG9jYWxlLFxyXG4gICAgUEhFVF9MT0NBTEVfREFUQTogSlNPTi5zdHJpbmdpZnkoIGxvY2FsZURhdGEgKSxcclxuICAgIFBIRVRfREVQRU5ERU5DSUVTOiBKU09OLnN0cmluZ2lmeSggZGVwZW5kZW5jaWVzLCBudWxsLCAyICksXHJcbiAgICAvLyBJZiBpdCdzIGEgZGVidWcgYnVpbGQsIGRvbid0IGVuY29kZSB0aGUgc3RyaW5ncywgc28gdGhhdCB0aGV5IGFyZSBlYXNpZXIgdG8gaW5zcGVjdFxyXG4gICAgUEhFVF9TVFJJTkdTOiAoIGlzRGVidWdCdWlsZCB8fCAhZW5jb2RlU3RyaW5nTWFwICkgPyBKU09OLnN0cmluZ2lmeSggcGhldFN0cmluZ3MsIG51bGwsIGlzRGVidWdCdWlsZCA/IDIgOiAnJyApIDogc3RyaW5nRW5jb2RpbmcuZW5jb2RlU3RyaW5nTWFwVG9KUyggcGhldFN0cmluZ3MgKSxcclxuICAgIFBIRVRfQkVGT1JFX1NUUklOR1M6IHByb2ZpbGVGaWxlU2l6ZSA/ICdjb25zb2xlLmxvZyhcIlNUQVJUX1NUUklOR1NcIik7JyA6ICcnLFxyXG4gICAgUEhFVF9BRlRFUl9TVFJJTkdTOiBwcm9maWxlRmlsZVNpemUgPyAnY29uc29sZS5sb2coXCJFTkRfU1RSSU5HU1wiKTsnIDogJycsXHJcbiAgICBQSEVUX1NUUklOR19NRVRBREFUQTogSlNPTi5zdHJpbmdpZnkoIHN0cmluZ01ldGFkYXRhLCBudWxsLCBpc0RlYnVnQnVpbGQgPyAyIDogJycgKSxcclxuICAgIFBIRVRfSVNfREVCVUdfQlVJTEQ6ICEhaXNEZWJ1Z0J1aWxkLFxyXG4gICAgUEhFVF9BTExPV19MT0NBTEVfU1dJVENISU5HOiAhIWFsbG93TG9jYWxlU3dpdGNoaW5nLFxyXG4gICAgUEhFVF9QQUNLQUdFX09CSkVDVDogSlNPTi5zdHJpbmdpZnkoIHBhY2thZ2VPYmplY3QgKSxcclxuICAgIElFX0RFVEVDVElPTl9TQ1JJUFQ6IHRyYW5zcGlsZSggZ3J1bnQuZmlsZS5yZWFkKCAnLi4vY2hpcHBlci9qcy9pZS1kZXRlY3Rpb24uanMnICksIHRydWUgKVxyXG4gIH0gKTtcclxufTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQSxNQUFNQSxDQUFDLEdBQUdDLE9BQU8sQ0FBRSxRQUFTLENBQUM7QUFDN0IsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUUsUUFBUyxDQUFDO0FBQ2xDLE1BQU1FLGdCQUFnQixHQUFHRixPQUFPLENBQUUsNEJBQTZCLENBQUM7QUFDaEUsTUFBTUcsa0JBQWtCLEdBQUdILE9BQU8sQ0FBRSw4QkFBK0IsQ0FBQztBQUNwRSxNQUFNSSxFQUFFLEdBQUdKLE9BQU8sQ0FBRSxJQUFLLENBQUM7QUFDMUIsTUFBTUssS0FBSyxHQUFHTCxPQUFPLENBQUUsT0FBUSxDQUFDO0FBQ2hDLE1BQU1NLFNBQVMsR0FBR04sT0FBTyxDQUFFLGFBQWMsQ0FBQztBQUMxQyxNQUFNTyxjQUFjLEdBQUdQLE9BQU8sQ0FBRSwwQkFBMkIsQ0FBQzs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQVEsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBVUMsTUFBTSxF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