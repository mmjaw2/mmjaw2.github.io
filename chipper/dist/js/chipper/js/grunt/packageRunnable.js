// Copyright 2017-2024, University of Colorado Boulder

/**
 * Combines all parts of a runnable's built file into one HTML file.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

// modules
const assert = require('assert');
const ChipperStringUtils = require('../common/ChipperStringUtils');
const getTitleStringKey = require('./getTitleStringKey');
const grunt = require('grunt');
const pako = require('pako');
const fs = require('fs');
const nodeHTMLEncoder = require('node-html-encoder'); // eslint-disable-line require-statement-match

/**
 * From a given set of config (including the JS and other required things), it creates an HTML file for a runnable.
 * @public
 *
 * @param {Object} config
 * @returns {string} - The HTML for the file.
 */
module.exports = function (config) {
  const encoder = new nodeHTMLEncoder.Encoder('entity');
  const {
    repo,
    // {string}
    stringMap,
    // {Object}, map[ locale ][ stringKey ] => {string}
    licenseScript,
    // {string}
    scripts,
    // {Array.<string>}
    locale,
    // {string}
    htmlHeader,
    // {string}
    compressScripts = false
  } = config;
  assert(typeof repo === 'string', 'Requires repo');
  assert(stringMap, 'Requires stringMap');
  assert(scripts, 'Requires scripts');
  assert(licenseScript, 'Requires license script');
  assert(typeof locale === 'string', 'Requires locale');
  assert(typeof htmlHeader === 'string', 'Requires htmlHeader');
  const localizedTitle = stringMap[locale][getTitleStringKey(repo)];

  // Directory on the PhET website where the latest version of the sim lives
  const latestDir = `https://phet.colorado.edu/sims/html/${repo}/latest/`;

  // Converts a Uint8Array to a base64-encoded string (the usual String.fromCharCode.apply trick doesn't work for large arrays)
  const encodeBytes = uint8Array => {
    let binary = '';
    const len = uint8Array.byteLength;
    for (let i = 0; i < len; i++) {
      binary += String.fromCharCode(uint8Array[i]);
    }
    return btoa(binary);
  };

  // Converts from a JS string to a base64-encoded string
  const toEncodedString = string => encodeBytes(pako.deflate(string));

  // Converts from a JS string to a compressed JS string that can be run
  const toRunString = string => `_C('${toEncodedString(string)}')`;
  let scriptSection;
  if (compressScripts) {
    scriptSection = `<script>\n${licenseScript}\n</script>` + `<script>${fs.readFileSync('../sherpa/lib/pako_inflate-2.0.3.min.js', 'utf-8')}</script>\n` + '<script>let _R=q=>{var s=document.createElement("script");s.type=\'text/javascript\';s.async=false;var c=document.createTextNode(q);s.appendChild(c);document.body.appendChild(s);};let _D=s=>{const ar=new Uint8Array(s.length);for (let i=0;i<s.length;i++){ar[i]=s.charCodeAt(i);}return ar;};let _F=s=>pako.inflate(_D(atob(s)),{to:\'string\'});let _C=string=>_R(_F(string));' + scripts.map(script => `${toRunString(script)}`).join('\n') + '</script>';
  } else {
    scriptSection = [licenseScript, ...scripts].map(script => `<script type="text/javascript">${script}</script>`).join('\n');
  }
  return ChipperStringUtils.replacePlaceholders(grunt.file.read('../chipper/templates/sim.html'), {
    PHET_CARRIAGE_RETURN: '\r',
    PHET_SIM_TITLE: encoder.htmlEncode(localizedTitle),
    PHET_HTML_HEADER: htmlHeader,
    // wrap scripts in global check for IE
    PHET_SIM_SCRIPTS: scriptSection,
    // metadata for Open Graph protocol, see phet-edmodo#2
    OG_TITLE: encoder.htmlEncode(localizedTitle),
    OG_URL: `${latestDir}${repo}_${locale}.html`,
    OG_IMAGE: `${latestDir}${repo}-600.png`
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwiQ2hpcHBlclN0cmluZ1V0aWxzIiwiZ2V0VGl0bGVTdHJpbmdLZXkiLCJncnVudCIsInBha28iLCJmcyIsIm5vZGVIVE1MRW5jb2RlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25maWciLCJlbmNvZGVyIiwiRW5jb2RlciIsInJlcG8iLCJzdHJpbmdNYXAiLCJsaWNlbnNlU2NyaXB0Iiwic2NyaXB0cyIsImxvY2FsZSIsImh0bWxIZWFkZXIiLCJjb21wcmVzc1NjcmlwdHMiLCJsb2NhbGl6ZWRUaXRsZSIsImxhdGVzdERpciIsImVuY29kZUJ5dGVzIiwidWludDhBcnJheSIsImJpbmFyeSIsImxlbiIsImJ5dGVMZW5ndGgiLCJpIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYnRvYSIsInRvRW5jb2RlZFN0cmluZyIsInN0cmluZyIsImRlZmxhdGUiLCJ0b1J1blN0cmluZyIsInNjcmlwdFNlY3Rpb24iLCJyZWFkRmlsZVN5bmMiLCJtYXAiLCJzY3JpcHQiLCJqb2luIiwicmVwbGFjZVBsYWNlaG9sZGVycyIsImZpbGUiLCJyZWFkIiwiUEhFVF9DQVJSSUFHRV9SRVRVUk4iLCJQSEVUX1NJTV9USVRMRSIsImh0bWxFbmNvZGUiLCJQSEVUX0hUTUxfSEVBREVSIiwiUEhFVF9TSU1fU0NSSVBUUyIsIk9HX1RJVExFIiwiT0dfVVJMIiwiT0dfSU1BR0UiXSwic291cmNlcyI6WyJwYWNrYWdlUnVubmFibGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ29tYmluZXMgYWxsIHBhcnRzIG9mIGEgcnVubmFibGUncyBidWlsdCBmaWxlIGludG8gb25lIEhUTUwgZmlsZS5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcblxyXG4vLyBtb2R1bGVzXHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoICdhc3NlcnQnICk7XHJcbmNvbnN0IENoaXBwZXJTdHJpbmdVdGlscyA9IHJlcXVpcmUoICcuLi9jb21tb24vQ2hpcHBlclN0cmluZ1V0aWxzJyApO1xyXG5jb25zdCBnZXRUaXRsZVN0cmluZ0tleSA9IHJlcXVpcmUoICcuL2dldFRpdGxlU3RyaW5nS2V5JyApO1xyXG5jb25zdCBncnVudCA9IHJlcXVpcmUoICdncnVudCcgKTtcclxuY29uc3QgcGFrbyA9IHJlcXVpcmUoICdwYWtvJyApO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoICdmcycgKTtcclxuY29uc3Qgbm9kZUhUTUxFbmNvZGVyID0gcmVxdWlyZSggJ25vZGUtaHRtbC1lbmNvZGVyJyApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlcXVpcmUtc3RhdGVtZW50LW1hdGNoXHJcblxyXG4vKipcclxuICogRnJvbSBhIGdpdmVuIHNldCBvZiBjb25maWcgKGluY2x1ZGluZyB0aGUgSlMgYW5kIG90aGVyIHJlcXVpcmVkIHRoaW5ncyksIGl0IGNyZWF0ZXMgYW4gSFRNTCBmaWxlIGZvciBhIHJ1bm5hYmxlLlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcclxuICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgSFRNTCBmb3IgdGhlIGZpbGUuXHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCBjb25maWcgKSB7XHJcblxyXG4gIGNvbnN0IGVuY29kZXIgPSBuZXcgbm9kZUhUTUxFbmNvZGVyLkVuY29kZXIoICdlbnRpdHknICk7XHJcblxyXG4gIGNvbnN0IHtcclxuICAgIHJlcG8sIC8vIHtzdHJpbmd9XHJcbiAgICBzdHJpbmdNYXAsIC8vIHtPYmplY3R9LCBtYXBbIGxvY2FsZSBdWyBzdHJpbmdLZXkgXSA9PiB7c3RyaW5nfVxyXG4gICAgbGljZW5zZVNjcmlwdCwgLy8ge3N0cmluZ31cclxuICAgIHNjcmlwdHMsIC8vIHtBcnJheS48c3RyaW5nPn1cclxuICAgIGxvY2FsZSwgLy8ge3N0cmluZ31cclxuICAgIGh0bWxIZWFkZXIsIC8vIHtzdHJpbmd9XHJcbiAgICBjb21wcmVzc1NjcmlwdHMgPSBmYWxzZVxyXG4gIH0gPSBjb25maWc7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgcmVwbyA9PT0gJ3N0cmluZycsICdSZXF1aXJlcyByZXBvJyApO1xyXG4gIGFzc2VydCggc3RyaW5nTWFwLCAnUmVxdWlyZXMgc3RyaW5nTWFwJyApO1xyXG4gIGFzc2VydCggc2NyaXB0cywgJ1JlcXVpcmVzIHNjcmlwdHMnICk7XHJcbiAgYXNzZXJ0KCBsaWNlbnNlU2NyaXB0LCAnUmVxdWlyZXMgbGljZW5zZSBzY3JpcHQnICk7XHJcbiAgYXNzZXJ0KCB0eXBlb2YgbG9jYWxlID09PSAnc3RyaW5nJywgJ1JlcXVpcmVzIGxvY2FsZScgKTtcclxuICBhc3NlcnQoIHR5cGVvZiBodG1sSGVhZGVyID09PSAnc3RyaW5nJywgJ1JlcXVpcmVzIGh0bWxIZWFkZXInICk7XHJcblxyXG4gIGNvbnN0IGxvY2FsaXplZFRpdGxlID0gc3RyaW5nTWFwWyBsb2NhbGUgXVsgZ2V0VGl0bGVTdHJpbmdLZXkoIHJlcG8gKSBdO1xyXG5cclxuICAvLyBEaXJlY3Rvcnkgb24gdGhlIFBoRVQgd2Vic2l0ZSB3aGVyZSB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgdGhlIHNpbSBsaXZlc1xyXG4gIGNvbnN0IGxhdGVzdERpciA9IGBodHRwczovL3BoZXQuY29sb3JhZG8uZWR1L3NpbXMvaHRtbC8ke3JlcG99L2xhdGVzdC9gO1xyXG5cclxuICAvLyBDb252ZXJ0cyBhIFVpbnQ4QXJyYXkgdG8gYSBiYXNlNjQtZW5jb2RlZCBzdHJpbmcgKHRoZSB1c3VhbCBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5IHRyaWNrIGRvZXNuJ3Qgd29yayBmb3IgbGFyZ2UgYXJyYXlzKVxyXG4gIGNvbnN0IGVuY29kZUJ5dGVzID0gdWludDhBcnJheSA9PiB7XHJcbiAgICBsZXQgYmluYXJ5ID0gJyc7XHJcbiAgICBjb25zdCBsZW4gPSB1aW50OEFycmF5LmJ5dGVMZW5ndGg7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcclxuICAgICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoIHVpbnQ4QXJyYXlbIGkgXSApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJ0b2EoIGJpbmFyeSApO1xyXG4gIH07XHJcblxyXG4gIC8vIENvbnZlcnRzIGZyb20gYSBKUyBzdHJpbmcgdG8gYSBiYXNlNjQtZW5jb2RlZCBzdHJpbmdcclxuICBjb25zdCB0b0VuY29kZWRTdHJpbmcgPSBzdHJpbmcgPT4gZW5jb2RlQnl0ZXMoIHBha28uZGVmbGF0ZSggc3RyaW5nICkgKTtcclxuXHJcbiAgLy8gQ29udmVydHMgZnJvbSBhIEpTIHN0cmluZyB0byBhIGNvbXByZXNzZWQgSlMgc3RyaW5nIHRoYXQgY2FuIGJlIHJ1blxyXG4gIGNvbnN0IHRvUnVuU3RyaW5nID0gc3RyaW5nID0+IGBfQygnJHt0b0VuY29kZWRTdHJpbmcoIHN0cmluZyApfScpYDtcclxuXHJcbiAgbGV0IHNjcmlwdFNlY3Rpb247XHJcbiAgaWYgKCBjb21wcmVzc1NjcmlwdHMgKSB7XHJcbiAgICBzY3JpcHRTZWN0aW9uID0gYDxzY3JpcHQ+XFxuJHtsaWNlbnNlU2NyaXB0fVxcbjwvc2NyaXB0PmAgK1xyXG4gICAgICBgPHNjcmlwdD4ke2ZzLnJlYWRGaWxlU3luYyggJy4uL3NoZXJwYS9saWIvcGFrb19pbmZsYXRlLTIuMC4zLm1pbi5qcycsICd1dGYtOCcgKX08L3NjcmlwdD5cXG5gICtcclxuICAgICAgJzxzY3JpcHQ+bGV0IF9SPXE9Pnt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3MudHlwZT1cXCd0ZXh0L2phdmFzY3JpcHRcXCc7cy5hc3luYz1mYWxzZTt2YXIgYz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShxKTtzLmFwcGVuZENoaWxkKGMpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyk7fTtsZXQgX0Q9cz0+e2NvbnN0IGFyPW5ldyBVaW50OEFycmF5KHMubGVuZ3RoKTtmb3IgKGxldCBpPTA7aTxzLmxlbmd0aDtpKyspe2FyW2ldPXMuY2hhckNvZGVBdChpKTt9cmV0dXJuIGFyO307bGV0IF9GPXM9PnBha28uaW5mbGF0ZShfRChhdG9iKHMpKSx7dG86XFwnc3RyaW5nXFwnfSk7bGV0IF9DPXN0cmluZz0+X1IoX0Yoc3RyaW5nKSk7JyArXHJcbiAgICAgIHNjcmlwdHMubWFwKCBzY3JpcHQgPT4gYCR7dG9SdW5TdHJpbmcoIHNjcmlwdCApfWAgKS5qb2luKCAnXFxuJyApICsgJzwvc2NyaXB0Pic7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgc2NyaXB0U2VjdGlvbiA9IFsgbGljZW5zZVNjcmlwdCwgLi4uc2NyaXB0cyBdLm1hcCggc2NyaXB0ID0+IGA8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj4ke3NjcmlwdH08L3NjcmlwdD5gICkuam9pbiggJ1xcbicgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBDaGlwcGVyU3RyaW5nVXRpbHMucmVwbGFjZVBsYWNlaG9sZGVycyggZ3J1bnQuZmlsZS5yZWFkKCAnLi4vY2hpcHBlci90ZW1wbGF0ZXMvc2ltLmh0bWwnICksIHtcclxuICAgIFBIRVRfQ0FSUklBR0VfUkVUVVJOOiAnXFxyJyxcclxuICAgIFBIRVRfU0lNX1RJVExFOiBlbmNvZGVyLmh0bWxFbmNvZGUoIGxvY2FsaXplZFRpdGxlICksXHJcbiAgICBQSEVUX0hUTUxfSEVBREVSOiBodG1sSGVhZGVyLFxyXG5cclxuICAgIC8vIHdyYXAgc2NyaXB0cyBpbiBnbG9iYWwgY2hlY2sgZm9yIElFXHJcbiAgICBQSEVUX1NJTV9TQ1JJUFRTOiBzY3JpcHRTZWN0aW9uLFxyXG5cclxuICAgIC8vIG1ldGFkYXRhIGZvciBPcGVuIEdyYXBoIHByb3RvY29sLCBzZWUgcGhldC1lZG1vZG8jMlxyXG4gICAgT0dfVElUTEU6IGVuY29kZXIuaHRtbEVuY29kZSggbG9jYWxpemVkVGl0bGUgKSxcclxuICAgIE9HX1VSTDogYCR7bGF0ZXN0RGlyfSR7cmVwb31fJHtsb2NhbGV9Lmh0bWxgLFxyXG4gICAgT0dfSU1BR0U6IGAke2xhdGVzdERpcn0ke3JlcG99LTYwMC5wbmdgXHJcbiAgfSApO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFFLFFBQVMsQ0FBQztBQUNsQyxNQUFNQyxrQkFBa0IsR0FBR0QsT0FBTyxDQUFFLDhCQUErQixDQUFDO0FBQ3BFLE1BQU1FLGlCQUFpQixHQUFHRixPQUFPLENBQUUscUJBQXNCLENBQUM7QUFDMUQsTUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUUsT0FBUSxDQUFDO0FBQ2hDLE1BQU1JLElBQUksR0FBR0osT0FBTyxDQUFFLE1BQU8sQ0FBQztBQUM5QixNQUFNSyxFQUFFLEdBQUdMLE9BQU8sQ0FBRSxJQUFLLENBQUM7QUFDMUIsTUFBTU0sZUFBZSxHQUFHTixPQUFPLENBQUUsbUJBQW9CLENBQUMsQ0FBQyxDQUFDOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBTyxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFVQyxNQUFNLEVBQUc7RUFFbEMsTUFBTUMsT0FBTyxHQUFHLElBQUlKLGVBQWUsQ0FBQ0ssT0FBTyxDQUFFLFFBQVMsQ0FBQztFQUV2RCxNQUFNO0lBQ0pDLElBQUk7SUFBRTtJQUNOQyxTQUFTO0lBQUU7SUFDWEMsYUFBYTtJQUFFO0lBQ2ZDLE9BQU87SUFBRTtJQUNUQyxNQUFNO0lBQUU7SUFDUkMsVUFBVTtJQUFFO0lBQ1pDLGVBQWUsR0FBRztFQUNwQixDQUFDLEdBQUdULE1BQU07RUFDVlYsTUFBTSxDQUFFLE9BQU9hLElBQUksS0FBSyxRQUFRLEVBQUUsZUFBZ0IsQ0FBQztFQUNuRGIsTUFBTSxDQUFFYyxTQUFTLEVBQUUsb0JBQXFCLENBQUM7RUFD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