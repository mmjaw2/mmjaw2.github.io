// Copyright 2019-2024, University of Colorado Boulder

/**
 * LabScreenView is the view for the 'Lab' screen.
 *
 * @author Martin Veillette
 */

import VectorAdditionConstants from '../../common/VectorAdditionConstants.js';
import CoordinateSnapRadioButtonGroup from '../../common/view/CoordinateSnapRadioButtonGroup.js';
import SceneNode from '../../common/view/SceneNode.js';
import VectorAdditionScreenView from '../../common/view/VectorAdditionScreenView.js';
import VectorAdditionViewProperties from '../../common/view/VectorAdditionViewProperties.js';
import vectorAddition from '../../vectorAddition.js';
import LabGraphControlPanel from './LabGraphControlPanel.js';
import LabVectorCreatorPanel from './LabVectorCreatorPanel.js';
import { Node } from '../../../../scenery/js/imports.js';
export default class LabScreenView extends VectorAdditionScreenView {
  // view-specific Properties

  constructor(model, tandem) {
    super(model, tandem);
    this.viewProperties = new VectorAdditionViewProperties();

    // Controls for the graph, at upper right
    const graphControlPanel = new LabGraphControlPanel(model.cartesianGraph, model.polarGraph, model.componentStyleProperty, model.sum1VisibleProperty, model.sum2VisibleProperty, this.viewProperties, {
      right: VectorAdditionConstants.SCREEN_VIEW_BOUNDS.right - VectorAdditionConstants.SCREEN_VIEW_X_MARGIN,
      top: VectorAdditionConstants.SCREEN_VIEW_BOUNDS.top + VectorAdditionConstants.SCREEN_VIEW_Y_MARGIN
    });

    // Coordinate Snap radio buttons, at lower right
    const coordinateSnapRadioButtonGroup = new CoordinateSnapRadioButtonGroup(this.viewProperties.coordinateSnapModeProperty, model.cartesianVectorColorPalette1, model.polarVectorColorPalette1, {
      left: graphControlPanel.left,
      bottom: this.resetAllButton.bottom
    });

    // Create and add the Scene Nodes and Vector Creator Panels for each graph
    const sceneNodes = [];
    [model.polarGraph, model.cartesianGraph].forEach(graph => {
      const sceneNode = new SceneNode(graph, this.viewProperties, model.componentStyleProperty);

      // Add the vector creator panel
      sceneNode.addVectorCreatorPanel(new LabVectorCreatorPanel(graph, sceneNode, {
        left: coordinateSnapRadioButtonGroup.left,
        bottom: coordinateSnapRadioButtonGroup.top - VectorAdditionConstants.RADIO_BUTTONS_Y_SPACING
      }));

      // Switch between scenes to match coordinate snap mode.
      // unlink is unnecessary, exists for the lifetime of the sim.
      this.viewProperties.coordinateSnapModeProperty.link(coordinateSnapMode => {
        this.interruptSubtreeInput(); // cancel interactions when switching scenes
        sceneNode.visible = coordinateSnapMode === graph.coordinateSnapMode;
      });

      // Add the scene node
      sceneNodes.push(sceneNode);
    });
    const screenViewRootNode = new Node({
      children: [graphControlPanel, coordinateSnapRadioButtonGroup, ...sceneNodes, this.resetAllButton]
    });
    this.addChild(screenViewRootNode);
  }
  reset() {
    super.reset();
    this.viewProperties.reset();
  }
}
vectorAddition.register('LabScreenView', LabScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3JBZGRpdGlvbkNvbnN0YW50cyIsIkNvb3JkaW5hdGVTbmFwUmFkaW9CdXR0b25Hcm91cCIsIlNjZW5lTm9kZSIsIlZlY3RvckFkZGl0aW9uU2NyZWVuVmlldyIsIlZlY3RvckFkZGl0aW9uVmlld1Byb3BlcnRpZXMiLCJ2ZWN0b3JBZGRpdGlvbiIsIkxhYkdyYXBoQ29udHJvbFBhbmVsIiwiTGFiVmVjdG9yQ3JlYXRvclBhbmVsIiwiTm9kZSIsIkxhYlNjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwidmlld1Byb3BlcnRpZXMiLCJncmFwaENvbnRyb2xQYW5lbCIsImNhcnRlc2lhbkdyYXBoIiwicG9sYXJHcmFwaCIsImNvbXBvbmVudFN0eWxlUHJvcGVydHkiLCJzdW0xVmlzaWJsZVByb3BlcnR5Iiwic3VtMlZpc2libGVQcm9wZXJ0eSIsInJpZ2h0IiwiU0NSRUVOX1ZJRVdfQk9VTkRTIiwiU0NSRUVOX1ZJRVdfWF9NQVJHSU4iLCJ0b3AiLCJTQ1JFRU5fVklFV19ZX01BUkdJTiIsImNvb3JkaW5hdGVTbmFwUmFkaW9CdXR0b25Hcm91cCIsImNvb3JkaW5hdGVTbmFwTW9kZVByb3BlcnR5IiwiY2FydGVzaWFuVmVjdG9yQ29sb3JQYWxldHRlMSIsInBvbGFyVmVjdG9yQ29sb3JQYWxldHRlMSIsImxlZnQiLCJib3R0b20iLCJyZXNldEFsbEJ1dHRvbiIsInNjZW5lTm9kZXMiLCJmb3JFYWNoIiwiZ3JhcGgiLCJzY2VuZU5vZGUiLCJhZGRWZWN0b3JDcmVhdG9yUGFuZWwiLCJSQURJT19CVVRUT05TX1lfU1BBQ0lORyIsImxpbmsiLCJjb29yZGluYXRlU25hcE1vZGUiLCJpbnRlcnJ1cHRTdWJ0cmVlSW5wdXQiLCJ2aXNpYmxlIiwicHVzaCIsInNjcmVlblZpZXdSb290Tm9kZSIsImNoaWxkcmVuIiwiYWRkQ2hpbGQiLCJyZXNldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTGFiU2NyZWVuVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBMYWJTY3JlZW5WaWV3IGlzIHRoZSB2aWV3IGZvciB0aGUgJ0xhYicgc2NyZWVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIE1hcnRpbiBWZWlsbGV0dGVcclxuICovXHJcblxyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgVmVjdG9yQWRkaXRpb25Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL1ZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENvb3JkaW5hdGVTbmFwUmFkaW9CdXR0b25Hcm91cCBmcm9tICcuLi8uLi9jb21tb24vdmlldy9Db29yZGluYXRlU25hcFJhZGlvQnV0dG9uR3JvdXAuanMnO1xyXG5pbXBvcnQgU2NlbmVOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1NjZW5lTm9kZS5qcyc7XHJcbmltcG9ydCBWZWN0b3JBZGRpdGlvblNjcmVlblZpZXcgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvVmVjdG9yQWRkaXRpb25TY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IFZlY3RvckFkZGl0aW9uVmlld1Byb3BlcnRpZXMgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvVmVjdG9yQWRkaXRpb25WaWV3UHJvcGVydGllcy5qcyc7XHJcbmltcG9ydCB2ZWN0b3JBZGRpdGlvbiBmcm9tICcuLi8uLi92ZWN0b3JBZGRpdGlvbi5qcyc7XHJcbmltcG9ydCBMYWJNb2RlbCBmcm9tICcuLi9tb2RlbC9MYWJNb2RlbC5qcyc7XHJcbmltcG9ydCBMYWJHcmFwaENvbnRyb2xQYW5lbCBmcm9tICcuL0xhYkdyYXBoQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IExhYlZlY3RvckNyZWF0b3JQYW5lbCBmcm9tICcuL0xhYlZlY3RvckNyZWF0b3JQYW5lbC5qcyc7XHJcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhYlNjcmVlblZpZXcgZXh0ZW5kcyBWZWN0b3JBZGRpdGlvblNjcmVlblZpZXcge1xyXG5cclxuICAvLyB2aWV3LXNwZWNpZmljIFByb3BlcnRpZXNcclxuICBwcml2YXRlIHJlYWRvbmx5IHZpZXdQcm9wZXJ0aWVzOiBWZWN0b3JBZGRpdGlvblZpZXdQcm9wZXJ0aWVzO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsOiBMYWJNb2RlbCwgdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgc3VwZXIoIG1vZGVsLCB0YW5kZW0gKTtcclxuXHJcbiAgICB0aGlzLnZpZXdQcm9wZXJ0aWVzID0gbmV3IFZlY3RvckFkZGl0aW9uVmlld1Byb3BlcnRpZXMoKTtcclxuXHJcbiAgICAvLyBDb250cm9scyBmb3IgdGhlIGdyYXBoLCBhdCB1cHBlciByaWdodFxyXG4gICAgY29uc3QgZ3JhcGhDb250cm9sUGFuZWwgPSBuZXcgTGFiR3JhcGhDb250cm9sUGFuZWwoXHJcbiAgICAgIG1vZGVsLmNhcnRlc2lhbkdyYXBoLFxyXG4gICAgICBtb2RlbC5wb2xhckdyYXBoLFxyXG4gICAgICBtb2RlbC5jb21wb25lbnRTdHlsZVByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5zdW0xVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5zdW0yVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICB0aGlzLnZpZXdQcm9wZXJ0aWVzLCB7XHJcbiAgICAgICAgcmlnaHQ6IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX0JPVU5EUy5yaWdodCAtIFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1hfTUFSR0lOLFxyXG4gICAgICAgIHRvcDogVmVjdG9yQWRkaXRpb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfQk9VTkRTLnRvcCArIFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1lfTUFSR0lOXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBDb29yZGluYXRlIFNuYXAgcmFkaW8gYnV0dG9ucywgYXQgbG93ZXIgcmlnaHRcclxuICAgIGNvbnN0IGNvb3JkaW5hdGVTbmFwUmFkaW9CdXR0b25Hcm91cCA9IG5ldyBDb29yZGluYXRlU25hcFJhZGlvQnV0dG9uR3JvdXAoXHJcbiAgICAgIHRoaXMudmlld1Byb3BlcnRpZXMuY29vcmRpbmF0ZVNuYXBNb2RlUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmNhcnRlc2lhblZlY3RvckNvbG9yUGFsZXR0ZTEsXHJcbiAgICAgIG1vZGVsLnBvbGFyVmVjdG9yQ29sb3JQYWxldHRlMSwge1xyXG4gICAgICAgIGxlZnQ6IGdyYXBoQ29udHJvbFBhbmVsLmxlZnQsXHJcbiAgICAgICAgYm90dG9tOiB0aGlzLnJlc2V0QWxsQnV0dG9uLmJvdHRvbVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGFuZCBhZGQgdGhlIFNjZW5lIE5vZGVzIGFuZCBWZWN0b3IgQ3JlYXRvciBQYW5lbHMgZm9yIGVhY2ggZ3JhcGhcclxuICAgIGNvbnN0IHNjZW5lTm9kZXM6IE5vZGVbXSA9IFtdO1xyXG4gICAgWyBtb2RlbC5wb2xhckdyYXBoLCBtb2RlbC5jYXJ0ZXNpYW5HcmFwaCBdLmZvckVhY2goIGdyYXBoID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IHNjZW5lTm9kZSA9IG5ldyBTY2VuZU5vZGUoIGdyYXBoLCB0aGlzLnZpZXdQcm9wZXJ0aWVzLCBtb2RlbC5jb21wb25lbnRTdHlsZVByb3BlcnR5ICk7XHJcblxyXG4gICAgICAvLyBBZGQgdGhlIHZlY3RvciBjcmVhdG9yIHBhbmVsXHJcbiAgICAgIHNjZW5lTm9kZS5hZGRWZWN0b3JDcmVhdG9yUGFuZWwoIG5ldyBMYWJWZWN0b3JDcmVhdG9yUGFuZWwoIGdyYXBoLCBzY2VuZU5vZGUsIHtcclxuICAgICAgICBsZWZ0OiBjb29yZGluYXRlU25hcFJhZGlvQnV0dG9uR3JvdXAubGVmdCxcclxuICAgICAgICBib3R0b206IGNvb3JkaW5hdGVTbmFwUmFkaW9CdXR0b25Hcm91cC50b3AgLSBWZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5SQURJT19CVVRUT05TX1lfU1BBQ0lOR1xyXG4gICAgICB9ICkgKTtcclxuXHJcbiAgICAgIC8vIFN3aXRjaCBiZXR3ZWVuIHNjZW5lcyB0byBtYXRjaCBjb29yZGluYXRlIHNuYXAgbW9kZS5cclxuICAgICAgLy8gdW5saW5rIGlzIHVubmVjZXNzYXJ5LCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltLlxyXG4gICAgICB0aGlzLnZpZXdQcm9wZXJ0aWVzLmNvb3JkaW5hdGVTbmFwTW9kZVByb3BlcnR5LmxpbmsoIGNvb3JkaW5hdGVTbmFwTW9kZSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRTdWJ0cmVlSW5wdXQoKTsgLy8gY2FuY2VsIGludGVyYWN0aW9ucyB3aGVuIHN3aXRjaGluZyBzY2VuZXNcclxuICAgICAgICBzY2VuZU5vZGUudmlzaWJsZSA9ICggY29vcmRpbmF0ZVNuYXBNb2RlID09PSBncmFwaC5jb29yZGluYXRlU25hcE1vZGUgKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLy8gQWRkIHRoZSBzY2VuZSBub2RlXHJcbiAgICAgIHNjZW5lTm9kZXMucHVzaCggc2NlbmVOb2RlICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgc2NyZWVuVmlld1Jvb3ROb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBncmFwaENvbnRyb2xQYW5lbCxcclxuICAgICAgICBjb29yZGluYXRlU25hcFJhZGlvQnV0dG9uR3JvdXAsXHJcbiAgICAgICAgLi4uc2NlbmVOb2RlcyxcclxuICAgICAgICB0aGlzLnJlc2V0QWxsQnV0dG9uXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHNjcmVlblZpZXdSb290Tm9kZSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgc3VwZXIucmVzZXQoKTtcclxuICAgIHRoaXMudmlld1Byb3BlcnRpZXMucmVzZXQoKTtcclxuICB9XHJcbn1cclxuXHJcbnZlY3RvckFkZGl0aW9uLnJlZ2lzdGVyKCAnTGFiU2NyZWVuVmlldycsIExhYlNjcmVlblZpZXcgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FBT0EsdUJBQXVCLE1BQU0seUNBQXlDO0FBQzdFLE9BQU9DLDhCQUE4QixNQUFNLHFEQUFxRDtBQUNoRyxPQUFPQyxTQUFTLE1BQU0sZ0NBQWdDO0FBQ3RELE9BQU9DLHdCQUF3QixNQUFNLCtDQUErQztBQUNwRixPQUFPQyw0QkFBNEIsTUFBTSxtREFBbUQ7QUFDNUYsT0FBT0MsY0FBYyxNQUFNLHlCQUF5QjtBQUVwRCxPQUFPQyxvQkFBb0IsTUFBTSwyQkFBMkI7QUFDNUQsT0FBT0MscUJBQXFCLE1BQU0sNEJBQTRCO0FBQzlELFNBQVNDLElBQUksUUFBUSxtQ0FBbUM7QUFHeEQsZUFBZSxNQUFNQyxhQUFhLFNBQVNOLHdCQUF3QixDQUFDO0VBRWxFOztFQUdPTyxXQUFXQSxDQUFFQyxLQUFlLEVBQUVDLE1BQWMsRUFBRztJQUVwRCxLQUFLLENBQUVELEtBQUssRUFBRUMsTUFBTyxDQUFDO0lBRXRCLElBQUksQ0FBQ0MsY0FBYyxHQUFHLElBQUlULDRCQUE0QixDQUFDLENBQUM7O0lBRXhEO0lBQ0EsTUFBTVUsaUJBQWlCLEdBQUcsSUFBSVIsb0JBQW9CLENBQ2hESyxLQUFLLENBQUNJLGNBQWMsRUFDcEJKLEtBQUssQ0FBQ0ssVUFBVSxFQUNoQkwsS0FBSyxDQUFDTSxzQkFBc0IsRUFDNUJOLEtBQUssQ0FBQ08sbUJBQW1CLEVBQ3pCUCxLQUFLLENBQUNRLG1CQUFtQixFQUN6QixJQUFJLENBQUNOLGNBQWMsRUFBRTtNQUNuQk8sS0FBSyxFQUFFcEIsdUJBQXVCLENBQUNxQixrQkFBa0IsQ0FBQ0QsS0FBSyxHQUFHcEIsdUJBQXVCLENBQUNzQixvQkFBb0I7TUFDdEdDLEdBQUcsRUFBRXZCLHVCQUF1QixDQUFDcUIsa0JBQWtCLENBQUNFLEdBQUcsR0FBR3ZCLHVCQUF1QixDQUFDd0I7SUFDaEYsQ0FBRSxDQUFDOztJQUVMO0lBQ0EsTUFBTUMsOEJBQThCLEdBQUcsSUFBSXhCLDhCQUE4QixDQUN2RSxJQUFJLENBQUNZLGNBQWMsQ0FBQ2EsMEJBQTBCLEVBQzlDZixLQUFLLENBQUNnQiw0QkFBNEIsRUFDbENoQixLQUFLLENBQUNpQix3QkFBd0IsRUFBRTtNQUM5QkMsSUFBSSxFQUFFZixpQkFBaUIsQ0FBQ2UsSUFBSTtNQUM1QkMsTUFBTSxFQUFFLElBQUksQ0FBQ0MsY0FBYyxDQUFDRDtJQUM5QixDQUFFLENBQUM7O0lBRUw7SUFDQSxNQUFNRSxVQUFrQixHQUFHLEVBQUU7SUFDN0IsQ0FBRXJCLEtBQUssQ0FBQ0ssVUFBVSxFQUFFTCxLQUFLLENBQUNJLGNBQWMsQ0FBRSxDQUFDa0IsT0FBTyxDQUFFQyxLQUFLLElBQUk7TUFFM0QsTUFBTUMsU0FBUyxHQUFHLElBQUlqQyxTQUFTLENBQUVnQyxLQUFLLEVBQUUsSUFBSSxDQUFDckIsY0FBYyxFQUFFRixLQUFLLENBQUNNLHNCQUF1QixDQUFDOztNQUUzRjtNQUNBa0IsU0FBUyxDQUFDQyxxQkFBcUIsQ0FBRSxJQUFJN0IscUJBQXFCLENBQUUyQixLQUFLLEVBQUVDLFNBQVMsRUFBRTtRQUM1RU4sSUFBSSxFQUFFSiw4QkFBOEIsQ0FBQ0ksSUFBSTtRQUN6Q0MsTUFBTSxFQUFFTCw4QkFBOEIsQ0FBQ0YsR0FBRyxHQUFHdkIsdUJBQXVCLENBQUNxQztNQUN2RSxDQUFFLENBQUUsQ0FBQzs7TUFFTDtNQUNBO01BQ0EsSUFBSSxDQUFDeEIsY0FBYyxDQUFDYSwwQkFBMEIsQ0FBQ1ksSUFBSSxDQUFFQyxrQkFBa0IsSUFBSTtRQUN6RSxJQUFJLENBQUNDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlCTCxTQUFTLENBQUNNLE9BQU8sR0FBS0Ysa0JBQWtCLEtBQUtMLEtBQUssQ0FBQ0ssa0JBQW9CO01BQ3pFLENBQUUsQ0FBQzs7TUFFSDtNQUNBUCxVQUFVLENBQUNVLElBQUksQ0FBRVAsU0FBVSxDQUFDO0lBQzlCLENBQUUsQ0FBQztJQUVILE1BQU1RLGtCQUFrQixHQUFHLElBQUluQyxJQUFJLENBQUU7TUFDbkNvQyxRQUFRLEVBQUUsQ0FDUjlCLGlCQUFpQixFQUNqQlcsOEJBQThCLEVBQzlCLEdBQUdPLFVBQVUsRUFDYixJQUFJLENBQUNELGNBQWM7SUFFdkIsQ0FBRSxDQUFDO0lBQ0gsSUFBSSxDQUFDYyxRQUFRLENBQUVGLGtCQUFtQixDQUFDO0VBQ3JDO0VBRWdCRyxLQUFLQSxDQUFBLEVBQVM7SUFDNUIsS0FBSyxDQUFDQSxLQUFLLENBQUMsQ0FBQztJQUNiLElBQUksQ0FBQ2pDLGNBQWMsQ0FBQ2lDLEtBQUssQ0FBQyxDQUFDO0VBQzdCO0FBQ0Y7QUFFQXpDLGNBQWMsQ0FBQzBDLFFBQVEsQ0FBRSxlQUFlLEVBQUV0QyxhQUFjLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=