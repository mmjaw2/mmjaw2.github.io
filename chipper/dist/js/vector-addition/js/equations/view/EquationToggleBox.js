// Copyright 2019-2023, University of Colorado Boulder

/**
 * EquationToggleBox is the toggle box labeled 'Equation' in the 'Equations' screen.
 * It allows the user to select the form of the equation, and change the coefficients of the vectors.
 *
 * @author Brandon Li
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { AlignBox, HBox, Node, Text } from '../../../../scenery/js/imports.js';
import VectorAdditionConstants from '../../common/VectorAdditionConstants.js';
import ToggleBox from '../../common/view/ToggleBox.js';
import vectorAddition from '../../vectorAddition.js';
import VectorAdditionStrings from '../../VectorAdditionStrings.js';
import EquationTypes from '../model/EquationTypes.js';
import EquationTypeNode from './EquationTypeNode.js';
import EquationTypesRadioButtonGroup from './EquationTypesRadioButtonGroup.js';
import optionize from '../../../../phet-core/js/optionize.js';

// constants
const TEXT_OPTIONS = {
  font: VectorAdditionConstants.EQUATION_FONT
};
export default class EquationToggleBox extends ToggleBox {
  /**
   * @param vectorSet
   * @param equationTypeProperty
   * @param equationButtonsAlignGroup - used to make all equation radio buttons the same size
   * @param equationsAlignGroup - used to make all interactive equations the same size
   * @param [providedOptions]
   */
  constructor(vectorSet, equationTypeProperty, equationButtonsAlignGroup, equationsAlignGroup, providedOptions) {
    const options = optionize()({
      // ToggleBoxOptions
      contentFixedWidth: 670,
      contentFixedHeight: 50,
      contentXSpacing: 17,
      isDisposable: false
    }, providedOptions);

    // When the toggle box is collapsed, show 'Equation'
    const closedContent = new Text(VectorAdditionStrings.equation, TEXT_OPTIONS);

    // Radio buttons for selecting equation type
    const radioButtonGroup = new EquationTypesRadioButtonGroup(equationTypeProperty, vectorSet.symbols, equationButtonsAlignGroup);

    // Create an equation of each type, only one of which will be visible at a time.
    const equationsParent = new Node();
    EquationTypes.enumeration.values.forEach(equationType => {
      const equationTypeNode = new EquationTypeNode(vectorSet, equationType);
      equationsParent.addChild(new AlignBox(equationTypeNode, {
        group: equationsAlignGroup,
        xAlign: 'left'
      }));

      // unlink is unnecessary, exists for the lifetime of the sim.
      equationTypeProperty.link(() => {
        equationTypeNode.visible = equationType === equationTypeProperty.value;
      });
    });

    // Radio buttons on the left, equation on the right. See https://github.com/phetsims/vector-addition/issues/128
    const openContent = new HBox({
      children: [radioButtonGroup, equationsParent],
      spacing: 55
    });
    super(closedContent, openContent, options);

    // When the box is collapsed, cancel interactions.
    // unlink is not necessary, exists for the lifetime of the sim.
    this.expandedProperty.lazyLink(expanded => {
      if (!expanded) {
        this.interruptSubtreeInput();
      }
    });
  }
}
vectorAddition.register('EquationToggleBox', EquationToggleBox);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbGlnbkJveCIsIkhCb3giLCJOb2RlIiwiVGV4dCIsIlZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIiwiVG9nZ2xlQm94IiwidmVjdG9yQWRkaXRpb24iLCJWZWN0b3JBZGRpdGlvblN0cmluZ3MiLCJFcXVhdGlvblR5cGVzIiwiRXF1YXRpb25UeXBlTm9kZSIsIkVxdWF0aW9uVHlwZXNSYWRpb0J1dHRvbkdyb3VwIiwib3B0aW9uaXplIiwiVEVYVF9PUFRJT05TIiwiZm9udCIsIkVRVUFUSU9OX0ZPTlQiLCJFcXVhdGlvblRvZ2dsZUJveCIsImNvbnN0cnVjdG9yIiwidmVjdG9yU2V0IiwiZXF1YXRpb25UeXBlUHJvcGVydHkiLCJlcXVhdGlvbkJ1dHRvbnNBbGlnbkdyb3VwIiwiZXF1YXRpb25zQWxpZ25Hcm91cCIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJjb250ZW50Rml4ZWRXaWR0aCIsImNvbnRlbnRGaXhlZEhlaWdodCIsImNvbnRlbnRYU3BhY2luZyIsImlzRGlzcG9zYWJsZSIsImNsb3NlZENvbnRlbnQiLCJlcXVhdGlvbiIsInJhZGlvQnV0dG9uR3JvdXAiLCJzeW1ib2xzIiwiZXF1YXRpb25zUGFyZW50IiwiZW51bWVyYXRpb24iLCJ2YWx1ZXMiLCJmb3JFYWNoIiwiZXF1YXRpb25UeXBlIiwiZXF1YXRpb25UeXBlTm9kZSIsImFkZENoaWxkIiwiZ3JvdXAiLCJ4QWxpZ24iLCJsaW5rIiwidmlzaWJsZSIsInZhbHVlIiwib3BlbkNvbnRlbnQiLCJjaGlsZHJlbiIsInNwYWNpbmciLCJleHBhbmRlZFByb3BlcnR5IiwibGF6eUxpbmsiLCJleHBhbmRlZCIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRXF1YXRpb25Ub2dnbGVCb3gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRXF1YXRpb25Ub2dnbGVCb3ggaXMgdGhlIHRvZ2dsZSBib3ggbGFiZWxlZCAnRXF1YXRpb24nIGluIHRoZSAnRXF1YXRpb25zJyBzY3JlZW4uXHJcbiAqIEl0IGFsbG93cyB0aGUgdXNlciB0byBzZWxlY3QgdGhlIGZvcm0gb2YgdGhlIGVxdWF0aW9uLCBhbmQgY2hhbmdlIHRoZSBjb2VmZmljaWVudHMgb2YgdGhlIHZlY3RvcnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQnJhbmRvbiBMaVxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBFbnVtZXJhdGlvblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBBbGlnbkdyb3VwLCBIQm94LCBOb2RlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9WZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBUb2dnbGVCb3gsIHsgVG9nZ2xlQm94T3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1RvZ2dsZUJveC5qcyc7XHJcbmltcG9ydCB2ZWN0b3JBZGRpdGlvbiBmcm9tICcuLi8uLi92ZWN0b3JBZGRpdGlvbi5qcyc7XHJcbmltcG9ydCBWZWN0b3JBZGRpdGlvblN0cmluZ3MgZnJvbSAnLi4vLi4vVmVjdG9yQWRkaXRpb25TdHJpbmdzLmpzJztcclxuaW1wb3J0IEVxdWF0aW9uc1ZlY3RvclNldCBmcm9tICcuLi9tb2RlbC9FcXVhdGlvbnNWZWN0b3JTZXQuanMnO1xyXG5pbXBvcnQgRXF1YXRpb25UeXBlcyBmcm9tICcuLi9tb2RlbC9FcXVhdGlvblR5cGVzLmpzJztcclxuaW1wb3J0IEVxdWF0aW9uVHlwZU5vZGUgZnJvbSAnLi9FcXVhdGlvblR5cGVOb2RlLmpzJztcclxuaW1wb3J0IEVxdWF0aW9uVHlwZXNSYWRpb0J1dHRvbkdyb3VwIGZyb20gJy4vRXF1YXRpb25UeXBlc1JhZGlvQnV0dG9uR3JvdXAuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBURVhUX09QVElPTlMgPSB7IGZvbnQ6IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLkVRVUFUSU9OX0ZPTlQgfTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBFcXVhdGlvblRvZ2dsZUJveE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFRvZ2dsZUJveE9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcXVhdGlvblRvZ2dsZUJveCBleHRlbmRzIFRvZ2dsZUJveCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB2ZWN0b3JTZXRcclxuICAgKiBAcGFyYW0gZXF1YXRpb25UeXBlUHJvcGVydHlcclxuICAgKiBAcGFyYW0gZXF1YXRpb25CdXR0b25zQWxpZ25Hcm91cCAtIHVzZWQgdG8gbWFrZSBhbGwgZXF1YXRpb24gcmFkaW8gYnV0dG9ucyB0aGUgc2FtZSBzaXplXHJcbiAgICogQHBhcmFtIGVxdWF0aW9uc0FsaWduR3JvdXAgLSB1c2VkIHRvIG1ha2UgYWxsIGludGVyYWN0aXZlIGVxdWF0aW9ucyB0aGUgc2FtZSBzaXplXHJcbiAgICogQHBhcmFtIFtwcm92aWRlZE9wdGlvbnNdXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCB2ZWN0b3JTZXQ6IEVxdWF0aW9uc1ZlY3RvclNldCwgZXF1YXRpb25UeXBlUHJvcGVydHk6IEVudW1lcmF0aW9uUHJvcGVydHk8RXF1YXRpb25UeXBlcz4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBlcXVhdGlvbkJ1dHRvbnNBbGlnbkdyb3VwOiBBbGlnbkdyb3VwLCBlcXVhdGlvbnNBbGlnbkdyb3VwOiBBbGlnbkdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zPzogRXF1YXRpb25Ub2dnbGVCb3hPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RXF1YXRpb25Ub2dnbGVCb3hPcHRpb25zLCBTZWxmT3B0aW9ucywgVG9nZ2xlQm94T3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gVG9nZ2xlQm94T3B0aW9uc1xyXG4gICAgICBjb250ZW50Rml4ZWRXaWR0aDogNjcwLFxyXG4gICAgICBjb250ZW50Rml4ZWRIZWlnaHQ6IDUwLFxyXG4gICAgICBjb250ZW50WFNwYWNpbmc6IDE3LFxyXG4gICAgICBpc0Rpc3Bvc2FibGU6IGZhbHNlXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBXaGVuIHRoZSB0b2dnbGUgYm94IGlzIGNvbGxhcHNlZCwgc2hvdyAnRXF1YXRpb24nXHJcbiAgICBjb25zdCBjbG9zZWRDb250ZW50ID0gbmV3IFRleHQoIFZlY3RvckFkZGl0aW9uU3RyaW5ncy5lcXVhdGlvbiwgVEVYVF9PUFRJT05TICk7XHJcblxyXG4gICAgLy8gUmFkaW8gYnV0dG9ucyBmb3Igc2VsZWN0aW5nIGVxdWF0aW9uIHR5cGVcclxuICAgIGNvbnN0IHJhZGlvQnV0dG9uR3JvdXAgPSBuZXcgRXF1YXRpb25UeXBlc1JhZGlvQnV0dG9uR3JvdXAoXHJcbiAgICAgIGVxdWF0aW9uVHlwZVByb3BlcnR5LCB2ZWN0b3JTZXQuc3ltYm9scywgZXF1YXRpb25CdXR0b25zQWxpZ25Hcm91cCApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhbiBlcXVhdGlvbiBvZiBlYWNoIHR5cGUsIG9ubHkgb25lIG9mIHdoaWNoIHdpbGwgYmUgdmlzaWJsZSBhdCBhIHRpbWUuXHJcbiAgICBjb25zdCBlcXVhdGlvbnNQYXJlbnQgPSBuZXcgTm9kZSgpO1xyXG4gICAgRXF1YXRpb25UeXBlcy5lbnVtZXJhdGlvbi52YWx1ZXMuZm9yRWFjaCggZXF1YXRpb25UeXBlID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IGVxdWF0aW9uVHlwZU5vZGUgPSBuZXcgRXF1YXRpb25UeXBlTm9kZSggdmVjdG9yU2V0LCBlcXVhdGlvblR5cGUgKTtcclxuICAgICAgZXF1YXRpb25zUGFyZW50LmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIGVxdWF0aW9uVHlwZU5vZGUsIHtcclxuICAgICAgICBncm91cDogZXF1YXRpb25zQWxpZ25Hcm91cCxcclxuICAgICAgICB4QWxpZ246ICdsZWZ0J1xyXG4gICAgICB9ICkgKTtcclxuXHJcbiAgICAgIC8vIHVubGluayBpcyB1bm5lY2Vzc2FyeSwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbS5cclxuICAgICAgZXF1YXRpb25UeXBlUHJvcGVydHkubGluayggKCkgPT4ge1xyXG4gICAgICAgIGVxdWF0aW9uVHlwZU5vZGUudmlzaWJsZSA9ICggZXF1YXRpb25UeXBlID09PSBlcXVhdGlvblR5cGVQcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gUmFkaW8gYnV0dG9ucyBvbiB0aGUgbGVmdCwgZXF1YXRpb24gb24gdGhlIHJpZ2h0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3ZlY3Rvci1hZGRpdGlvbi9pc3N1ZXMvMTI4XHJcbiAgICBjb25zdCBvcGVuQ29udGVudCA9IG5ldyBIQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIHJhZGlvQnV0dG9uR3JvdXAsIGVxdWF0aW9uc1BhcmVudCBdLFxyXG4gICAgICBzcGFjaW5nOiA1NVxyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBjbG9zZWRDb250ZW50LCBvcGVuQ29udGVudCwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIGJveCBpcyBjb2xsYXBzZWQsIGNhbmNlbCBpbnRlcmFjdGlvbnMuXHJcbiAgICAvLyB1bmxpbmsgaXMgbm90IG5lY2Vzc2FyeSwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbS5cclxuICAgIHRoaXMuZXhwYW5kZWRQcm9wZXJ0eS5sYXp5TGluayggZXhwYW5kZWQgPT4ge1xyXG4gICAgICBpZiAoICFleHBhbmRlZCApIHtcclxuICAgICAgICB0aGlzLmludGVycnVwdFN1YnRyZWVJbnB1dCgpO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG52ZWN0b3JBZGRpdGlvbi5yZWdpc3RlciggJ0VxdWF0aW9uVG9nZ2xlQm94JywgRXF1YXRpb25Ub2dnbGVCb3ggKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLFNBQVNBLFFBQVEsRUFBY0MsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDMUYsT0FBT0MsdUJBQXVCLE1BQU0seUNBQXlDO0FBQzdFLE9BQU9DLFNBQVMsTUFBNEIsZ0NBQWdDO0FBQzVFLE9BQU9DLGNBQWMsTUFBTSx5QkFBeUI7QUFDcEQsT0FBT0MscUJBQXFCLE1BQU0sZ0NBQWdDO0FBRWxFLE9BQU9DLGFBQWEsTUFBTSwyQkFBMkI7QUFDckQsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLDZCQUE2QixNQUFNLG9DQUFvQztBQUM5RSxPQUFPQyxTQUFTLE1BQTRCLHVDQUF1Qzs7QUFFbkY7QUFDQSxNQUFNQyxZQUFZLEdBQUc7RUFBRUMsSUFBSSxFQUFFVCx1QkFBdUIsQ0FBQ1U7QUFBYyxDQUFDO0FBTXBFLGVBQWUsTUFBTUMsaUJBQWlCLFNBQVNWLFNBQVMsQ0FBQztFQUV2RDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNTVyxXQUFXQSxDQUFFQyxTQUE2QixFQUFFQyxvQkFBd0QsRUFDdkZDLHlCQUFxQyxFQUFFQyxtQkFBK0IsRUFDdEVDLGVBQTBDLEVBQUc7SUFFL0QsTUFBTUMsT0FBTyxHQUFHWCxTQUFTLENBQTBELENBQUMsQ0FBRTtNQUVwRjtNQUNBWSxpQkFBaUIsRUFBRSxHQUFHO01BQ3RCQyxrQkFBa0IsRUFBRSxFQUFFO01BQ3RCQyxlQUFlLEVBQUUsRUFBRTtNQUNuQkMsWUFBWSxFQUFFO0lBQ2hCLENBQUMsRUFBRUwsZUFBZ0IsQ0FBQzs7SUFFcEI7SUFDQSxNQUFNTSxhQUFhLEdBQUcsSUFBSXhCLElBQUksQ0FBRUkscUJBQXFCLENBQUNxQixRQUFRLEVBQUVoQixZQUFhLENBQUM7O0lBRTlFO0lBQ0EsTUFBTWlCLGdCQUFnQixHQUFHLElBQUluQiw2QkFBNkIsQ0FDeERRLG9CQUFvQixFQUFFRCxTQUFTLENBQUNhLE9BQU8sRUFBRVgseUJBQTBCLENBQUM7O0lBRXRFO0lBQ0EsTUFBTVksZUFBZSxHQUFHLElBQUk3QixJQUFJLENBQUMsQ0FBQztJQUNsQ00sYUFBYSxDQUFDd0IsV0FBVyxDQUFDQyxNQUFNLENBQUNDLE9BQU8sQ0FBRUMsWUFBWSxJQUFJO01BRXhELE1BQU1DLGdCQUFnQixHQUFHLElBQUkzQixnQkFBZ0IsQ0FBRVEsU0FBUyxFQUFFa0IsWUFBYSxDQUFDO01BQ3hFSixlQUFlLENBQUNNLFFBQVEsQ0FBRSxJQUFJckMsUUFBUSxDQUFFb0MsZ0JBQWdCLEVBQUU7UUFDeERFLEtBQUssRUFBRWxCLG1CQUFtQjtRQUMxQm1CLE1BQU0sRUFBRTtNQUNWLENBQUUsQ0FBRSxDQUFDOztNQUVMO01BQ0FyQixvQkFBb0IsQ0FBQ3NCLElBQUksQ0FBRSxNQUFNO1FBQy9CSixnQkFBZ0IsQ0FBQ0ssT0FBTyxHQUFLTixZQUFZLEtBQUtqQixvQkFBb0IsQ0FBQ3dCLEtBQU87TUFDNUUsQ0FBRSxDQUFDO0lBQ0wsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsTUFBTUMsV0FBVyxHQUFHLElBQUkxQyxJQUFJLENBQUU7TUFDNUIyQyxRQUFRLEVBQUUsQ0FBRWYsZ0JBQWdCLEVBQUVFLGVBQWUsQ0FBRTtNQUMvQ2MsT0FBTyxFQUFFO0lBQ1gsQ0FBRSxDQUFDO0lBRUgsS0FBSyxDQUFFbEIsYUFBYSxFQUFFZ0IsV0FBVyxFQUFFckIsT0FBUSxDQUFDOztJQUU1QztJQUNBO0lBQ0EsSUFBSSxDQUFDd0IsZ0JBQWdCLENBQUNDLFFBQVEsQ0FBRUMsUUFBUSxJQUFJO01BQzFDLElBQUssQ0FBQ0EsUUFBUSxFQUFHO1FBQ2YsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQyxDQUFDO01BQzlCO0lBQ0YsQ0FBRSxDQUFDO0VBQ0w7QUFDRjtBQUVBM0MsY0FBYyxDQUFDNEMsUUFBUSxDQUFFLG1CQUFtQixFQUFFbkMsaUJBQWtCLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=