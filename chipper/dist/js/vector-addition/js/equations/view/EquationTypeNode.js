// Copyright 2019-2023, University of Colorado Boulder

/**
 * EquationTypeNode displays an interactive equation for one of the EquationTypes enumeration values.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../../axon/js/Property.js';
import merge from '../../../../phet-core/js/merge.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import NumberPicker from '../../../../sun/js/NumberPicker.js';
import VectorAdditionConstants from '../../common/VectorAdditionConstants.js';
import VectorSymbolNode from '../../common/view/VectorSymbolNode.js';
import vectorAddition from '../../vectorAddition.js';
import EquationTypes from '../model/EquationTypes.js';

// constants
const TEXT_OPTIONS = {
  font: VectorAdditionConstants.INTERACTIVE_EQUATION_FONT
};
const labelNumberPickerSpacing = 7; // spacing between the NumberPicker and the VectorSymbolNode
const textSpacing = 13.5; // spacing between text of the equation

export default class EquationTypeNode extends Node {
  constructor(vectorSet, equationType) {
    // Create all pieces of the equation
    const equationChildren = [];
    let maxVectorSymbolHeight = 0;
    const numberPickerOptions = merge({}, VectorAdditionConstants.NUMBER_PICKER_OPTIONS, {
      touchAreaXDilation: 20,
      touchAreaYDilation: 14,
      font: VectorAdditionConstants.INTERACTIVE_EQUATION_FONT,
      color: vectorSet.vectorColorPalette.mainFill
    });

    // Left side
    for (let i = 0; i < vectorSet.vectors.length; i++) {
      if (i > 0) {
        const signText = equationType === EquationTypes.SUBTRACTION ? MathSymbols.MINUS : MathSymbols.PLUS;
        equationChildren.push(new Text(signText, TEXT_OPTIONS));
      }
      const vector = vectorSet.equationsVectors[i];
      assert && assert(vector.coefficientProperty.range, 'coefficientProperty must have an associated range');
      equationChildren.push(new NumberPicker(vector.coefficientProperty, new Property(vector.coefficientProperty.range), numberPickerOptions));
      const vectorSymbolNode = new VectorSymbolNode({
        symbol: vector.symbol,
        symbolFont: VectorAdditionConstants.INTERACTIVE_EQUATION_SYMBOL_FONT
      });
      equationChildren.push(vectorSymbolNode);
      maxVectorSymbolHeight = Math.max(maxVectorSymbolHeight, vectorSymbolNode.height);
    }
    if (equationType === EquationTypes.NEGATION) {
      const signText = equationType === EquationTypes.SUBTRACTION ? MathSymbols.MINUS : MathSymbols.PLUS;
      equationChildren.push(new Text(signText, TEXT_OPTIONS));
      const sumVector = vectorSet.sumVector;
      assert && assert(sumVector);
      const vectorSymbolNode = new VectorSymbolNode({
        symbol: sumVector.symbol,
        symbolFont: VectorAdditionConstants.INTERACTIVE_EQUATION_SYMBOL_FONT
      });
      equationChildren.push(vectorSymbolNode);
      maxVectorSymbolHeight = Math.max(maxVectorSymbolHeight, vectorSymbolNode.height);
    }

    // =
    equationChildren.push(new Text(MathSymbols.EQUAL_TO, TEXT_OPTIONS));

    // Right size
    if (equationType === EquationTypes.NEGATION) {
      equationChildren.push(new Text('0', TEXT_OPTIONS));
    } else {
      const sumVector = vectorSet.sumVector;
      assert && assert(sumVector);
      const vectorSymbolNode = new VectorSymbolNode({
        symbol: sumVector.symbol,
        symbolFont: VectorAdditionConstants.INTERACTIVE_EQUATION_SYMBOL_FONT
      });
      equationChildren.push(vectorSymbolNode);
      maxVectorSymbolHeight = Math.max(maxVectorSymbolHeight, vectorSymbolNode.height);
    }

    // This layout algorithm keeps text Nodes aligned on their baselines, and empirically adjusts the
    // vertical position of NumberPickers. See https://github.com/phetsims/vector-addition/issues/128
    for (let i = 0; i < equationChildren.length; i++) {
      const child = equationChildren[i];
      if (child instanceof NumberPicker) {
        child.centerY = -maxVectorSymbolHeight / 3;
      }
      if (i > 0) {
        const previousChild = equationChildren[i - 1];
        if (previousChild instanceof NumberPicker) {
          child.left = previousChild.right + labelNumberPickerSpacing;
        } else {
          child.left = previousChild.right + textSpacing;
        }
      }
    }
    super({
      children: equationChildren
    });
  }
}
vectorAddition.register('EquationTypeNode', EquationTypeNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIm1lcmdlIiwiTWF0aFN5bWJvbHMiLCJOb2RlIiwiVGV4dCIsIk51bWJlclBpY2tlciIsIlZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIiwiVmVjdG9yU3ltYm9sTm9kZSIsInZlY3RvckFkZGl0aW9uIiwiRXF1YXRpb25UeXBlcyIsIlRFWFRfT1BUSU9OUyIsImZvbnQiLCJJTlRFUkFDVElWRV9FUVVBVElPTl9GT05UIiwibGFiZWxOdW1iZXJQaWNrZXJTcGFjaW5nIiwidGV4dFNwYWNpbmciLCJFcXVhdGlvblR5cGVOb2RlIiwiY29uc3RydWN0b3IiLCJ2ZWN0b3JTZXQiLCJlcXVhdGlvblR5cGUiLCJlcXVhdGlvbkNoaWxkcmVuIiwibWF4VmVjdG9yU3ltYm9sSGVpZ2h0IiwibnVtYmVyUGlja2VyT3B0aW9ucyIsIk5VTUJFUl9QSUNLRVJfT1BUSU9OUyIsInRvdWNoQXJlYVhEaWxhdGlvbiIsInRvdWNoQXJlYVlEaWxhdGlvbiIsImNvbG9yIiwidmVjdG9yQ29sb3JQYWxldHRlIiwibWFpbkZpbGwiLCJpIiwidmVjdG9ycyIsImxlbmd0aCIsInNpZ25UZXh0IiwiU1VCVFJBQ1RJT04iLCJNSU5VUyIsIlBMVVMiLCJwdXNoIiwidmVjdG9yIiwiZXF1YXRpb25zVmVjdG9ycyIsImFzc2VydCIsImNvZWZmaWNpZW50UHJvcGVydHkiLCJyYW5nZSIsInZlY3RvclN5bWJvbE5vZGUiLCJzeW1ib2wiLCJzeW1ib2xGb250IiwiSU5URVJBQ1RJVkVfRVFVQVRJT05fU1lNQk9MX0ZPTlQiLCJNYXRoIiwibWF4IiwiaGVpZ2h0IiwiTkVHQVRJT04iLCJzdW1WZWN0b3IiLCJFUVVBTF9UTyIsImNoaWxkIiwiY2VudGVyWSIsInByZXZpb3VzQ2hpbGQiLCJsZWZ0IiwicmlnaHQiLCJjaGlsZHJlbiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRXF1YXRpb25UeXBlTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBFcXVhdGlvblR5cGVOb2RlIGRpc3BsYXlzIGFuIGludGVyYWN0aXZlIGVxdWF0aW9uIGZvciBvbmUgb2YgdGhlIEVxdWF0aW9uVHlwZXMgZW51bWVyYXRpb24gdmFsdWVzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBNYXRoU3ltYm9scyBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTWF0aFN5bWJvbHMuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IE51bWJlclBpY2tlciBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvTnVtYmVyUGlja2VyLmpzJztcclxuaW1wb3J0IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9WZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBWZWN0b3JTeW1ib2xOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1ZlY3RvclN5bWJvbE5vZGUuanMnO1xyXG5pbXBvcnQgdmVjdG9yQWRkaXRpb24gZnJvbSAnLi4vLi4vdmVjdG9yQWRkaXRpb24uanMnO1xyXG5pbXBvcnQgRXF1YXRpb25zVmVjdG9yU2V0IGZyb20gJy4uL21vZGVsL0VxdWF0aW9uc1ZlY3RvclNldC5qcyc7XHJcbmltcG9ydCBFcXVhdGlvblR5cGVzIGZyb20gJy4uL21vZGVsL0VxdWF0aW9uVHlwZXMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFRFWFRfT1BUSU9OUyA9IHtcclxuICBmb250OiBWZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5JTlRFUkFDVElWRV9FUVVBVElPTl9GT05UXHJcbn07XHJcbmNvbnN0IGxhYmVsTnVtYmVyUGlja2VyU3BhY2luZyA9IDc7IC8vIHNwYWNpbmcgYmV0d2VlbiB0aGUgTnVtYmVyUGlja2VyIGFuZCB0aGUgVmVjdG9yU3ltYm9sTm9kZVxyXG5jb25zdCB0ZXh0U3BhY2luZyA9IDEzLjU7IC8vIHNwYWNpbmcgYmV0d2VlbiB0ZXh0IG9mIHRoZSBlcXVhdGlvblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXF1YXRpb25UeXBlTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHZlY3RvclNldDogRXF1YXRpb25zVmVjdG9yU2V0LCBlcXVhdGlvblR5cGU6IEVxdWF0aW9uVHlwZXMgKSB7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGFsbCBwaWVjZXMgb2YgdGhlIGVxdWF0aW9uXHJcbiAgICBjb25zdCBlcXVhdGlvbkNoaWxkcmVuID0gW107XHJcbiAgICBsZXQgbWF4VmVjdG9yU3ltYm9sSGVpZ2h0ID0gMDtcclxuXHJcbiAgICBjb25zdCBudW1iZXJQaWNrZXJPcHRpb25zID0gbWVyZ2UoIHt9LCBWZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5OVU1CRVJfUElDS0VSX09QVElPTlMsIHtcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiAyMCxcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiAxNCxcclxuICAgICAgZm9udDogVmVjdG9yQWRkaXRpb25Db25zdGFudHMuSU5URVJBQ1RJVkVfRVFVQVRJT05fRk9OVCxcclxuICAgICAgY29sb3I6IHZlY3RvclNldC52ZWN0b3JDb2xvclBhbGV0dGUubWFpbkZpbGxcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBMZWZ0IHNpZGVcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHZlY3RvclNldC52ZWN0b3JzLmxlbmd0aDsgaSsrICkge1xyXG5cclxuICAgICAgaWYgKCBpID4gMCApIHtcclxuICAgICAgICBjb25zdCBzaWduVGV4dCA9ICggZXF1YXRpb25UeXBlID09PSBFcXVhdGlvblR5cGVzLlNVQlRSQUNUSU9OICkgPyBNYXRoU3ltYm9scy5NSU5VUyA6IE1hdGhTeW1ib2xzLlBMVVM7XHJcbiAgICAgICAgZXF1YXRpb25DaGlsZHJlbi5wdXNoKCBuZXcgVGV4dCggc2lnblRleHQsIFRFWFRfT1BUSU9OUyApICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHZlY3RvciA9IHZlY3RvclNldC5lcXVhdGlvbnNWZWN0b3JzWyBpIF07XHJcblxyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2ZWN0b3IuY29lZmZpY2llbnRQcm9wZXJ0eS5yYW5nZSxcclxuICAgICAgICAnY29lZmZpY2llbnRQcm9wZXJ0eSBtdXN0IGhhdmUgYW4gYXNzb2NpYXRlZCByYW5nZScgKTtcclxuXHJcbiAgICAgIGVxdWF0aW9uQ2hpbGRyZW4ucHVzaCggbmV3IE51bWJlclBpY2tlciggdmVjdG9yLmNvZWZmaWNpZW50UHJvcGVydHksXHJcbiAgICAgICAgbmV3IFByb3BlcnR5KCB2ZWN0b3IuY29lZmZpY2llbnRQcm9wZXJ0eS5yYW5nZSApLFxyXG4gICAgICAgIG51bWJlclBpY2tlck9wdGlvbnMgKSApO1xyXG5cclxuICAgICAgY29uc3QgdmVjdG9yU3ltYm9sTm9kZSA9IG5ldyBWZWN0b3JTeW1ib2xOb2RlKCB7XHJcbiAgICAgICAgc3ltYm9sOiB2ZWN0b3Iuc3ltYm9sLFxyXG4gICAgICAgIHN5bWJvbEZvbnQ6IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLklOVEVSQUNUSVZFX0VRVUFUSU9OX1NZTUJPTF9GT05UXHJcbiAgICAgIH0gKTtcclxuICAgICAgZXF1YXRpb25DaGlsZHJlbi5wdXNoKCB2ZWN0b3JTeW1ib2xOb2RlICk7XHJcbiAgICAgIG1heFZlY3RvclN5bWJvbEhlaWdodCA9IE1hdGgubWF4KCBtYXhWZWN0b3JTeW1ib2xIZWlnaHQsIHZlY3RvclN5bWJvbE5vZGUuaGVpZ2h0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBlcXVhdGlvblR5cGUgPT09IEVxdWF0aW9uVHlwZXMuTkVHQVRJT04gKSB7XHJcbiAgICAgIGNvbnN0IHNpZ25UZXh0ID0gKCBlcXVhdGlvblR5cGUgPT09IEVxdWF0aW9uVHlwZXMuU1VCVFJBQ1RJT04gKSA/IE1hdGhTeW1ib2xzLk1JTlVTIDogTWF0aFN5bWJvbHMuUExVUztcclxuICAgICAgZXF1YXRpb25DaGlsZHJlbi5wdXNoKCBuZXcgVGV4dCggc2lnblRleHQsIFRFWFRfT1BUSU9OUyApICk7XHJcblxyXG4gICAgICBjb25zdCBzdW1WZWN0b3IgPSB2ZWN0b3JTZXQuc3VtVmVjdG9yITtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggc3VtVmVjdG9yICk7XHJcbiAgICAgIGNvbnN0IHZlY3RvclN5bWJvbE5vZGUgPSBuZXcgVmVjdG9yU3ltYm9sTm9kZSgge1xyXG4gICAgICAgIHN5bWJvbDogc3VtVmVjdG9yLnN5bWJvbCxcclxuICAgICAgICBzeW1ib2xGb250OiBWZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5JTlRFUkFDVElWRV9FUVVBVElPTl9TWU1CT0xfRk9OVFxyXG4gICAgICB9ICk7XHJcbiAgICAgIGVxdWF0aW9uQ2hpbGRyZW4ucHVzaCggdmVjdG9yU3ltYm9sTm9kZSApO1xyXG4gICAgICBtYXhWZWN0b3JTeW1ib2xIZWlnaHQgPSBNYXRoLm1heCggbWF4VmVjdG9yU3ltYm9sSGVpZ2h0LCB2ZWN0b3JTeW1ib2xOb2RlLmhlaWdodCApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vID1cclxuICAgIGVxdWF0aW9uQ2hpbGRyZW4ucHVzaCggbmV3IFRleHQoIE1hdGhTeW1ib2xzLkVRVUFMX1RPLCBURVhUX09QVElPTlMgKSApO1xyXG5cclxuICAgIC8vIFJpZ2h0IHNpemVcclxuICAgIGlmICggZXF1YXRpb25UeXBlID09PSBFcXVhdGlvblR5cGVzLk5FR0FUSU9OICkge1xyXG4gICAgICBlcXVhdGlvbkNoaWxkcmVuLnB1c2goIG5ldyBUZXh0KCAnMCcsIFRFWFRfT1BUSU9OUyApICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc3Qgc3VtVmVjdG9yID0gdmVjdG9yU2V0LnN1bVZlY3RvciE7XHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHN1bVZlY3RvciApO1xyXG4gICAgICBjb25zdCB2ZWN0b3JTeW1ib2xOb2RlID0gbmV3IFZlY3RvclN5bWJvbE5vZGUoIHtcclxuICAgICAgICBzeW1ib2w6IHN1bVZlY3Rvci5zeW1ib2wsXHJcbiAgICAgICAgc3ltYm9sRm9udDogVmVjdG9yQWRkaXRpb25Db25zdGFudHMuSU5URVJBQ1RJVkVfRVFVQVRJT05fU1lNQk9MX0ZPTlRcclxuICAgICAgfSApO1xyXG4gICAgICBlcXVhdGlvbkNoaWxkcmVuLnB1c2goIHZlY3RvclN5bWJvbE5vZGUgKTtcclxuICAgICAgbWF4VmVjdG9yU3ltYm9sSGVpZ2h0ID0gTWF0aC5tYXgoIG1heFZlY3RvclN5bWJvbEhlaWdodCwgdmVjdG9yU3ltYm9sTm9kZS5oZWlnaHQgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGlzIGxheW91dCBhbGdvcml0aG0ga2VlcHMgdGV4dCBOb2RlcyBhbGlnbmVkIG9uIHRoZWlyIGJhc2VsaW5lcywgYW5kIGVtcGlyaWNhbGx5IGFkanVzdHMgdGhlXHJcbiAgICAvLyB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiBOdW1iZXJQaWNrZXJzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3ZlY3Rvci1hZGRpdGlvbi9pc3N1ZXMvMTI4XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBlcXVhdGlvbkNoaWxkcmVuLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCBjaGlsZCA9IGVxdWF0aW9uQ2hpbGRyZW5bIGkgXTtcclxuICAgICAgaWYgKCBjaGlsZCBpbnN0YW5jZW9mIE51bWJlclBpY2tlciApIHtcclxuICAgICAgICBjaGlsZC5jZW50ZXJZID0gLW1heFZlY3RvclN5bWJvbEhlaWdodCAvIDM7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCBpID4gMCApIHtcclxuICAgICAgICBjb25zdCBwcmV2aW91c0NoaWxkID0gZXF1YXRpb25DaGlsZHJlblsgaSAtIDEgXTtcclxuICAgICAgICBpZiAoIHByZXZpb3VzQ2hpbGQgaW5zdGFuY2VvZiBOdW1iZXJQaWNrZXIgKSB7XHJcbiAgICAgICAgICBjaGlsZC5sZWZ0ID0gcHJldmlvdXNDaGlsZC5yaWdodCArIGxhYmVsTnVtYmVyUGlja2VyU3BhY2luZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBjaGlsZC5sZWZ0ID0gcHJldmlvdXNDaGlsZC5yaWdodCArIHRleHRTcGFjaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBlcXVhdGlvbkNoaWxkcmVuXHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG52ZWN0b3JBZGRpdGlvbi5yZWdpc3RlciggJ0VxdWF0aW9uVHlwZU5vZGUnLCBFcXVhdGlvblR5cGVOb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxXQUFXLE1BQU0sNENBQTRDO0FBQ3BFLFNBQVNDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUM5RCxPQUFPQyxZQUFZLE1BQU0sb0NBQW9DO0FBQzdELE9BQU9DLHVCQUF1QixNQUFNLHlDQUF5QztBQUM3RSxPQUFPQyxnQkFBZ0IsTUFBTSx1Q0FBdUM7QUFDcEUsT0FBT0MsY0FBYyxNQUFNLHlCQUF5QjtBQUVwRCxPQUFPQyxhQUFhLE1BQU0sMkJBQTJCOztBQUVyRDtBQUNBLE1BQU1DLFlBQVks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