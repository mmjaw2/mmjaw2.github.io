// Copyright 2019-2023, University of Colorado Boulder

/**
 * VectorSymbolNode is responsible for displaying vector symbols in a variety of forms.
 *
 * The symbol includes zero or more of the following, all of which can be mutated:
 *  - vector symbol, e.g. 'a'
 *  - arrow over the vector symbol
 *  - absolute value bars, to indicate magnitude, e.g. |a|
 *  - coefficient
 *
 * For instance, the vector 'a' could have a symbol of '|-3a|'. This can be achieved with this combination of
 * options:
 *
 * {
 *   symbol: 'a',
 *   coefficient: -3,
 *   showVectorArrow: false,
 *   includeAbsoluteValueBars: true
 * }
 *
 * The coefficient is auto formatted. A coefficient of 1 is hidden, while a coefficient of -1 is displayed as
 * unary minus. E.g. if vector 'a' has the coefficient -1, the displayed symbol would be '-a'.
 *
 * @author Brandon Li
 */

import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import { HBox, RichText, Text } from '../../../../scenery/js/imports.js';
import vectorAddition from '../../vectorAddition.js';
import VectorAdditionConstants from '../VectorAdditionConstants.js';
import ArrowOverSymbolNode from './ArrowOverSymbolNode.js';
import optionize from '../../../../phet-core/js/optionize.js';
export default class VectorSymbolNode extends HBox {
  constructor(providedOptions) {
    const options = optionize()({
      // SelfOptions
      symbol: null,
      coefficient: null,
      showVectorArrow: true,
      includeAbsoluteValueBars: false,
      symbolFont: VectorAdditionConstants.EQUATION_SYMBOL_FONT,
      font: VectorAdditionConstants.EQUATION_FONT,
      // HBoxOptions
      align: 'origin',
      // so that text baselines are aligned
      spacing: 2 // {number} spacing of the text nodes / formula nodes
    }, providedOptions);
    super(options);
    this.symbol = options.symbol;
    this.coefficient = options.coefficient;
    this.includeAbsoluteValueBars = options.includeAbsoluteValueBars;

    // Create the pieces of the VectorSymbolNode. Values will be set later, and these
    // will be added as children as needed based on how the VectorSymbolNode is configured.
    const leftBar = new Text('|', {
      font: options.font
    });
    const rightBar = new Text('|', {
      font: options.font
    });
    const coefficientText = new Text('', {
      font: options.font
    });
    const symbolNode = options.showVectorArrow ? new ArrowOverSymbolNode('', {
      font: options.symbolFont
    }) : new RichText('', {
      font: options.symbolFont
    });
    this.updateVectorSymbolNode = () => {
      // Auto format the coefficient
      let coefficient = null;
      if (this.coefficient === -1) {
        coefficient = MathSymbols.UNARY_MINUS;
      } else if (this.coefficient !== 1 && this.coefficient !== null) {
        coefficient = `${this.coefficient}`;
      }

      // Set the coefficient and symbol text to match our properties
      coefficient && coefficientText.setString(coefficient);
      if (this.symbol) {
        if (symbolNode instanceof ArrowOverSymbolNode) {
          symbolNode.setSymbol(this.symbol);
        } else {
          symbolNode.setString(this.symbol);
        }
      }

      // Add the pieces that are relevant for the current configuration.
      const children = [];
      this.includeAbsoluteValueBars && children.push(leftBar);
      coefficient && children.push(coefficientText);
      this.symbol && children.push(symbolNode);
      this.includeAbsoluteValueBars && children.push(rightBar);
      this.setChildren(children);

      // Set the visibility to true only if we have a child to display
      this.visible = children.length !== 0;
    };

    // Update the vector symbol node
    this.updateVectorSymbolNode();
  }

  /**
   * Determines whether absolute value bars are displayed to indicate 'magnitude'.
   */
  setIncludeAbsoluteValueBars(includeAbsoluteValueBars) {
    this.includeAbsoluteValueBars = includeAbsoluteValueBars;
    this.updateVectorSymbolNode();
  }

  /**
   * Sets the symbol.
   * @param symbol - the symbol to display. Null means no symbol is displayed.
   */
  setSymbol(symbol) {
    this.symbol = symbol;
    this.updateVectorSymbolNode();
  }

  /**
   * Sets the coefficient.
   */
  setCoefficient(coefficient) {
    this.coefficient = coefficient;
    this.updateVectorSymbolNode();
  }

  /**
   * Performance method that sets all the attributes of the VectorSymbolNode and does 1 update.
   * @param symbol - the symbol to display (See comment at the top of the file)
   * @param coefficient - the coefficient to display
   * @param includeAbsoluteValueBars - indicates if absolute value bars are there
   */
  setVectorSymbolNode(symbol, coefficient, includeAbsoluteValueBars) {
    this.symbol = symbol;
    this.coefficient = coefficient;
    this.includeAbsoluteValueBars = includeAbsoluteValueBars;
    this.updateVectorSymbolNode();
  }
}
vectorAddition.register('VectorSymbolNode', VectorSymbolNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRoU3ltYm9scyIsIkhCb3giLCJSaWNoVGV4dCIsIlRleHQiLCJ2ZWN0b3JBZGRpdGlvbiIsIlZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIiwiQXJyb3dPdmVyU3ltYm9sTm9kZSIsIm9wdGlvbml6ZSIsIlZlY3RvclN5bWJvbE5vZGUiLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJzeW1ib2wiLCJjb2VmZmljaWVudCIsInNob3dWZWN0b3JBcnJvdyIsImluY2x1ZGVBYnNvbHV0ZVZhbHVlQmFycyIsInN5bWJvbEZvbnQiLCJFUVVBVElPTl9TWU1CT0xfRk9OVCIsImZvbnQiLCJFUVVBVElPTl9GT05UIiwiYWxpZ24iLCJzcGFjaW5nIiwibGVmdEJhciIsInJpZ2h0QmFyIiwiY29lZmZpY2llbnRUZXh0Iiwic3ltYm9sTm9kZSIsInVwZGF0ZVZlY3RvclN5bWJvbE5vZGUiLCJVTkFSWV9NSU5VUyIsInNldFN0cmluZyIsInNldFN5bWJvbCIsImNoaWxkcmVuIiwicHVzaCIsInNldENoaWxkcmVuIiwidmlzaWJsZSIsImxlbmd0aCIsInNldEluY2x1ZGVBYnNvbHV0ZVZhbHVlQmFycyIsInNldENvZWZmaWNpZW50Iiwic2V0VmVjdG9yU3ltYm9sTm9kZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVmVjdG9yU3ltYm9sTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWZWN0b3JTeW1ib2xOb2RlIGlzIHJlc3BvbnNpYmxlIGZvciBkaXNwbGF5aW5nIHZlY3RvciBzeW1ib2xzIGluIGEgdmFyaWV0eSBvZiBmb3Jtcy5cclxuICpcclxuICogVGhlIHN5bWJvbCBpbmNsdWRlcyB6ZXJvIG9yIG1vcmUgb2YgdGhlIGZvbGxvd2luZywgYWxsIG9mIHdoaWNoIGNhbiBiZSBtdXRhdGVkOlxyXG4gKiAgLSB2ZWN0b3Igc3ltYm9sLCBlLmcuICdhJ1xyXG4gKiAgLSBhcnJvdyBvdmVyIHRoZSB2ZWN0b3Igc3ltYm9sXHJcbiAqICAtIGFic29sdXRlIHZhbHVlIGJhcnMsIHRvIGluZGljYXRlIG1hZ25pdHVkZSwgZS5nLiB8YXxcclxuICogIC0gY29lZmZpY2llbnRcclxuICpcclxuICogRm9yIGluc3RhbmNlLCB0aGUgdmVjdG9yICdhJyBjb3VsZCBoYXZlIGEgc3ltYm9sIG9mICd8LTNhfCcuIFRoaXMgY2FuIGJlIGFjaGlldmVkIHdpdGggdGhpcyBjb21iaW5hdGlvbiBvZlxyXG4gKiBvcHRpb25zOlxyXG4gKlxyXG4gKiB7XHJcbiAqICAgc3ltYm9sOiAnYScsXHJcbiAqICAgY29lZmZpY2llbnQ6IC0zLFxyXG4gKiAgIHNob3dWZWN0b3JBcnJvdzogZmFsc2UsXHJcbiAqICAgaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzOiB0cnVlXHJcbiAqIH1cclxuICpcclxuICogVGhlIGNvZWZmaWNpZW50IGlzIGF1dG8gZm9ybWF0dGVkLiBBIGNvZWZmaWNpZW50IG9mIDEgaXMgaGlkZGVuLCB3aGlsZSBhIGNvZWZmaWNpZW50IG9mIC0xIGlzIGRpc3BsYXllZCBhc1xyXG4gKiB1bmFyeSBtaW51cy4gRS5nLiBpZiB2ZWN0b3IgJ2EnIGhhcyB0aGUgY29lZmZpY2llbnQgLTEsIHRoZSBkaXNwbGF5ZWQgc3ltYm9sIHdvdWxkIGJlICctYScuXHJcbiAqXHJcbiAqIEBhdXRob3IgQnJhbmRvbiBMaVxyXG4gKi9cclxuXHJcbmltcG9ydCBNYXRoU3ltYm9scyBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTWF0aFN5bWJvbHMuanMnO1xyXG5pbXBvcnQgeyBGb250LCBIQm94LCBIQm94T3B0aW9ucywgUmljaFRleHQsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgdmVjdG9yQWRkaXRpb24gZnJvbSAnLi4vLi4vdmVjdG9yQWRkaXRpb24uanMnO1xyXG5pbXBvcnQgVmVjdG9yQWRkaXRpb25Db25zdGFudHMgZnJvbSAnLi4vVmVjdG9yQWRkaXRpb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQXJyb3dPdmVyU3ltYm9sTm9kZSBmcm9tICcuL0Fycm93T3ZlclN5bWJvbE5vZGUuanMnO1xyXG5pbXBvcnQgUGlja09wdGlvbmFsIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrT3B0aW9uYWwuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBzeW1ib2w/OiBzdHJpbmcgfCBudWxsOyAvLyBvcHRpb25hbCBzeW1ib2wgdG8gZGlzcGxheVxyXG4gIGNvZWZmaWNpZW50PzogbnVtYmVyIHwgbnVsbDsgLy8gb3B0aW9uYWwgY29lZmZpY2llbnQgdG8gZGlzcGxheVxyXG4gIHNob3dWZWN0b3JBcnJvdz86IGJvb2xlYW47IC8vIGZsYWcgdG8gd2hldGhlciB0byBzaG93IGFuIGFycm93IGFib3ZlIHRoZSB2ZWN0b3Igc3ltYm9sXHJcbiAgaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzPzogYm9vbGVhbjsgLy8gd2hldGhlciB0byBzdXJyb3VuZCB3aXRoIGFic29sdXRlIHZhbHVlIGJhcnMsIHRvIGluZGljYXRlICdtYWduaXR1ZGUnXHJcbiAgc3ltYm9sRm9udD86IEZvbnQ7IC8vIGZvbnQgdXNlZCBmb3IgdGhlIHZlY3RvciBzeW1ib2xcclxuICBmb250PzogRm9udDsgLy8gZm9udCB1c2VkIGZvciBldmVyeXRoaW5nIHRoYXQgaXMgbm90IGEgc3ltYm9sXHJcbn07XHJcblxyXG50eXBlIFZlY3RvclN5bWJvbE5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrT3B0aW9uYWw8SEJveE9wdGlvbnMsICdzcGFjaW5nJyB8ICdtYXhXaWR0aCc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yU3ltYm9sTm9kZSBleHRlbmRzIEhCb3gge1xyXG5cclxuICBwcml2YXRlIHN5bWJvbDogc3RyaW5nIHwgbnVsbDtcclxuICBwcml2YXRlIGNvZWZmaWNpZW50OiBudW1iZXIgfCBudWxsO1xyXG4gIHByaXZhdGUgaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzOiBib29sZWFuO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlVmVjdG9yU3ltYm9sTm9kZTogKCkgPT4gdm9pZDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm92aWRlZE9wdGlvbnM/OiBWZWN0b3JTeW1ib2xOb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFZlY3RvclN5bWJvbE5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgSEJveE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIHN5bWJvbDogbnVsbCxcclxuICAgICAgY29lZmZpY2llbnQ6IG51bGwsXHJcbiAgICAgIHNob3dWZWN0b3JBcnJvdzogdHJ1ZSxcclxuICAgICAgaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzOiBmYWxzZSxcclxuICAgICAgc3ltYm9sRm9udDogVmVjdG9yQWRkaXRpb25Db25zdGFudHMuRVFVQVRJT05fU1lNQk9MX0ZPTlQsXHJcbiAgICAgIGZvbnQ6IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLkVRVUFUSU9OX0ZPTlQsXHJcblxyXG4gICAgICAvLyBIQm94T3B0aW9uc1xyXG4gICAgICBhbGlnbjogJ29yaWdpbicsIC8vIHNvIHRoYXQgdGV4dCBiYXNlbGluZXMgYXJlIGFsaWduZWRcclxuICAgICAgc3BhY2luZzogMiAvLyB7bnVtYmVyfSBzcGFjaW5nIG9mIHRoZSB0ZXh0IG5vZGVzIC8gZm9ybXVsYSBub2Rlc1xyXG5cclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5zeW1ib2wgPSBvcHRpb25zLnN5bWJvbDtcclxuICAgIHRoaXMuY29lZmZpY2llbnQgPSBvcHRpb25zLmNvZWZmaWNpZW50O1xyXG4gICAgdGhpcy5pbmNsdWRlQWJzb2x1dGVWYWx1ZUJhcnMgPSBvcHRpb25zLmluY2x1ZGVBYnNvbHV0ZVZhbHVlQmFycztcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIHBpZWNlcyBvZiB0aGUgVmVjdG9yU3ltYm9sTm9kZS4gVmFsdWVzIHdpbGwgYmUgc2V0IGxhdGVyLCBhbmQgdGhlc2VcclxuICAgIC8vIHdpbGwgYmUgYWRkZWQgYXMgY2hpbGRyZW4gYXMgbmVlZGVkIGJhc2VkIG9uIGhvdyB0aGUgVmVjdG9yU3ltYm9sTm9kZSBpcyBjb25maWd1cmVkLlxyXG4gICAgY29uc3QgbGVmdEJhciA9IG5ldyBUZXh0KCAnfCcsIHsgZm9udDogb3B0aW9ucy5mb250IH0gKTtcclxuICAgIGNvbnN0IHJpZ2h0QmFyID0gbmV3IFRleHQoICd8JywgeyBmb250OiBvcHRpb25zLmZvbnQgfSApO1xyXG4gICAgY29uc3QgY29lZmZpY2llbnRUZXh0ID0gbmV3IFRleHQoICcnLCB7IGZvbnQ6IG9wdGlvbnMuZm9udCB9ICk7XHJcbiAgICBjb25zdCBzeW1ib2xOb2RlID0gb3B0aW9ucy5zaG93VmVjdG9yQXJyb3cgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgIG5ldyBBcnJvd092ZXJTeW1ib2xOb2RlKCAnJywgeyBmb250OiBvcHRpb25zLnN5bWJvbEZvbnQgfSApIDpcclxuICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmljaFRleHQoICcnLCB7IGZvbnQ6IG9wdGlvbnMuc3ltYm9sRm9udCB9ICk7XHJcblxyXG4gICAgdGhpcy51cGRhdGVWZWN0b3JTeW1ib2xOb2RlID0gKCkgPT4ge1xyXG5cclxuICAgICAgLy8gQXV0byBmb3JtYXQgdGhlIGNvZWZmaWNpZW50XHJcbiAgICAgIGxldCBjb2VmZmljaWVudCA9IG51bGw7XHJcbiAgICAgIGlmICggdGhpcy5jb2VmZmljaWVudCA9PT0gLTEgKSB7XHJcbiAgICAgICAgY29lZmZpY2llbnQgPSBNYXRoU3ltYm9scy5VTkFSWV9NSU5VUztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICggdGhpcy5jb2VmZmljaWVudCAhPT0gMSAmJiB0aGlzLmNvZWZmaWNpZW50ICE9PSBudWxsICkge1xyXG4gICAgICAgIGNvZWZmaWNpZW50ID0gYCR7dGhpcy5jb2VmZmljaWVudH1gO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTZXQgdGhlIGNvZWZmaWNpZW50IGFuZCBzeW1ib2wgdGV4dCB0byBtYXRjaCBvdXIgcHJvcGVydGllc1xyXG4gICAgICBjb2VmZmljaWVudCAmJiBjb2VmZmljaWVudFRleHQuc2V0U3RyaW5nKCBjb2VmZmljaWVudCApO1xyXG4gICAgICBpZiAoIHRoaXMuc3ltYm9sICkge1xyXG4gICAgICAgIGlmICggc3ltYm9sTm9kZSBpbnN0YW5jZW9mIEFycm93T3ZlclN5bWJvbE5vZGUgKSB7XHJcbiAgICAgICAgICBzeW1ib2xOb2RlLnNldFN5bWJvbCggdGhpcy5zeW1ib2wgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBzeW1ib2xOb2RlLnNldFN0cmluZyggdGhpcy5zeW1ib2wgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCB0aGUgcGllY2VzIHRoYXQgYXJlIHJlbGV2YW50IGZvciB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uLlxyXG4gICAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xyXG4gICAgICB0aGlzLmluY2x1ZGVBYnNvbHV0ZVZhbHVlQmFycyAmJiBjaGlsZHJlbi5wdXNoKCBsZWZ0QmFyICk7XHJcbiAgICAgIGNvZWZmaWNpZW50ICYmIGNoaWxkcmVuLnB1c2goIGNvZWZmaWNpZW50VGV4dCApO1xyXG4gICAgICB0aGlzLnN5bWJvbCAmJiBjaGlsZHJlbi5wdXNoKCBzeW1ib2xOb2RlICk7XHJcbiAgICAgIHRoaXMuaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzICYmIGNoaWxkcmVuLnB1c2goIHJpZ2h0QmFyICk7XHJcbiAgICAgIHRoaXMuc2V0Q2hpbGRyZW4oIGNoaWxkcmVuICk7XHJcblxyXG4gICAgICAvLyBTZXQgdGhlIHZpc2liaWxpdHkgdG8gdHJ1ZSBvbmx5IGlmIHdlIGhhdmUgYSBjaGlsZCB0byBkaXNwbGF5XHJcbiAgICAgIHRoaXMudmlzaWJsZSA9ICggY2hpbGRyZW4ubGVuZ3RoICE9PSAwICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgdmVjdG9yIHN5bWJvbCBub2RlXHJcbiAgICB0aGlzLnVwZGF0ZVZlY3RvclN5bWJvbE5vZGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgd2hldGhlciBhYnNvbHV0ZSB2YWx1ZSBiYXJzIGFyZSBkaXNwbGF5ZWQgdG8gaW5kaWNhdGUgJ21hZ25pdHVkZScuXHJcbiAgICovXHJcbiAgcHVibGljIHNldEluY2x1ZGVBYnNvbHV0ZVZhbHVlQmFycyggaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzOiBib29sZWFuICk6IHZvaWQge1xyXG4gICAgdGhpcy5pbmNsdWRlQWJzb2x1dGVWYWx1ZUJhcnMgPSBpbmNsdWRlQWJzb2x1dGVWYWx1ZUJhcnM7XHJcbiAgICB0aGlzLnVwZGF0ZVZlY3RvclN5bWJvbE5vZGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHN5bWJvbC5cclxuICAgKiBAcGFyYW0gc3ltYm9sIC0gdGhlIHN5bWJvbCB0byBkaXNwbGF5LiBOdWxsIG1lYW5zIG5vIHN5bWJvbCBpcyBkaXNwbGF5ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNldFN5bWJvbCggc3ltYm9sOiBzdHJpbmcgfCBudWxsICk6IHZvaWQge1xyXG4gICAgdGhpcy5zeW1ib2wgPSBzeW1ib2w7XHJcbiAgICB0aGlzLnVwZGF0ZVZlY3RvclN5bWJvbE5vZGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGNvZWZmaWNpZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRDb2VmZmljaWVudCggY29lZmZpY2llbnQ6IG51bWJlciB8IG51bGwgKTogdm9pZCB7XHJcbiAgICB0aGlzLmNvZWZmaWNpZW50ID0gY29lZmZpY2llbnQ7XHJcbiAgICB0aGlzLnVwZGF0ZVZlY3RvclN5bWJvbE5vZGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBlcmZvcm1hbmNlIG1ldGhvZCB0aGF0IHNldHMgYWxsIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBWZWN0b3JTeW1ib2xOb2RlIGFuZCBkb2VzIDEgdXBkYXRlLlxyXG4gICAqIEBwYXJhbSBzeW1ib2wgLSB0aGUgc3ltYm9sIHRvIGRpc3BsYXkgKFNlZSBjb21tZW50IGF0IHRoZSB0b3Agb2YgdGhlIGZpbGUpXHJcbiAgICogQHBhcmFtIGNvZWZmaWNpZW50IC0gdGhlIGNvZWZmaWNpZW50IHRvIGRpc3BsYXlcclxuICAgKiBAcGFyYW0gaW5jbHVkZUFic29sdXRlVmFsdWVCYXJzIC0gaW5kaWNhdGVzIGlmIGFic29sdXRlIHZhbHVlIGJhcnMgYXJlIHRoZXJlXHJcbiAgICovXHJcbiAgcHVibGljIHNldFZlY3RvclN5bWJvbE5vZGUoIHN5bWJvbDogc3RyaW5nIHwgbnVsbCwgY29lZmZpY2llbnQ6IG51bWJlciB8IG51bGwsIGluY2x1ZGVBYnNvbHV0ZVZhbHVlQmFyczogYm9vbGVhbiApOiB2b2lkIHtcclxuICAgIHRoaXMuc3ltYm9sID0gc3ltYm9sO1xyXG4gICAgdGhpcy5jb2VmZmljaWVudCA9IGNvZWZmaWNpZW50O1xyXG4gICAgdGhpcy5pbmNsdWRlQWJzb2x1dGVWYWx1ZUJhcnMgPSBpbmNsdWRlQWJzb2x1dGVWYWx1ZUJhcnM7XHJcbiAgICB0aGlzLnVwZGF0ZVZlY3RvclN5bWJvbE5vZGUoKTtcclxuICB9XHJcbn1cclxuXHJcbnZlY3RvckFkZGl0aW9uLnJlZ2lzdGVyKCAnVmVjdG9yU3lt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