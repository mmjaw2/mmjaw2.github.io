// Copyright 2017-2024, University of Colorado Boulder

/**
 * Base type for controllers that create and keep an SVG gradient element up-to-date with a Scenery gradient.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import cleanArray from '../../../phet-core/js/cleanArray.js';
import { scenery, SVGGradientStop } from '../imports.js';
export default class SVGGradient {
  // transient (scenery-internal)

  // persistent

  constructor(svgBlock, gradient) {
    this.initialize(svgBlock, gradient);
  }
  isActiveSVGGradient() {
    return !!this.svgBlock;
  }
  initialize(svgBlock, gradient) {
    sceneryLog && sceneryLog.Paints && sceneryLog.Paints(`[SVGGradient] initialize ${gradient.id}`);
    sceneryLog && sceneryLog.Paints && sceneryLog.push();
    this.svgBlock = svgBlock;
    this.gradient = gradient;
    const hasPreviousDefinition = this.definition !== undefined;
    this.definition = this.definition || this.createDefinition();
    if (!hasPreviousDefinition) {
      // so we don't depend on the bounds of the object being drawn with the gradient
      this.definition.setAttribute('gradientUnits', 'userSpaceOnUse');
    }
    if (gradient.transformMatrix) {
      this.definition.setAttribute('gradientTransform', gradient.transformMatrix.getSVGTransform());
    } else {
      this.definition.removeAttribute('gradientTransform');
    }

    // We need to make a function call, as stops need to be rescaled/reversed in some radial gradient cases.
    const gradientStops = gradient.getSVGStops();
    this.stops = cleanArray(this.stops);
    for (let i = 0; i < gradientStops.length; i++) {
      const stop = new SVGGradientStop(this, gradientStops[i].ratio, gradientStops[i].color);
      this.stops.push(stop);
      this.definition.appendChild(stop.svgElement);
    }
    this.dirty = false;
    sceneryLog && sceneryLog.Paints && sceneryLog.pop();
  }

  /**
   * Creates the gradient-type-specific definition.
   */

  /**
   * Called from SVGGradientStop when a stop needs to change the actual color.
   */
  markDirty() {
    if (!this.dirty) {
      assert && assert(this.isActiveSVGGradient());
      const activeGradient = this;
      sceneryLog && sceneryLog.Paints && sceneryLog.Paints(`[SVGGradient] switched to dirty: ${this.gradient.id}`);
      sceneryLog && sceneryLog.Paints && sceneryLog.push();
      this.dirty = true;
      activeGradient.svgBlock.markDirtyGradient(this);
      sceneryLog && sceneryLog.Paints && sceneryLog.pop();
    }
  }

  /**
   * Called from SVGBlock when we need to update our color stops.
   */
  update() {
    if (!this.dirty) {
      return;
    }
    this.dirty = false;
    sceneryLog && sceneryLog.Paints && sceneryLog.Paints(`[SVGGradient] update: ${this.gradient.id}`);
    sceneryLog && sceneryLog.Paints && sceneryLog.push();
    for (let i = 0; i < this.stops.length; i++) {
      this.stops[i].update();
    }
    sceneryLog && sceneryLog.Paints && sceneryLog.pop();
  }

  /**
   * Disposes, so that it can be reused from the pool.
   */
  dispose() {
    sceneryLog && sceneryLog.Paints && sceneryLog.Paints(`[SVGGradient] dispose ${this.gradient.id}`);
    sceneryLog && sceneryLog.Paints && sceneryLog.push();

    // Dispose and clean up stops
    for (let i = 0; i < this.stops.length; i++) {
      const stop = this.stops[i]; // SVGGradientStop
      this.definition.removeChild(stop.svgElement);
      stop.dispose();
    }
    cleanArray(this.stops);
    this.svgBlock = null;
    this.gradient = null;
    this.freeToPool();
    sceneryLog && sceneryLog.Paints && sceneryLog.pop();
  }
}
scenery.register('SVGGradient', SVGGradient);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjbGVhbkFycmF5Iiwic2NlbmVyeSIsIlNWR0dyYWRpZW50U3RvcCIsIlNWR0dyYWRpZW50IiwiY29uc3RydWN0b3IiLCJzdmdCbG9jayIsImdyYWRpZW50IiwiaW5pdGlhbGl6ZSIsImlzQWN0aXZlU1ZHR3JhZGllbnQiLCJzY2VuZXJ5TG9nIiwiUGFpbnRzIiwiaWQiLCJwdXNoIiwiaGFzUHJldmlvdXNEZWZpbml0aW9uIiwiZGVmaW5pdGlvbiIsInVuZGVmaW5lZCIsImNyZWF0ZURlZmluaXRpb24iLCJzZXRBdHRyaWJ1dGUiLCJ0cmFuc2Zvcm1NYXRyaXgiLCJnZXRTVkdUcmFuc2Zvcm0iLCJyZW1vdmVBdHRyaWJ1dGUiLCJncmFkaWVudFN0b3BzIiwiZ2V0U1ZHU3RvcHMiLCJzdG9wcyIsImkiLCJsZW5ndGgiLCJzdG9wIiwicmF0aW8iLCJjb2xvciIsImFwcGVuZENoaWxkIiwic3ZnRWxlbWVudCIsImRpcnR5IiwicG9wIiwibWFya0RpcnR5IiwiYXNzZXJ0IiwiYWN0aXZlR3JhZGllbnQiLCJtYXJrRGlydHlHcmFkaWVudCIsInVwZGF0ZSIsImRpc3Bvc2UiLCJyZW1vdmVDaGlsZCIsImZyZWVUb1Bvb2wiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNWR0dyYWRpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEJhc2UgdHlwZSBmb3IgY29udHJvbGxlcnMgdGhhdCBjcmVhdGUgYW5kIGtlZXAgYW4gU1ZHIGdyYWRpZW50IGVsZW1lbnQgdXAtdG8tZGF0ZSB3aXRoIGEgU2NlbmVyeSBncmFkaWVudC5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBjbGVhbkFycmF5IGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9jbGVhbkFycmF5LmpzJztcclxuaW1wb3J0IFdpdGhvdXROdWxsIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9XaXRob3V0TnVsbC5qcyc7XHJcbmltcG9ydCB7IEdyYWRpZW50LCBzY2VuZXJ5LCBTVkdCbG9jaywgU1ZHR3JhZGllbnRTdG9wIH0gZnJvbSAnLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5leHBvcnQgdHlwZSBBY3RpdmVTVkdHcmFkaWVudCA9IFdpdGhvdXROdWxsPFNWR0dyYWRpZW50LCAnc3ZnQmxvY2snIHwgJ2dyYWRpZW50Jz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTVkdHcmFkaWVudCB7XHJcblxyXG4gIC8vIHRyYW5zaWVudCAoc2NlbmVyeS1pbnRlcm5hbClcclxuICBwdWJsaWMgc3ZnQmxvY2shOiBTVkdCbG9jayB8IG51bGw7XHJcbiAgcHVibGljIGdyYWRpZW50ITogR3JhZGllbnQgfCBudWxsO1xyXG4gIHB1YmxpYyBzdG9wcyE6IFNWR0dyYWRpZW50U3RvcFtdO1xyXG5cclxuICAvLyBwZXJzaXN0ZW50XHJcbiAgcHVibGljIGRlZmluaXRpb24hOiBTVkdHcmFkaWVudEVsZW1lbnQ7XHJcblxyXG4gIHByaXZhdGUgZGlydHkhOiBib29sZWFuO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHN2Z0Jsb2NrOiBTVkdCbG9jaywgZ3JhZGllbnQ6IEdyYWRpZW50ICkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCBzdmdCbG9jaywgZ3JhZGllbnQgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc0FjdGl2ZVNWR0dyYWRpZW50KCk6IHRoaXMgaXMgQWN0aXZlU1ZHR3JhZGllbnQgeyByZXR1cm4gISF0aGlzLnN2Z0Jsb2NrOyB9XHJcblxyXG4gIHB1YmxpYyBpbml0aWFsaXplKCBzdmdCbG9jazogU1ZHQmxvY2ssIGdyYWRpZW50OiBHcmFkaWVudCApOiB2b2lkIHtcclxuICAgIHNjZW5lcnlMb2cgJiYgc2NlbmVyeUxvZy5QYWludHMgJiYgc2NlbmVyeUxvZy5QYWludHMoIGBbU1ZHR3JhZGllbnRdIGluaXRpYWxpemUgJHtncmFkaWVudC5pZH1gICk7XHJcbiAgICBzY2VuZXJ5TG9nICYmIHNjZW5lcnlMb2cuUGFpbnRzICYmIHNjZW5lcnlMb2cucHVzaCgpO1xyXG5cclxuICAgIHRoaXMuc3ZnQmxvY2sgPSBzdmdCbG9jaztcclxuICAgIHRoaXMuZ3JhZGllbnQgPSBncmFkaWVudDtcclxuXHJcbiAgICBjb25zdCBoYXNQcmV2aW91c0RlZmluaXRpb24gPSB0aGlzLmRlZmluaXRpb24gIT09IHVuZGVmaW5lZDtcclxuXHJcbiAgICB0aGlzLmRlZmluaXRpb24gPSB0aGlzLmRlZmluaXRpb24gfHwgdGhpcy5jcmVhdGVEZWZpbml0aW9uKCk7XHJcblxyXG4gICAgaWYgKCAhaGFzUHJldmlvdXNEZWZpbml0aW9uICkge1xyXG4gICAgICAvLyBzbyB3ZSBkb24ndCBkZXBlbmQgb24gdGhlIGJvdW5kcyBvZiB0aGUgb2JqZWN0IGJlaW5nIGRyYXduIHdpdGggdGhlIGdyYWRpZW50XHJcbiAgICAgIHRoaXMuZGVmaW5pdGlvbi5zZXRBdHRyaWJ1dGUoICdncmFkaWVudFVuaXRzJywgJ3VzZXJTcGFjZU9uVXNlJyApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZ3JhZGllbnQudHJhbnNmb3JtTWF0cml4ICkge1xyXG4gICAgICB0aGlzLmRlZmluaXRpb24uc2V0QXR0cmlidXRlKCAnZ3JhZGllbnRUcmFuc2Zvcm0nLCBncmFkaWVudC50cmFuc2Zvcm1NYXRyaXguZ2V0U1ZHVHJhbnNmb3JtKCkgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmRlZmluaXRpb24ucmVtb3ZlQXR0cmlidXRlKCAnZ3JhZGllbnRUcmFuc2Zvcm0nICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2UgbmVlZCB0byBtYWtlIGEgZnVuY3Rpb24gY2FsbCwgYXMgc3RvcHMgbmVlZCB0byBiZSByZXNjYWxlZC9yZXZlcnNlZCBpbiBzb21lIHJhZGlhbCBncmFkaWVudCBjYXNlcy5cclxuICAgIGNvbnN0IGdyYWRpZW50U3RvcHMgPSBncmFkaWVudC5nZXRTVkdTdG9wcygpO1xyXG5cclxuICAgIHRoaXMuc3RvcHMgPSBjbGVhbkFycmF5KCB0aGlzLnN0b3BzICk7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBncmFkaWVudFN0b3BzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCBzdG9wID0gbmV3IFNWR0dyYWRpZW50U3RvcCggdGhpcyBhcyBBY3RpdmVTVkdHcmFkaWVudCwgZ3JhZGllbnRTdG9wc1sgaSBdLnJhdGlvLCBncmFkaWVudFN0b3BzWyBpIF0uY29sb3IgKTtcclxuICAgICAgdGhpcy5zdG9wcy5wdXNoKCBzdG9wICk7XHJcbiAgICAgIHRoaXMuZGVmaW5pdGlvbi5hcHBlbmRDaGlsZCggc3RvcC5zdmdFbGVtZW50ICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xyXG5cclxuICAgIHNjZW5lcnlMb2cgJiYgc2NlbmVyeUxvZy5QYWludHMgJiYgc2NlbmVyeUxvZy5wb3AoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGdyYWRpZW50LXR5cGUtc3BlY2lmaWMgZGVmaW5pdGlvbi5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY3JlYXRlRGVmaW5pdGlvbigpOiBTVkdHcmFkaWVudEVsZW1lbnQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCBmcm9tIFNWR0dyYWRpZW50U3RvcCB3aGVuIGEgc3RvcCBuZWVkcyB0byBjaGFuZ2UgdGhlIGFjdHVhbCBjb2xvci5cclxuICAgKi9cclxuICBwdWJsaWMgbWFya0RpcnR5KCk6IHZvaWQge1xyXG4gICAgaWYgKCAhdGhpcy5kaXJ0eSApIHtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5pc0FjdGl2ZVNWR0dyYWRpZW50KCkgKTtcclxuICAgICAgY29uc3QgYWN0aXZlR3JhZGllbnQgPSB0aGlzIGFzIEFjdGl2ZVNWR0dyYWRpZW50O1xyXG5cclxuICAgICAgc2NlbmVyeUxvZyAmJiBzY2VuZXJ5TG9nLlBhaW50cyAmJiBzY2VuZXJ5TG9nLlBhaW50cyggYFtTVkdHcmFkaWVudF0gc3dpdGNoZWQgdG8gZGlydHk6ICR7dGhpcy5ncmFkaWVudCEuaWR9YCApO1xyXG4gICAgICBzY2VuZXJ5TG9nICYmIHNjZW5lcnlMb2cuUGFpbnRzICYmIHNjZW5lcnlMb2cucHVzaCgpO1xyXG5cclxuICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcblxyXG4gICAgICBhY3RpdmVHcmFkaWVudC5zdmdCbG9jay5tYXJrRGlydHlHcmFkaWVudCggdGhpcyApO1xyXG5cclxuICAgICAgc2NlbmVyeUxvZyAmJiBzY2VuZXJ5TG9nLlBhaW50cyAmJiBzY2VuZXJ5TG9nLnBvcCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIGZyb20gU1ZHQmxvY2sgd2hlbiB3ZSBuZWVkIHRvIHVwZGF0ZSBvdXIgY29sb3Igc3RvcHMuXHJcbiAgICovXHJcbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIGlmICggIXRoaXMuZGlydHkgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICBzY2VuZXJ5TG9nICYmIHNjZW5lcnlMb2cuUGFpbnRzICYmIHNjZW5lcnlMb2cuUGFpbnRzKCBgW1NWR0dyYWRpZW50XSB1cGRhdGU6ICR7dGhpcy5ncmFkaWVudCEuaWR9YCApO1xyXG4gICAgc2NlbmVyeUxvZyAmJiBzY2VuZXJ5TG9nLlBhaW50cyAmJiBzY2VuZXJ5TG9nLnB1c2goKTtcclxuXHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLnN0b3BzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICB0aGlzLnN0b3BzWyBpIF0udXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2NlbmVyeUxvZyAmJiBzY2VuZXJ5TG9nLlBhaW50cyAmJiBzY2VuZXJ5TG9nLnBvcCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzcG9zZXMsIHNvIHRoYXQgaXQgY2FuIGJlIHJldXNlZCBmcm9tIHRoZSBwb29sLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgc2NlbmVyeUxvZyAmJiBzY2VuZXJ5TG9nLlBhaW50cyAmJiBzY2VuZXJ5TG9nLlBhaW50cyggYFtTVkdHcmFkaWVudF0gZGlzcG9zZSAke3RoaXMuZ3JhZGllbnQhLmlkfWAgKTtcclxuICAgIHNjZW5lcnlMb2cgJiYgc2NlbmVyeUxvZy5QYWludHMgJiYgc2NlbmVyeUxvZy5wdXNoKCk7XHJcblxyXG4gICAgLy8gRGlzcG9zZSBhbmQgY2xlYW4gdXAgc3RvcHNcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMuc3RvcHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IHN0b3AgPSB0aGlzLnN0b3BzWyBpIF07IC8vIFNWR0dyYWRpZW50U3RvcFxyXG4gICAgICB0aGlzLmRlZmluaXRpb24ucmVtb3ZlQ2hpbGQoIHN0b3Auc3ZnRWxlbWVudCApO1xyXG4gICAgICBzdG9wLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIGNsZWFuQXJyYXkoIHRoaXMuc3RvcHMgKTtcclxuXHJcbiAgICB0aGlzLnN2Z0Jsb2NrID0gbnVsbDtcclxuICAgIHRoaXMuZ3JhZGllbnQgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuZnJlZVRvUG9vbCgpO1xyXG5cclxuICAgIHNjZW5lcnlMb2cgJiYgc2NlbmVyeUxvZy5QYWludHMgJiYgc2NlbmVyeUxvZy5wb3AoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCBmcmVlVG9Qb29sKCk6IHZvaWQ7XHJcbn1cclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdTVkdHcmFkaWVudCcsIFNWR0dyYWRpZW50ICk7Il0sIm1hcHBpbmdzIjoiQUFB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