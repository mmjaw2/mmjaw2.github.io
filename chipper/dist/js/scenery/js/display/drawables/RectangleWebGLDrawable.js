// Copyright 2016-2024, University of Colorado Boulder

/**
 * WebGL drawable for Rectangle nodes.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import { isTReadOnlyProperty } from '../../../../axon/js/TReadOnlyProperty.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Poolable from '../../../../phet-core/js/Poolable.js';
import { Color, RectangleStatefulDrawable, Renderer, scenery, WebGLSelfDrawable } from '../../imports.js';
const scratchColor = new Color('transparent');
class RectangleWebGLDrawable extends RectangleStatefulDrawable(WebGLSelfDrawable) {
  /**
   * @public
   * @override
   *
   * @param {number} renderer
   * @param {Instance} instance
   */
  initialize(renderer, instance) {
    super.initialize(renderer, instance);
    if (!this.vertexArray) {
      // format [X Y R G B A] for all vertices
      this.vertexArray = new Float32Array(6 * 6); // 6-length components for 6 vertices (2 tris).
    }

    // corner vertices in the relative transform root coordinate space
    this.upperLeft = new Vector2(0, 0);
    this.lowerLeft = new Vector2(0, 0);
    this.upperRight = new Vector2(0, 0);
    this.lowerRight = new Vector2(0, 0);
    this.transformDirty = true;
    this.includeVertices = true; // used by the processor
  }

  /**
   * @public
   *
   * @param {WebGLBlock} webglBlock
   */
  onAddToBlock(webglBlock) {
    this.webglBlock = webglBlock; // TODO: do we need this reference? https://github.com/phetsims/scenery/issues/1581
    this.markDirty();
  }

  /**
   * @public
   *
   * @param {WebGLBlock} webglBlock
   */
  onRemoveFromBlock(webglBlock) {}

  /**
   * @public
   * @override
   */
  markTransformDirty() {
    this.transformDirty = true;
    super.markTransformDirty();
  }

  /**
   * Updates the DOM appearance of this drawable (whether by preparing/calling draw calls, DOM element updates, etc.)
   * @public
   * @override
   *
   * @returns {boolean} - Whether the update should continue (if false, further updates in supertype steps should not
   *                      be done).
   */
  update() {
    // See if we need to actually update things (will bail out if we are not dirty, or if we've been disposed)
    if (!super.update()) {
      return false;
    }
    if (this.dirtyFill) {
      this.includeVertices = this.node.hasFill();
      if (this.includeVertices) {
        const fill = isTReadOnlyProperty(this.node.fill) ? this.node.fill.value : this.node.fill;
        const color = scratchColor.set(fill);
        const red = color.red / 255;
        const green = color.green / 255;
        const blue = color.blue / 255;
        const alpha = color.alpha;
        for (let i = 0; i < 6; i++) {
          const offset = i * 6;
          this.vertexArray[2 + offset] = red;
          this.vertexArray[3 + offset] = green;
          this.vertexArray[4 + offset] = blue;
          this.vertexArray[5 + offset] = alpha;
        }
      }
    }
    if (this.transformDirty || this.dirtyX || this.dirtyY || this.dirtyWidth || this.dirtyHeight) {
      this.transformDirty = false;
      const x = this.node._rectX;
      const y = this.node._rectY;
      const width = this.node._rectWidth;
      const height = this.node._rectHeight;
      const transformMatrix = this.instance.relativeTransform.matrix; // with compute need, should always be accurate
      transformMatrix.multiplyVector2(this.upperLeft.setXY(x, y));
      transformMatrix.multiplyVector2(this.lowerLeft.setXY(x, y + height));
      transformMatrix.multiplyVector2(this.upperRight.setXY(x + width, y));
      transformMatrix.multiplyVector2(this.lowerRight.setXY(x + width, y + height));

      // first triangle XYs
      this.vertexArray[0] = this.upperLeft.x;
      this.vertexArray[1] = this.upperLeft.y;
      this.vertexArray[6] = this.lowerLeft.x;
      this.vertexArray[7] = this.lowerLeft.y;
      this.vertexArray[12] = this.upperRight.x;
      this.vertexArray[13] = this.upperRight.y;

      // second triangle XYs
      this.vertexArray[18] = this.upperRight.x;
      this.vertexArray[19] = this.upperRight.y;
      this.vertexArray[24] = this.lowerLeft.x;
      this.vertexArray[25] = this.lowerLeft.y;
      this.vertexArray[30] = this.lowerRight.x;
      this.vertexArray[31] = this.lowerRight.y;
    }
    this.setToCleanState();
    this.cleanPaintableState();
    return true;
  }
}
RectangleWebGLDrawable.prototype.webglRenderer = Renderer.webglVertexColorPolygons;
scenery.register('RectangleWebGLDrawable', RectangleWebGLDrawable);
Poolable.mixInto(RectangleWebGLDrawable);
export default RectangleWebGLDrawable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc1RSZWFkT25seVByb3BlcnR5IiwiVmVjdG9yMiIsIlBvb2xhYmxlIiwiQ29sb3IiLCJSZWN0YW5nbGVTdGF0ZWZ1bERyYXdhYmxlIiwiUmVuZGVyZXIiLCJzY2VuZXJ5IiwiV2ViR0xTZWxmRHJhd2FibGUiLCJzY3JhdGNoQ29sb3IiLCJSZWN0YW5nbGVXZWJHTERyYXdhYmxlIiwiaW5pdGlhbGl6ZSIsInJlbmRlcmVyIiwiaW5zdGFuY2UiLCJ2ZXJ0ZXhBcnJheSIsIkZsb2F0MzJBcnJheSIsInVwcGVyTGVmdCIsImxvd2VyTGVmdCIsInVwcGVyUmlnaHQiLCJsb3dlclJpZ2h0IiwidHJhbnNmb3JtRGlydHkiLCJpbmNsdWRlVmVydGljZXMiLCJvbkFkZFRvQmxvY2siLCJ3ZWJnbEJsb2NrIiwibWFya0RpcnR5Iiwib25SZW1vdmVGcm9tQmxvY2siLCJtYXJrVHJhbnNmb3JtRGlydHkiLCJ1cGRhdGUiLCJkaXJ0eUZpbGwiLCJub2RlIiwiaGFzRmlsbCIsImZpbGwiLCJ2YWx1ZSIsImNvbG9yIiwic2V0IiwicmVkIiwiZ3JlZW4iLCJibHVlIiwiYWxwaGEiLCJpIiwib2Zmc2V0IiwiZGlydHlYIiwiZGlydHlZIiwiZGlydHlXaWR0aCIsImRpcnR5SGVpZ2h0IiwieCIsIl9yZWN0WCIsInkiLCJfcmVjdFkiLCJ3aWR0aCIsIl9yZWN0V2lkdGgiLCJoZWlnaHQiLCJfcmVjdEhlaWdodCIsInRyYW5zZm9ybU1hdHJpeCIsInJlbGF0aXZlVHJhbnNmb3JtIiwibWF0cml4IiwibXVsdGlwbHlWZWN0b3IyIiwic2V0WFkiLCJzZXRUb0NsZWFuU3RhdGUiLCJjbGVhblBhaW50YWJsZVN0YXRlIiwicHJvdG90eXBlIiwid2ViZ2xSZW5kZXJlciIsIndlYmdsVmVydGV4Q29sb3JQb2x5Z29ucyIsInJlZ2lzdGVyIiwibWl4SW50byJdLCJzb3VyY2VzIjpbIlJlY3RhbmdsZVdlYkdMRHJhd2FibGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogV2ViR0wgZHJhd2FibGUgZm9yIFJlY3RhbmdsZSBub2Rlcy5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGlzVFJlYWRPbmx5UHJvcGVydHkgfSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgUG9vbGFibGUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL1Bvb2xhYmxlLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIFJlY3RhbmdsZVN0YXRlZnVsRHJhd2FibGUsIFJlbmRlcmVyLCBzY2VuZXJ5LCBXZWJHTFNlbGZEcmF3YWJsZSB9IGZyb20gJy4uLy4uL2ltcG9ydHMuanMnO1xyXG5cclxuY29uc3Qgc2NyYXRjaENvbG9yID0gbmV3IENvbG9yKCAndHJhbnNwYXJlbnQnICk7XHJcblxyXG5jbGFzcyBSZWN0YW5nbGVXZWJHTERyYXdhYmxlIGV4dGVuZHMgUmVjdGFuZ2xlU3RhdGVmdWxEcmF3YWJsZSggV2ViR0xTZWxmRHJhd2FibGUgKSB7XHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlbmRlcmVyXHJcbiAgICogQHBhcmFtIHtJbnN0YW5jZX0gaW5zdGFuY2VcclxuICAgKi9cclxuICBpbml0aWFsaXplKCByZW5kZXJlciwgaW5zdGFuY2UgKSB7XHJcbiAgICBzdXBlci5pbml0aWFsaXplKCByZW5kZXJlciwgaW5zdGFuY2UgKTtcclxuXHJcbiAgICBpZiAoICF0aGlzLnZlcnRleEFycmF5ICkge1xyXG4gICAgICAvLyBmb3JtYXQgW1ggWSBSIEcgQiBBXSBmb3IgYWxsIHZlcnRpY2VzXHJcbiAgICAgIHRoaXMudmVydGV4QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KCA2ICogNiApOyAvLyA2LWxlbmd0aCBjb21wb25lbnRzIGZvciA2IHZlcnRpY2VzICgyIHRyaXMpLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNvcm5lciB2ZXJ0aWNlcyBpbiB0aGUgcmVsYXRpdmUgdHJhbnNmb3JtIHJvb3QgY29vcmRpbmF0ZSBzcGFjZVxyXG4gICAgdGhpcy51cHBlckxlZnQgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG4gICAgdGhpcy5sb3dlckxlZnQgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG4gICAgdGhpcy51cHBlclJpZ2h0ID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMubG93ZXJSaWdodCA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XHJcblxyXG4gICAgdGhpcy50cmFuc2Zvcm1EaXJ0eSA9IHRydWU7XHJcbiAgICB0aGlzLmluY2x1ZGVWZXJ0aWNlcyA9IHRydWU7IC8vIHVzZWQgYnkgdGhlIHByb2Nlc3NvclxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtXZWJHTEJsb2NrfSB3ZWJnbEJsb2NrXHJcbiAgICovXHJcbiAgb25BZGRUb0Jsb2NrKCB3ZWJnbEJsb2NrICkge1xyXG4gICAgdGhpcy53ZWJnbEJsb2NrID0gd2ViZ2xCbG9jazsgLy8gVE9ETzogZG8gd2UgbmVlZCB0aGlzIHJlZmVyZW5jZT8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnkvaXNzdWVzLzE1ODFcclxuICAgIHRoaXMubWFya0RpcnR5KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1dlYkdMQmxvY2t9IHdlYmdsQmxvY2tcclxuICAgKi9cclxuICBvblJlbW92ZUZyb21CbG9jayggd2ViZ2xCbG9jayApIHtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBtYXJrVHJhbnNmb3JtRGlydHkoKSB7XHJcbiAgICB0aGlzLnRyYW5zZm9ybURpcnR5ID0gdHJ1ZTtcclxuXHJcbiAgICBzdXBlci5tYXJrVHJhbnNmb3JtRGlydHkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIERPTSBhcHBlYXJhbmNlIG9mIHRoaXMgZHJhd2FibGUgKHdoZXRoZXIgYnkgcHJlcGFyaW5nL2NhbGxpbmcgZHJhdyBjYWxscywgRE9NIGVsZW1lbnQgdXBkYXRlcywgZXRjLilcclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoZSB1cGRhdGUgc2hvdWxkIGNvbnRpbnVlIChpZiBmYWxzZSwgZnVydGhlciB1cGRhdGVzIGluIHN1cGVydHlwZSBzdGVwcyBzaG91bGQgbm90XHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgYmUgZG9uZSkuXHJcbiAgICovXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgLy8gU2VlIGlmIHdlIG5lZWQgdG8gYWN0dWFsbHkgdXBkYXRlIHRoaW5ncyAod2lsbCBiYWlsIG91dCBpZiB3ZSBhcmUgbm90IGRpcnR5LCBvciBpZiB3ZSd2ZSBiZWVuIGRpc3Bvc2VkKVxyXG4gICAgaWYgKCAhc3VwZXIudXBkYXRlKCkgKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMuZGlydHlGaWxsICkge1xyXG4gICAgICB0aGlzLmluY2x1ZGVWZXJ0aWNlcyA9IHRoaXMubm9kZS5oYXNGaWxsKCk7XHJcblxyXG4gICAgICBpZiAoIHRoaXMuaW5jbHVkZVZlcnRpY2VzICkge1xyXG4gICAgICAgIGNvbnN0IGZpbGwgPSAoIGlzVFJlYWRPbmx5UHJvcGVydHkoIHRoaXMubm9kZS5maWxsICkgKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZS5maWxsLnZhbHVlIDogdGhpcy5ub2RlLmZpbGw7XHJcbiAgICAgICAgY29uc3QgY29sb3IgPSBzY3JhdGNoQ29sb3Iuc2V0KCBmaWxsICk7XHJcbiAgICAgICAgY29uc3QgcmVkID0gY29sb3IucmVkIC8gMjU1O1xyXG4gICAgICAgIGNvbnN0IGdyZWVuID0gY29sb3IuZ3JlZW4gLyAyNTU7XHJcbiAgICAgICAgY29uc3QgYmx1ZSA9IGNvbG9yLmJsdWUgLyAyNTU7XHJcbiAgICAgICAgY29uc3QgYWxwaGEgPSBjb2xvci5hbHBoYTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgNjsgaSsrICkge1xyXG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaSAqIDY7XHJcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5WyAyICsgb2Zmc2V0IF0gPSByZWQ7XHJcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5WyAzICsgb2Zmc2V0IF0gPSBncmVlbjtcclxuICAgICAgICAgIHRoaXMudmVydGV4QXJyYXlbIDQgKyBvZmZzZXQgXSA9IGJsdWU7XHJcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5WyA1ICsgb2Zmc2V0IF0gPSBhbHBoYTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMudHJhbnNmb3JtRGlydHkgfHwgdGhpcy5kaXJ0eVggfHwgdGhpcy5kaXJ0eVkgfHwgdGhpcy5kaXJ0eVdpZHRoIHx8IHRoaXMuZGlydHlIZWlnaHQgKSB7XHJcbiAgICAgIHRoaXMudHJhbnNmb3JtRGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICAgIGNvbnN0IHggPSB0aGlzLm5vZGUuX3JlY3RYO1xyXG4gICAgICBjb25zdCB5ID0gdGhpcy5ub2RlLl9yZWN0WTtcclxuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLm5vZGUuX3JlY3RXaWR0aDtcclxuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5ub2RlLl9yZWN0SGVpZ2h0O1xyXG5cclxuICAgICAgY29uc3QgdHJhbnNmb3JtTWF0cml4ID0gdGhpcy5pbnN0YW5jZS5yZWxhdGl2ZVRyYW5zZm9ybS5tYXRyaXg7IC8vIHdpdGggY29tcHV0ZSBuZWVkLCBzaG91bGQgYWx3YXlzIGJlIGFjY3VyYXRlXHJcbiAgICAgIHRyYW5zZm9ybU1hdHJpeC5tdWx0aXBseVZlY3RvcjIoIHRoaXMudXBwZXJMZWZ0LnNldFhZKCB4LCB5ICkgKTtcclxuICAgICAgdHJhbnNmb3JtTWF0cml4Lm11bHRpcGx5VmVjdG9yMiggdGhpcy5sb3dlckxlZnQuc2V0WFkoIHgsIHkgKyBoZWlnaHQgKSApO1xyXG4gICAgICB0cmFuc2Zvcm1NYXRyaXgubXVsdGlwbHlWZWN0b3IyKCB0aGlzLnVwcGVyUmlnaHQuc2V0WFkoIHggKyB3aWR0aCwgeSApICk7XHJcbiAgICAgIHRyYW5zZm9ybU1hdHJpeC5tdWx0aXBseVZlY3RvcjIoIHRoaXMubG93ZXJSaWdodC5zZXRYWSggeCArIHdpZHRoLCB5ICsgaGVpZ2h0ICkgKTtcclxuXHJcbiAgICAgIC8vIGZpcnN0IHRyaWFuZ2xlIFhZc1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAwIF0gPSB0aGlzLnVwcGVyTGVmdC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAxIF0gPSB0aGlzLnVwcGVyTGVmdC55O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyA2IF0gPSB0aGlzLmxvd2VyTGVmdC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyA3IF0gPSB0aGlzLmxvd2VyTGVmdC55O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAxMiBdID0gdGhpcy51cHBlclJpZ2h0Lng7XHJcbiAgICAgIHRoaXMudmVydGV4QXJyYXlbIDEzIF0gPSB0aGlzLnVwcGVyUmlnaHQueTtcclxuXHJcbiAgICAgIC8vIHNlY29uZCB0cmlhbmdsZSBYWXNcclxuICAgICAgdGhpcy52ZXJ0ZXhBcnJheVsgMTggXSA9IHRoaXMudXBwZXJSaWdodC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAxOSBdID0gdGhpcy51cHBlclJpZ2h0Lnk7XHJcbiAgICAgIHRoaXMudmVydGV4QXJyYXlbIDI0IF0gPSB0aGlzLmxvd2VyTGVmdC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAyNSBdID0gdGhpcy5sb3dlckxlZnQueTtcclxuICAgICAgdGhpcy52ZXJ0ZXhBcnJheVsgMzAgXSA9IHRoaXMubG93ZXJSaWdodC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAzMSBdID0gdGhpcy5sb3dlclJpZ2h0Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRUb0NsZWFuU3RhdGUoKTtcclxuICAgIHRoaXMuY2xlYW5QYWludGFibGVTdGF0ZSgpO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZS5wcm90b3R5cGUud2ViZ2xSZW5kZXJlciA9IFJlbmRlcmVyLndlYmdsVmVydGV4Q29sb3JQb2x5Z29ucztcclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdSZWN0YW5nbGVXZWJHTERyYXdhYmxlJywgUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZSApO1xyXG5cclxuUG9vbGFibGUubWl4SW50byggUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsbUJBQW1CLFFBQVEsMENBQTBDO0FBQzlFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsUUFBUSxNQUFNLHNDQUFzQztBQUMzRCxTQUFTQyxLQUFLLEVBQUVDLHlCQUF5QixFQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsaUJBQWlCLFFBQVEsa0JBQWtCO0FBRXpHLE1BQU1DLFlBQVks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