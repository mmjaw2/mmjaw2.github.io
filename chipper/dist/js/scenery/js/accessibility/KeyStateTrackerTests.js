// Copyright 2018-2024, University of Colorado Boulder

/**
 * QUnit tests for the KeyStateTracker.
 *
 * @author Jesse Greenberg
 * @author Michael Barlow
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

// modules
import stepTimer from '../../../axon/js/stepTimer.js';
import KeyboardUtils from './KeyboardUtils.js';
import KeyStateTracker from './KeyStateTracker.js';

// Reusable KeyboardEvents to update the KeyStateTracker with
// const tabKeyEvent = { key: KeyboardUtils.KEY_TAB };
// const spaceKeyEvent = { key: KeyboardUtils.KEY_SPACE };
// const shiftTabKeyEvent = { key: KeyboardUtils.KEY_TAB, shiftKey: true };
// const shiftKeyEvent = { key: KeyboardUtils.KEY_SHIFT };

const tabKeyDownEvent = new KeyboardEvent('keydown', {
  code: KeyboardUtils.KEY_TAB
});
const tabKeyUpEvent = new KeyboardEvent('keyup', {
  code: KeyboardUtils.KEY_TAB
});
const spaceKeyDownEvent = new KeyboardEvent('keydown', {
  code: KeyboardUtils.KEY_SPACE
});
const spaceKeyUpEvent = new KeyboardEvent('keyup', {
  code: KeyboardUtils.KEY_SPACE
});
const shiftTabKeyDownEvent = new KeyboardEvent('keydown', {
  code: KeyboardUtils.KEY_TAB,
  shiftKey: true
});
const shiftTabKeyUpEvent = new KeyboardEvent('keyup', {
  code: KeyboardUtils.KEY_TAB,
  shiftKey: true
});
const shiftKeyLeftDownEvent = new KeyboardEvent('keydown', {
  code: KeyboardUtils.KEY_SHIFT_LEFT
});
const shiftKeyLeftUpEvent = new KeyboardEvent('keyup', {
  code: KeyboardUtils.KEY_SHIFT_LEFT
});
const testTracker = new KeyStateTracker();
let intervalID;
QUnit.module('KeyStateTracker', {
  before() {
    // step the stepTimer, because utteranceQueue runs on stepTimer
    let previousTime = Date.now();
    intervalID = window.setInterval(() => {
      // eslint-disable-line bad-sim-text
      const currentTime = Date.now();
      const timeStep = (currentTime - previousTime) / 1000; // convert to seconds
      previousTime = currentTime;

      // step timer
      stepTimer.emit(timeStep);
    }, 10);
  },
  after() {
    testTracker.dispose();
    clearInterval(intervalID);
  },
  beforeEach() {
    testTracker.clearState();
  }
});
QUnit.test('basic state tracking of keys', assert => {
  // mock sending "keydown" events to the tracker
  testTracker['keydownUpdate'](tabKeyDownEvent);
  assert.ok(testTracker.isKeyDown(tabKeyDownEvent.code), 'tab key should be down in tracker');
  testTracker['keyupUpdate'](tabKeyUpEvent);
  assert.ok(!testTracker.isKeyDown(tabKeyUpEvent.code), 'tab key should be up in tracker');
  testTracker['keydownUpdate'](spaceKeyDownEvent);
  assert.ok(testTracker.isAnyKeyInListDown([spaceKeyDownEvent.code, tabKeyDownEvent.code]), 'tab or space are down');
  assert.ok(!testTracker.areKeysDown([tabKeyDownEvent.code, spaceKeyDownEvent.code]), 'tab and space are not down');
  testTracker['keydownUpdate'](tabKeyDownEvent);
  assert.ok(testTracker.isAnyKeyInListDown([tabKeyDownEvent.code, spaceKeyDownEvent.code]), 'tab and/or space are down');
  assert.ok(testTracker.areKeysDown([tabKeyDownEvent.code, spaceKeyDownEvent.code]), 'tab and space are down');
  testTracker['keydownUpdate'](spaceKeyUpEvent);
});
QUnit.test('tracking of shift key', assert => {
  // mock sending "keydown" events to the tracker
  testTracker['keydownUpdate'](shiftTabKeyDownEvent);
  assert.ok(testTracker.shiftKeyDown, 'tab key with shift modifier should produce a keystate with shift key down');
  testTracker['keydownUpdate'](shiftKeyLeftDownEvent);
  testTracker['keydownUpdate'](shiftTabKeyDownEvent);
  assert.ok(testTracker.isKeyDown(tabKeyDownEvent.code), 'tab key should be down in tracker');
  assert.ok(testTracker.isKeyDown(shiftKeyLeftDownEvent.code), 'shift key should be down in tracker');
  assert.ok(testTracker.shiftKeyDown, 'shift key should be down in tracker getter');
  testTracker['keyupUpdate'](shiftKeyLeftUpEvent);
  testTracker['keyupUpdate'](tabKeyUpEvent);
  assert.ok(!testTracker.isKeyDown(shiftKeyLeftUpEvent.code), 'shift key should not be down in tracker');
  assert.ok(!testTracker.shiftKeyDown, 'shift key should not be down in tracker getter');
  assert.ok(!testTracker.isKeyDown(tabKeyUpEvent.code), 'tab key should not be down in tracker');
  assert.ok(!testTracker.keysAreDown(), 'no keys should be down');
  testTracker['keydownUpdate'](tabKeyDownEvent);
  testTracker['keyupUpdate'](shiftTabKeyUpEvent);
  assert.ok(!testTracker.isKeyDown(tabKeyDownEvent.code), 'tab key should not be down in tracker');

  // KeyStateTracker should correctly update when modifier keys like "shift" are attached to the event - if shift
  // is down on keyUpUpdate, shift should be considered down
  assert.ok(testTracker.isKeyDown(shiftKeyLeftDownEvent.code), 'shift key should update from modifier');
  assert.ok(testTracker.shiftKeyDown, 'shift key should update from modifier getter');
});
QUnit.test('test tracking with time', async assert => {
  const done = assert.async();

  // we will test holding down a key for these lengths of time in ms
  const firstPressTime = 500;
  const secondPressTime = 71;
  const totalPressTime = firstPressTime + secondPressTime;
  testTracker['keydownUpdate'](spaceKeyDownEvent);
  let currentTimeDown = testTracker.timeDownForKey(spaceKeyDownEvent.code);
  assert.ok(currentTimeDown === 0, 'should be zero, has not been down any time');
  stepTimer.setTimeout(() => {
    currentTimeDown = testTracker.timeDownForKey(spaceKeyDownEvent.code);
    assert.ok(currentTimeDown >= firstPressTime, `key pressed for ${firstPressTime} ms`);
    stepTimer.setTimeout(() => {
      currentTimeDown = testTracker.timeDownForKey(spaceKeyDownEvent.code);
      assert.ok(currentTimeDown >= totalPressTime, `key pressed for ${secondPressTime} more ms.`);
      testTracker['keyupUpdate'](spaceKeyUpEvent);
      done();
    }, secondPressTime);
  }, firstPressTime);
});
QUnit.test('KeyStateTracker.enabled', async assert => {
  const keyStateTracker = new KeyStateTracker();
  keyStateTracker['keydownUpdate'](tabKeyDownEvent);
  assert.ok(keyStateTracker.enabled, 'default enabled');
  assert.ok(keyStateTracker.isKeyDown(KeyboardUtils.KEY_TAB), 'tab key down');
  keyStateTracker.enabled = false;
  assert.ok(!keyStateTracker.enabled, 'disabled');
  assert.ok(!keyStateTracker.isKeyDown(KeyboardUtils.KEY_TAB), 'tab key down cleared upon disabled');
  assert.ok(!keyStateTracker.keysAreDown(), 'no keys down');
  keyStateTracker['keydownUpdate'](tabKeyDownEvent);
  assert.ok(!keyStateTracker.isKeyDown(KeyboardUtils.KEY_TAB), 'tab key not registered when disabled');
  keyStateTracker['keydownUpdate'](shiftTabKeyDownEvent);
  assert.ok(!keyStateTracker.isKeyDown(KeyboardUtils.KEY_SHIFT_LEFT), 'shift key should not be down');
  keyStateTracker.enabled = true;
  keyStateTracker['keydownUpdate'](shiftTabKeyDownEvent);
  assert.ok(keyStateTracker.isKeyDown(KeyboardUtils.KEY_SHIFT_LEFT), 'shift key should be down');
  assert.ok(keyStateTracker.isKeyDown(KeyboardUtils.KEY_TAB), 'tab key should  be down');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdGVwVGltZXIiLCJLZXlib2FyZFV0aWxzIiwiS2V5U3RhdGVUcmFja2VyIiwidGFiS2V5RG93bkV2ZW50IiwiS2V5Ym9hcmRFdmVudCIsImNvZGUiLCJLRVlfVEFCIiwidGFiS2V5VXBFdmVudCIsInNwYWNlS2V5RG93bkV2ZW50IiwiS0VZX1NQQUNFIiwic3BhY2VLZXlVcEV2ZW50Iiwic2hpZnRUYWJLZXlEb3duRXZlbnQiLCJzaGlmdEtleSIsInNoaWZ0VGFiS2V5VXBFdmVudCIsInNoaWZ0S2V5TGVmdERvd25FdmVudCIsIktFWV9TSElGVF9MRUZUIiwic2hpZnRLZXlMZWZ0VXBFdmVudCIsInRlc3RUcmFja2VyIiwiaW50ZXJ2YWxJRCIsIlFVbml0IiwibW9kdWxlIiwiYmVmb3JlIiwicHJldmlvdXNUaW1lIiwiRGF0ZSIsIm5vdyIsIndpbmRvdyIsInNldEludGVydmFsIiwiY3VycmVudFRpbWUiLCJ0aW1lU3RlcCIsImVtaXQiLCJhZnRlciIsImRpc3Bvc2UiLCJjbGVhckludGVydmFsIiwiYmVmb3JlRWFjaCIsImNsZWFyU3RhdGUiLCJ0ZXN0IiwiYXNzZXJ0Iiwib2siLCJpc0tleURvd24iLCJpc0FueUtleUluTGlzdERvd24iLCJhcmVLZXlzRG93biIsInNoaWZ0S2V5RG93biIsImtleXNBcmVEb3duIiwiZG9uZSIsImFzeW5jIiwiZmlyc3RQcmVzc1RpbWUiLCJzZWNvbmRQcmVzc1RpbWUiLCJ0b3RhbFByZXNzVGltZSIsImN1cnJlbnRUaW1lRG93biIsInRpbWVEb3duRm9yS2V5Iiwic2V0VGltZW91dCIsImtleVN0YXRlVHJhY2tlciIsImVuYWJsZWQiXSwic291cmNlcyI6WyJLZXlTdGF0ZVRyYWNrZXJUZXN0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBRVW5pdCB0ZXN0cyBmb3IgdGhlIEtleVN0YXRlVHJhY2tlci5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmdcclxuICogQGF1dGhvciBNaWNoYWVsIEJhcmxvd1xyXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuXHJcbi8vIG1vZHVsZXNcclxuaW1wb3J0IHN0ZXBUaW1lciBmcm9tICcuLi8uLi8uLi9heG9uL2pzL3N0ZXBUaW1lci5qcyc7XHJcbmltcG9ydCBLZXlib2FyZFV0aWxzIGZyb20gJy4vS2V5Ym9hcmRVdGlscy5qcyc7XHJcbmltcG9ydCBLZXlTdGF0ZVRyYWNrZXIgZnJvbSAnLi9LZXlTdGF0ZVRyYWNrZXIuanMnO1xyXG5cclxuLy8gUmV1c2FibGUgS2V5Ym9hcmRFdmVudHMgdG8gdXBkYXRlIHRoZSBLZXlTdGF0ZVRyYWNrZXIgd2l0aFxyXG4vLyBjb25zdCB0YWJLZXlFdmVudCA9IHsga2V5OiBLZXlib2FyZFV0aWxzLktFWV9UQUIgfTtcclxuLy8gY29uc3Qgc3BhY2VLZXlFdmVudCA9IHsga2V5OiBLZXlib2FyZFV0aWxzLktFWV9TUEFDRSB9O1xyXG4vLyBjb25zdCBzaGlmdFRhYktleUV2ZW50ID0geyBrZXk6IEtleWJvYXJkVXRpbHMuS0VZX1RBQiwgc2hpZnRLZXk6IHRydWUgfTtcclxuLy8gY29uc3Qgc2hpZnRLZXlFdmVudCA9IHsga2V5OiBLZXlib2FyZFV0aWxzLktFWV9TSElGVCB9O1xyXG5cclxuY29uc3QgdGFiS2V5RG93bkV2ZW50ID0gbmV3IEtleWJvYXJkRXZlbnQoICdrZXlkb3duJywgeyBjb2RlOiBLZXlib2FyZFV0aWxzLktFWV9UQUIgfSApO1xyXG5jb25zdCB0YWJLZXlVcEV2ZW50ID0gbmV3IEtleWJvYXJkRXZlbnQoICdrZXl1cCcsIHsgY29kZTogS2V5Ym9hcmRVdGlscy5LRVlfVEFCIH0gKTtcclxuY29uc3Qgc3BhY2VLZXlEb3duRXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCggJ2tleWRvd24nLCB7IGNvZGU6IEtleWJvYXJkVXRpbHMuS0VZX1NQQUNFIH0gKTtcclxuY29uc3Qgc3BhY2VLZXlVcEV2ZW50ID0gbmV3IEtleWJvYXJkRXZlbnQoICdrZXl1cCcsIHsgY29kZTogS2V5Ym9hcmRVdGlscy5LRVlfU1BBQ0UgfSApO1xyXG5jb25zdCBzaGlmdFRhYktleURvd25FdmVudCA9IG5ldyBLZXlib2FyZEV2ZW50KCAna2V5ZG93bicsIHsgY29kZTogS2V5Ym9hcmRVdGlscy5LRVlfVEFCLCBzaGlmdEtleTogdHJ1ZSB9ICk7XHJcbmNvbnN0IHNoaWZ0VGFiS2V5VXBFdmVudCA9IG5ldyBLZXlib2FyZEV2ZW50KCAna2V5dXAnLCB7IGNvZGU6IEtleWJvYXJkVXRpbHMuS0VZX1RBQiwgc2hpZnRLZXk6IHRydWUgfSApO1xyXG5jb25zdCBzaGlmdEtleUxlZnREb3duRXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCggJ2tleWRvd24nLCB7IGNvZGU6IEtleWJvYXJkVXRpbHMuS0VZX1NISUZUX0xFRlQgfSApO1xyXG5jb25zdCBzaGlmdEtleUxlZnRVcEV2ZW50ID0gbmV3IEtleWJvYXJkRXZlbnQoICdrZXl1cCcsIHsgY29kZTogS2V5Ym9hcmRVdGlscy5LRVlfU0hJRlRfTEVGVCB9ICk7XHJcblxyXG5jb25zdCB0ZXN0VHJhY2tlciA9IG5ldyBLZXlTdGF0ZVRyYWNrZXIoKTtcclxuXHJcbmxldCBpbnRlcnZhbElEOiBudW1iZXI7XHJcblxyXG5RVW5pdC5tb2R1bGUoICdLZXlTdGF0ZVRyYWNrZXInLCB7XHJcblxyXG4gIGJlZm9yZSgpIHtcclxuXHJcbiAgICAvLyBzdGVwIHRoZSBzdGVwVGltZXIsIGJlY2F1c2UgdXR0ZXJhbmNlUXVldWUgcnVucyBvbiBzdGVwVGltZXJcclxuICAgIGxldCBwcmV2aW91c1RpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgaW50ZXJ2YWxJRCA9IHdpbmRvdy5zZXRJbnRlcnZhbCggKCkgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IHRpbWVTdGVwID0gKCBjdXJyZW50VGltZSAtIHByZXZpb3VzVGltZSApIC8gMTAwMDsgLy8gY29udmVydCB0byBzZWNvbmRzXHJcbiAgICAgIHByZXZpb3VzVGltZSA9IGN1cnJlbnRUaW1lO1xyXG5cclxuICAgICAgLy8gc3RlcCB0aW1lclxyXG4gICAgICBzdGVwVGltZXIuZW1pdCggdGltZVN0ZXAgKTtcclxuICAgIH0sIDEwICk7XHJcbiAgfSxcclxuICBhZnRlcigpIHtcclxuICAgIHRlc3RUcmFja2VyLmRpc3Bvc2UoKTtcclxuICAgIGNsZWFySW50ZXJ2YWwoIGludGVydmFsSUQgKTtcclxuICB9LFxyXG5cclxuICBiZWZvcmVFYWNoKCkge1xyXG4gICAgdGVzdFRyYWNrZXIuY2xlYXJTdGF0ZSgpO1xyXG4gIH1cclxufSApO1xyXG5cclxuUVVuaXQudGVzdCggJ2Jhc2ljIHN0YXRlIHRyYWNraW5nIG9mIGtleXMnLCBhc3NlcnQgPT4ge1xyXG5cclxuICAvLyBtb2NrIHNlbmRpbmcgXCJrZXlkb3duXCIgZXZlbnRzIHRvIHRoZSB0cmFja2VyXHJcbiAgdGVzdFRyYWNrZXJbICdrZXlkb3duVXBkYXRlJyBdKCB0YWJLZXlEb3duRXZlbnQgKTtcclxuICBhc3NlcnQub2soIHRlc3RUcmFja2VyLmlzS2V5RG93biggdGFiS2V5RG93bkV2ZW50LmNvZGUgKSwgJ3RhYiBrZXkgc2hvdWxkIGJlIGRvd24gaW4gdHJhY2tlcicgKTtcclxuXHJcbiAgdGVzdFRyYWNrZXJbICdrZXl1cFVwZGF0ZScgXSggdGFiS2V5VXBFdmVudCApO1xyXG4gIGFzc2VydC5vayggIXRlc3RUcmFja2VyLmlzS2V5RG93biggdGFiS2V5VXBFdmVudC5jb2RlICksICd0YWIga2V5IHNob3VsZCBiZSB1cCBpbiB0cmFja2VyJyApO1xyXG5cclxuICB0ZXN0VHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHNwYWNlS2V5RG93bkV2ZW50ICk7XHJcbiAgYXNzZXJ0Lm9rKCB0ZXN0VHJhY2tlci5pc0FueUtleUluTGlzdERvd24oIFsgc3BhY2VLZXlEb3duRXZlbnQuY29kZSwgdGFiS2V5RG93bkV2ZW50LmNvZGUgXSApLCAndGFiIG9yIHNwYWNlIGFyZSBkb3duJyApO1xyXG4gIGFzc2VydC5vayggIXRlc3RUcmFja2VyLmFyZUtleXNEb3duKCBbIHRhYktleURvd25FdmVudC5jb2RlLCBzcGFjZUtleURvd25FdmVudC5jb2RlIF0gKSwgJ3RhYiBhbmQgc3BhY2UgYXJlIG5vdCBkb3duJyApO1xyXG5cclxuICB0ZXN0VHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHRhYktleURvd25FdmVudCApO1xyXG4gIGFzc2VydC5vayggdGVzdFRyYWNrZXIuaXNBbnlLZXlJbkxpc3REb3duKCBbIHRhYktleURvd25FdmVudC5jb2RlLCBzcGFjZUtleURvd25FdmVudC5jb2RlIF0gKSwgJ3RhYiBhbmQvb3Igc3BhY2UgYXJlIGRvd24nICk7XHJcbiAgYXNzZXJ0Lm9rKCB0ZXN0VHJhY2tlci5hcmVLZXlzRG93biggWyB0YWJLZXlEb3duRXZlbnQuY29kZSwgc3BhY2VLZXlEb3duRXZlbnQuY29kZSBdICksICd0YWIgYW5kIHNwYWNlIGFyZSBkb3duJyApO1xyXG5cclxuICB0ZXN0VHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHNwYWNlS2V5VXBFdmVudCApO1xyXG59ICk7XHJcblxyXG5cclxuUVVuaXQudGVzdCggJ3RyYWNraW5nIG9mIHNoaWZ0IGtleScsIGFzc2VydCA9PiB7XHJcblxyXG4gIC8vIG1vY2sgc2VuZGluZyBcImtleWRvd25cIiBldmVudHMgdG8gdGhlIHRyYWNrZXJcclxuICB0ZXN0VHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHNoaWZ0VGFiS2V5RG93bkV2ZW50ICk7XHJcbiAgYXNzZXJ0Lm9rKCB0ZXN0VHJhY2tlci5zaGlmdEtleURvd24sICd0YWIga2V5IHdpdGggc2hpZnQgbW9kaWZpZXIgc2hvdWxkIHByb2R1Y2UgYSBrZXlzdGF0ZSB3aXRoIHNoaWZ0IGtleSBkb3duJyApO1xyXG5cclxuICB0ZXN0VHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHNoaWZ0S2V5TGVmdERvd25FdmVudCApO1xyXG4gIHRlc3RUcmFja2VyWyAna2V5ZG93blVwZGF0ZScgXSggc2hpZnRUYWJLZXlEb3duRXZlbnQgKTtcclxuICBhc3NlcnQub2soIHRlc3RUcmFja2VyLmlzS2V5RG93biggdGFiS2V5RG93bkV2ZW50LmNvZGUgKSwgJ3RhYiBrZXkgc2hvdWxkIGJlIGRvd24gaW4gdHJhY2tlcicgKTtcclxuICBhc3NlcnQub2soIHRlc3RUcmFja2VyLmlzS2V5RG93biggc2hpZnRLZXlMZWZ0RG93bkV2ZW50LmNvZGUgKSwgJ3NoaWZ0IGtleSBzaG91bGQgYmUgZG93biBpbiB0cmFja2VyJyApO1xyXG4gIGFzc2VydC5vayggdGVzdFRyYWNrZXIuc2hpZnRLZXlEb3duLCAnc2hpZnQga2V5IHNob3VsZCBiZSBkb3duIGluIHRyYWNrZXIgZ2V0dGVyJyApO1xyXG5cclxuICB0ZXN0VHJhY2tlclsgJ2tleXVwVXBkYXRlJyBdKCBzaGlmdEtleUxlZnRVcEV2ZW50ICk7XHJcbiAgdGVzdFRyYWNrZXJbICdrZXl1cFVwZGF0ZScgXSggdGFiS2V5VXBFdmVudCApO1xyXG5cclxuXHJcbiAgYXNzZXJ0Lm9rKCAhdGVzdFRyYWNrZXIuaXNLZXlEb3duKCBzaGlmdEtleUxlZnRVcEV2ZW50LmNvZGUgKSwgJ3NoaWZ0IGtleSBzaG91bGQgbm90IGJlIGRvd24gaW4gdHJhY2tlcicgKTtcclxuICBhc3NlcnQub2soICF0ZXN0VHJhY2tlci5zaGlmdEtleURvd24sICdzaGlmdCBrZXkgc2hvdWxkIG5vdCBiZSBkb3duIGluIHRyYWNrZXIgZ2V0dGVyJyApO1xyXG4gIGFzc2VydC5vayggIXRlc3RUcmFja2VyLmlzS2V5RG93biggdGFiS2V5VXBFdmVudC5jb2RlICksICd0YWIga2V5IHNob3VsZCBub3QgYmUgZG93biBpbiB0cmFja2VyJyApO1xyXG5cclxuICBhc3NlcnQub2soICF0ZXN0VHJhY2tlci5rZXlzQXJlRG93bigpLCAnbm8ga2V5cyBzaG91bGQgYmUgZG93bicgKTtcclxuXHJcbiAgdGVzdFRyYWNrZXJbICdrZXlkb3duVXBkYXRlJyBdKCB0YWJLZXlEb3duRXZlbnQgKTtcclxuICB0ZXN0VHJhY2tlclsgJ2tleXVwVXBkYXRlJyBdKCBzaGlmdFRhYktleVVwRXZlbnQgKTtcclxuICBhc3NlcnQub2soICF0ZXN0VHJhY2tlci5pc0tleURvd24oIHRhYktleURvd25FdmVudC5jb2RlICksICd0YWIga2V5IHNob3VsZCBub3QgYmUgZG93biBpbiB0cmFja2VyJyApO1xyXG5cclxuICAvLyBLZXlTdGF0ZVRyYWNrZXIgc2hvdWxkIGNvcnJlY3RseSB1cGRhdGUgd2hlbiBtb2RpZmllciBrZXlzIGxpa2UgXCJzaGlmdFwiIGFyZSBhdHRhY2hlZCB0byB0aGUgZXZlbnQgLSBpZiBzaGlmdFxyXG4gIC8vIGlzIGRvd24gb24ga2V5VXBVcGRhdGUsIHNoaWZ0IHNob3VsZCBiZSBjb25zaWRlcmVkIGRvd25cclxuICBhc3NlcnQub2soIHRlc3RUcmFja2VyLmlzS2V5RG93biggc2hpZnRLZXlMZWZ0RG93bkV2ZW50LmNvZGUgKSwgJ3NoaWZ0IGtleSBzaG91bGQgdXBkYXRlIGZyb20gbW9kaWZpZXInICk7XHJcbiAgYXNzZXJ0Lm9rKCB0ZXN0VHJhY2tlci5zaGlmdEtleURvd24sICdzaGlmdCBrZXkgc2hvdWxkIHVwZGF0ZSBmcm9tIG1vZGlmaWVyIGdldHRlcicgKTtcclxufSApO1xyXG5cclxuXHJcblFVbml0LnRlc3QoICd0ZXN0IHRyYWNraW5nIHdpdGggdGltZScsIGFzeW5jIGFzc2VydCA9PiB7XHJcblxyXG4gIGNvbnN0IGRvbmUgPSBhc3NlcnQuYXN5bmMoKTtcclxuXHJcbiAgLy8gd2Ugd2lsbCB0ZXN0IGhvbGRpbmcgZG93biBhIGtleSBmb3IgdGhlc2UgbGVuZ3RocyBvZiB0aW1lIGluIG1zXHJcbiAgY29uc3QgZmlyc3RQcmVzc1RpbWUgPSA1MDA7XHJcbiAgY29uc3Qgc2Vjb25kUHJlc3NUaW1lID0gNzE7XHJcbiAgY29uc3QgdG90YWxQcmVzc1RpbWUgPSBmaXJzdFByZXNzVGltZSArIHNlY29uZFByZXNzVGltZTtcclxuXHJcbiAgdGVzdFRyYWNrZXJbICdrZXlkb3duVXBkYXRlJyBdKCBzcGFjZUtleURvd25FdmVudCApO1xyXG4gIGxldCBjdXJyZW50VGltZURvd24gPSB0ZXN0VHJhY2tlci50aW1lRG93bkZvcktleSggc3BhY2VLZXlEb3duRXZlbnQuY29kZSApO1xyXG4gIGFzc2VydC5vayggY3VycmVudFRpbWVEb3duID09PSAwLCAnc2hvdWxkIGJlIHplcm8sIGhhcyBub3QgYmVlbiBkb3duIGFueSB0aW1lJyApO1xyXG5cclxuICBzdGVwVGltZXIuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgY3VycmVudFRpbWVEb3duID0gdGVzdFRyYWNrZXIudGltZURvd25Gb3JLZXkoIHNwYWNlS2V5RG93bkV2ZW50LmNvZGUgKTtcclxuXHJcbiAgICBhc3NlcnQub2soIGN1cnJlbnRUaW1lRG93biA+PSBmaXJzdFByZXNzVGltZSwgYGtleSBwcmVzc2VkIGZvciAke2ZpcnN0UHJlc3NUaW1lfSBtc2AgKTtcclxuXHJcbiAgICBzdGVwVGltZXIuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICBjdXJyZW50VGltZURvd24gPSB0ZXN0VHJhY2tlci50aW1lRG93bkZvcktleSggc3BhY2VLZXlEb3duRXZlbnQuY29kZSApO1xyXG5cclxuICAgICAgYXNzZXJ0Lm9rKCBjdXJyZW50VGltZURvd24gPj0gdG90YWxQcmVzc1RpbWUsIGBrZXkgcHJlc3NlZCBmb3IgJHtzZWNvbmRQcmVzc1RpbWV9IG1vcmUgbXMuYCApO1xyXG5cclxuICAgICAgdGVzdFRyYWNrZXJbICdrZXl1cFVwZGF0ZScgXSggc3BhY2VLZXlVcEV2ZW50ICk7XHJcbiAgICAgIGRvbmUoKTtcclxuICAgIH0sIHNlY29uZFByZXNzVGltZSApO1xyXG4gIH0sIGZpcnN0UHJlc3NUaW1lICk7XHJcbn0gKTtcclxuXHJcblxyXG5RVW5pdC50ZXN0KCAnS2V5U3RhdGVUcmFja2VyLmVuYWJsZWQnLCBhc3luYyBhc3NlcnQgPT4ge1xyXG5cclxuICBjb25zdCBrZXlTdGF0ZVRyYWNrZXIgPSBuZXcgS2V5U3RhdGVUcmFja2VyKCk7XHJcblxyXG4gIGtleVN0YXRlVHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHRhYktleURvd25FdmVudCApO1xyXG5cclxuICBhc3NlcnQub2soIGtleVN0YXRlVHJhY2tlci5lbmFibGVkLCAnZGVmYXVsdCBlbmFibGVkJyApO1xyXG4gIGFzc2VydC5vaygga2V5U3RhdGVUcmFja2VyLmlzS2V5RG93biggS2V5Ym9hcmRVdGlscy5LRVlfVEFCICksICd0YWIga2V5IGRvd24nICk7XHJcblxyXG4gIGtleVN0YXRlVHJhY2tlci5lbmFibGVkID0gZmFsc2U7XHJcblxyXG5cclxuICBhc3NlcnQub2soICFrZXlTdGF0ZVRyYWNrZXIuZW5hYmxlZCwgJ2Rpc2FibGVkJyApO1xyXG4gIGFzc2VydC5vayggIWtleVN0YXRlVHJhY2tlci5pc0tleURvd24oIEtleWJvYXJkVXRpbHMuS0VZX1RBQiApLCAndGFiIGtleSBkb3duIGNsZWFyZWQgdXBvbiBkaXNhYmxlZCcgKTtcclxuICBhc3NlcnQub2soICFrZXlTdGF0ZVRyYWNrZXIua2V5c0FyZURvd24oKSwgJ25vIGtleXMgZG93bicgKTtcclxuXHJcbiAga2V5U3RhdGVUcmFja2VyWyAna2V5ZG93blVwZGF0ZScgXSggdGFiS2V5RG93bkV2ZW50ICk7XHJcbiAgYXNzZXJ0Lm9rKCAha2V5U3RhdGVUcmFja2VyLmlzS2V5RG93biggS2V5Ym9hcmRVdGlscy5LRVlfVEFCICksICd0YWIga2V5IG5vdCByZWdpc3RlcmVkIHdoZW4gZGlzYWJsZWQnICk7XHJcblxyXG4gIGtleVN0YXRlVHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHNoaWZ0VGFiS2V5RG93bkV2ZW50ICk7XHJcblxyXG4gIGFzc2VydC5vayggIWtleVN0YXRlVHJhY2tlci5pc0tleURvd24oIEtleWJvYXJkVXRpbHMuS0VZX1NISUZUX0xFRlQgKSwgJ3NoaWZ0IGtleSBzaG91bGQgbm90IGJlIGRvd24nICk7XHJcblxyXG5cclxuICBrZXlTdGF0ZVRyYWNrZXIuZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gIGtleVN0YXRlVHJhY2tlclsgJ2tleWRvd25VcGRhdGUnIF0oIHNoaWZ0VGFiS2V5RG93bkV2ZW50ICk7XHJcblxyXG4gIGFzc2VydC5vaygga2V5U3RhdGVUcmFja2VyLmlzS2V5RG93biggS2V5Ym9hcmRVdGlscy5LRVlfU0hJRlRfTEVGVCApLCAnc2hpZnQga2V5IHNob3VsZCBiZSBkb3duJyApO1xyXG4gIGFzc2VydC5vaygga2V5U3RhdGVUcmFja2VyLmlzS2V5RG93biggS2V5Ym9hcmRVdGlscy5LRVlfVEFCICksICd0YWIga2V5IHNob3VsZCAgYmUgZG93bicgKTtcclxuXHJcbn0gKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0EsT0FBT0EsU0FBUyxNQUFNLCtCQUErQjtBQUNyRCxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBQzlDLE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7O0FBRWxEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUMsZUFBZSxHQUFHLElBQUlDLGFBQWEsQ0FBRSxTQUFTLEVBQUU7RUFBRUMsSUFBSSxFQUFFSixhQUFhLENBQUNLO0FBQVEsQ0FBRSxDQUFDO0FBQ3ZGLE1BQU1DLGFBQWEsR0FBRyxJQUFJSCxhQUFhLENBQUUsT0FBTyxFQUFFO0VBQUVDLElBQUksRUFBRUosYUFBYSxDQUFDSztBQUFRLENBQUUsQ0FBQztBQUNuRixNQUFNRSxpQkFBaUIsR0FBRyxJQUFJSixhQUFhLENBQUUsU0FBUyxFQUFFO0VBQUVDLElBQUksRUFBRUosYUFBYSxDQUFDUTtBQUFVLENBQUUsQ0FBQztBQUMzRixN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