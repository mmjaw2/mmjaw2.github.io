// Copyright 2019-2023, University of Colorado Boulder

/**
 * Static CSS style for elements of the PDOM (siblings of PDOMPeer). Adds the styling directly to SceneryStyle,
 * but also exports the class names for root and siblings for where elements are created or retrieved
 * by document.getElementsByClassName().
 *
 * REVIEW: Rename this to AccessiblePDOMStyle (or something more universal)
 *   - For all usages of "sibling" in this file.
 *
 * @author Jesse Greenberg
 */

import { scenery, SceneryStyle } from '../../imports.js';

// constants
const SIBLING_CLASS_NAME = 'a11y-pdom-element';
const ROOT_CLASS_NAME = 'a11y-pdom-root';
const LIST_ITEM_CLASS_NAME = 'a11y-pdom-list-item';

// All elements that use PDOMUtils.createElement should have this style. The only exception is the root of
// the PDOM, which should use root class attributes instead.
SceneryStyle.addRule(`.${SIBLING_CLASS_NAME}{` +
// 'fixed' positions elements relative to the ViewPort (global coordinate frame), a requirement for the approach
// in PDOMPeer.positionElements
'position: fixed;' +
// ABSOLUTELY CRITICAL - so PDOM elements do not interfere with rest of scenery input
'pointer-events: none;' +
// default, to the 'relative' root PDOM element - will change with node transform if focusable
'top: 0px;' + 'left: 0px;' +
// for CSS transformations of focusable elements, origin at left top
'transform-origin: left top 0px;' +
// helps get accurate bounds with getBoundingClientRect() for transformations
'border-width: 0px;' + 'border: 0px;' + 'padding: 1px 1px;' +
// cannot be zero, otherwise certain elements will have undefined width and height
'margin: 0px;' + 'white-space: nowrap;' +
// to remove the default focus highlight around HTML elements
'outline: none;' + 'box-shadow:none;' + 'border-color:transparent;' +
// So that elements can never be seen visually, can comment this out to "see" transformed elements in the
// PDOM. Text is made very small so that it doesn't extend into the display. Very low opacity on the root takes care of the rest.
'font-size: 1px;' +
// must be at least 1px to be readable with AT

// adding this clip area seems to prevent Safari from doing expensive DOM layout calculations every change.
// Surprisingly, there is no performance benefit if this is put on the root element.
// see https://github.com/phetsims/scenery/issues/663
'clip: rect(1px, 1px, 1px, 1px);' + '}');
SceneryStyle.addRule(`.${ROOT_CLASS_NAME}{` +
// so that this root can also be positioned
'position: absolute;' +
// 'fixed' positioned elements interfere with workarounds that are meant to prevent Safari from going to sleep
// when the browser is left inactive for a few minutes. This z-index keeps the PDOM from interfering, while still
// allowing us to use `fixed`. If the PDOM elements are ever styled with position: 'absolute' (would require
// PDOM elements to be positioned relative to focusable ancestors rather than viewport), this could be removed.
// See https://github.com/phetsims/joist/blob/main/js/Heartbeat.js as well for the workaround.
'z-index: 1;' +
// JUST FOR DEBUGGING! So you can see the PDOM on top of other graphical content
// 'z-index: 5000;' +

// a catch all for things that are not hidden by the styling on descendants of the root (for example
// there is no other way to hide or style check boxes with CSS)
'opacity: 0.0001;' + '}');
SceneryStyle.addRule(`.${LIST_ITEM_CLASS_NAME}{` +
// removing list styling prevents a VoiceOver behavior where 'bullet' is read in a confusing way.
// Add the LIST_ITEM_CLASS_NAME class with setPDOMClass() to Nodes represented with 'li'
// siblings to prevent this. See https://github.com/phetsims/a11y-research/issues/158.
'list-style: none;');
const PDOMSiblingStyle = {
  SIBLING_CLASS_NAME: SIBLING_CLASS_NAME,
  ROOT_CLASS_NAME: ROOT_CLASS_NAME,
  LIST_ITEM_CLASS_NAME: LIST_ITEM_CLASS_NAME
};
scenery.register('PDOMSiblingStyle', PDOMSiblingStyle);
export default PDOMSiblingStyle;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2VuZXJ5IiwiU2NlbmVyeVN0eWxlIiwiU0lCTElOR19DTEFTU19OQU1FIiwiUk9PVF9DTEFTU19OQU1FIiwiTElTVF9JVEVNX0NMQVNTX05BTUUiLCJhZGRSdWxlIiwiUERPTVNpYmxpbmdTdHlsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUERPTVNpYmxpbmdTdHlsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTdGF0aWMgQ1NTIHN0eWxlIGZvciBlbGVtZW50cyBvZiB0aGUgUERPTSAoc2libGluZ3Mgb2YgUERPTVBlZXIpLiBBZGRzIHRoZSBzdHlsaW5nIGRpcmVjdGx5IHRvIFNjZW5lcnlTdHlsZSxcclxuICogYnV0IGFsc28gZXhwb3J0cyB0aGUgY2xhc3MgbmFtZXMgZm9yIHJvb3QgYW5kIHNpYmxpbmdzIGZvciB3aGVyZSBlbGVtZW50cyBhcmUgY3JlYXRlZCBvciByZXRyaWV2ZWRcclxuICogYnkgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgpLlxyXG4gKlxyXG4gKiBSRVZJRVc6IFJlbmFtZSB0aGlzIHRvIEFjY2Vzc2libGVQRE9NU3R5bGUgKG9yIHNvbWV0aGluZyBtb3JlIHVuaXZlcnNhbClcclxuICogICAtIEZvciBhbGwgdXNhZ2VzIG9mIFwic2libGluZ1wiIGluIHRoaXMgZmlsZS5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmdcclxuICovXHJcblxyXG5pbXBvcnQgeyBzY2VuZXJ5LCBTY2VuZXJ5U3R5bGUgfSBmcm9tICcuLi8uLi9pbXBvcnRzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBTSUJMSU5HX0NMQVNTX05BTUUgPSAnYTExeS1wZG9tLWVsZW1lbnQnO1xyXG5jb25zdCBST09UX0NMQVNTX05BTUUgPSAnYTExeS1wZG9tLXJvb3QnO1xyXG5jb25zdCBMSVNUX0lURU1fQ0xBU1NfTkFNRSA9ICdhMTF5LXBkb20tbGlzdC1pdGVtJztcclxuXHJcbi8vIEFsbCBlbGVtZW50cyB0aGF0IHVzZSBQRE9NVXRpbHMuY3JlYXRlRWxlbWVudCBzaG91bGQgaGF2ZSB0aGlzIHN0eWxlLiBUaGUgb25seSBleGNlcHRpb24gaXMgdGhlIHJvb3Qgb2ZcclxuLy8gdGhlIFBET00sIHdoaWNoIHNob3VsZCB1c2Ugcm9vdCBjbGFzcyBhdHRyaWJ1dGVzIGluc3RlYWQuXHJcblNjZW5lcnlTdHlsZS5hZGRSdWxlKCBgLiR7U0lCTElOR19DTEFTU19OQU1FXHJcbiAgICAgICAgICAgICAgICAgICAgICB9e2AgK1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIC8vICdmaXhlZCcgcG9zaXRpb25zIGVsZW1lbnRzIHJlbGF0aXZlIHRvIHRoZSBWaWV3UG9ydCAoZ2xvYmFsIGNvb3JkaW5hdGUgZnJhbWUpLCBhIHJlcXVpcmVtZW50IGZvciB0aGUgYXBwcm9hY2hcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGluIFBET01QZWVyLnBvc2l0aW9uRWxlbWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbjogZml4ZWQ7JyArXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gQUJTT0xVVEVMWSBDUklUSUNBTCAtIHNvIFBET00gZWxlbWVudHMgZG8gbm90IGludGVyZmVyZSB3aXRoIHJlc3Qgb2Ygc2NlbmVyeSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzOiBub25lOycgK1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQsIHRvIHRoZSAncmVsYXRpdmUnIHJvb3QgUERPTSBlbGVtZW50IC0gd2lsbCBjaGFuZ2Ugd2l0aCBub2RlIHRyYW5zZm9ybSBpZiBmb2N1c2FibGVcclxuICAgICAgICAgICAgICAgICAgICAgICd0b3A6IDBweDsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICdsZWZ0OiAwcHg7JyArXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIENTUyB0cmFuc2Zvcm1hdGlvbnMgb2YgZm9jdXNhYmxlIGVsZW1lbnRzLCBvcmlnaW4gYXQgbGVmdCB0b3BcclxuICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IHRvcCAwcHg7JyArXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gaGVscHMgZ2V0IGFjY3VyYXRlIGJvdW5kcyB3aXRoIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIGZvciB0cmFuc2Zvcm1hdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICdib3JkZXItd2lkdGg6IDBweDsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICdib3JkZXI6IDBweDsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICdwYWRkaW5nOiAxcHggMXB4OycgKyAvLyBjYW5ub3QgYmUgemVybywgb3RoZXJ3aXNlIGNlcnRhaW4gZWxlbWVudHMgd2lsbCBoYXZlIHVuZGVmaW5lZCB3aWR0aCBhbmQgaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAnbWFyZ2luOiAwcHg7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnd2hpdGUtc3BhY2U6IG5vd3JhcDsnICtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyB0byByZW1vdmUgdGhlIGRlZmF1bHQgZm9jdXMgaGlnaGxpZ2h0IGFyb3VuZCBIVE1MIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAnb3V0bGluZTogbm9uZTsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICdib3gtc2hhZG93Om5vbmU7JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnYm9yZGVyLWNvbG9yOnRyYW5zcGFyZW50OycgK1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIC8vIFNvIHRoYXQgZWxlbWVudHMgY2FuIG5ldmVyIGJlIHNlZW4gdmlzdWFsbHksIGNhbiBjb21tZW50IHRoaXMgb3V0IHRvIFwic2VlXCIgdHJhbnNmb3JtZWQgZWxlbWVudHMgaW4gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBQRE9NLiBUZXh0IGlzIG1hZGUgdmVyeSBzbWFsbCBzbyB0aGF0IGl0IGRvZXNuJ3QgZXh0ZW5kIGludG8gdGhlIGRpc3BsYXkuIFZlcnkgbG93IG9wYWNpdHkgb24gdGhlIHJvb3QgdGFrZXMgY2FyZSBvZiB0aGUgcmVzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICdmb250LXNpemU6IDFweDsnICsgLy8gbXVzdCBiZSBhdCBsZWFzdCAxcHggdG8gYmUgcmVhZGFibGUgd2l0aCBBVFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZGluZyB0aGlzIGNsaXAgYXJlYSBzZWVtcyB0byBwcmV2ZW50IFNhZmFyaSBmcm9tIGRvaW5nIGV4cGVuc2l2ZSBET00gbGF5b3V0IGNhbGN1bGF0aW9ucyBldmVyeSBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBTdXJwcmlzaW5nbHksIHRoZXJlIGlzIG5vIHBlcmZvcm1hbmNlIGJlbmVmaXQgaWYgdGhpcyBpcyBwdXQgb24gdGhlIHJvb3QgZWxlbWVudC5cclxuICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvNjYzXHJcbiAgICAgICAgICAgICAgICAgICAgICAnY2xpcDogcmVjdCgxcHgsIDFweCwgMXB4LCAxcHgpOycgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJ30nXHJcbik7XHJcblxyXG5TY2VuZXJ5U3R5bGUuYWRkUnVsZSggYC4ke1JPT1RfQ0xBU1NfTkFNRVxyXG4gICAgICAgICAgICAgICAgICAgICAgfXtgICtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgdGhpcyByb290IGNhbiBhbHNvIGJlIHBvc2l0aW9uZWRcclxuICAgICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbjogYWJzb2x1dGU7JyArXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gJ2ZpeGVkJyBwb3NpdGlvbmVkIGVsZW1lbnRzIGludGVyZmVyZSB3aXRoIHdvcmthcm91bmRzIHRoYXQgYXJlIG1lYW50IHRvIHByZXZlbnQgU2FmYXJpIGZyb20gZ29pbmcgdG8gc2xlZXBcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGJyb3dzZXIgaXMgbGVmdCBpbmFjdGl2ZSBmb3IgYSBmZXcgbWludXRlcy4gVGhpcyB6LWluZGV4IGtlZXBzIHRoZSBQRE9NIGZyb20gaW50ZXJmZXJpbmcsIHdoaWxlIHN0aWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBhbGxvd2luZyB1cyB0byB1c2UgYGZpeGVkYC4gSWYgdGhlIFBET00gZWxlbWVudHMgYXJlIGV2ZXIgc3R5bGVkIHdpdGggcG9zaXRpb246ICdhYnNvbHV0ZScgKHdvdWxkIHJlcXVpcmVcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIFBET00gZWxlbWVudHMgdG8gYmUgcG9zaXRpb25lZCByZWxhdGl2ZSB0byBmb2N1c2FibGUgYW5jZXN0b3JzIHJhdGhlciB0aGFuIHZpZXdwb3J0KSwgdGhpcyBjb3VsZCBiZSByZW1vdmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9ibG9iL21haW4vanMvSGVhcnRiZWF0LmpzIGFzIHdlbGwgZm9yIHRoZSB3b3JrYXJvdW5kLlxyXG4gICAgICAgICAgICAgICAgICAgICAgJ3otaW5kZXg6IDE7JyArXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gSlVTVCBGT1IgREVCVUdHSU5HISBTbyB5b3UgY2FuIHNlZSB0aGUgUERPTSBvbiB0b3Agb2Ygb3RoZXIgZ3JhcGhpY2FsIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgIC8vICd6LWluZGV4OiA1MDAwOycgK1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIC8vIGEgY2F0Y2ggYWxsIGZvciB0aGluZ3MgdGhhdCBhcmUgbm90IGhpZGRlbiBieSB0aGUgc3R5bGluZyBvbiBkZXNjZW5kYW50cyBvZiB0aGUgcm9vdCAoZm9yIGV4YW1wbGVcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIG90aGVyIHdheSB0byBoaWRlIG9yIHN0eWxlIGNoZWNrIGJveGVzIHdpdGggQ1NTKVxyXG4gICAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHk6IDAuMDAwMTsnICtcclxuICAgICAgICAgICAgICAgICAgICAgICd9J1xyXG4pO1xyXG5cclxuU2NlbmVyeVN0eWxlLmFkZFJ1bGUoIGAuJHtMSVNUX0lURU1fQ0xBU1NfTkFNRVxyXG4gICAgICAgICAgICAgICAgICAgICAgfXtgICtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyBsaXN0IHN0eWxpbmcgcHJldmVudHMgYSBWb2ljZU92ZXIgYmVoYXZpb3Igd2hlcmUgJ2J1bGxldCcgaXMgcmVhZCBpbiBhIGNvbmZ1c2luZyB3YXkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIExJU1RfSVRFTV9DTEFTU19OQU1FIGNsYXNzIHdpdGggc2V0UERPTUNsYXNzKCkgdG8gTm9kZXMgcmVwcmVzZW50ZWQgd2l0aCAnbGknXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBzaWJsaW5ncyB0byBwcmV2ZW50IHRoaXMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYTExeS1yZXNlYXJjaC9pc3N1ZXMvMTU4LlxyXG4gICAgICAgICAgICAgICAgICAgICAgJ2xpc3Qtc3R5bGU6IG5vbmU7J1xyXG4pO1xyXG5cclxuY29uc3QgUERPTVNpYmxpbmdTdHlsZSA9IHtcclxuICBTSUJMSU5HX0NMQVNTX05BTUU6IFNJQkxJTkdfQ0xBU1NfTkFNRSxcclxuICBST09UX0NMQVNTX05BTUU6IFJPT1RfQ0xBU1NfTkFNRSxcclxuICBMSVNUX0lURU1fQ0xBU1NfTkFNRTogTElTVF9JVEVNX0NMQVNTX05BTUVcclxufTtcclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdQRE9NU2libGluZ1N0eWxlJywgUERPTVNpYmxpbmdTdHlsZSApO1xyXG5leHBvcnQgZGVmYXVsdCBQRE9NU2libGluZ1N0eWxlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsT0FBTyxFQUFFQyxZQUFZLFFBQVEsa0JBQWtCOztBQUV4RDtBQUNBLE1BQU1DLGtCQUFrQixHQUFHLG1CQUFtQjtBQUM5QyxNQUFNQyxlQUFlLEdBQUcsZ0JBQWdCO0FBQ3hDLE1BQU1DLG9CQUFvQixHQUFHLHFCQUFxQjs7QUFFbEQ7QUFDQTtBQUNBSCxZQUFZLENBQUNJLE9BQU8sQ0FBRyxJQUFHSCxrQkFDSCxHQUFFO0FBRUg7QUFDQTtBQUNBLGtCQUFrQjtBQUVsQjtBQUNBLHVCQUF1QjtBQUV2QjtBQUNBLFdBQVcsR0FDWCxZQUFZO0FBRVo7QUFDQSxpQ0FBaUM7QUFFakM7QUFDQSxvQkFBb0IsR0FDcEIsY0FBYyxHQUNkLG1CQUFtQjtBQUFHO0FBQ3RCLGNBQWMsR0FDZCxzQkFBc0I7QUFFdEI7QUFDQSxnQkFBZ0IsR0FDaEIsa0JBQWtCLEdBQ2xCLDJCQUEyQjtBQUUzQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQUc7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxHQUNqQyxHQUN0QixDQUFDO0FBRURELFlBQVksQ0FBQ0ksT0FBTyxDQUFHLElBQUdGLGVBQ0gsR0FBRTtBQUNIO0FBQ0EscUJBQXFCO0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLEdBQ2xCLEdBQ3RCLENBQUM7QUFFREYsWUFBWSxDQUFDSSxPQUFPLENBQUcsSUFBR0Qsb0JBQ0gsR0FBRTtBQUVIO0FBQ0E7QUFDQTtBQUNBLG1CQUN0QixDQUFDO0FBRUQsTUFBTUUsZ0JBQWdCLEdBQUc7RUFDdkJKLGtCQUFrQixFQUFFQSxrQkFBa0I7RUFDdENDLGVBQWUsRUFBRUEsZUFBZTtFQUNoQ0Msb0JBQW9CLEVBQUVBO0FBQ3hCLENBQUM7QUFFREosT0FBTyxDQUFDTyxRQUFRLENBQUUsa0JBQWtCLEVBQUVELGdCQUFpQixDQUFDO0FBQ3hELGVBQWVBLGdCQUFnQiIsImlnbm9yZUxpc3QiOltdfQ==