// Copyright 2017-2023, University of Colorado Boulder

/**
 * Collection of utility constants and functions for managing keyboard input. Constants are values of Event.code, as
 * well as helper functions and collections.
 *
 * @author Jesse Greenberg
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import validate from '../../../axon/js/validate.js';
import { scenery } from '../imports.js';
const KEY_RIGHT_ARROW = 'ArrowRight';
const KEY_LEFT_ARROW = 'ArrowLeft';
const KEY_UP_ARROW = 'ArrowUp';
const KEY_DOWN_ARROW = 'ArrowDown';
const KEY_SHIFT_RIGHT = 'ShiftRight';
const KEY_SHIFT_LEFT = 'ShiftLeft';
const KEY_CONTROL_LEFT = 'ControlLeft';
const KEY_CONTROL_RIGHT = 'ControlRight';
const KEY_ALT_LEFT = 'AltLeft';
const KEY_ALT_RIGHT = 'AltRight';
const KEY_META_LEFT = 'MetaLeft';
const KEY_META_RIGHT = 'MetaRight';
const KEY_META_LEFT_FIREFOX = 'OSLeft'; // FF specific codes for meta keys
const KEY_META_RIGHT_FIREFOX = 'OSRight';
const KEY_W = 'KeyW';
const KEY_A = 'KeyA';
const KEY_S = 'KeyS';
const KEY_D = 'KeyD';
const KEY_0 = 'Digit0';
const KEY_1 = 'Digit1';
const KEY_2 = 'Digit2';
const KEY_3 = 'Digit3';
const KEY_4 = 'Digit4';
const KEY_5 = 'Digit5';
const KEY_6 = 'Digit6';
const KEY_7 = 'Digit7';
const KEY_8 = 'Digit8';
const KEY_9 = 'Digit9';

// These are `KeyboardEvent.key` values! The difference is necessary because KeyboardEvent.code distinguishes between
// left and right, but we often need to watch for both at the same time.
const KEY_ALT = 'Alt';
const KEY_SHIFT = 'Shift';
const KEY_CONTROL = 'Control';
const ARROW_KEYS = [KEY_RIGHT_ARROW, KEY_LEFT_ARROW, KEY_UP_ARROW, KEY_DOWN_ARROW];
const WASD_KEYS = [KEY_W, KEY_S, KEY_A, KEY_D];
const NUMBER_KEYS = [KEY_0, KEY_1, KEY_2, KEY_3, KEY_4, KEY_5, KEY_6, KEY_7, KEY_8, KEY_9];
const SHIFT_KEYS = [KEY_SHIFT_LEFT, KEY_SHIFT_RIGHT];
const CONTROL_KEYS = [KEY_CONTROL_LEFT, KEY_CONTROL_RIGHT];
const ALT_KEYS = [KEY_ALT_LEFT, KEY_ALT_RIGHT];
const META_KEYS = [KEY_META_LEFT, KEY_META_RIGHT, KEY_META_LEFT_FIREFOX, KEY_META_RIGHT_FIREFOX];

// These are KeyboardEvent.key values, excluding left/right KeyboardEvent.codes
const MODIFIER_KEYS = [KEY_ALT, KEY_CONTROL, KEY_SHIFT];

// These are KeyboardEvent.code values for modifier keys
const MODIFIER_KEY_CODES = [KEY_ALT_LEFT, KEY_ALT_RIGHT, KEY_CONTROL_LEFT, KEY_CONTROL_RIGHT, KEY_SHIFT_LEFT, KEY_SHIFT_RIGHT, KEY_META_LEFT, KEY_META_RIGHT, KEY_META_LEFT_FIREFOX, KEY_META_RIGHT_FIREFOX];
const DOM_EVENT_VALIDATOR = {
  valueType: Event
};
const ALL_KEY_CODES = [];

/**
 * @extends {Object}
 * @type {{KEY_A: string, KEY_C: string, KEY_DOWN_ARROW: string, KEY_DELETE: string, KEY_B: string, KEY_E: string, KEY_D: string, KEY_G: string, KEY_F: string, KEY_I: string, KEY_H: string, KEY_K: string, KEY_RIGHT_ARROW: string, KEY_J: string, isArrowKey(Event): boolean, KEY_M: string, KEY_L: string, KEY_O: string, KEY_N: string, KEY_Q: string, KEY_P: string, KEY_S: string, KEY_BACKSPACE: string, KEY_R: string, KEY_U: string, KEY_MINUS: string, KEY_T: string, isMovementKey(Event): boolean, KEY_W: string, KEY_V: string, CONTROL_KEYS: (string)[], KEY_Y: string, KEY_X: string, getNumberFromCode(Event): (number|null), isAltKey(KeyboardEvent): *, KEY_Z: string, ARROW_KEYS: (string)[], KEY_SHIFT_LEFT: string, KEY_HOME: string, KEY_ESCAPE: string, isShiftKey(KeyboardEvent): *, KEY_ALT_LEFT: string, KEY_LEFT_ARROW: string, KEY_TAB: string, isAnyKeyEvent(x:Event, y:Array<string>): boolean, getEventCode(Event): (string|null), KEY_EQUALS: string, KEY_PAGE_UP: string, KEY_ALT_RIGHT: string, isWASDKey(Event): boolean, ALT_KEYS: (string)[], KEY_PAGE_DOWN: string, isNumberKey(Event): boolean, SHIFT_KEYS: (string)[], KEY_PLUS: string, WASD_KEYS: (string)[], isControlKey(KeyboardEvent): *, KEY_SHIFT_RIGHT: string, isRangeKey(Event): boolean, KEY_CONTROL_RIGHT: string, KEY_ENTER: string, isKeyEvent(Event, string): boolean, KEY_UP_ARROW: string, KEY_1: string, KEY_0: string, KEY_CONTROL_LEFT: string, KEY_3: string, KEY_2: string, KEY_5: string, KEY_4: string, KEY_7: string, KEY_6: string, KEY_9: string, MOVEMENT_KEYS: (string)[], KEY_8: string, KEY_SPACE: string, KEY_END: string}}
 */
const KeyboardUtils = {
  KEY_SPACE: 'Space',
  KEY_ENTER: 'Enter',
  KEY_TAB: 'Tab',
  KEY_RIGHT_ARROW: KEY_RIGHT_ARROW,
  KEY_LEFT_ARROW: KEY_LEFT_ARROW,
  KEY_UP_ARROW: KEY_UP_ARROW,
  KEY_DOWN_ARROW: KEY_DOWN_ARROW,
  KEY_SHIFT_LEFT: KEY_SHIFT_LEFT,
  KEY_SHIFT_RIGHT: KEY_SHIFT_RIGHT,
  KEY_ALT_LEFT: KEY_ALT_LEFT,
  KEY_ALT_RIGHT: KEY_ALT_RIGHT,
  KEY_CONTROL_LEFT: KEY_CONTROL_LEFT,
  KEY_CONTROL_RIGHT: KEY_CONTROL_RIGHT,
  KEY_META_LEFT: KEY_META_LEFT,
  KEY_META_RIGHT: KEY_META_RIGHT,
  KEY_META_LEFT_FIREFOX: KEY_META_LEFT_FIREFOX,
  KEY_META_RIGHT_FIREFOX: KEY_META_RIGHT_FIREFOX,
  KEY_SHIFT: KEY_SHIFT,
  KEY_ALT: KEY_ALT,
  KEY_CONTROL: KEY_CONTROL,
  KEY_ESCAPE: 'Escape',
  KEY_DELETE: 'Delete',
  KEY_BACKSPACE: 'Backspace',
  KEY_PAGE_UP: 'PageUp',
  KEY_PAGE_DOWN: 'PageDown',
  KEY_END: 'End',
  KEY_HOME: 'Home',
  KEY_0: KEY_0,
  KEY_1: KEY_1,
  KEY_2: KEY_2,
  KEY_3: KEY_3,
  KEY_4: KEY_4,
  KEY_5: KEY_5,
  KEY_6: KEY_6,
  KEY_7: KEY_7,
  KEY_8: KEY_8,
  KEY_9: KEY_9,
  KEY_NUMPAD_0: 'Numpad0',
  KEY_NUMPAD_1: 'Numpad1',
  KEY_NUMPAD_2: 'Numpad2',
  KEY_NUMPAD_3: 'Numpad3',
  KEY_NUMPAD_4: 'Numpad4',
  KEY_NUMPAD_5: 'Numpad5',
  KEY_NUMPAD_6: 'Numpad6',
  KEY_NUMPAD_7: 'Numpad7',
  KEY_NUMPAD_8: 'Numpad8',
  KEY_NUMPAD_9: 'Numpad9',
  KEY_NUMPAD_DECIMAL: 'NumpadDecimal',
  KEY_NUMPAD_PLUS: 'NumpadAdd',
  KEY_NUMPAD_MINUS: 'NumpadSubtract',
  KEY_A: 'KeyA',
  KEY_B: 'KeyB',
  KEY_C: 'KeyC',
  KEY_D: 'KeyD',
  KEY_E: 'KeyE',
  KEY_F: 'KeyF',
  KEY_G: 'KeyG',
  KEY_H: 'KeyH',
  KEY_I: 'KeyI',
  KEY_J: 'KeyJ',
  KEY_K: 'KeyK',
  KEY_L: 'KeyL',
  KEY_M: 'KeyM',
  KEY_N: 'KeyN',
  KEY_O: 'KeyO',
  KEY_P: 'KeyP',
  KEY_Q: 'KeyQ',
  KEY_R: 'KeyR',
  KEY_S: 'KeyS',
  KEY_T: 'KeyT',
  KEY_U: 'KeyU',
  KEY_V: 'KeyV',
  KEY_W: 'KeyW',
  KEY_X: 'KeyX',
  KEY_Y: 'KeyY',
  KEY_Z: 'KeyZ',
  // "Equals" and "Plus" share the same event.code, check for distinction with shift modifier key
  KEY_EQUALS: 'Equal',
  KEY_PLUS: 'Equal',
  KEY_MINUS: 'Minus',
  KEY_PERIOD: 'Period',
  ARROW_KEYS: ARROW_KEYS,
  WASD_KEYS: WASD_KEYS,
  MOVEMENT_KEYS: ARROW_KEYS.concat(WASD_KEYS),
  SHIFT_KEYS: SHIFT_KEYS,
  CONTROL_KEYS: CONTROL_KEYS,
  ALT_KEYS: ALT_KEYS,
  META_KEYS: META_KEYS,
  // The collection of modifier key codes
  MODIFIER_KEY_CODES: MODIFIER_KEY_CODES,
  // Maps a KeyboardEvent.key to the left/right pair of KeyboardEvent.code for modifier keys
  MODIFIER_KEY_TO_CODE_MAP: new Map([[KEY_ALT, ALT_KEYS], [KEY_SHIFT, SHIFT_KEYS], [KEY_CONTROL, CONTROL_KEYS]]),
  /**
   * Returns whether the key corresponds to pressing an arrow key
   */
  isArrowKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, ARROW_KEYS);
  },
  /**
   * Returns true if key is one of keys used for range inputs
   */
  isRangeKey(domEvent) {
    return KeyboardUtils.isArrowKey(domEvent) || KeyboardUtils.isAnyKeyEvent(domEvent, [KeyboardUtils.KEY_PAGE_UP, KeyboardUtils.KEY_PAGE_DOWN, KeyboardUtils.KEY_HOME, KeyboardUtils.KEY_END]);
  },
  /**
   * Returns whether or not the key corresponds to pressing a number key
   */
  isNumberKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, NUMBER_KEYS);
  },
  /**
   * For number keys, return the number of the key, or null if not a number
   */
  getNumberFromCode(domEvent) {
    if (KeyboardUtils.isNumberKey(domEvent) && domEvent instanceof KeyboardEvent) {
      return Number(domEvent.code.replace('Digit', ''));
    }
    return null;
  },
  /**
   * Event.code distinguishes between left and right shift keys. If all you care about is the presence
   * of a shift key you can use this.
   */
  isShiftKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, SHIFT_KEYS);
  },
  /**
   * Event.code distinguishes between left and right alt keys. If all you care about is the presence
   * of the alt key you can use this.
   */
  isAltKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, ALT_KEYS);
  },
  /**
   * Event.code distinguishes between left and right control keys. If all you care about is the presence
   * of a control key you can use this.
   */
  isControlKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, CONTROL_KEYS);
  },
  /**
   * Event.code distinguishes between left and right alt keys. If all you care about is the presence
   * of the meta key you can use this.
   */
  isMetaKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, META_KEYS);
  },
  /**
   * Returns whether or not the key corresponds to one of the WASD movement keys.
   */
  isWASDKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, WASD_KEYS);
  },
  /**
   * Returns true if the key indicates a 'movement' key in keyboard dragging
   */
  isMovementKey(domEvent) {
    return KeyboardUtils.isAnyKeyEvent(domEvent, KeyboardUtils.MOVEMENT_KEYS);
  },
  /**
   * If the domEvent corresponds to any of the provided keys in the list.
   */
  isAnyKeyEvent(domEvent, keyboardUtilsKeys) {
    validate(domEvent, DOM_EVENT_VALIDATOR);
    const code = KeyboardUtils.getEventCode(domEvent);
    return code ? keyboardUtilsKeys.includes(code) : false;
  },
  /**
   * Whether the event was of the provided KeyboardUtils string.
   */
  isKeyEvent(domEvent, keyboardUtilsKey) {
    return KeyboardUtils.getEventCode(domEvent) === keyboardUtilsKey;
  },
  /**
   * Returns a string with the event.code that can be used to determine the keyboard keys of a KeyboardEvent object.
   * Otherwise, returns null if there is no code on the event. An example usage might look like
   *
   *  const key = KeyboardUtils.getEventCode( domEvent );
   *  if ( key === KeyboardUtils.KEY_A ) {
   *    // You pressed the A key!
   *  }
   *
   * @returns - null if there is no `code` property on the provided Event.
   */
  getEventCode(domEvent) {
    let eventCode = null;
    if (domEvent instanceof KeyboardEvent && domEvent.code) {
      eventCode = domEvent.code;

      // For Numpad keys, the DomEvent.code does not match the equivalent "normal" keyboard key, but the DomEvent.key
      // will match the code of the "normal" key. In those cases (home/page up/page down/end) use the key as the code.
      if (eventCode.startsWith('Numpad') && ALL_KEY_CODES.includes(domEvent.key)) {
        eventCode = domEvent.key;
      }
    }
    return eventCode;
  },
  /**
   * Returns true when if the provided string is a KeyboardEvent.key for a modifier key. Note that is KeyboardEvent.key
   * **NOT** KeyboardEvent.code. KeyboardEvent.code does not distinguish between left and right modifier keys so we
   * have some special behavior when we detect a modifier key (left or right) is pressed.
   * @param key
   */
  isModifierKey(key) {
    return MODIFIER_KEYS.includes(key);
  },
  ALL_KEYS: ALL_KEY_CODES
};
for (const keyKey in KeyboardUtils) {
  // @ts-expect-error No functions or key-groups allowed
  if (KeyboardUtils.hasOwnProperty(keyKey) && typeof KeyboardUtils[keyKey] === 'string') {
    // @ts-expect-error
    ALL_KEY_CODES.push(KeyboardUtils[keyKey]);
  }
}
scenery.register('KeyboardUtils', KeyboardUtils);
export default KeyboardUtils;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsInNjZW5lcnkiLCJLRVlfUklHSFRfQVJST1ciLCJLRVlfTEVGVF9BUlJPVyIsIktFWV9VUF9BUlJPVyIsIktFWV9ET1dOX0FSUk9XIiwiS0VZX1NISUZUX1JJR0hUIiwiS0VZX1NISUZUX0xFRlQiLCJLRVlfQ09OVFJPTF9MRUZUIiwiS0VZX0NPTlRST0xfUklHSFQiLCJLRVlfQUxUX0xFRlQiLCJLRVlfQUxUX1JJR0hUIiwiS0VZX01FVEFfTEVGVCIsIktFWV9NRVRBX1JJR0hUIiwiS0VZX01FVEFfTEVGVF9GSVJFRk9YIiwiS0VZX01FVEFfUklHSFRfRklSRUZPWCIsIktFWV9XIiwiS0VZX0EiLCJLRVlfUyIsIktFWV9EIiwiS0VZXzAiLCJLRVlfMSIsIktFWV8yIiwiS0VZXzMiLCJLRVlfNCIsIktFWV81IiwiS0VZXzYiLCJLRVlfNyIsIktFWV84IiwiS0VZXzkiLCJLRVlfQUxUIiwiS0VZX1NISUZUIiwiS0VZX0NPTlRST0wiLCJBUlJPV19LRVlTIiwiV0FTRF9LRVlTIiwiTlVNQkVSX0tFWVMiLCJTSElGVF9LRVlTIiwiQ09OVFJPTF9LRVlTIiwiQUxUX0tFWVMiLCJNRVRBX0tFWVMiLCJNT0RJRklFUl9LRVlTIiwiTU9ESUZJRVJfS0VZX0NPREVTIiwiRE9NX0VWRU5UX1ZBTElEQVRPUiIsInZhbHVlVHlwZSIsIkV2ZW50IiwiQUxMX0tFWV9DT0RFUyIsIktleWJvYXJkVXRpbHMiLCJLRVlfU1BBQ0UiLCJLRVlfRU5URVIiLCJLRVlfVEFCIiwiS0VZX0VTQ0FQRSIsIktFWV9ERUxFVEUiLCJLRVlfQkFDS1NQQUNFIiwiS0VZX1BBR0VfVVAiLCJLRVlfUEFHRV9ET1dOIiwiS0VZX0VORCIsIktFWV9IT01FIiwiS0VZX05VTVBBRF8wIiwiS0VZX05VTVBBRF8xIiwiS0VZX05VTVBBRF8yIiwiS0VZX05VTVBBRF8zIiwiS0VZX05VTVBBRF80IiwiS0VZX05VTVBBRF81IiwiS0VZX05VTVBBRF82IiwiS0VZX05VTVBBRF83IiwiS0VZX05VTVBBRF84IiwiS0VZX05VTVBBRF85IiwiS0VZX05VTVBBRF9ERUNJTUFMIiwiS0VZX05VTVBBRF9QTFVTIiwiS0VZX05VTVBBRF9NSU5VUyIsIktFWV9CIiwiS0VZX0MiLCJLRVlfRSIsIktFWV9GIiwiS0VZX0ciLCJLRVlfSCIsIktFWV9JIiwiS0VZX0oiLCJLRVlfSyIsIktFWV9MIiwiS0VZX00iLCJLRVlfTiIsIktFWV9PIiwiS0VZX1AiLCJLRVlfUSIsIktFWV9SIiwiS0VZX1QiLCJLRVlfVSIsIktFWV9WIiwiS0VZX1giLCJLRVlfWSIsIktFWV9aIiwiS0VZX0VRVUFMUyIsIktFWV9QTFVTIiwiS0VZX01JTlVTIiwiS0VZX1BFUklPRCIsIk1PVkVNRU5UX0tFWVMiLCJjb25jYXQiLCJNT0RJRklFUl9LRVlfVE9fQ09ERV9NQVAiLCJNYXAiLCJpc0Fycm93S2V5IiwiZG9tRXZlbnQiLCJpc0FueUtleUV2ZW50IiwiaXNSYW5nZUtleSIsImlzTnVtYmVyS2V5IiwiZ2V0TnVtYmVyRnJvbUNvZGUiLCJLZXlib2FyZEV2ZW50IiwiTnVtYmVyIiwiY29kZSIsInJlcGxhY2UiLCJpc1NoaWZ0S2V5IiwiaXNBbHRLZXkiLCJpc0NvbnRyb2xLZXkiLCJpc01ldGFLZXkiLCJpc1dBU0RLZXkiLCJpc01vdmVtZW50S2V5Iiwia2V5Ym9hcmRVdGlsc0tleXMiLCJnZXRFdmVudENvZGUiLCJpbmNsdWRlcyIsImlzS2V5RXZlbnQiLCJrZXlib2FyZFV0aWxzS2V5IiwiZXZlbnRDb2RlIiwic3RhcnRzV2l0aCIsImtleSIsImlzTW9kaWZpZXJLZXkiLCJBTExfS0VZUyIsImtleUtleSIsImhhc093blByb3BlcnR5IiwicHVzaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiS2V5Ym9hcmRVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDb2xsZWN0aW9uIG9mIHV0aWxpdHkgY29uc3RhbnRzIGFuZCBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGtleWJvYXJkIGlucHV0LiBDb25zdGFudHMgYXJlIHZhbHVlcyBvZiBFdmVudC5jb2RlLCBhc1xyXG4gKiB3ZWxsIGFzIGhlbHBlciBmdW5jdGlvbnMgYW5kIGNvbGxlY3Rpb25zLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZ1xyXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4uLy4uLy4uL2F4b24vanMvdmFsaWRhdGUuanMnO1xyXG5pbXBvcnQgeyBzY2VuZXJ5IH0gZnJvbSAnLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5jb25zdCBLRVlfUklHSFRfQVJST1cgPSAnQXJyb3dSaWdodCc7XHJcbmNvbnN0IEtFWV9MRUZUX0FSUk9XID0gJ0Fycm93TGVmdCc7XHJcbmNvbnN0IEtFWV9VUF9BUlJPVyA9ICdBcnJvd1VwJztcclxuY29uc3QgS0VZX0RPV05fQVJST1cgPSAnQXJyb3dEb3duJztcclxuY29uc3QgS0VZX1NISUZUX1JJR0hUID0gJ1NoaWZ0UmlnaHQnO1xyXG5jb25zdCBLRVlfU0hJRlRfTEVGVCA9ICdTaGlmdExlZnQnO1xyXG5jb25zdCBLRVlfQ09OVFJPTF9MRUZUID0gJ0NvbnRyb2xMZWZ0JztcclxuY29uc3QgS0VZX0NPTlRST0xfUklHSFQgPSAnQ29udHJvbFJpZ2h0JztcclxuY29uc3QgS0VZX0FMVF9MRUZUID0gJ0FsdExlZnQnO1xyXG5jb25zdCBLRVlfQUxUX1JJR0hUID0gJ0FsdFJpZ2h0JztcclxuY29uc3QgS0VZX01FVEFfTEVGVCA9ICdNZXRhTGVmdCc7XHJcbmNvbnN0IEtFWV9NRVRBX1JJR0hUID0gJ01ldGFSaWdodCc7XHJcbmNvbnN0IEtFWV9NRVRBX0xFRlRfRklSRUZPWCA9ICdPU0xlZnQnOyAvLyBGRiBzcGVjaWZpYyBjb2RlcyBmb3IgbWV0YSBrZXlzXHJcbmNvbnN0IEtFWV9NRVRBX1JJR0hUX0ZJUkVGT1ggPSAnT1NSaWdodCc7XHJcbmNvbnN0IEtFWV9XID0gJ0tleVcnO1xyXG5jb25zdCBLRVlfQSA9ICdLZXlBJztcclxuY29uc3QgS0VZX1MgPSAnS2V5Uyc7XHJcbmNvbnN0IEtFWV9EID0gJ0tleUQnO1xyXG5jb25zdCBLRVlfMCA9ICdEaWdpdDAnO1xyXG5jb25zdCBLRVlfMSA9ICdEaWdpdDEnO1xyXG5jb25zdCBLRVlfMiA9ICdEaWdpdDInO1xyXG5jb25zdCBLRVlfMyA9ICdEaWdpdDMnO1xyXG5jb25zdCBLRVlfNCA9ICdEaWdpdDQnO1xyXG5jb25zdCBLRVlfNSA9ICdEaWdpdDUnO1xyXG5jb25zdCBLRVlfNiA9ICdEaWdpdDYnO1xyXG5jb25zdCBLRVlfNyA9ICdEaWdpdDcnO1xyXG5jb25zdCBLRVlfOCA9ICdEaWdpdDgnO1xyXG5jb25zdCBLRVlfOSA9ICdEaWdpdDknO1xyXG5cclxuLy8gVGhlc2UgYXJlIGBLZXlib2FyZEV2ZW50LmtleWAgdmFsdWVzISBUaGUgZGlmZmVyZW5jZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSBLZXlib2FyZEV2ZW50LmNvZGUgZGlzdGluZ3Vpc2hlcyBiZXR3ZWVuXHJcbi8vIGxlZnQgYW5kIHJpZ2h0LCBidXQgd2Ugb2Z0ZW4gbmVlZCB0byB3YXRjaCBmb3IgYm90aCBhdCB0aGUgc2FtZSB0aW1lLlxyXG5jb25zdCBLRVlfQUxUID0gJ0FsdCc7XHJcbmNvbnN0IEtFWV9TSElGVCA9ICdTaGlmdCc7XHJcbmNvbnN0IEtFWV9DT05UUk9MID0gJ0NvbnRyb2wnO1xyXG5cclxuY29uc3QgQVJST1dfS0VZUyA9IFsgS0VZX1JJR0hUX0FSUk9XLCBLRVlfTEVGVF9BUlJPVywgS0VZX1VQX0FSUk9XLCBLRVlfRE9XTl9BUlJPVyBdO1xyXG5jb25zdCBXQVNEX0tFWVMgPSBbIEtFWV9XLCBLRVlfUywgS0VZX0EsIEtFWV9EIF07XHJcbmNvbnN0IE5VTUJFUl9LRVlTID0gWyBLRVlfMCwgS0VZXzEsIEtFWV8yLCBLRVlfMywgS0VZXzQsIEtFWV81LCBLRVlfNiwgS0VZXzcsIEtFWV84LCBLRVlfOSBdO1xyXG5jb25zdCBTSElGVF9LRVlTID0gWyBLRVlfU0hJRlRfTEVGVCwgS0VZX1NISUZUX1JJR0hUIF07XHJcbmNvbnN0IENPTlRST0xfS0VZUyA9IFsgS0VZX0NPTlRST0xfTEVGVCwgS0VZX0NPTlRST0xfUklHSFQgXTtcclxuY29uc3QgQUxUX0tFWVMgPSBbIEtFWV9BTFRfTEVGVCwgS0VZX0FMVF9SSUdIVCBdO1xyXG5jb25zdCBNRVRBX0tFWVMgPSBbIEtFWV9NRVRBX0xFRlQsIEtFWV9NRVRBX1JJR0hULCBLRVlfTUVUQV9MRUZUX0ZJUkVGT1gsIEtFWV9NRVRBX1JJR0hUX0ZJUkVGT1ggXTtcclxuXHJcbi8vIFRoZXNlIGFyZSBLZXlib2FyZEV2ZW50LmtleSB2YWx1ZXMsIGV4Y2x1ZGluZyBsZWZ0L3JpZ2h0IEtleWJvYXJkRXZlbnQuY29kZXNcclxuY29uc3QgTU9ESUZJRVJfS0VZUyA9IFsgS0VZX0FMVCwgS0VZX0NPTlRST0wsIEtFWV9TSElGVCBdO1xyXG5cclxuLy8gVGhlc2UgYXJlIEtleWJvYXJkRXZlbnQuY29kZSB2YWx1ZXMgZm9yIG1vZGlmaWVyIGtleXNcclxuY29uc3QgTU9ESUZJRVJfS0VZX0NPREVTID0gWyBLRVlfQUxUX0xFRlQsIEtFWV9BTFRfUklHSFQsIEtFWV9DT05UUk9MX0xFRlQsIEtFWV9DT05UUk9MX1JJR0hULCBLRVlfU0hJRlRfTEVGVCwgS0VZX1NISUZUX1JJR0hULCBLRVlfTUVUQV9MRUZULCBLRVlfTUVUQV9SSUdIVCwgS0VZX01FVEFfTEVGVF9GSVJFRk9YLCBLRVlfTUVUQV9SSUdIVF9GSVJFRk9YIF07XHJcblxyXG5jb25zdCBET01fRVZFTlRfVkFMSURBVE9SID0geyB2YWx1ZVR5cGU6IEV2ZW50IH07XHJcbmNvbnN0IEFMTF9LRVlfQ09ERVM6IHN0cmluZ1tdID0gW107XHJcblxyXG4vKipcclxuICogQGV4dGVuZHMge09iamVjdH1cclxuICogQHR5cGUge3tLRVlfQTogc3RyaW5nLCBLRVlfQzogc3RyaW5nLCBLRVlfRE9XTl9BUlJPVzogc3RyaW5nLCBLRVlfREVMRVRFOiBzdHJpbmcsIEtFWV9COiBzdHJpbmcsIEtFWV9FOiBzdHJpbmcsIEtFWV9EOiBzdHJpbmcsIEtFWV9HOiBzdHJpbmcsIEtFWV9GOiBzdHJpbmcsIEtFWV9JOiBzdHJpbmcsIEtFWV9IOiBzdHJpbmcsIEtFWV9LOiBzdHJpbmcsIEtFWV9SSUdIVF9BUlJPVzogc3RyaW5nLCBLRVlfSjogc3RyaW5nLCBpc0Fycm93S2V5KEV2ZW50KTogYm9vbGVhbiwgS0VZX006IHN0cmluZywgS0VZX0w6IHN0cmluZywgS0VZX086IHN0cmluZywgS0VZX046IHN0cmluZywgS0VZX1E6IHN0cmluZywgS0VZX1A6IHN0cmluZywgS0VZX1M6IHN0cmluZywgS0VZX0JBQ0tTUEFDRTogc3RyaW5nLCBLRVlfUjogc3RyaW5nLCBLRVlfVTogc3RyaW5nLCBLRVlfTUlOVVM6IHN0cmluZywgS0VZX1Q6IHN0cmluZywgaXNNb3ZlbWVudEtleShFdmVudCk6IGJvb2xlYW4sIEtFWV9XOiBzdHJpbmcsIEtFWV9WOiBzdHJpbmcsIENPTlRST0xfS0VZUzogKHN0cmluZylbXSwgS0VZX1k6IHN0cmluZywgS0VZX1g6IHN0cmluZywgZ2V0TnVtYmVyRnJvbUNvZGUoRXZlbnQpOiAobnVtYmVyfG51bGwpLCBpc0FsdEtleShLZXlib2FyZEV2ZW50KTogKiwgS0VZX1o6IHN0cmluZywgQVJST1dfS0VZUzogKHN0cmluZylbXSwgS0VZX1NISUZUX0xFRlQ6IHN0cmluZywgS0VZX0hPTUU6IHN0cmluZywgS0VZX0VTQ0FQRTogc3RyaW5nLCBpc1NoaWZ0S2V5KEtleWJvYXJkRXZlbnQpOiAqLCBLRVlfQUxUX0xFRlQ6IHN0cmluZywgS0VZX0xFRlRfQVJST1c6IHN0cmluZywgS0VZX1RBQjogc3RyaW5nLCBpc0FueUtleUV2ZW50KHg6RXZlbnQsIHk6QXJyYXk8c3RyaW5nPik6IGJvb2xlYW4sIGdldEV2ZW50Q29kZShFdmVudCk6IChzdHJpbmd8bnVsbCksIEtFWV9FUVVBTFM6IHN0cmluZywgS0VZX1BBR0VfVVA6IHN0cmluZywgS0VZX0FMVF9SSUdIVDogc3RyaW5nLCBpc1dBU0RLZXkoRXZlbnQpOiBib29sZWFuLCBBTFRfS0VZUzogKHN0cmluZylbXSwgS0VZX1BBR0VfRE9XTjogc3RyaW5nLCBpc051bWJlcktleShFdmVudCk6IGJvb2xlYW4sIFNISUZUX0tFWVM6IChzdHJpbmcpW10sIEtFWV9QTFVTOiBzdHJpbmcsIFdBU0RfS0VZUzogKHN0cmluZylbXSwgaXNDb250cm9sS2V5KEtleWJvYXJkRXZlbnQpOiAqLCBLRVlfU0hJRlRfUklHSFQ6IHN0cmluZywgaXNSYW5nZUtleShFdmVudCk6IGJvb2xlYW4sIEtFWV9DT05UUk9MX1JJR0hUOiBzdHJpbmcsIEtFWV9FTlRFUjogc3RyaW5nLCBpc0tleUV2ZW50KEV2ZW50LCBzdHJpbmcpOiBib29sZWFuLCBLRVlfVVBfQVJST1c6IHN0cmluZywgS0VZXzE6IHN0cmluZywgS0VZXzA6IHN0cmluZywgS0VZX0NPTlRST0xfTEVGVDogc3RyaW5nLCBLRVlfMzogc3RyaW5nLCBLRVlfMjogc3RyaW5nLCBLRVlfNTogc3RyaW5nLCBLRVlfNDogc3RyaW5nLCBLRVlfNzogc3RyaW5nLCBLRVlfNjogc3RyaW5nLCBLRVlfOTogc3RyaW5nLCBNT1ZFTUVOVF9LRVlTOiAoc3RyaW5nKVtdLCBLRVlfODogc3RyaW5nLCBLRVlfU1BBQ0U6IHN0cmluZywgS0VZX0VORDogc3RyaW5nfX1cclxuICovXHJcbmNvbnN0IEtleWJvYXJkVXRpbHMgPSB7XHJcbiAgS0VZX1NQQUNFOiAnU3BhY2UnLFxyXG4gIEtFWV9FTlRFUjogJ0VudGVyJyxcclxuICBLRVlfVEFCOiAnVGFiJyxcclxuICBLRVlfUklHSFRfQVJST1c6IEtFWV9SSUdIVF9BUlJPVyxcclxuICBLRVlfTEVGVF9BUlJPVzogS0VZX0xFRlRfQVJST1csXHJcbiAgS0VZX1VQX0FSUk9XOiBLRVlfVVBfQVJST1csXHJcbiAgS0VZX0RPV05fQVJST1c6IEtFWV9ET1dOX0FSUk9XLFxyXG4gIEtFWV9TSElGVF9MRUZUOiBLRVlfU0hJRlRfTEVGVCxcclxuICBLRVlfU0hJRlRfUklHSFQ6IEtFWV9TSElGVF9SSUdIVCxcclxuICBLRVlfQUxUX0xFRlQ6IEtFWV9BTFRfTEVGVCxcclxuICBLRVlfQUxUX1JJR0hUOiBLRVlfQUxUX1JJR0hULFxyXG4gIEtFWV9DT05UUk9MX0xFRlQ6IEtFWV9DT05UUk9MX0xFRlQsXHJcbiAgS0VZX0NPTlRST0xfUklHSFQ6IEtFWV9DT05UUk9MX1JJR0hULFxyXG4gIEtFWV9NRVRBX0xFRlQ6IEtFWV9NRVRBX0xFRlQsXHJcbiAgS0VZX01FVEFfUklHSFQ6IEtFWV9NRVRBX1JJR0hULFxyXG4gIEtFWV9NRVRBX0xFRlRfRklSRUZPWDogS0VZX01FVEFfTEVGVF9GSVJFRk9YLFxyXG4gIEtFWV9NRVRBX1JJR0hUX0ZJUkVGT1g6IEtFWV9NRVRBX1JJR0hUX0ZJUkVGT1gsXHJcbiAgS0VZX1NISUZUOiBLRVlfU0hJRlQsXHJcbiAgS0VZX0FMVDogS0VZX0FMVCxcclxuICBLRVlfQ09OVFJPTDogS0VZX0NPTlRST0wsXHJcbiAgS0VZX0VTQ0FQRTogJ0VzY2FwZScsXHJcbiAgS0VZX0RFTEVURTogJ0RlbGV0ZScsXHJcbiAgS0VZX0JBQ0tTUEFDRTogJ0JhY2tzcGFjZScsXHJcbiAgS0VZX1BBR0VfVVA6ICdQYWdlVXAnLFxyXG4gIEtFWV9QQUdFX0RPV046ICdQYWdlRG93bicsXHJcbiAgS0VZX0VORDogJ0VuZCcsXHJcbiAgS0VZX0hPTUU6ICdIb21lJyxcclxuICBLRVlfMDogS0VZXzAsXHJcbiAgS0VZXzE6IEtFWV8xLFxyXG4gIEtFWV8yOiBLRVlfMixcclxuICBLRVlfMzogS0VZXzMsXHJcbiAgS0VZXzQ6IEtFWV80LFxyXG4gIEtFWV81OiBLRVlfNSxcclxuICBLRVlfNjogS0VZXzYsXHJcbiAgS0VZXzc6IEtFWV83LFxyXG4gIEtFWV84OiBLRVlfOCxcclxuICBLRVlfOTogS0VZXzksXHJcbiAgS0VZX05VTVBBRF8wOiAnTnVtcGFkMCcsXHJcbiAgS0VZX05VTVBBRF8xOiAnTnVtcGFkMScsXHJcbiAgS0VZX05VTVBBRF8yOiAnTnVtcGFkMicsXHJcbiAgS0VZX05VTVBBRF8zOiAnTnVtcGFkMycsXHJcbiAgS0VZX05VTVBBRF80OiAnTnVtcGFkNCcsXHJcbiAgS0VZX05VTVBBRF81OiAnTnVtcGFkNScsXHJcbiAgS0VZX05VTVBBRF82OiAnTnVtcGFkNicsXHJcbiAgS0VZX05VTVBBRF83OiAnTnVtcGFkNycsXHJcbiAgS0VZX05VTVBBRF84OiAnTnVtcGFkOCcsXHJcbiAgS0VZX05VTVBBRF85OiAnTnVtcGFkOScsXHJcbiAgS0VZX05VTVBBRF9ERUNJTUFMOiAnTnVtcGFkRGVjaW1hbCcsXHJcbiAgS0VZX05VTVBBRF9QTFVTOiAnTnVtcGFkQWRkJyxcclxuICBLRVlfTlVNUEFEX01JTlVTOiAnTnVtcGFkU3VidHJhY3QnLFxyXG4gIEtFWV9BOiAnS2V5QScsXHJcbiAgS0VZX0I6ICdLZXlCJyxcclxuICBLRVlfQzogJ0tleUMnLFxyXG4gIEtFWV9EOiAnS2V5RCcsXHJcbiAgS0VZX0U6ICdLZXlFJyxcclxuICBLRVlfRjogJ0tleUYnLFxyXG4gIEtFWV9HOiAnS2V5RycsXHJcbiAgS0VZX0g6ICdLZXlIJyxcclxuICBLRVlfSTogJ0tleUknLFxyXG4gIEtFWV9KOiAnS2V5SicsXHJcbiAgS0VZX0s6ICdLZXlLJyxcclxuICBLRVlfTDogJ0tleUwnLFxyXG4gIEtFWV9NOiAnS2V5TScsXHJcbiAgS0VZX046ICdLZXlOJyxcclxuICBLRVlfTzogJ0tleU8nLFxyXG4gIEtFWV9QOiAnS2V5UCcsXHJcbiAgS0VZX1E6ICdLZXlRJyxcclxuICBLRVlfUjogJ0tleVInLFxyXG4gIEtFWV9TOiAnS2V5UycsXHJcbiAgS0VZX1Q6ICdLZXlUJyxcclxuICBLRVlfVTogJ0tleVUnLFxyXG4gIEtFWV9WOiAnS2V5VicsXHJcbiAgS0VZX1c6ICdLZXlXJyxcclxuICBLRVlfWDogJ0tleVgnLFxyXG4gIEtFWV9ZOiAnS2V5WScsXHJcbiAgS0VZX1o6ICdLZXlaJyxcclxuXHJcbiAgLy8gXCJFcXVhbHNcIiBhbmQgXCJQbHVzXCIgc2hhcmUgdGhlIHNhbWUgZXZlbnQuY29kZSwgY2hlY2sgZm9yIGRpc3RpbmN0aW9uIHdpdGggc2hpZnQgbW9kaWZpZXIga2V5XHJcbiAgS0VZX0VRVUFMUzogJ0VxdWFsJyxcclxuICBLRVlfUExVUzogJ0VxdWFsJyxcclxuICBLRVlfTUlOVVM6ICdNaW51cycsXHJcbiAgS0VZX1BFUklPRDogJ1BlcmlvZCcsXHJcblxyXG4gIEFSUk9XX0tFWVM6IEFSUk9XX0tFWVMsXHJcbiAgV0FTRF9LRVlTOiBXQVNEX0tFWVMsXHJcbiAgTU9WRU1FTlRfS0VZUzogQVJST1dfS0VZUy5jb25jYXQoIFdBU0RfS0VZUyApLFxyXG4gIFNISUZUX0tFWVM6IFNISUZUX0tFWVMsXHJcbiAgQ09OVFJPTF9LRVlTOiBDT05UUk9MX0tFWVMsXHJcbiAgQUxUX0tFWVM6IEFMVF9LRVlTLFxyXG4gIE1FVEFfS0VZUzogTUVUQV9LRVlTLFxyXG5cclxuICAvLyBUaGUgY29sbGVjdGlvbiBvZiBtb2RpZmllciBrZXkgY29kZXNcclxuICBNT0RJRklFUl9LRVlfQ09ERVM6IE1PRElGSUVSX0tFWV9DT0RFUyxcclxuXHJcbiAgLy8gTWFwcyBhIEtleWJvYXJkRXZlbnQua2V5IHRvIHRoZSBsZWZ0L3JpZ2h0IHBhaXIgb2YgS2V5Ym9hcmRFdmVudC5jb2RlIGZvciBtb2RpZmllciBrZXlzXHJcbiAgTU9ESUZJRVJfS0VZX1RPX0NPREVfTUFQOiBuZXcgTWFwKCBbXHJcbiAgICBbIEtFWV9BTFQsIEFMVF9LRVlTIF0sXHJcbiAgICBbIEtFWV9TSElGVCwgU0hJRlRfS0VZUyBdLFxyXG4gICAgWyBLRVlfQ09OVFJPTCwgQ09OVFJPTF9LRVlTIF1cclxuICBdICksXHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGtleSBjb3JyZXNwb25kcyB0byBwcmVzc2luZyBhbiBhcnJvdyBrZXlcclxuICAgKi9cclxuICBpc0Fycm93S2V5KCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEtleWJvYXJkVXRpbHMuaXNBbnlLZXlFdmVudCggZG9tRXZlbnQsIEFSUk9XX0tFWVMgKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRydWUgaWYga2V5IGlzIG9uZSBvZiBrZXlzIHVzZWQgZm9yIHJhbmdlIGlucHV0c1xyXG4gICAqL1xyXG4gIGlzUmFuZ2VLZXkoIGRvbUV2ZW50OiBFdmVudCB8IG51bGwgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gS2V5Ym9hcmRVdGlscy5pc0Fycm93S2V5KCBkb21FdmVudCApIHx8XHJcbiAgICAgICAgICAgS2V5Ym9hcmRVdGlscy5pc0FueUtleUV2ZW50KCBkb21FdmVudCwgW1xyXG4gICAgICAgICAgICAgS2V5Ym9hcmRVdGlscy5LRVlfUEFHRV9VUCxcclxuICAgICAgICAgICAgIEtleWJvYXJkVXRpbHMuS0VZX1BBR0VfRE9XTixcclxuICAgICAgICAgICAgIEtleWJvYXJkVXRpbHMuS0VZX0hPTUUsXHJcbiAgICAgICAgICAgICBLZXlib2FyZFV0aWxzLktFWV9FTkRcclxuICAgICAgICAgICBdICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUga2V5IGNvcnJlc3BvbmRzIHRvIHByZXNzaW5nIGEgbnVtYmVyIGtleVxyXG4gICAqL1xyXG4gIGlzTnVtYmVyS2V5KCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEtleWJvYXJkVXRpbHMuaXNBbnlLZXlFdmVudCggZG9tRXZlbnQsIE5VTUJFUl9LRVlTICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogRm9yIG51bWJlciBrZXlzLCByZXR1cm4gdGhlIG51bWJlciBvZiB0aGUga2V5LCBvciBudWxsIGlmIG5vdCBhIG51bWJlclxyXG4gICAqL1xyXG4gIGdldE51bWJlckZyb21Db2RlKCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IG51bGwgfCBudW1iZXIge1xyXG4gICAgaWYgKCBLZXlib2FyZFV0aWxzLmlzTnVtYmVyS2V5KCBkb21FdmVudCApICYmIGRvbUV2ZW50IGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCApIHtcclxuICAgICAgcmV0dXJuIE51bWJlciggZG9tRXZlbnQuY29kZS5yZXBsYWNlKCAnRGlnaXQnLCAnJyApICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBFdmVudC5jb2RlIGRpc3Rpbmd1aXNoZXMgYmV0d2VlbiBsZWZ0IGFuZCByaWdodCBzaGlmdCBrZXlzLiBJZiBhbGwgeW91IGNhcmUgYWJvdXQgaXMgdGhlIHByZXNlbmNlXHJcbiAgICogb2YgYSBzaGlmdCBrZXkgeW91IGNhbiB1c2UgdGhpcy5cclxuICAgKi9cclxuICBpc1NoaWZ0S2V5KCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEtleWJvYXJkVXRpbHMuaXNBbnlLZXlFdmVudCggZG9tRXZlbnQsIFNISUZUX0tFWVMgKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBFdmVudC5jb2RlIGRpc3Rpbmd1aXNoZXMgYmV0d2VlbiBsZWZ0IGFuZCByaWdodCBhbHQga2V5cy4gSWYgYWxsIHlvdSBjYXJlIGFib3V0IGlzIHRoZSBwcmVzZW5jZVxyXG4gICAqIG9mIHRoZSBhbHQga2V5IHlvdSBjYW4gdXNlIHRoaXMuXHJcbiAgICovXHJcbiAgaXNBbHRLZXkoIGRvbUV2ZW50OiBFdmVudCB8IG51bGwgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gS2V5Ym9hcmRVdGlscy5pc0FueUtleUV2ZW50KCBkb21FdmVudCwgQUxUX0tFWVMgKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBFdmVudC5jb2RlIGRpc3Rpbmd1aXNoZXMgYmV0d2VlbiBsZWZ0IGFuZCByaWdodCBjb250cm9sIGtleXMuIElmIGFsbCB5b3UgY2FyZSBhYm91dCBpcyB0aGUgcHJlc2VuY2VcclxuICAgKiBvZiBhIGNvbnRyb2wga2V5IHlvdSBjYW4gdXNlIHRoaXMuXHJcbiAgICovXHJcbiAgaXNDb250cm9sS2V5KCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEtleWJvYXJkVXRpbHMuaXNBbnlLZXlFdmVudCggZG9tRXZlbnQsIENPTlRST0xfS0VZUyApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEV2ZW50LmNvZGUgZGlzdGluZ3Vpc2hlcyBiZXR3ZWVuIGxlZnQgYW5kIHJpZ2h0IGFsdCBrZXlzLiBJZiBhbGwgeW91IGNhcmUgYWJvdXQgaXMgdGhlIHByZXNlbmNlXHJcbiAgICogb2YgdGhlIG1ldGEga2V5IHlvdSBjYW4gdXNlIHRoaXMuXHJcbiAgICovXHJcbiAgaXNNZXRhS2V5KCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEtleWJvYXJkVXRpbHMuaXNBbnlLZXlFdmVudCggZG9tRXZlbnQsIE1FVEFfS0VZUyApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGtleSBjb3JyZXNwb25kcyB0byBvbmUgb2YgdGhlIFdBU0QgbW92ZW1lbnQga2V5cy5cclxuICAgKi9cclxuICBpc1dBU0RLZXkoIGRvbUV2ZW50OiBFdmVudCB8IG51bGwgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gS2V5Ym9hcmRVdGlscy5pc0FueUtleUV2ZW50KCBkb21FdmVudCwgV0FTRF9LRVlTICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBrZXkgaW5kaWNhdGVzIGEgJ21vdmVtZW50JyBrZXkgaW4ga2V5Ym9hcmQgZHJhZ2dpbmdcclxuICAgKi9cclxuICBpc01vdmVtZW50S2V5KCBkb21FdmVudDogRXZlbnQgfCBudWxsICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIEtleWJvYXJkVXRpbHMuaXNBbnlLZXlFdmVudCggZG9tRXZlbnQsIEtleWJvYXJkVXRpbHMuTU9WRU1FTlRfS0VZUyApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBkb21FdmVudCBjb3JyZXNwb25kcyB0byBhbnkgb2YgdGhlIHByb3ZpZGVkIGtleXMgaW4gdGhlIGxpc3QuXHJcbiAgICovXHJcbiAgaXNBbnlLZXlFdmVudCggZG9tRXZlbnQ6IEV2ZW50IHwgbnVsbCwga2V5Ym9hcmRVdGlsc0tleXM6IHN0cmluZ1tdICk6IGJvb2xlYW4ge1xyXG4gICAgdmFsaWRhdGUoIGRvbUV2ZW50LCBET01fRVZFTlRfVkFMSURBVE9SICk7XHJcbiAgICBjb25zdCBjb2RlID0gS2V5Ym9hcmRVdGlscy5nZXRFdmVudENvZGUoIGRvbUV2ZW50ICk7XHJcbiAgICByZXR1cm4gY29kZSA/IGtleWJvYXJkVXRpbHNLZXlzLmluY2x1ZGVzKCBjb2RlICkgOiBmYWxzZTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBXaGV0aGVyIHRoZSBldmVudCB3YXMgb2YgdGhlIHByb3ZpZGVkIEtleWJvYXJkVXRpbHMgc3RyaW5nLlxyXG4gICAqL1xyXG4gIGlzS2V5RXZlbnQoIGRvbUV2ZW50OiBFdmVudCB8IG51bGwsIGtleWJvYXJkVXRpbHNLZXk6IHN0cmluZyApOiBib29sZWFuIHtcclxuICAgIHJldHVybiBLZXlib2FyZFV0aWxzLmdldEV2ZW50Q29kZSggZG9tRXZlbnQgKSA9PT0ga2V5Ym9hcmRVdGlsc0tleTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHdpdGggdGhlIGV2ZW50LmNvZGUgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGtleWJvYXJkIGtleXMgb2YgYSBLZXlib2FyZEV2ZW50IG9iamVjdC5cclxuICAgKiBPdGhlcndpc2UsIHJldHVybnMgbnVsbCBpZiB0aGVyZSBpcyBubyBjb2RlIG9uIHRoZSBldmVudC4gQW4gZXhhbXBsZSB1c2FnZSBtaWdodCBsb29rIGxpa2VcclxuICAgKlxyXG4gICAqICBjb25zdCBrZXkgPSBLZXlib2FyZFV0aWxzLmdldEV2ZW50Q29kZSggZG9tRXZlbnQgKTtcclxuICAgKiAgaWYgKCBrZXkgPT09IEtleWJvYXJkVXRpbHMuS0VZX0EgKSB7XHJcbiAgICogICAgLy8gWW91IHByZXNzZWQgdGhlIEEga2V5IVxyXG4gICAqICB9XHJcbiAgICpcclxuICAgKiBAcmV0dXJucyAtIG51bGwgaWYgdGhlcmUgaXMgbm8gYGNvZGVgIHByb3BlcnR5IG9uIHRoZSBwcm92aWRlZCBFdmVudC5cclxuICAgKi9cclxuICBnZXRFdmVudENvZGUoIGRvbUV2ZW50OiBFdmVudCB8IG51bGwgKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICBsZXQgZXZlbnRDb2RlID0gbnVsbDtcclxuICAgIGlmICggZG9tRXZlbnQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50ICYmIGRvbUV2ZW50LmNvZGUgKSB7XHJcbiAgICAgIGV2ZW50Q29kZSA9IGRvbUV2ZW50LmNvZGU7XHJcblxyXG4gICAgICAvLyBGb3IgTnVtcGFkIGtleXMsIHRoZSBEb21FdmVudC5jb2RlIGRvZXMgbm90IG1hdGNoIHRoZSBlcXVpdmFsZW50IFwibm9ybWFsXCIga2V5Ym9hcmQga2V5LCBidXQgdGhlIERvbUV2ZW50LmtleVxyXG4gICAgICAvLyB3aWxsIG1hdGNoIHRoZSBjb2RlIG9mIHRoZSBcIm5vcm1hbFwiIGtleS4gSW4gdGhvc2UgY2FzZXMgKGhvbWUvcGFnZSB1cC9wYWdlIGRvd24vZW5kKSB1c2UgdGhlIGtleSBhcyB0aGUgY29kZS5cclxuICAgICAgaWYgKCBldmVudENvZGUuc3RhcnRzV2l0aCggJ051bXBhZCcgKSAmJiBBTExfS0VZX0NPREVTLmluY2x1ZGVzKCBkb21FdmVudC5rZXkgKSApIHtcclxuICAgICAgICBldmVudENvZGUgPSBkb21FdmVudC5rZXk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZXZlbnRDb2RlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdHJ1ZSB3aGVuIGlmIHRoZSBwcm92aWRlZCBzdHJpbmcgaXMgYSBLZXlib2FyZEV2ZW50LmtleSBmb3IgYSBtb2RpZmllciBrZXkuIE5vdGUgdGhhdCBpcyBLZXlib2FyZEV2ZW50LmtleVxyXG4gICAqICoqTk9UKiogS2V5Ym9hcmRFdmVudC5jb2RlLiBLZXlib2FyZEV2ZW50LmNvZGUgZG9lcyBub3QgZGlzdGluZ3Vpc2ggYmV0d2VlbiBsZWZ0IGFuZCByaWdodCBtb2RpZmllciBrZXlzIHNvIHdlXHJcbiAgICogaGF2ZSBzb21lIHNwZWNpYWwgYmVoYXZpb3Igd2hlbiB3ZSBkZXRlY3QgYSBtb2RpZmllciBrZXkgKGxlZnQgb3IgcmlnaHQpIGlzIHByZXNzZWQuXHJcbiAgICogQHBhcmFtIGtleVxyXG4gICAqL1xyXG4gIGlzTW9kaWZpZXJLZXkoIGtleTogc3RyaW5nICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIE1PRElGSUVSX0tFWVMuaW5jbHVkZXMoIGtleSApO1xyXG4gIH0sXHJcblxyXG4gIEFMTF9LRVlTOiBBTExfS0VZX0NPREVTXHJcbn07XHJcblxyXG5mb3IgKCBjb25zdCBrZXlLZXkgaW4gS2V5Ym9hcmRVdGlscyApIHtcclxuXHJcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBObyBmdW5jdGlvbnMgb3Iga2V5LWdyb3VwcyBhbGxvd2VkXHJcbiAgaWYgKCBLZXlib2FyZFV0aWxzLmhhc093blByb3BlcnR5KCBrZXlLZXkgKSAmJiB0eXBlb2YgS2V5Ym9hcmRVdGlsc1sga2V5S2V5IF0gPT09ICdzdHJpbmcnICkge1xyXG5cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgIEFMTF9LRVlfQ09ERVMucHVzaCggS2V5Ym9hcmRVdGlsc1sga2V5S2V5IF0gYXMgc3RyaW5nICk7XHJcbiAgfVxyXG59XHJcblxyXG5zY2VuZXJ5LnJlZ2lzdGVyKCAnS2V5Ym9hcmRVdGlscycsIEtleWJvYXJkVXRpbHMgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkVXRpbHM7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sOEJBQThCO0FBQ25ELFNBQVNDLE9BQU8sUUFBUSxlQUFlO0FBRXZDLE1BQU1DLGVBQWUsR0FBRyxZQUFZO0FBQ3BDLE1BQU1DLGNBQWMsR0FBRyxXQUFXO0FBQ2xDLE1BQU1DLFlBQVksR0FBRyxTQUFTO0FBQzlCLE1BQU1DLGNBQWMsR0FBRyxXQUFXO0FBQ2xDLE1BQU1DLGVBQWUsR0FBRyxZQUFZO0FBQ3BDLE1BQU1DLGNBQWMsR0FBRyxXQUFXO0FBQ2xDLE1BQU1DLGdCQUFnQixHQUFHLGFBQWE7QUFDdEMsTUFBTUMsaUJBQWlCLEdBQUcsY0FBYztBQUN4QyxNQUFNQyxZQUFZLEdBQUcsU0FBUztBQUM5QixNQUFNQyxhQUFhLEdBQUcsVUFBVTtBQUNoQyxNQUFNQyxhQUFhLEdBQUcsVUFBVTtBQUNoQyxNQUFNQyxjQUFjLEdBQUcsV0FBVztBQUNsQyxNQUFNQyxxQkFBcUIsR0FBRyxRQUFRLENBQUMsQ0FBQztBQUN4QyxNQUFNQyxzQkFBc0IsR0FBRyxTQUFTO0FBQ3hDLE1BQU1DLEtBQUssR0FBRyxNQUFNO0FBQ3BCLE1BQU1DLEtBQUssR0FBRyxNQUFNO0FBQ3BCLE1BQU1DLEtBQUssR0FBRyxNQUFNO0FBQ3BCLE1BQU1DLEtBQUssR0FBRyxNQUFNO0FBQ3BCLE1BQU1DLEtBQUssR0FBRyxRQUFRO0FBQ3RCLE1BQU1DLEtBQUssR0FBRyxRQUFRO0FBQ3RCLE1BQU1DLEtBQUssR0FBRyxRQUFRO0FBQ3RCLE1BQU1DLEtBQUssR0FBRyxRQUFRO0FBQ3RCLE1BQU1DLEtBQUssR0FBRyxRQUFRO0FBQ3RCLE1BQU1DLEtBQUssR0FBRyxRQUFRO0FBQ3RCLE1BQU1DLEtBQUssR0FB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