// Copyright 2023-2024, University of Colorado Boulder

/**
 * A link node in RichText - NOTE: This is NOT embedded for layout. Instead, link content will be added as children to this node,
 * and this will exist solely for the link functionality.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */
import Pool from '../../../../phet-core/js/Pool.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import { allowLinksProperty, FireListener, Node, openPopup, RichTextCleanable, scenery, Voicing } from '../../imports.js';
export default class RichTextLink extends Voicing(RichTextCleanable(Node)) {
  fireListener = null;
  accessibleInputListener = null;
  allowLinksListener = null;
  constructor(innerContent, href) {
    super();

    // Voicing was already initialized in the super call, we do not want to initialize super again. But we do want to
    // initialize the RichText portion of the implementation.
    this.initialize(innerContent, href, false);

    // Mutate to make sure initialize doesn't clear this away
    this.mutate({
      cursor: 'pointer',
      tagName: 'a'
    });
  }

  /**
   * Set up this state. First construction does not need to use super.initialize() because the constructor has done
   * that for us. But repeated initialization with Poolable will need to initialize super again.
   */
  initialize(innerContent, href, initializeSuper = true) {
    if (initializeSuper) {
      super.initialize();
    }

    // pdom - open the link in the new tab when activated with a keyboard.
    // also see https://github.com/phetsims/joist/issues/430
    this.innerContent = innerContent;
    this.voicingNameResponse = innerContent;

    // If our href is a function, it should be called when the user clicks on the link
    if (typeof href === 'function') {
      this.fireListener = new FireListener({
        fire: href,
        tandem: Tandem.OPT_OUT
      });
      this.addInputListener(this.fireListener);
      this.setPDOMAttribute('href', '#'); // Required so that the click listener will get called.
      this.setPDOMAttribute('target', '_self'); // This is the default (easier than conditionally removing)
      this.accessibleInputListener = {
        click: event => {
          event.domEvent && event.domEvent.preventDefault();
          href();
        }
      };
      this.addInputListener(this.accessibleInputListener);
    }
    // Otherwise our href is a {string}, and we should open a window pointing to it (assuming it's a URL)
    else {
      this.fireListener = new FireListener({
        fire: event => {
          if (event.isFromPDOM()) {
            // prevent default from pdom activation so we don't also open a new tab from native DOM input on a link
            event.domEvent.preventDefault();
          }
          // @ts-expect-error TODO TODO TODO this is a bug! How do we handle this? https://github.com/phetsims/scenery/issues/1581
          self._linkEventsHandled && event.handle();
          openPopup(href); // open in a new window/tab
        },
        tandem: Tandem.OPT_OUT
      });
      this.addInputListener(this.fireListener);
      this.setPDOMAttribute('href', href);
      this.setPDOMAttribute('target', '_blank');
      this.allowLinksListener = allowLinks => {
        this.visible = allowLinks;
      };
      allowLinksProperty.link(this.allowLinksListener);
    }
    return this;
  }

  /**
   * Cleans references that could cause memory leaks (as those things may contain other references).
   */
  clean() {
    super.clean();
    if (this.fireListener) {
      this.removeInputListener(this.fireListener);
      this.fireListener.dispose();
    }
    this.fireListener = null;
    if (this.accessibleInputListener) {
      this.removeInputListener(this.accessibleInputListener);
      this.accessibleInputListener = null;
    }
    if (this.allowLinksListener) {
      allowLinksProperty.unlink(this.allowLinksListener);
      this.allowLinksListener = null;
    }
  }
  freeToPool() {
    RichTextLink.pool.freeToPool(this);
  }
  static pool = new Pool(RichTextLink);
}
scenery.register('RichTextLink', RichTextLink);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwiVGFuZGVtIiwiYWxsb3dMaW5rc1Byb3BlcnR5IiwiRmlyZUxpc3RlbmVyIiwiTm9kZSIsIm9wZW5Qb3B1cCIsIlJpY2hUZXh0Q2xlYW5hYmxlIiwic2NlbmVyeSIsIlZvaWNpbmciLCJSaWNoVGV4dExpbmsiLCJmaXJlTGlzdGVuZXIiLCJhY2Nlc3NpYmxlSW5wdXRMaXN0ZW5lciIsImFsbG93TGlua3NMaXN0ZW5lciIsImNvbnN0cnVjdG9yIiwiaW5uZXJDb250ZW50IiwiaHJlZiIsImluaXRpYWxpemUiLCJtdXRhdGUiLCJjdXJzb3IiLCJ0YWdOYW1lIiwiaW5pdGlhbGl6ZVN1cGVyIiwidm9pY2luZ05hbWVSZXNwb25zZSIsImZpcmUiLCJ0YW5kZW0iLCJPUFRfT1VUIiwiYWRkSW5wdXRMaXN0ZW5lciIsInNldFBET01BdHRyaWJ1dGUiLCJjbGljayIsImV2ZW50IiwiZG9tRXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImlzRnJvbVBET00iLCJzZWxmIiwiX2xpbmtFdmVudHNIYW5kbGVkIiwiaGFuZGxlIiwiYWxsb3dMaW5rcyIsInZpc2libGUiLCJsaW5rIiwiY2xlYW4iLCJyZW1vdmVJbnB1dExpc3RlbmVyIiwiZGlzcG9zZSIsInVubGluayIsImZyZWVUb1Bvb2wiLCJwb29sIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSaWNoVGV4dExpbmsudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjMtMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQSBsaW5rIG5vZGUgaW4gUmljaFRleHQgLSBOT1RFOiBUaGlzIGlzIE5PVCBlbWJlZGRlZCBmb3IgbGF5b3V0LiBJbnN0ZWFkLCBsaW5rIGNvbnRlbnQgd2lsbCBiZSBhZGRlZCBhcyBjaGlsZHJlbiB0byB0aGlzIG5vZGUsXHJcbiAqIGFuZCB0aGlzIHdpbGwgZXhpc3Qgc29sZWx5IGZvciB0aGUgbGluayBmdW5jdGlvbmFsaXR5LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5pbXBvcnQgUG9vbCwgeyBUUG9vbGFibGUgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvUG9vbC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCB7IGFsbG93TGlua3NQcm9wZXJ0eSwgRmlyZUxpc3RlbmVyLCBOb2RlLCBvcGVuUG9wdXAsIFJpY2hUZXh0Q2xlYW5hYmxlLCBSaWNoVGV4dEhyZWYsIHNjZW5lcnksIFRJbnB1dExpc3RlbmVyLCBWb2ljaW5nIH0gZnJvbSAnLi4vLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSaWNoVGV4dExpbmsgZXh0ZW5kcyBWb2ljaW5nKCBSaWNoVGV4dENsZWFuYWJsZSggTm9kZSApICkgaW1wbGVtZW50cyBUUG9vbGFibGUge1xyXG5cclxuICBwcml2YXRlIGZpcmVMaXN0ZW5lcjogRmlyZUxpc3RlbmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBhY2Nlc3NpYmxlSW5wdXRMaXN0ZW5lcjogVElucHV0TGlzdGVuZXIgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGFsbG93TGlua3NMaXN0ZW5lcjogKCAoIGFsbG93TGlua3M6IGJvb2xlYW4gKSA9PiB2b2lkICkgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBpbm5lckNvbnRlbnQ6IHN0cmluZywgaHJlZjogUmljaFRleHRIcmVmICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyBWb2ljaW5nIHdhcyBhbHJlYWR5IGluaXRpYWxpemVkIGluIHRoZSBzdXBlciBjYWxsLCB3ZSBkbyBub3Qgd2FudCB0byBpbml0aWFsaXplIHN1cGVyIGFnYWluLiBCdXQgd2UgZG8gd2FudCB0b1xyXG4gICAgLy8gaW5pdGlhbGl6ZSB0aGUgUmljaFRleHQgcG9ydGlvbiBvZiB0aGUgaW1wbGVtZW50YXRpb24uXHJcbiAgICB0aGlzLmluaXRpYWxpemUoIGlubmVyQ29udGVudCwgaHJlZiwgZmFsc2UgKTtcclxuXHJcbiAgICAvLyBNdXRhdGUgdG8gbWFrZSBzdXJlIGluaXRpYWxpemUgZG9lc24ndCBjbGVhciB0aGlzIGF3YXlcclxuICAgIHRoaXMubXV0YXRlKCB7XHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICB0YWdOYW1lOiAnYSdcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB1cCB0aGlzIHN0YXRlLiBGaXJzdCBjb25zdHJ1Y3Rpb24gZG9lcyBub3QgbmVlZCB0byB1c2Ugc3VwZXIuaW5pdGlhbGl6ZSgpIGJlY2F1c2UgdGhlIGNvbnN0cnVjdG9yIGhhcyBkb25lXHJcbiAgICogdGhhdCBmb3IgdXMuIEJ1dCByZXBlYXRlZCBpbml0aWFsaXphdGlvbiB3aXRoIFBvb2xhYmxlIHdpbGwgbmVlZCB0byBpbml0aWFsaXplIHN1cGVyIGFnYWluLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBpbml0aWFsaXplKCBpbm5lckNvbnRlbnQ6IHN0cmluZywgaHJlZjogUmljaFRleHRIcmVmLCBpbml0aWFsaXplU3VwZXIgPSB0cnVlICk6IHRoaXMge1xyXG5cclxuICAgIGlmICggaW5pdGlhbGl6ZVN1cGVyICkge1xyXG4gICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcGRvbSAtIG9wZW4gdGhlIGxpbmsgaW4gdGhlIG5ldyB0YWIgd2hlbiBhY3RpdmF0ZWQgd2l0aCBhIGtleWJvYXJkLlxyXG4gICAgLy8gYWxzbyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2pvaXN0L2lzc3Vlcy80MzBcclxuICAgIHRoaXMuaW5uZXJDb250ZW50ID0gaW5uZXJDb250ZW50O1xyXG5cclxuICAgIHRoaXMudm9pY2luZ05hbWVSZXNwb25zZSA9IGlubmVyQ29udGVudDtcclxuXHJcbiAgICAvLyBJZiBvdXIgaHJlZiBpcyBhIGZ1bmN0aW9uLCBpdCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHRoZSBsaW5rXHJcbiAgICBpZiAoIHR5cGVvZiBocmVmID09PSAnZnVuY3Rpb24nICkge1xyXG4gICAgICB0aGlzLmZpcmVMaXN0ZW5lciA9IG5ldyBGaXJlTGlzdGVuZXIoIHtcclxuICAgICAgICBmaXJlOiBocmVmLFxyXG4gICAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVRcclxuICAgICAgfSApO1xyXG4gICAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIHRoaXMuZmlyZUxpc3RlbmVyICk7XHJcbiAgICAgIHRoaXMuc2V0UERPTUF0dHJpYnV0ZSggJ2hyZWYnLCAnIycgKTsgLy8gUmVxdWlyZWQgc28gdGhhdCB0aGUgY2xpY2sgbGlzdGVuZXIgd2lsbCBnZXQgY2FsbGVkLlxyXG4gICAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICd0YXJnZXQnLCAnX3NlbGYnICk7IC8vIFRoaXMgaXMgdGhlIGRlZmF1bHQgKGVhc2llciB0aGFuIGNvbmRpdGlvbmFsbHkgcmVtb3ZpbmcpXHJcbiAgICAgIHRoaXMuYWNjZXNzaWJsZUlucHV0TGlzdGVuZXIgPSB7XHJcbiAgICAgICAgY2xpY2s6IGV2ZW50ID0+IHtcclxuICAgICAgICAgIGV2ZW50LmRvbUV2ZW50ICYmIGV2ZW50LmRvbUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgaHJlZigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCB0aGlzLmFjY2Vzc2libGVJbnB1dExpc3RlbmVyICk7XHJcbiAgICB9XHJcbiAgICAvLyBPdGhlcndpc2Ugb3VyIGhyZWYgaXMgYSB7c3RyaW5nfSwgYW5kIHdlIHNob3VsZCBvcGVuIGEgd2luZG93IHBvaW50aW5nIHRvIGl0IChhc3N1bWluZyBpdCdzIGEgVVJMKVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuZmlyZUxpc3RlbmVyID0gbmV3IEZpcmVMaXN0ZW5lcigge1xyXG4gICAgICAgIGZpcmU6IGV2ZW50ID0+IHtcclxuICAgICAgICAgIGlmICggZXZlbnQuaXNGcm9tUERPTSgpICkge1xyXG5cclxuICAgICAgICAgICAgLy8gcHJldmVudCBkZWZhdWx0IGZyb20gcGRvbSBhY3RpdmF0aW9uIHNvIHdlIGRvbid0IGFsc28gb3BlbiBhIG5ldyB0YWIgZnJvbSBuYXRpdmUgRE9NIGlucHV0IG9uIGEgbGlua1xyXG4gICAgICAgICAgICBldmVudC5kb21FdmVudCEucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETyBUT0RPIFRPRE8gdGhpcyBpcyBhIGJ1ZyEgSG93IGRvIHdlIGhhbmRsZSB0aGlzPyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvMTU4MVxyXG4gICAgICAgICAgc2VsZi5fbGlua0V2ZW50c0hhbmRsZWQgJiYgZXZlbnQuaGFuZGxlKCk7XHJcbiAgICAgICAgICBvcGVuUG9wdXAoIGhyZWYgKTsgLy8gb3BlbiBpbiBhIG5ldyB3aW5kb3cvdGFiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YW5kZW06IFRhbmRlbS5PUFRfT1VUXHJcbiAgICAgIH0gKTtcclxuICAgICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCB0aGlzLmZpcmVMaXN0ZW5lciApO1xyXG4gICAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICdocmVmJywgaHJlZiApO1xyXG4gICAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICd0YXJnZXQnLCAnX2JsYW5rJyApO1xyXG5cclxuICAgICAgdGhpcy5hbGxvd0xpbmtzTGlzdGVuZXIgPSAoIGFsbG93TGlua3M6IGJvb2xlYW4gKSA9PiB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gYWxsb3dMaW5rcztcclxuICAgICAgfTtcclxuICAgICAgYWxsb3dMaW5rc1Byb3BlcnR5LmxpbmsoIHRoaXMuYWxsb3dMaW5rc0xpc3RlbmVyICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhbnMgcmVmZXJlbmNlcyB0aGF0IGNvdWxkIGNhdXNlIG1lbW9yeSBsZWFrcyAoYXMgdGhvc2UgdGhpbmdzIG1heSBjb250YWluIG90aGVyIHJlZmVyZW5jZXMpLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBjbGVhbigpOiB2b2lkIHtcclxuICAgIHN1cGVyLmNsZWFuKCk7XHJcblxyXG4gICAgaWYgKCB0aGlzLmZpcmVMaXN0ZW5lciApIHtcclxuICAgICAgdGhpcy5yZW1vdmVJbnB1dExpc3RlbmVyKCB0aGlzLmZpcmVMaXN0ZW5lciApO1xyXG4gICAgICB0aGlzLmZpcmVMaXN0ZW5lci5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpcmVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICBpZiAoIHRoaXMuYWNjZXNzaWJsZUlucHV0TGlzdGVuZXIgKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlSW5wdXRMaXN0ZW5lciggdGhpcy5hY2Nlc3NpYmxlSW5wdXRMaXN0ZW5lciApO1xyXG4gICAgICB0aGlzLmFjY2Vzc2libGVJbnB1dExpc3RlbmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICggdGhpcy5hbGxvd0xpbmtzTGlzdGVuZXIgKSB7XHJcbiAgICAgIGFsbG93TGlua3NQcm9wZXJ0eS51bmxpbmsoIHRoaXMuYWxsb3dMaW5rc0xpc3RlbmVyICk7XHJcbiAgICAgIHRoaXMuYWxsb3dMaW5rc0xpc3RlbmVyID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBmcmVlVG9Qb29sKCk6IHZvaWQge1xyXG4gICAgUmljaFRleHRMaW5rLnBvb2wuZnJlZVRvUG9vbCggdGhpcyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBwb29sID0gbmV3IFBvb2woIFJpY2hUZXh0TGluayApO1xyXG59XHJcblxyXG5zY2VuZXJ5LnJlZ2lzdGVyKCAnUmljaFRleHRMaW5rJywgUmljaFRleHRMaW5rICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPQSxJQUFJLE1BQXFCLGtDQUFrQztBQUNsRSxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELFNBQVNDLGtCQUFrQixFQUFFQyxZQUFZLEVBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFFQyxpQkFBaUIsRUFBZ0JDLE9BQU8sRUFBa0JDLE9BQU8sUUFBUSxrQkFBa0I7QUFFdkosZUFBZSxNQUFNQyxZQUFZLFNBQVNELE9BQU8sQ0FBRUYsaUJBQWlCLENBQUVGLElBQUssQ0FBRSxDQUFDLENBQXNCO0VBRTFGTSxZQUFZLEdBQXdCLElBQUk7RUFDeENDLHVCQUF1QixHQUEwQixJQUFJO0VBQ3JEQyxrQkFBa0IsR0FBK0MsSUFBSTtFQUV0RUMsV0FBV0EsQ0FBRUMsWUFBb0IsRUFBRUMsSUFBa0IsRUFBRztJQUM3RCxLQUFLLENBQUMsQ0FBQzs7SUFFUDtJQUNBO0lBQ0EsSUFBSSxDQUFDQyxVQUFVLENBQUVGLFlBQVksRUFBRUMsSUFBSSxFQUFFLEtBQU0sQ0FBQzs7SUFFNUM7SUFDQSxJQUFJLENBQUNFLE1BQU0sQ0FBRTtNQUNYQyxNQUFNLEVBQUUsU0FBUztNQUNqQkMsT0FBTyxFQUFFO0lBQ1gsQ0FBRSxDQUFDO0VBQ0w7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDa0JILFVBQVVBLENBQUVGLFlBQW9CLEVBQUVDLElBQWtCLEVBQUVLLGVBQWUsR0FBRyxJQUFJLEVBQVM7SUFFbkcsSUFBS0EsZUFBZSxFQUFHO01BQ3JCLEtBQUssQ0FBQ0osVUFBVSxDQUFDLENBQUM7SUFDcEI7O0lBRUE7SUFDQTtJQUNBLElBQUksQ0FBQ0YsWUFBWSxHQUFHQSxZQUFZ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