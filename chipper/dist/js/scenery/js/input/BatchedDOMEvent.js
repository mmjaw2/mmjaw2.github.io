// Copyright 2022-2024, University of Colorado Boulder

/**
 * Pooled structure to record batched events efficiently. How it calls the callback is based on the type
 * (pointer/mspointer/touch/mouse). There is one BatchedDOMEvent for each DOM Event (not for each touch).
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Enumeration from '../../../phet-core/js/Enumeration.js';
import EnumerationValue from '../../../phet-core/js/EnumerationValue.js';
import Pool from '../../../phet-core/js/Pool.js';
import { Input, scenery } from '../imports.js';
export class BatchedDOMEventType extends EnumerationValue {
  static POINTER_TYPE = new BatchedDOMEventType();
  static MS_POINTER_TYPE = new BatchedDOMEventType();
  static TOUCH_TYPE = new BatchedDOMEventType();
  static MOUSE_TYPE = new BatchedDOMEventType();
  static WHEEL_TYPE = new BatchedDOMEventType();
  static ALT_TYPE = new BatchedDOMEventType();
  static enumeration = new Enumeration(BatchedDOMEventType, {
    phetioDocumentation: 'The type of batched event'
  });
}
export default class BatchedDOMEvent {
  constructor(eventContext, type, callback) {
    this.initialize(eventContext, type, callback);
  }
  initialize(eventContext, type, callback) {
    // called multiple times due to pooling, this should be re-entrant
    assert && assert(eventContext.domEvent, 'for some reason, there is no DOM event?');
    this.eventContext = eventContext;
    this.type = type;
    this.callback = callback;
    return this;
  }
  run(input) {
    sceneryLog && sceneryLog.InputEvent && sceneryLog.InputEvent('Running batched event');
    sceneryLog && sceneryLog.InputEvent && sceneryLog.push();
    const callback = this.callback;

    // process whether anything under the pointers changed before running additional input events
    input.validatePointers();

    //OHTWO TODO: switch? https://github.com/phetsims/scenery/issues/1581
    if (this.type === BatchedDOMEventType.POINTER_TYPE) {
      const context = this.eventContext;
      const pointerEvent = context.domEvent;
      callback.call(input, pointerEvent.pointerId, pointerEvent.pointerType, input.pointFromEvent(pointerEvent), context);
    } else if (this.type === BatchedDOMEventType.MS_POINTER_TYPE) {
      const context = this.eventContext;
      const pointerEvent = context.domEvent;
      callback.call(input, pointerEvent.pointerId, Input.msPointerType(pointerEvent), input.pointFromEvent(pointerEvent), context);
    } else if (this.type === BatchedDOMEventType.TOUCH_TYPE) {
      const context = this.eventContext;
      const touchEvent = context.domEvent;
      for (let i = 0; i < touchEvent.changedTouches.length; i++) {
        // according to spec (http://www.w3.org/TR/touch-events/), this is not an Array, but a TouchList
        const touch = touchEvent.changedTouches.item(i);
        callback.call(input, touch.identifier, input.pointFromEvent(touch), context);
      }
    } else if (this.type === BatchedDOMEventType.MOUSE_TYPE) {
      const context = this.eventContext;
      const point = input.pointFromEvent(context.domEvent);
      if (callback === input.mouseDown) {
        callback.call(input, null, point, context);
      } else {
        callback.call(input, point, context);
      }
    } else if (this.type === BatchedDOMEventType.WHEEL_TYPE || this.type === BatchedDOMEventType.ALT_TYPE) {
      callback.call(input, this.eventContext);
    } else {
      throw new Error(`bad type value: ${this.type}`);
    }
    sceneryLog && sceneryLog.InputEvent && sceneryLog.pop();
  }

  /**
   * Releases references
   */
  dispose() {
    // clear our references
    this.eventContext = null;
    this.callback = null;
    this.freeToPool();
  }
  freeToPool() {
    BatchedDOMEvent.pool.freeToPool(this);
  }
  static pool = new Pool(BatchedDOMEvent);
}
scenery.register('BatchedDOMEvent', BatchedDOMEvent);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbiIsIkVudW1lcmF0aW9uVmFsdWUiLCJQb29sIiwiSW5wdXQiLCJzY2VuZXJ5IiwiQmF0Y2hlZERPTUV2ZW50VHlwZSIsIlBPSU5URVJfVFlQRSIsIk1TX1BPSU5URVJfVFlQRSIsIlRPVUNIX1RZUEUiLCJNT1VTRV9UWVBFIiwiV0hFRUxfVFlQRSIsIkFMVF9UWVBFIiwiZW51bWVyYXRpb24iLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwiQmF0Y2hlZERPTUV2ZW50IiwiY29uc3RydWN0b3IiLCJldmVudENvbnRleHQiLCJ0eXBlIiwiY2FsbGJhY2siLCJpbml0aWFsaXplIiwiYXNzZXJ0IiwiZG9tRXZlbnQiLCJydW4iLCJpbnB1dCIsInNjZW5lcnlMb2ciLCJJbnB1dEV2ZW50IiwicHVzaCIsInZhbGlkYXRlUG9pbnRlcnMiLCJjb250ZXh0IiwicG9pbnRlckV2ZW50IiwiY2FsbCIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwicG9pbnRGcm9tRXZlbnQiLCJtc1BvaW50ZXJUeXBlIiwidG91Y2hFdmVudCIsImkiLCJjaGFuZ2VkVG91Y2hlcyIsImxlbmd0aCIsInRvdWNoIiwiaXRlbSIsImlkZW50aWZpZXIiLCJwb2ludCIsIm1vdXNlRG93biIsIkVycm9yIiwicG9wIiwiZGlzcG9zZSIsImZyZWVUb1Bvb2wiLCJwb29sIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCYXRjaGVkRE9NRXZlbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUG9vbGVkIHN0cnVjdHVyZSB0byByZWNvcmQgYmF0Y2hlZCBldmVudHMgZWZmaWNpZW50bHkuIEhvdyBpdCBjYWxscyB0aGUgY2FsbGJhY2sgaXMgYmFzZWQgb24gdGhlIHR5cGVcclxuICogKHBvaW50ZXIvbXNwb2ludGVyL3RvdWNoL21vdXNlKS4gVGhlcmUgaXMgb25lIEJhdGNoZWRET01FdmVudCBmb3IgZWFjaCBET00gRXZlbnQgKG5vdCBmb3IgZWFjaCB0b3VjaCkuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgRW51bWVyYXRpb24gZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uLmpzJztcclxuaW1wb3J0IEVudW1lcmF0aW9uVmFsdWUgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uVmFsdWUuanMnO1xyXG5pbXBvcnQgUG9vbCwgeyBUUG9vbGFibGUgfSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvUG9vbC5qcyc7XHJcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xyXG5pbXBvcnQgeyBFdmVudENvbnRleHQsIElucHV0LCBzY2VuZXJ5IH0gZnJvbSAnLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5leHBvcnQgdHlwZSBCYXRjaGVkRE9NRXZlbnRDYWxsYmFjayA9ICggLi4uYXJnczogSW50ZW50aW9uYWxBbnlbXSApID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgQmF0Y2hlZERPTUV2ZW50VHlwZSBleHRlbmRzIEVudW1lcmF0aW9uVmFsdWUge1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUE9JTlRFUl9UWVBFID0gbmV3IEJhdGNoZWRET01FdmVudFR5cGUoKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1TX1BPSU5URVJfVFlQRSA9IG5ldyBCYXRjaGVkRE9NRXZlbnRUeXBlKCk7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBUT1VDSF9UWVBFID0gbmV3IEJhdGNoZWRET01FdmVudFR5cGUoKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1PVVNFX1RZUEUgPSBuZXcgQmF0Y2hlZERPTUV2ZW50VHlwZSgpO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgV0hFRUxfVFlQRSA9IG5ldyBCYXRjaGVkRE9NRXZlbnRUeXBlKCk7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBBTFRfVFlQRSA9IG5ldyBCYXRjaGVkRE9NRXZlbnRUeXBlKCk7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgZW51bWVyYXRpb24gPSBuZXcgRW51bWVyYXRpb24oIEJhdGNoZWRET01FdmVudFR5cGUsIHtcclxuICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdUaGUgdHlwZSBvZiBiYXRjaGVkIGV2ZW50J1xyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmF0Y2hlZERPTUV2ZW50IGltcGxlbWVudHMgVFBvb2xhYmxlIHtcclxuXHJcbiAgcHJpdmF0ZSBldmVudENvbnRleHQhOiBFdmVudENvbnRleHQgfCBudWxsO1xyXG4gIHByaXZhdGUgdHlwZSE6IEJhdGNoZWRET01FdmVudFR5cGUgfCBudWxsO1xyXG4gIHByaXZhdGUgY2FsbGJhY2shOiBCYXRjaGVkRE9NRXZlbnRDYWxsYmFjayB8IG51bGw7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZXZlbnRDb250ZXh0OiBFdmVudENvbnRleHQsIHR5cGU6IEJhdGNoZWRET01FdmVudFR5cGUsIGNhbGxiYWNrOiBCYXRjaGVkRE9NRXZlbnRDYWxsYmFjayApIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZSggZXZlbnRDb250ZXh0LCB0eXBlLCBjYWxsYmFjayApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXRpYWxpemUoIGV2ZW50Q29udGV4dDogRXZlbnRDb250ZXh0LCB0eXBlOiBCYXRjaGVkRE9NRXZlbnRUeXBlLCBjYWxsYmFjazogQmF0Y2hlZERPTUV2ZW50Q2FsbGJhY2sgKTogdGhpcyB7XHJcbiAgICAvLyBjYWxsZWQgbXVsdGlwbGUgdGltZXMgZHVlIHRvIHBvb2xpbmcsIHRoaXMgc2hvdWxkIGJlIHJlLWVudHJhbnRcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGV2ZW50Q29udGV4dC5kb21FdmVudCwgJ2ZvciBzb21lIHJlYXNvbiwgdGhlcmUgaXMgbm8gRE9NIGV2ZW50PycgKTtcclxuXHJcbiAgICB0aGlzLmV2ZW50Q29udGV4dCA9IGV2ZW50Q29udGV4dDtcclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcnVuKCBpbnB1dDogSW5wdXQgKTogdm9pZCB7XHJcbiAgICBzY2VuZXJ5TG9nICYmIHNjZW5lcnlMb2cuSW5wdXRFdmVudCAmJiBzY2VuZXJ5TG9nLklucHV0RXZlbnQoICdSdW5uaW5nIGJhdGNoZWQgZXZlbnQnICk7XHJcbiAgICBzY2VuZXJ5TG9nICYmIHNjZW5lcnlMb2cuSW5wdXRFdmVudCAmJiBzY2VuZXJ5TG9nLnB1c2goKTtcclxuXHJcbiAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMuY2FsbGJhY2shO1xyXG5cclxuICAgIC8vIHByb2Nlc3Mgd2hldGhlciBhbnl0aGluZyB1bmRlciB0aGUgcG9pbnRlcnMgY2hhbmdlZCBiZWZvcmUgcnVubmluZyBhZGRpdGlvbmFsIGlucHV0IGV2ZW50c1xyXG4gICAgaW5wdXQudmFsaWRhdGVQb2ludGVycygpO1xyXG5cclxuICAgIC8vT0hUV08gVE9ETzogc3dpdGNoPyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvMTU4MVxyXG4gICAgaWYgKCB0aGlzLnR5cGUgPT09IEJhdGNoZWRET01FdmVudFR5cGUuUE9JTlRFUl9UWVBFICkge1xyXG4gICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5ldmVudENvbnRleHQgYXMgRXZlbnRDb250ZXh0PFBvaW50ZXJFdmVudD47XHJcbiAgICAgIGNvbnN0IHBvaW50ZXJFdmVudCA9IGNvbnRleHQuZG9tRXZlbnQ7XHJcbiAgICAgIGNhbGxiYWNrLmNhbGwoIGlucHV0LCBwb2ludGVyRXZlbnQucG9pbnRlcklkLCBwb2ludGVyRXZlbnQucG9pbnRlclR5cGUsIGlucHV0LnBvaW50RnJvbUV2ZW50KCBwb2ludGVyRXZlbnQgKSwgY29udGV4dCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIHRoaXMudHlwZSA9PT0gQmF0Y2hlZERPTUV2ZW50VHlwZS5NU19QT0lOVEVSX1RZUEUgKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmV2ZW50Q29udGV4dCBhcyBFdmVudENvbnRleHQ8UG9pbnRlckV2ZW50PjtcclxuICAgICAgY29uc3QgcG9pbnRlckV2ZW50ID0gY29udGV4dC5kb21FdmVudDtcclxuICAgICAgY2FsbGJhY2suY2FsbCggaW5wdXQsIHBvaW50ZXJFdmVudC5wb2ludGVySWQsIElucHV0Lm1zUG9pbnRlclR5cGUoIHBvaW50ZXJFdmVudCApLCBpbnB1dC5wb2ludEZyb21FdmVudCggcG9pbnRlckV2ZW50ICksIGNvbnRleHQgKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCB0aGlzLnR5cGUgPT09IEJhdGNoZWRET01FdmVudFR5cGUuVE9VQ0hfVFlQRSApIHtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuZXZlbnRDb250ZXh0IGFzIEV2ZW50Q29udGV4dDxUb3VjaEV2ZW50PjtcclxuICAgICAgY29uc3QgdG91Y2hFdmVudCA9IGNvbnRleHQuZG9tRXZlbnQ7XHJcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRvdWNoRXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHNwZWMgKGh0dHA6Ly93d3cudzMub3JnL1RSL3RvdWNoLWV2ZW50cy8pLCB0aGlzIGlzIG5vdCBhbiBBcnJheSwgYnV0IGEgVG91Y2hMaXN0XHJcbiAgICAgICAgY29uc3QgdG91Y2ggPSB0b3VjaEV2ZW50LmNoYW5nZWRUb3VjaGVzLml0ZW0oIGkgKSE7XHJcblxyXG4gICAgICAgIGNhbGxiYWNrLmNhbGwoIGlucHV0LCB0b3VjaC5pZGVudGlmaWVyLCBpbnB1dC5wb2ludEZyb21FdmVudCggdG91Y2ggKSwgY29udGV4dCApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggdGhpcy50eXBlID09PSBCYXRjaGVkRE9NRXZlbnRUeXBlLk1PVVNFX1RZUEUgKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmV2ZW50Q29udGV4dCBhcyBFdmVudENvbnRleHQ8TW91c2VFdmVudD47XHJcbiAgICAgIGNvbnN0IHBvaW50ID0gaW5wdXQucG9pbnRGcm9tRXZlbnQoIGNvbnRleHQuZG9tRXZlbnQgKTtcclxuICAgICAgaWYgKCBjYWxsYmFjayA9PT0gaW5wdXQubW91c2VEb3duICkge1xyXG4gICAgICAgIGNhbGxiYWNrLmNhbGwoIGlucHV0LCBudWxsLCBwb2ludCwgY29udGV4dCApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNhbGxiYWNrLmNhbGwoIGlucHV0LCBwb2ludCwgY29udGV4dCApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggdGhpcy50eXBlID09PSBCYXRjaGVkRE9NRXZlbnRUeXBlLldIRUVMX1RZUEUgfHwgdGhpcy50eXBlID09PSBCYXRjaGVkRE9NRXZlbnRUeXBlLkFMVF9UWVBFICkge1xyXG4gICAgICBjYWxsYmFjay5jYWxsKCBpbnB1dCwgdGhpcy5ldmVudENvbnRleHQgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGBiYWQgdHlwZSB2YWx1ZTogJHt0aGlzLnR5cGV9YCApO1xyXG4gICAgfVxyXG5cclxuICAgIHNjZW5lcnlMb2cgJiYgc2NlbmVyeUxvZy5JbnB1dEV2ZW50ICYmIHNjZW5lcnlMb2cucG9wKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWxlYXNlcyByZWZlcmVuY2VzXHJcbiAgICovXHJcbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAvLyBjbGVhciBvdXIgcmVmZXJlbmNlc1xyXG4gICAgdGhpcy5ldmVudENvbnRleHQgPSBudWxsO1xyXG4gICAgdGhpcy5jYWxsYmFjayA9IG51bGw7XHJcbiAgICB0aGlzLmZyZWVUb1Bvb2woKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBmcmVlVG9Qb29sKCk6IHZvaWQge1xyXG4gICAgQmF0Y2hlZERPTUV2ZW50LnBvb2wuZnJlZVRvUG9vbCggdGhpcyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBwb29sID0gbmV3IFBvb2woIEJhdGNoZWRET01FdmVudCApO1xyXG59XHJcblxyXG5zY2VuZXJ5LnJlZ2lzdGVyKCAnQmF0Y2hlZERPTUV2ZW50JywgQmF0Y2hlZERPTUV2ZW50ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsV0FBVyxNQUFNLHNDQUFzQztBQUM5RCxPQUFPQyxnQkFBZ0IsTUFBTSwyQ0FBMkM7QUFDeEUsT0FBT0MsSUFBSSxNQUFxQiwrQkFBK0I7QUFFL0QsU0FBdUJDLEtBQUssRUFBRUMsT0FBTyxRQUFRLGVBQWU7QUFJNUQsT0FBTyxNQUFNQyxtQkFBbUIsU0FBU0osZ0JBQWdCLENBQUM7RUFDeEQsT0FBdUJLLFlBQVksR0FBRyxJQUFJRCxtQkFBbUIsQ0FBQyxDQUFDO0VBQy9ELE9BQXVCRSxlQUFlLEdBQUcsSUFBSUYsbUJBQW1CLENBQUMsQ0FBQztFQUNsRSxPQUF1QkcsVUFBVSxHQUFHLElBQUlILG1CQUFtQixDQUFDLENBQUM7RUFDN0QsT0FBdUJJLFVBQVUsR0FBRyxJQUFJSixtQkFBbUIsQ0FBQyxDQUFDO0VBQzdELE9BQXVCSyxVQUFVLEdBQUcsSUFBSUwsbUJBQW1CLENBQUMsQ0FBQztFQUM3RCxPQUF1Qk0sUUFBUSxHQUFHLElBQUlOLG1CQUFtQixDQUFDLENBQUM7RUFFM0Qs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