// Copyright 2013-2024, University of Colorado Boulder

/**
 * A numeric range.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Andrew Adare
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import IOType from '../../tandem/js/types/IOType.js';
import InfiniteNumberIO from '../../tandem/js/types/InfiniteNumberIO.js';
import dot from './dot.js';
const STATE_SCHEMA = {
  min: InfiniteNumberIO,
  max: InfiniteNumberIO
};
class Range {
  // the minimum value of the range

  // the maximum value of the range

  /**
   * @param min - the minimum value of the range
   * @param max - the maximum value of the range
   */
  constructor(min, max) {
    this._min = min;
    this._max = max;
  }

  /**
   * Getter for min
   */
  getMin() {
    return this._min;
  }
  get min() {
    return this.getMin();
  }
  set min(min) {
    this.setMin(min);
  }

  /**
   * TODO: Allow chaining, https://github.com/phetsims/dot/issues/122
   * Setter for min
   */
  setMin(min) {
    assert && assert(min <= this._max, `min must be <= max: ${min}`);
    this._min = min;
  }

  /**
   * Getter for max
   */
  getMax() {
    return this._max;
  }
  get max() {
    return this.getMax();
  }
  set max(max) {
    this.setMax(max);
  }

  /**
   * Setter for max
   */
  setMax(max) {
    assert && assert(this._min <= max, `max must be >= to min: ${max}`);
    this._max = max;
  }

  /**
   * Sets the minimum and maximum value of the range
   */
  setMinMax(min, max) {
    assert && assert(min <= max, `max must be >= to min. min: ${min}, max: ${max}`);
    this._min = min;
    this._max = max;
    return this;
  }

  /**
   * Sets the minimum and maximum value of this range from the provided Range.
   */
  set(range) {
    this.setMinMax(range.min, range.max);
    return this;
  }
  addValue(n) {
    this._min = Math.min(this._min, n);
    this._max = Math.max(this._max, n);
  }
  withValue(n) {
    return new Range(Math.min(this._min, n), Math.max(this._max, n)); // eslint-disable-line no-html-constructors
  }

  /**
   * Makes a copy of this range
   */
  copy() {
    return new Range(this._min, this._max); // eslint-disable-line no-html-constructors
  }

  /**
   * Gets the length of this range, that is the difference between the maximum and minimum value of this range
   */
  getLength() {
    return this._max - this._min;
  }

  /**
   * Gets the center of this range, that is the average value of the maximum and minimum value of this range
   */
  getCenter() {
    return (this._max + this._min) / 2;
  }

  /**
   * Determines if this range contains the value
   */
  contains(value) {
    return value >= this._min && value <= this._max;
  }

  /**
   * Does this range contain the specified range?
   */
  containsRange(range) {
    return this._min <= range.min && this._max >= range.max;
  }

  /**
   * Determine if this range overlaps (intersects) with another range
   */
  intersects(range) {
    return this._max >= range.min && range.max >= this._min;
  }

  /**
   * Do the two ranges overlap with one another?  Note that this assumes that
   * This is a open interval.
   */
  intersectsExclusive(range) {
    return this._max > range.min && range.max > this._min;
  }

  /**
   *
   * REVIEW: The naming is not helping me understand that this function is just the immutable version of includeRange().
   *
   * The smallest range that contains both this range and the input range, returned as a copy.
   *
   * The method below is the immutable form of the function includeRange(). The method will return a new range, and will not modify
   * this range.
   */
  union(range) {
    return new Range(
    // eslint-disable-line no-html-constructors
    Math.min(this.min, range.min), Math.max(this.max, range.max));
  }

  /**
   * REVIEW: The naming is not helping me understand that this function is just the immutable version of constrainRange().
   *
   * The smallest range that is contained by both this range and the input range, returned as a copy.
   *
   * The method below the immutable form of the function constrainRange(). The method below will return a new range, and will not modify
   * this range.
   */
  intersection(range) {
    return new Range(
    // eslint-disable-line no-html-constructors
    Math.max(this.min, range.min), Math.min(this.max, range.max));
  }

  /**
   * Modifies this range so that it contains both its original range and the input range.
   *
   * This is the mutable form of the function union(). This will mutate (change) this range, in addition to returning
   * this range itself.
   */
  includeRange(range) {
    return this.setMinMax(Math.min(this.min, range.min), Math.max(this.max, range.max));
  }

  /**
   * Modifies this range so that it is the largest range contained both in its original range and in the input range.
   *
   * This is the mutable form of the function intersection(). This will mutate (change) this range, in addition to returning
   * this range itself.
   */
  constrainRange(range) {
    return this.setMinMax(Math.max(this.min, range.min), Math.min(this.max, range.max));
  }

  /**
   * REVIEW: do we also need a mutable form of shifted?
   *
   * Returns a new range that is the same as this range, but shifted by the specified amount.
   */
  shifted(n) {
    return new Range(this.min + n, this.max + n); // eslint-disable-line no-html-constructors
  }

  /**
   * Converts the attributes of this range to a string
   */
  toString() {
    return `[Range (min:${this._min} max:${this._max})]`;
  }

  /**
   * Constrains a value to the range.
   */
  constrainValue(value) {
    return Math.min(Math.max(value, this._min), this._max);
  }

  /**
   * Multiply the min and max by the provided value
   */
  times(value) {
    this.setMinMax(this._min * value, this._max * value);
    return this;
  }

  /**
   * Determines if this Range is equal to some object.
   */
  equals(object) {
    return this.constructor === object.constructor && this._min === object.min && this._max === object.max;
  }

  /**
   * Determines if this Range is approximately equal to some object.
   */
  equalsEpsilon(object, epsilon) {
    return this.constructor === object.constructor && Math.abs(this._min - object.min) <= epsilon && Math.abs(this._max - object.max) <= epsilon;
  }

  /**
   * Given a value, normalize it to this Range's length, returning a value between 0 and 1 for values contained in
   * the Range. If the value is not contained in Range, then the return value will not be between 0 and 1.
   */
  getNormalizedValue(value) {
    assert && assert(this.getLength() !== 0, 'cannot get normalized value without a range length');
    return (value - this.min) / this.getLength();
  }

  /**
   * Compute the opposite of a normalized value. Given a normalized value (between 0 and 1). Worked with any number
   * though, (even outside of the range). It is the client's responsibility to clamp if that is important to the
   * usage.
   */
  expandNormalizedValue(normalizedValue) {
    assert && assert(this.getLength() !== 0, 'cannot get expand normalized value without a range length');
    return normalizedValue * this.getLength() + this.min;
  }

  /**
   * In https://github.com/phetsims/dot/issues/57, defaultValue was moved to RangeWithValue.
   * This ES5 getter catches programming errors where defaultValue is still used with Range.
   */
  get defaultValue() {
    throw new Error('defaultValue is undefined, did you mean to use RangeWithValue?');
  }
  toStateObject() {
    return {
      min: InfiniteNumberIO.toStateObject(this.min),
      max: InfiniteNumberIO.toStateObject(this.max)
    };
  }

  // Given a value and a delta to change that value, clamp the delta to make sure the value stays within range.
  clampDelta(value, delta) {
    assert && assert(this.contains(value));
    return value + delta < this.min ? this.min - value : value + delta > this.max ? this.max - value : delta;
  }
  static fromStateObject(stateObject) {
    // eslint-disable-next-line no-html-constructors
    return new Range(InfiniteNumberIO.fromStateObject(stateObject.min), InfiniteNumberIO.fromStateObject(stateObject.max));
  }
  static RangeIO = new IOType('RangeIO', {
    valueType: Range,
    documentation: 'A range with "min" and "max" members.',
    stateSchema: STATE_SCHEMA,
    toStateObject: range => range.toStateObject(),
    fromStateObject: stateObject => Range.fromStateObject(stateObject)
  });
  static EVERYTHING = new Range(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY); // eslint-disable-line no-html-constructors
  static NOTHING = new Range(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY); // eslint-disable-line no-html-constructors
}
dot.register('Range', Range);
export default Range;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJT1R5cGUiLCJJbmZpbml0ZU51bWJlcklPIiwiZG90IiwiU1RBVEVfU0NIRU1BIiwibWluIiwibWF4IiwiUmFuZ2UiLCJjb25zdHJ1Y3RvciIsIl9taW4iLCJfbWF4IiwiZ2V0TWluIiwic2V0TWluIiwiYXNzZXJ0IiwiZ2V0TWF4Iiwic2V0TWF4Iiwic2V0TWluTWF4Iiwic2V0IiwicmFuZ2UiLCJhZGRWYWx1ZSIsIm4iLCJNYXRoIiwid2l0aFZhbHVlIiwiY29weSIsImdldExlbmd0aCIsImdldENlbnRlciIsImNvbnRhaW5zIiwidmFsdWUiLCJjb250YWluc1JhbmdlIiwiaW50ZXJzZWN0cyIsImludGVyc2VjdHNFeGNsdXNpdmUiLCJ1bmlvbiIsImludGVyc2VjdGlvbiIsImluY2x1ZGVSYW5nZSIsImNvbnN0cmFpblJhbmdlIiwic2hpZnRlZCIsInRvU3RyaW5nIiwiY29uc3RyYWluVmFsdWUiLCJ0aW1lcyIsImVxdWFscyIsIm9iamVjdCIsImVxdWFsc0Vwc2lsb24iLCJlcHNpbG9uIiwiYWJzIiwiZ2V0Tm9ybWFsaXplZFZhbHVlIiwiZXhwYW5kTm9ybWFsaXplZFZhbHVlIiwibm9ybWFsaXplZFZhbHVlIiwiZGVmYXVsdFZhbHVlIiwiRXJyb3IiLCJ0b1N0YXRlT2JqZWN0IiwiY2xhbXBEZWx0YSIsImRlbHRhIiwiZnJvbVN0YXRlT2JqZWN0Iiwic3RhdGVPYmplY3QiLCJSYW5nZUlPIiwidmFsdWVUeXBlIiwiZG9jdW1lbnRhdGlvbiIsInN0YXRlU2NoZW1hIiwiRVZFUllUSElORyIsIk51bWJlciIsIk5FR0FUSVZFX0lORklOSVRZIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJOT1RISU5HIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSYW5nZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBIG51bWVyaWMgcmFuZ2UuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqIEBhdXRob3IgQW5kcmV3IEFkYXJlXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcclxuaW1wb3J0IElPVHlwZSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSU9UeXBlLmpzJztcclxuaW1wb3J0IEluZmluaXRlTnVtYmVySU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0luZmluaXRlTnVtYmVySU8uanMnO1xyXG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcclxuaW1wb3J0IHsgU3RhdGVPYmplY3QgfSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RhdGVTY2hlbWEuanMnO1xyXG5cclxuZXhwb3J0IHR5cGUgVFJhbmdlID0ge1xyXG4gIG1pbjogbnVtYmVyO1xyXG4gIG1heDogbnVtYmVyO1xyXG59O1xyXG5cclxuY29uc3QgU1RBVEVfU0NIRU1BID0ge1xyXG4gIG1pbjogSW5maW5pdGVOdW1iZXJJTyxcclxuICBtYXg6IEluZmluaXRlTnVtYmVySU9cclxufTtcclxuZXhwb3J0IHR5cGUgUmFuZ2VTdGF0ZU9iamVjdCA9IFN0YXRlT2JqZWN0PHR5cGVvZiBTVEFURV9TQ0hFTUE+O1xyXG5cclxuY2xhc3MgUmFuZ2UgaW1wbGVtZW50cyBUUmFuZ2Uge1xyXG5cclxuICAvLyB0aGUgbWluaW11bSB2YWx1ZSBvZiB0aGUgcmFuZ2VcclxuICBwcml2YXRlIF9taW46IG51bWJlcjtcclxuXHJcbiAgLy8gdGhlIG1heGltdW0gdmFsdWUgb2YgdGhlIHJhbmdlXHJcbiAgcHJpdmF0ZSBfbWF4OiBudW1iZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBtaW4gLSB0aGUgbWluaW11bSB2YWx1ZSBvZiB0aGUgcmFuZ2VcclxuICAgKiBAcGFyYW0gbWF4IC0gdGhlIG1heGltdW0gdmFsdWUgb2YgdGhlIHJhbmdlXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLl9taW4gPSBtaW47XHJcbiAgICB0aGlzLl9tYXggPSBtYXg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgZm9yIG1pblxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRNaW4oKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9taW47XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IG1pbigpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0TWluKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IG1pbiggbWluOiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLnNldE1pbiggbWluICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUT0RPOiBBbGxvdyBjaGFpbmluZywgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2RvdC9pc3N1ZXMvMTIyXHJcbiAgICogU2V0dGVyIGZvciBtaW5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0TWluKCBtaW46IG51bWJlciApOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1pbiA8PSB0aGlzLl9tYXgsIGBtaW4gbXVzdCBiZSA8PSBtYXg6ICR7bWlufWAgKTtcclxuICAgIHRoaXMuX21pbiA9IG1pbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBmb3IgbWF4XHJcbiAgICovXHJcbiAgcHVibGljIGdldE1heCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX21heDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgbWF4KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRNYXgoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgbWF4KCBtYXg6IG51bWJlciApIHtcclxuICAgIHRoaXMuc2V0TWF4KCBtYXggKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBmb3IgbWF4XHJcbiAgICovXHJcbiAgcHVibGljIHNldE1heCggbWF4OiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLl9taW4gPD0gbWF4LCBgbWF4IG11c3QgYmUgPj0gdG8gbWluOiAke21heH1gICk7XHJcbiAgICB0aGlzLl9tYXggPSBtYXg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIHZhbHVlIG9mIHRoZSByYW5nZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRNaW5NYXgoIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciApOiB0aGlzIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1pbiA8PSBtYXgsIGBtYXggbXVzdCBiZSA+PSB0byBtaW4uIG1pbjogJHttaW59LCBtYXg6ICR7bWF4fWAgKTtcclxuICAgIHRoaXMuX21pbiA9IG1pbjtcclxuICAgIHRoaXMuX21heCA9IG1heDtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUgb2YgdGhpcyByYW5nZSBmcm9tIHRoZSBwcm92aWRlZCBSYW5nZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0KCByYW5nZTogUmFuZ2UgKTogdGhpcyB7XHJcbiAgICB0aGlzLnNldE1pbk1heCggcmFuZ2UubWluLCByYW5nZS5tYXggKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZFZhbHVlKCBuOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICB0aGlzLl9taW4gPSBNYXRoLm1pbiggdGhpcy5fbWluLCBuICk7XHJcbiAgICB0aGlzLl9tYXggPSBNYXRoLm1heCggdGhpcy5fbWF4LCBuICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgd2l0aFZhbHVlKCBuOiBudW1iZXIgKTogUmFuZ2Uge1xyXG4gICAgcmV0dXJuIG5ldyBSYW5nZSggTWF0aC5taW4oIHRoaXMuX21pbiwgbiApLCBNYXRoLm1heCggdGhpcy5fbWF4LCBuICkgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1odG1sLWNvbnN0cnVjdG9yc1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYSBjb3B5IG9mIHRoaXMgcmFuZ2VcclxuICAgKi9cclxuICBwdWJsaWMgY29weSgpOiBSYW5nZSB7XHJcbiAgICByZXR1cm4gbmV3IFJhbmdlKCB0aGlzLl9taW4sIHRoaXMuX21heCApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWh0bWwtY29uc3RydWN0b3JzXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBsZW5ndGggb2YgdGhpcyByYW5nZSwgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBtYXhpbXVtIGFuZCBtaW5pbXVtIHZhbHVlIG9mIHRoaXMgcmFuZ2VcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0TGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4IC0gdGhpcy5fbWluO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgY2VudGVyIG9mIHRoaXMgcmFuZ2UsIHRoYXQgaXMgdGhlIGF2ZXJhZ2UgdmFsdWUgb2YgdGhlIG1heGltdW0gYW5kIG1pbmltdW0gdmFsdWUgb2YgdGhpcyByYW5nZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDZW50ZXIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAoIHRoaXMuX21heCArIHRoaXMuX21pbiApIC8gMjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgdGhpcyByYW5nZSBjb250YWlucyB0aGUgdmFsdWVcclxuICAgKi9cclxuICBwdWJsaWMgY29udGFpbnMoIHZhbHVlOiBudW1iZXIgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKCB2YWx1ZSA+PSB0aGlzLl9taW4gKSAmJiAoIHZhbHVlIDw9IHRoaXMuX21heCApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRG9lcyB0aGlzIHJhbmdlIGNvbnRhaW4gdGhlIHNwZWNpZmllZCByYW5nZT9cclxuICAgKi9cclxuICBwdWJsaWMgY29udGFpbnNSYW5nZSggcmFuZ2U6IFJhbmdlICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICggdGhpcy5fbWluIDw9IHJhbmdlLm1pbiApICYmICggdGhpcy5fbWF4ID49IHJhbmdlLm1heCApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lIGlmIHRoaXMgcmFuZ2Ugb3ZlcmxhcHMgKGludGVyc2VjdHMpIHdpdGggYW5vdGhlciByYW5nZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbnRlcnNlY3RzKCByYW5nZTogUmFuZ2UgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKCB0aGlzLl9tYXggPj0gcmFuZ2UubWluICkgJiYgKCByYW5nZS5tYXggPj0gdGhpcy5fbWluICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEbyB0aGUgdHdvIHJhbmdlcyBvdmVybGFwIHdpdGggb25lIGFub3RoZXI/ICBOb3RlIHRoYXQgdGhpcyBhc3N1bWVzIHRoYXRcclxuICAgKiBUaGlzIGlzIGEgb3BlbiBpbnRlcnZhbC5cclxuICAgKi9cclxuICBwdWJsaWMgaW50ZXJzZWN0c0V4Y2x1c2l2ZSggcmFuZ2U6IFJhbmdlICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICggdGhpcy5fbWF4ID4gcmFuZ2UubWluICkgJiYgKCByYW5nZS5tYXggPiB0aGlzLl9taW4gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogUkVWSUVXOiBUaGUgbmFtaW5nIGlzIG5vdCBoZWxwaW5nIG1lIHVuZGVyc3RhbmQgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIGp1c3QgdGhlIGltbXV0YWJsZSB2ZXJzaW9uIG9mIGluY2x1ZGVSYW5nZSgpLlxyXG4gICAqXHJcbiAgICogVGhlIHNtYWxsZXN0IHJhbmdlIHRoYXQgY29udGFpbnMgYm90aCB0aGlzIHJhbmdlIGFuZCB0aGUgaW5wdXQgcmFuZ2UsIHJldHVybmVkIGFzIGEgY29weS5cclxuICAgKlxyXG4gICAqIFRoZSBtZXRob2QgYmVsb3cgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBpbmNsdWRlUmFuZ2UoKS4gVGhlIG1ldGhvZCB3aWxsIHJldHVybiBhIG5ldyByYW5nZSwgYW5kIHdpbGwgbm90IG1vZGlmeVxyXG4gICAqIHRoaXMgcmFuZ2UuXHJcbiAgICovXHJcbiAgcHVibGljIHVuaW9uKCByYW5nZTogUmFuZ2UgKTogUmFuZ2Uge1xyXG4gICAgcmV0dXJuIG5ldyBSYW5nZSggLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1odG1sLWNvbnN0cnVjdG9yc1xyXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW4sIHJhbmdlLm1pbiApLFxyXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXgsIHJhbmdlLm1heCApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUkVWSUVXOiBUaGUgbmFtaW5nIGlzIG5vdCBoZWxwaW5nIG1lIHVuZGVyc3RhbmQgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIGp1c3QgdGhlIGltbXV0YWJsZSB2ZXJzaW9uIG9mIGNvbnN0cmFpblJhbmdlKCkuXHJcbiAgICpcclxuICAgKiBUaGUgc21hbGxlc3QgcmFuZ2UgdGhhdCBpcyBjb250YWluZWQgYnkgYm90aCB0aGlzIHJhbmdlIGFuZCB0aGUgaW5wdXQgcmFuZ2UsIHJldHVybmVkIGFzIGEgY29weS5cclxuICAgKlxyXG4gICAqIFRoZSBtZXRob2QgYmVsb3cgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBjb25zdHJhaW5SYW5nZSgpLiBUaGUgbWV0aG9kIGJlbG93IHdpbGwgcmV0dXJuIGEgbmV3IHJhbmdlLCBhbmQgd2lsbCBub3QgbW9kaWZ5XHJcbiAgICogdGhpcyByYW5nZS5cclxuICAgKi9cclxuICBwdWJsaWMgaW50ZXJzZWN0aW9uKCByYW5nZTogUmFuZ2UgKTogUmFuZ2Uge1xyXG4gICAgcmV0dXJuIG5ldyBSYW5nZSggLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1odG1sLWNvbnN0cnVjdG9yc1xyXG4gICAgICBNYXRoLm1heCggdGhpcy5taW4sIHJhbmdlLm1pbiApLFxyXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXgsIHJhbmdlLm1heCApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTW9kaWZpZXMgdGhpcyByYW5nZSBzbyB0aGF0IGl0IGNvbnRhaW5zIGJvdGggaXRzIG9yaWdpbmFsIHJhbmdlIGFuZCB0aGUgaW5wdXQgcmFuZ2UuXHJcbiAgICpcclxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHVuaW9uKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyByYW5nZSwgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXHJcbiAgICogdGhpcyByYW5nZSBpdHNlbGYuXHJcbiAgICovXHJcbiAgcHVibGljIGluY2x1ZGVSYW5nZSggcmFuZ2U6IFJhbmdlICk6IFJhbmdlIHtcclxuICAgIHJldHVybiB0aGlzLnNldE1pbk1heChcclxuICAgICAgTWF0aC5taW4oIHRoaXMubWluLCByYW5nZS5taW4gKSxcclxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4LCByYW5nZS5tYXggKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1vZGlmaWVzIHRoaXMgcmFuZ2Ugc28gdGhhdCBpdCBpcyB0aGUgbGFyZ2VzdCByYW5nZSBjb250YWluZWQgYm90aCBpbiBpdHMgb3JpZ2luYWwgcmFuZ2UgYW5kIGluIHRoZSBpbnB1dCByYW5nZS5cclxuICAgKlxyXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyByYW5nZSwgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXHJcbiAgICogdGhpcyByYW5nZSBpdHNlbGYuXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cmFpblJhbmdlKCByYW5nZTogUmFuZ2UgKTogUmFuZ2Uge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxyXG4gICAgICBNYXRoLm1heCggdGhpcy5taW4sIHJhbmdlLm1pbiApLFxyXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXgsIHJhbmdlLm1heCApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUkVWSUVXOiBkbyB3ZSBhbHNvIG5lZWQgYSBtdXRhYmxlIGZvcm0gb2Ygc2hpZnRlZD9cclxuICAgKlxyXG4gICAqIFJldHVybnMgYSBuZXcgcmFuZ2UgdGhhdCBpcyB0aGUgc2FtZSBhcyB0aGlzIHJhbmdlLCBidXQgc2hpZnRlZCBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cclxuICAgKi9cclxuICBwdWJsaWMgc2hpZnRlZCggbjogbnVtYmVyICk6IFJhbmdlIHtcclxuICAgIHJldHVybiBuZXcgUmFuZ2UoIHRoaXMubWluICsgbiwgdGhpcy5tYXggKyBuICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taHRtbC1jb25zdHJ1Y3RvcnNcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIHRoZSBhdHRyaWJ1dGVzIG9mIHRoaXMgcmFuZ2UgdG8gYSBzdHJpbmdcclxuICAgKi9cclxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgW1JhbmdlIChtaW46JHt0aGlzLl9taW59IG1heDoke3RoaXMuX21heH0pXWA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJhaW5zIGEgdmFsdWUgdG8gdGhlIHJhbmdlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJhaW5WYWx1ZSggdmFsdWU6IG51bWJlciApOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGgubWluKCBNYXRoLm1heCggdmFsdWUsIHRoaXMuX21pbiApLCB0aGlzLl9tYXggKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE11bHRpcGx5IHRoZSBtaW4gYW5kIG1heCBieSB0aGUgcHJvdmlkZWQgdmFsdWVcclxuICAgKi9cclxuICBwdWJsaWMgdGltZXMoIHZhbHVlOiBudW1iZXIgKTogdGhpcyB7XHJcbiAgICB0aGlzLnNldE1pbk1heCggdGhpcy5fbWluICogdmFsdWUsIHRoaXMuX21heCAqIHZhbHVlICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgdGhpcyBSYW5nZSBpcyBlcXVhbCB0byBzb21lIG9iamVjdC5cclxuICAgKi9cclxuICBwdWJsaWMgZXF1YWxzKCBvYmplY3Q6IEludGVudGlvbmFsQW55ICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICggdGhpcy5jb25zdHJ1Y3RvciA9PT0gb2JqZWN0LmNvbnN0cnVjdG9yICkgJiZcclxuICAgICAgICAgICAoIHRoaXMuX21pbiA9PT0gb2JqZWN0Lm1pbiApICYmXHJcbiAgICAgICAgICAgKCB0aGlzLl9tYXggPT09IG9iamVjdC5tYXggKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgaWYgdGhpcyBSYW5nZSBpcyBhcHByb3hpbWF0ZWx5IGVxdWFsIHRvIHNvbWUgb2JqZWN0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBlcXVhbHNFcHNpbG9uKCBvYmplY3Q6IEludGVudGlvbmFsQW55LCBlcHNpbG9uOiBudW1iZXIgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKCB0aGlzLmNvbnN0cnVjdG9yID09PSBvYmplY3QuY29uc3RydWN0b3IgKSAmJlxyXG4gICAgICAgICAgICggTWF0aC5hYnMoIHRoaXMuX21pbiAtIG9iamVjdC5taW4gKSA8PSBlcHNpbG9uICkgJiZcclxuICAgICAgICAgICAoIE1hdGguYWJzKCB0aGlzLl9tYXggLSBvYmplY3QubWF4ICkgPD0gZXBzaWxvbiApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2l2ZW4gYSB2YWx1ZSwgbm9ybWFsaXplIGl0IHRvIHRoaXMgUmFuZ2UncyBsZW5ndGgsIHJldHVybmluZyBhIHZhbHVlIGJldHdlZW4gMCBhbmQgMSBmb3IgdmFsdWVzIGNvbnRhaW5lZCBpblxyXG4gICAqIHRoZSBSYW5nZS4gSWYgdGhlIHZhbHVlIGlzIG5vdCBjb250YWluZWQgaW4gUmFuZ2UsIHRoZW4gdGhlIHJldHVybiB2YWx1ZSB3aWxsIG5vdCBiZSBiZXR3ZWVuIDAgYW5kIDEuXHJcbiAgICovXHJcbiAgcHVibGljIGdldE5vcm1hbGl6ZWRWYWx1ZSggdmFsdWU6IG51bWJlciApOiBudW1iZXIge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5nZXRMZW5ndGgoKSAhPT0gMCwgJ2Nhbm5vdCBnZXQgbm9ybWFsaXplZCB2YWx1ZSB3aXRob3V0IGEgcmFuZ2UgbGVuZ3RoJyApO1xyXG4gICAgcmV0dXJuICggdmFsdWUgLSB0aGlzLm1pbiApIC8gdGhpcy5nZXRMZW5ndGgoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXB1dGUgdGhlIG9wcG9zaXRlIG9mIGEgbm9ybWFsaXplZCB2YWx1ZS4gR2l2ZW4gYSBub3JtYWxpemVkIHZhbHVlIChiZXR3ZWVuIDAgYW5kIDEpLiBXb3JrZWQgd2l0aCBhbnkgbnVtYmVyXHJcbiAgICogdGhvdWdoLCAoZXZlbiBvdXRzaWRlIG9mIHRoZSByYW5nZSkuIEl0IGlzIHRoZSBjbGllbnQncyByZXNwb25zaWJpbGl0eSB0byBjbGFtcCBpZiB0aGF0IGlzIGltcG9ydGFudCB0byB0aGVcclxuICAgKiB1c2FnZS5cclxuICAgKi9cclxuICBwdWJsaWMgZXhwYW5kTm9ybWFsaXplZFZhbHVlKCBub3JtYWxpemVkVmFsdWU6IG51bWJlciApOiBudW1iZXIge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5nZXRMZW5ndGgoKSAhPT0gMCwgJ2Nhbm5vdCBnZXQgZXhwYW5kIG5vcm1hbGl6ZWQgdmFsdWUgd2l0aG91dCBhIHJhbmdlIGxlbmd0aCcgKTtcclxuICAgIHJldHVybiBub3JtYWxpemVkVmFsdWUgKiB0aGlzLmdldExlbmd0aCgpICsgdGhpcy5taW47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZG90L2lzc3Vlcy81NywgZGVmYXVsdFZhbHVlIHdhcyBtb3ZlZCB0byBSYW5nZVdpdGhWYWx1ZS5cclxuICAgKiBUaGlzIEVTNSBnZXR0ZXIgY2F0Y2hlcyBwcm9ncmFtbWluZyBlcnJvcnMgd2hlcmUgZGVmYXVsdFZhbHVlIGlzIHN0aWxsIHVzZWQgd2l0aCBSYW5nZS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0IGRlZmF1bHRWYWx1ZSgpOiBudW1iZXIge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCAnZGVmYXVsdFZhbHVlIGlzIHVuZGVmaW5lZCwgZGlkIHlvdSBtZWFuIHRvIHVzZSBSYW5nZVdpdGhWYWx1ZT8nICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdG9TdGF0ZU9iamVjdCgpOiBSYW5nZVN0YXRlT2JqZWN0IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1pbjogSW5maW5pdGVOdW1iZXJJTy50b1N0YXRlT2JqZWN0KCB0aGlzLm1pbiApLFxyXG4gICAgICBtYXg6IEluZmluaXRlTnVtYmVySU8udG9TdGF0ZU9iamVjdCggdGhpcy5tYXggKVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIEdpdmVuIGEgdmFsdWUgYW5kIGEgZGVsdGEgdG8gY2hhbmdlIHRoYXQgdmFsdWUsIGNsYW1wIHRoZSBkZWx0YSB0byBtYWtlIHN1cmUgdGhlIHZhbHVlIHN0YXlzIHdpdGhpbiByYW5nZS5cclxuICBwdWJsaWMgY2xhbXBEZWx0YSggdmFsdWU6IG51bWJlciwgZGVsdGE6IG51bWJlciApOiBudW1iZXIge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5jb250YWlucyggdmFsdWUgKSApO1xyXG4gICAgcmV0dXJuIHZhbHVlICsgZGVsdGEgPCB0aGlzLm1pbiA/IHRoaXMubWluIC0gdmFsdWUgOlxyXG4gICAgICAgICAgIHZhbHVlICsgZGVsdGEgPiB0aGlzLm1heCA/IHRoaXMubWF4IC0gdmFsdWUgOlxyXG4gICAgICAgICAgIGRlbHRhO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBmcm9tU3RhdGVPYmplY3QoIHN0YXRlT2JqZWN0OiBSYW5nZVN0YXRlT2JqZWN0ICk6IFJhbmdlIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1odG1sLWNvbnN0cnVjdG9yc1xyXG4gICAgcmV0dXJuIG5ldyBSYW5nZShcclxuICAgICAgSW5maW5pdGVOdW1iZXJJTy5mcm9tU3RhdGVPYmplY3QoIHN0YXRlT2JqZWN0Lm1pbiApLFxyXG4gICAgICBJbmZpbml0ZU51bWJlcklPLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QubWF4IClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIFJhbmdlSU8gPSBuZXcgSU9UeXBlPFJhbmdlLCBSYW5nZVN0YXRlT2JqZWN0PiggJ1JhbmdlSU8nLCB7XHJcbiAgICB2YWx1ZVR5cGU6IFJhbmdlLFxyXG4gICAgZG9jdW1lbnRhdGlvbjogJ0EgcmFuZ2Ugd2l0aCBcIm1pblwiIGFuZCBcIm1heFwiIG1lbWJlcnMuJyxcclxuICAgIHN0YXRlU2NoZW1hOiBTVEFURV9TQ0hFTUEsXHJcbiAgICB0b1N0YXRlT2JqZWN0OiAoIHJhbmdlOiBSYW5nZSApID0+IHJhbmdlLnRvU3RhdGVPYmplY3QoKSxcclxuICAgIGZyb21TdGF0ZU9iamVjdDogKCBzdGF0ZU9iamVjdDogUmFuZ2VTdGF0ZU9iamVjdCApID0+IFJhbmdlLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QgKVxyXG4gIH0gKTtcclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBFVkVSWVRISU5HID0gbmV3IFJhbmdlKCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWh0bWwtY29uc3RydWN0b3JzXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBOT1RISU5HID0gbmV3IFJhbmdlKCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWh0bWwtY29uc3RydWN0b3JzXHJcbn1cclxuXHJcbmRvdC5yZWdpc3RlciggJ1JhbmdlJywgUmFuZ2UgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJhbmdlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FBT0EsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxnQkFBZ0IsTUFBTSwyQ0FBMkM7QUFDeEUsT0FBT0MsR0FBRyxNQUFNLFVBQVU7QUFRMUIsTUFBTUMsWUFBWSxHQUFHO0VBQ25CQyxHQUFHLEVBQUVILGdCQUFnQjtFQUNyQkksR0FBRyxFQUFFSjtBQUNQLENBQUM7QUFHRCxNQUFNSyxLQUFLLENBQW1CO0VBRTVCOztFQUdBOztFQUdBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1NDLFdBQVdBLENBQUVILEdBQVcsRUFBRUMsR0FBVyxFQUFHO0lBQzdDLElBQUksQ0FBQ0csSUFBSSxHQUFHSixHQUFHO0lBQ2YsSUFBSSxDQUFDSyxJQUFJLEdBQUdKLEdBQUc7RUFDakI7O0VBRUE7QUFDRjtBQUNBO0VBQ1NLLE1BQU1BLENBQUEsRUFBVztJQUN0QixPQUFPLElBQUksQ0FBQ0YsSUFBSTtFQUNsQjtFQUVBLElBQVdK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